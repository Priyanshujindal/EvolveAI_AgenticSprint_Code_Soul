var gC=Object.defineProperty;var yC=(t,e,n)=>e in t?gC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>yC(t,typeof e!="symbol"?e+"":e,n);function vC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function _C(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cb={exports:{}},Gd={},ub={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic=Symbol.for("react.element"),xC=Symbol.for("react.portal"),wC=Symbol.for("react.fragment"),bC=Symbol.for("react.strict_mode"),kC=Symbol.for("react.profiler"),EC=Symbol.for("react.provider"),TC=Symbol.for("react.context"),IC=Symbol.for("react.forward_ref"),SC=Symbol.for("react.suspense"),CC=Symbol.for("react.memo"),AC=Symbol.for("react.lazy"),Xy=Symbol.iterator;function PC(t){return t===null||typeof t!="object"?null:(t=Xy&&t[Xy]||t["@@iterator"],typeof t=="function"?t:null)}var db={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hb=Object.assign,fb={};function Xo(t,e,n){this.props=t,this.context=e,this.refs=fb,this.updater=n||db}Xo.prototype.isReactComponent={};Xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pb(){}pb.prototype=Xo.prototype;function $m(t,e,n){this.props=t,this.context=e,this.refs=fb,this.updater=n||db}var Hm=$m.prototype=new pb;Hm.constructor=$m;hb(Hm,Xo.prototype);Hm.isPureReactComponent=!0;var Jy=Array.isArray,mb=Object.prototype.hasOwnProperty,Wm={current:null},gb={key:!0,ref:!0,__self:!0,__source:!0};function yb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)mb.call(e,r)&&!gb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ic,type:t,key:i,ref:o,props:s,_owner:Wm.current}}function RC(t,e){return{$$typeof:ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ic}function NC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zy=/\/+/g;function sf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NC(""+t.key):e.toString(36)}function ku(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ic:case xC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+sf(o,0):r,Jy(s)?(n="",t!=null&&(n=t.replace(Zy,"$&/")+"/"),ku(s,e,n,"",function(c){return c})):s!=null&&(qm(s)&&(s=RC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Jy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+sf(i,a);o+=ku(i,e,n,l,s)}else if(l=PC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+sf(i,a++),o+=ku(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vc(t,e,n){if(t==null)return t;var r=[],s=0;return ku(t,r,"","",function(i){return e.call(n,i,s++)}),r}function DC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Eu={transition:null},MC={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Eu,ReactCurrentOwner:Wm};function vb(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:Vc,forEach:function(t,e,n){Vc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vc(t,function(){e++}),e},toArray:function(t){return Vc(t,function(e){return e})||[]},only:function(t){if(!qm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Xo;ge.Fragment=wC;ge.Profiler=kC;ge.PureComponent=$m;ge.StrictMode=bC;ge.Suspense=SC;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MC;ge.act=vb;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Wm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)mb.call(e,l)&&!gb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ic,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:TC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EC,_context:t},t.Consumer=t};ge.createElement=yb;ge.createFactory=function(t){var e=yb.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:IC,render:t}};ge.isValidElement=qm;ge.lazy=function(t){return{$$typeof:AC,_payload:{_status:-1,_result:t},_init:DC}};ge.memo=function(t,e){return{$$typeof:CC,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Eu.transition;Eu.transition={};try{t()}finally{Eu.transition=e}};ge.unstable_act=vb;ge.useCallback=function(t,e){return Jt.current.useCallback(t,e)};ge.useContext=function(t){return Jt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Jt.current.useEffect(t,e)};ge.useId=function(){return Jt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Jt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};ge.useRef=function(t){return Jt.current.useRef(t)};ge.useState=function(t){return Jt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Jt.current.useTransition()};ge.version="18.3.1";ub.exports=ge;var D=ub.exports;const Qd=_C(D),OC=vC({__proto__:null,default:Qd},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LC=D,jC=Symbol.for("react.element"),VC=Symbol.for("react.fragment"),FC=Object.prototype.hasOwnProperty,UC=LC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BC={key:!0,ref:!0,__self:!0,__source:!0};function _b(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)FC.call(e,r)&&!BC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jC,type:t,key:i,ref:o,props:s,_owner:UC.current}}Gd.Fragment=VC;Gd.jsx=_b;Gd.jsxs=_b;cb.exports=Gd;var h=cb.exports,xb={exports:{}},Cn={},wb={exports:{}},bb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,K){var W=U.length;U.push(K);e:for(;0<W;){var ue=W-1>>>1,oe=U[ue];if(0<s(oe,K))U[ue]=K,U[W]=oe,W=ue;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var K=U[0],W=U.pop();if(W!==K){U[0]=W;e:for(var ue=0,oe=U.length,j=oe>>>1;ue<j;){var Z=2*(ue+1)-1,re=U[Z],xe=Z+1,st=U[xe];if(0>s(re,W))xe<oe&&0>s(st,re)?(U[ue]=st,U[xe]=W,ue=xe):(U[ue]=re,U[Z]=W,ue=Z);else if(xe<oe&&0>s(st,W))U[ue]=st,U[xe]=W,ue=xe;else break e}}return K}function s(U,K){var W=U.sortIndex-K.sortIndex;return W!==0?W:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,m=3,y=!1,w=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=U)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function A(U){if(k=!1,b(U),!w)if(n(l)!==null)w=!0,B(N);else{var K=n(c);K!==null&&se(A,K.startTime-U)}}function N(U,K){w=!1,k&&(k=!1,v(x),x=-1),y=!0;var W=m;try{for(b(K),f=n(l);f!==null&&(!(f.expirationTime>K)||U&&!R());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,m=f.priorityLevel;var oe=ue(f.expirationTime<=K);K=t.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(l)&&r(l),b(K)}else r(l);f=n(l)}if(f!==null)var j=!0;else{var Z=n(c);Z!==null&&se(A,Z.startTime-K),j=!1}return j}finally{f=null,m=W,y=!1}}var M=!1,T=null,x=-1,I=5,C=-1;function R(){return!(t.unstable_now()-C<I)}function O(){if(T!==null){var U=t.unstable_now();C=U;var K=!0;try{K=T(!0,U)}finally{K?P():(M=!1,T=null)}}else M=!1}var P;if(typeof _=="function")P=function(){_(O)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Q=J.port2;J.port1.onmessage=O,P=function(){Q.postMessage(null)}}else P=function(){E(O,0)};function B(U){T=U,M||(M=!0,P())}function se(U,K){x=E(function(){U(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,B(N))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var K=3;break;default:K=m}var W=m;m=K;try{return U()}finally{m=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var W=m;m=U;try{return K()}finally{m=W}},t.unstable_scheduleCallback=function(U,K,W){var ue=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ue+W:ue):W=ue,U){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=W+oe,U={id:d++,callback:K,priorityLevel:U,startTime:W,expirationTime:oe,sortIndex:-1},W>ue?(U.sortIndex=W,e(c,U),n(l)===null&&U===n(c)&&(k?(v(x),x=-1):k=!0,se(A,W-ue))):(U.sortIndex=oe,e(l,U),w||y||(w=!0,B(N))),U},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(U){var K=m;return function(){var W=m;m=K;try{return U.apply(this,arguments)}finally{m=W}}}})(bb);wb.exports=bb;var zC=wb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C=D,Sn=zC;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kb=new Set,kl={};function Ui(t,e){No(t,e),No(t+"Capture",e)}function No(t,e){for(kl[t]=e,t=0;t<e.length;t++)kb.add(e[t])}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),op=Object.prototype.hasOwnProperty,HC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ev={},tv={};function WC(t){return op.call(tv,t)?!0:op.call(ev,t)?!1:HC.test(t)?tv[t]=!0:(ev[t]=!0,!1)}function qC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function KC(t,e,n,r){if(e===null||typeof e>"u"||qC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Km=/[\-:]([a-z])/g;function Gm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Km,Gm);At[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Km,Gm);At[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Km,Gm);At[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qm(t,e,n,r){var s=At.hasOwnProperty(e)?At[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(KC(e,n,s,r)&&(n=null),r||s===null?WC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yr=$C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fc=Symbol.for("react.element"),io=Symbol.for("react.portal"),oo=Symbol.for("react.fragment"),Ym=Symbol.for("react.strict_mode"),ap=Symbol.for("react.profiler"),Eb=Symbol.for("react.provider"),Tb=Symbol.for("react.context"),Xm=Symbol.for("react.forward_ref"),lp=Symbol.for("react.suspense"),cp=Symbol.for("react.suspense_list"),Jm=Symbol.for("react.memo"),ls=Symbol.for("react.lazy"),Ib=Symbol.for("react.offscreen"),nv=Symbol.iterator;function Ea(t){return t===null||typeof t!="object"?null:(t=nv&&t[nv]||t["@@iterator"],typeof t=="function"?t:null)}var We=Object.assign,of;function Fa(t){if(of===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);of=e&&e[1]||""}return`
`+of+t}var af=!1;function lf(t,e){if(!t||af)return"";af=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{af=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fa(t):""}function GC(t){switch(t.tag){case 5:return Fa(t.type);case 16:return Fa("Lazy");case 13:return Fa("Suspense");case 19:return Fa("SuspenseList");case 0:case 2:case 15:return t=lf(t.type,!1),t;case 11:return t=lf(t.type.render,!1),t;case 1:return t=lf(t.type,!0),t;default:return""}}function up(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oo:return"Fragment";case io:return"Portal";case ap:return"Profiler";case Ym:return"StrictMode";case lp:return"Suspense";case cp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tb:return(t.displayName||"Context")+".Consumer";case Eb:return(t._context.displayName||"Context")+".Provider";case Xm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jm:return e=t.displayName||null,e!==null?e:up(t.type)||"Memo";case ls:e=t._payload,t=t._init;try{return up(t(e))}catch{}}return null}function QC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return up(e);case 8:return e===Ym?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YC(t){var e=Sb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uc(t){t._valueTracker||(t._valueTracker=YC(t))}function Cb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dp(t,e){var n=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ab(t,e){e=e.checked,e!=null&&Qm(t,"checked",e,!1)}function hp(t,e){Ab(t,e);var n=Ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fp(t,e.type,n):e.hasOwnProperty("defaultValue")&&fp(t,e.type,Ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fp(t,e,n){(e!=="number"||Gu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ua=Array.isArray;function _o(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ls(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function pp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function iv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Ua(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ls(n)}}function Pb(t,e){var n=Ls(e.value),r=Ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ov(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bc,Nb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bc=Bc||document.createElement("div"),Bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function El(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XC=["Webkit","ms","Moz","O"];Object.keys(Za).forEach(function(t){XC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Za[e]=Za[t]})});function Db(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Za.hasOwnProperty(t)&&Za[t]?(""+e).trim():e+"px"}function Mb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Db(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JC=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gp(t,e){if(e){if(JC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vp=null;function Zm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _p=null,xo=null,wo=null;function av(t){if(t=lc(t)){if(typeof _p!="function")throw Error($(280));var e=t.stateNode;e&&(e=eh(e),_p(t.stateNode,t.type,e))}}function Ob(t){xo?wo?wo.push(t):wo=[t]:xo=t}function Lb(){if(xo){var t=xo,e=wo;if(wo=xo=null,av(t),e)for(t=0;t<e.length;t++)av(e[t])}}function jb(t,e){return t(e)}function Vb(){}var cf=!1;function Fb(t,e,n){if(cf)return t(e,n);cf=!0;try{return jb(t,e,n)}finally{cf=!1,(xo!==null||wo!==null)&&(Vb(),Lb())}}function Tl(t,e){var n=t.stateNode;if(n===null)return null;var r=eh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var xp=!1;if(zr)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){xp=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{xp=!1}function ZC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var el=!1,Qu=null,Yu=!1,wp=null,eA={onError:function(t){el=!0,Qu=t}};function tA(t,e,n,r,s,i,o,a,l){el=!1,Qu=null,ZC.apply(eA,arguments)}function nA(t,e,n,r,s,i,o,a,l){if(tA.apply(this,arguments),el){if(el){var c=Qu;el=!1,Qu=null}else throw Error($(198));Yu||(Yu=!0,wp=c)}}function Bi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ub(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lv(t){if(Bi(t)!==t)throw Error($(188))}function rA(t){var e=t.alternate;if(!e){if(e=Bi(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lv(s),t;if(i===r)return lv(s),e;i=i.sibling}throw Error($(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error($(189))}}if(n.alternate!==r)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function Bb(t){return t=rA(t),t!==null?zb(t):null}function zb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zb(t);if(e!==null)return e;t=t.sibling}return null}var $b=Sn.unstable_scheduleCallback,cv=Sn.unstable_cancelCallback,sA=Sn.unstable_shouldYield,iA=Sn.unstable_requestPaint,nt=Sn.unstable_now,oA=Sn.unstable_getCurrentPriorityLevel,eg=Sn.unstable_ImmediatePriority,Hb=Sn.unstable_UserBlockingPriority,Xu=Sn.unstable_NormalPriority,aA=Sn.unstable_LowPriority,Wb=Sn.unstable_IdlePriority,Yd=null,yr=null;function lA(t){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(Yd,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:dA,cA=Math.log,uA=Math.LN2;function dA(t){return t>>>=0,t===0?32:31-(cA(t)/uA|0)|0}var zc=64,$c=4194304;function Ba(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ju(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ba(a):(i&=o,i!==0&&(r=Ba(i)))}else o=n&~s,o!==0?r=Ba(o):i!==0&&(r=Ba(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),s=1<<n,r|=t[n],e&=~s;return r}function hA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=hA(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function bp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qb(){var t=zc;return zc<<=1,!(zc&4194240)&&(zc=64),t}function uf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function pA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function tg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Pe=0;function Kb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gb,ng,Qb,Yb,Xb,kp=!1,Hc=[],ks=null,Es=null,Ts=null,Il=new Map,Sl=new Map,us=[],mA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uv(t,e){switch(t){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(e.pointerId)}}function Ia(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=lc(e),e!==null&&ng(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function gA(t,e,n,r,s){switch(e){case"focusin":return ks=Ia(ks,t,e,n,r,s),!0;case"dragenter":return Es=Ia(Es,t,e,n,r,s),!0;case"mouseover":return Ts=Ia(Ts,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Il.set(i,Ia(Il.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Sl.set(i,Ia(Sl.get(i)||null,t,e,n,r,s)),!0}return!1}function Jb(t){var e=hi(t.target);if(e!==null){var n=Bi(e);if(n!==null){if(e=n.tag,e===13){if(e=Ub(n),e!==null){t.blockedOn=e,Xb(t.priority,function(){Qb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ep(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vp=r,n.target.dispatchEvent(r),vp=null}else return e=lc(n),e!==null&&ng(e),t.blockedOn=n,!1;e.shift()}return!0}function dv(t,e,n){Tu(t)&&n.delete(e)}function yA(){kp=!1,ks!==null&&Tu(ks)&&(ks=null),Es!==null&&Tu(Es)&&(Es=null),Ts!==null&&Tu(Ts)&&(Ts=null),Il.forEach(dv),Sl.forEach(dv)}function Sa(t,e){t.blockedOn===e&&(t.blockedOn=null,kp||(kp=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,yA)))}function Cl(t){function e(s){return Sa(s,t)}if(0<Hc.length){Sa(Hc[0],t);for(var n=1;n<Hc.length;n++){var r=Hc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ks!==null&&Sa(ks,t),Es!==null&&Sa(Es,t),Ts!==null&&Sa(Ts,t),Il.forEach(e),Sl.forEach(e),n=0;n<us.length;n++)r=us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<us.length&&(n=us[0],n.blockedOn===null);)Jb(n),n.blockedOn===null&&us.shift()}var bo=Yr.ReactCurrentBatchConfig,Zu=!0;function vA(t,e,n,r){var s=Pe,i=bo.transition;bo.transition=null;try{Pe=1,rg(t,e,n,r)}finally{Pe=s,bo.transition=i}}function _A(t,e,n,r){var s=Pe,i=bo.transition;bo.transition=null;try{Pe=4,rg(t,e,n,r)}finally{Pe=s,bo.transition=i}}function rg(t,e,n,r){if(Zu){var s=Ep(t,e,n,r);if(s===null)xf(t,e,r,ed,n),uv(t,r);else if(gA(s,t,e,n,r))r.stopPropagation();else if(uv(t,r),e&4&&-1<mA.indexOf(t)){for(;s!==null;){var i=lc(s);if(i!==null&&Gb(i),i=Ep(t,e,n,r),i===null&&xf(t,e,r,ed,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else xf(t,e,r,null,n)}}var ed=null;function Ep(t,e,n,r){if(ed=null,t=Zm(r),t=hi(t),t!==null)if(e=Bi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ub(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ed=t,null}function Zb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oA()){case eg:return 1;case Hb:return 4;case Xu:case aA:return 16;case Wb:return 536870912;default:return 16}default:return 16}}var gs=null,sg=null,Iu=null;function ek(){if(Iu)return Iu;var t,e=sg,n=e.length,r,s="value"in gs?gs.value:gs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Iu=s.slice(t,1<r?1-r:void 0)}function Su(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wc(){return!0}function hv(){return!1}function An(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wc:hv,this.isPropagationStopped=hv,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ig=An(Jo),ac=We({},Jo,{view:0,detail:0}),xA=An(ac),df,hf,Ca,Xd=We({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:og,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ca&&(Ca&&t.type==="mousemove"?(df=t.screenX-Ca.screenX,hf=t.screenY-Ca.screenY):hf=df=0,Ca=t),df)},movementY:function(t){return"movementY"in t?t.movementY:hf}}),fv=An(Xd),wA=We({},Xd,{dataTransfer:0}),bA=An(wA),kA=We({},ac,{relatedTarget:0}),ff=An(kA),EA=We({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),TA=An(EA),IA=We({},Jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SA=An(IA),CA=We({},Jo,{data:0}),pv=An(CA),AA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RA[t])?!!e[t]:!1}function og(){return NA}var DA=We({},ac,{key:function(t){if(t.key){var e=AA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Su(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:og,charCode:function(t){return t.type==="keypress"?Su(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Su(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MA=An(DA),OA=We({},Xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mv=An(OA),LA=We({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:og}),jA=An(LA),VA=We({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),FA=An(VA),UA=We({},Xd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BA=An(UA),zA=[9,13,27,32],ag=zr&&"CompositionEvent"in window,tl=null;zr&&"documentMode"in document&&(tl=document.documentMode);var $A=zr&&"TextEvent"in window&&!tl,tk=zr&&(!ag||tl&&8<tl&&11>=tl),gv=" ",yv=!1;function nk(t,e){switch(t){case"keyup":return zA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ao=!1;function HA(t,e){switch(t){case"compositionend":return rk(e);case"keypress":return e.which!==32?null:(yv=!0,gv);case"textInput":return t=e.data,t===gv&&yv?null:t;default:return null}}function WA(t,e){if(ao)return t==="compositionend"||!ag&&nk(t,e)?(t=ek(),Iu=sg=gs=null,ao=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tk&&e.locale!=="ko"?null:e.data;default:return null}}var qA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qA[t.type]:e==="textarea"}function sk(t,e,n,r){Ob(r),e=td(e,"onChange"),0<e.length&&(n=new ig("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nl=null,Al=null;function KA(t){mk(t,0)}function Jd(t){var e=uo(t);if(Cb(e))return t}function GA(t,e){if(t==="change")return e}var ik=!1;if(zr){var pf;if(zr){var mf="oninput"in document;if(!mf){var _v=document.createElement("div");_v.setAttribute("oninput","return;"),mf=typeof _v.oninput=="function"}pf=mf}else pf=!1;ik=pf&&(!document.documentMode||9<document.documentMode)}function xv(){nl&&(nl.detachEvent("onpropertychange",ok),Al=nl=null)}function ok(t){if(t.propertyName==="value"&&Jd(Al)){var e=[];sk(e,Al,t,Zm(t)),Fb(KA,e)}}function QA(t,e,n){t==="focusin"?(xv(),nl=e,Al=n,nl.attachEvent("onpropertychange",ok)):t==="focusout"&&xv()}function YA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jd(Al)}function XA(t,e){if(t==="click")return Jd(e)}function JA(t,e){if(t==="input"||t==="change")return Jd(e)}function ZA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ir=typeof Object.is=="function"?Object.is:ZA;function Pl(t,e){if(ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!op.call(e,s)||!ir(t[s],e[s]))return!1}return!0}function wv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bv(t,e){var n=wv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wv(n)}}function ak(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ak(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lk(){for(var t=window,e=Gu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gu(t.document)}return e}function lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eP(t){var e=lk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ak(n.ownerDocument.documentElement,n)){if(r!==null&&lg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=bv(n,i);var o=bv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tP=zr&&"documentMode"in document&&11>=document.documentMode,lo=null,Tp=null,rl=null,Ip=!1;function kv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ip||lo==null||lo!==Gu(r)||(r=lo,"selectionStart"in r&&lg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rl&&Pl(rl,r)||(rl=r,r=td(Tp,"onSelect"),0<r.length&&(e=new ig("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lo)))}function qc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var co={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},gf={},ck={};zr&&(ck=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function Zd(t){if(gf[t])return gf[t];if(!co[t])return t;var e=co[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ck)return gf[t]=e[n];return t}var uk=Zd("animationend"),dk=Zd("animationiteration"),hk=Zd("animationstart"),fk=Zd("transitionend"),pk=new Map,Ev="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hs(t,e){pk.set(t,e),Ui(e,[t])}for(var yf=0;yf<Ev.length;yf++){var vf=Ev[yf],nP=vf.toLowerCase(),rP=vf[0].toUpperCase()+vf.slice(1);Hs(nP,"on"+rP)}Hs(uk,"onAnimationEnd");Hs(dk,"onAnimationIteration");Hs(hk,"onAnimationStart");Hs("dblclick","onDoubleClick");Hs("focusin","onFocus");Hs("focusout","onBlur");Hs(fk,"onTransitionEnd");No("onMouseEnter",["mouseout","mouseover"]);No("onMouseLeave",["mouseout","mouseover"]);No("onPointerEnter",["pointerout","pointerover"]);No("onPointerLeave",["pointerout","pointerover"]);Ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sP=new Set("cancel close invalid load scroll toggle".split(" ").concat(za));function Tv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nA(r,e,void 0,t),t.currentTarget=null}function mk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Tv(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Tv(s,a,c),i=l}}}if(Yu)throw t=wp,Yu=!1,wp=null,t}function je(t,e){var n=e[Rp];n===void 0&&(n=e[Rp]=new Set);var r=t+"__bubble";n.has(r)||(gk(e,t,2,!1),n.add(r))}function _f(t,e,n){var r=0;e&&(r|=4),gk(n,t,r,e)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function Rl(t){if(!t[Kc]){t[Kc]=!0,kb.forEach(function(n){n!=="selectionchange"&&(sP.has(n)||_f(n,!1,t),_f(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kc]||(e[Kc]=!0,_f("selectionchange",!1,e))}}function gk(t,e,n,r){switch(Zb(e)){case 1:var s=vA;break;case 4:s=_A;break;default:s=rg}n=s.bind(null,e,n,t),s=void 0,!xp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function xf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=hi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Fb(function(){var c=i,d=Zm(n),f=[];e:{var m=pk.get(t);if(m!==void 0){var y=ig,w=t;switch(t){case"keypress":if(Su(n)===0)break e;case"keydown":case"keyup":y=MA;break;case"focusin":w="focus",y=ff;break;case"focusout":w="blur",y=ff;break;case"beforeblur":case"afterblur":y=ff;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=bA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=jA;break;case uk:case dk:case hk:y=TA;break;case fk:y=FA;break;case"scroll":y=xA;break;case"wheel":y=BA;break;case"copy":case"cut":case"paste":y=SA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=mv}var k=(e&4)!==0,E=!k&&t==="scroll",v=k?m!==null?m+"Capture":null:m;k=[];for(var _=c,b;_!==null;){b=_;var A=b.stateNode;if(b.tag===5&&A!==null&&(b=A,v!==null&&(A=Tl(_,v),A!=null&&k.push(Nl(_,A,b)))),E)break;_=_.return}0<k.length&&(m=new y(m,w,null,n,d),f.push({event:m,listeners:k}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==vp&&(w=n.relatedTarget||n.fromElement)&&(hi(w)||w[$r]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?hi(w):null,w!==null&&(E=Bi(w),w!==E||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(k=fv,A="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=mv,A="onPointerLeave",v="onPointerEnter",_="pointer"),E=y==null?m:uo(y),b=w==null?m:uo(w),m=new k(A,_+"leave",y,n,d),m.target=E,m.relatedTarget=b,A=null,hi(d)===c&&(k=new k(v,_+"enter",w,n,d),k.target=b,k.relatedTarget=E,A=k),E=A,y&&w)t:{for(k=y,v=w,_=0,b=k;b;b=Zi(b))_++;for(b=0,A=v;A;A=Zi(A))b++;for(;0<_-b;)k=Zi(k),_--;for(;0<b-_;)v=Zi(v),b--;for(;_--;){if(k===v||v!==null&&k===v.alternate)break t;k=Zi(k),v=Zi(v)}k=null}else k=null;y!==null&&Iv(f,m,y,k,!1),w!==null&&E!==null&&Iv(f,E,w,k,!0)}}e:{if(m=c?uo(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var N=GA;else if(vv(m))if(ik)N=JA;else{N=YA;var M=QA}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=XA);if(N&&(N=N(t,c))){sk(f,N,n,d);break e}M&&M(t,m,c),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&fp(m,"number",m.value)}switch(M=c?uo(c):window,t){case"focusin":(vv(M)||M.contentEditable==="true")&&(lo=M,Tp=c,rl=null);break;case"focusout":rl=Tp=lo=null;break;case"mousedown":Ip=!0;break;case"contextmenu":case"mouseup":case"dragend":Ip=!1,kv(f,n,d);break;case"selectionchange":if(tP)break;case"keydown":case"keyup":kv(f,n,d)}var T;if(ag)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ao?nk(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(tk&&n.locale!=="ko"&&(ao||x!=="onCompositionStart"?x==="onCompositionEnd"&&ao&&(T=ek()):(gs=d,sg="value"in gs?gs.value:gs.textContent,ao=!0)),M=td(c,x),0<M.length&&(x=new pv(x,t,null,n,d),f.push({event:x,listeners:M}),T?x.data=T:(T=rk(n),T!==null&&(x.data=T)))),(T=$A?HA(t,n):WA(t,n))&&(c=td(c,"onBeforeInput"),0<c.length&&(d=new pv("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=T))}mk(f,e)})}function Nl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function td(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Tl(t,n),i!=null&&r.unshift(Nl(t,i,s)),i=Tl(t,e),i!=null&&r.push(Nl(t,i,s))),t=t.return}return r}function Zi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Iv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Tl(n,i),l!=null&&o.unshift(Nl(n,l,a))):s||(l=Tl(n,i),l!=null&&o.push(Nl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var iP=/\r\n?/g,oP=/\u0000|\uFFFD/g;function Sv(t){return(typeof t=="string"?t:""+t).replace(iP,`
`).replace(oP,"")}function Gc(t,e,n){if(e=Sv(e),Sv(t)!==e&&n)throw Error($(425))}function nd(){}var Sp=null,Cp=null;function Ap(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pp=typeof setTimeout=="function"?setTimeout:void 0,aP=typeof clearTimeout=="function"?clearTimeout:void 0,Cv=typeof Promise=="function"?Promise:void 0,lP=typeof queueMicrotask=="function"?queueMicrotask:typeof Cv<"u"?function(t){return Cv.resolve(null).then(t).catch(cP)}:Pp;function cP(t){setTimeout(function(){throw t})}function wf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Cl(e)}function Is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Av(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),mr="__reactFiber$"+Zo,Dl="__reactProps$"+Zo,$r="__reactContainer$"+Zo,Rp="__reactEvents$"+Zo,uP="__reactListeners$"+Zo,dP="__reactHandles$"+Zo;function hi(t){var e=t[mr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$r]||n[mr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Av(t);t!==null;){if(n=t[mr])return n;t=Av(t)}return e}t=n,n=t.parentNode}return null}function lc(t){return t=t[mr]||t[$r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function eh(t){return t[Dl]||null}var Np=[],ho=-1;function Ws(t){return{current:t}}function Ue(t){0>ho||(t.current=Np[ho],Np[ho]=null,ho--)}function Me(t,e){ho++,Np[ho]=t.current,t.current=e}var js={},Ut=Ws(js),dn=Ws(!1),Ii=js;function Do(t,e){var n=t.type.contextTypes;if(!n)return js;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function hn(t){return t=t.childContextTypes,t!=null}function rd(){Ue(dn),Ue(Ut)}function Pv(t,e,n){if(Ut.current!==js)throw Error($(168));Me(Ut,e),Me(dn,n)}function yk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error($(108,QC(t)||"Unknown",s));return We({},n,r)}function sd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||js,Ii=Ut.current,Me(Ut,t),Me(dn,dn.current),!0}function Rv(t,e,n){var r=t.stateNode;if(!r)throw Error($(169));n?(t=yk(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,Ue(dn),Ue(Ut),Me(Ut,t)):Ue(dn),Me(dn,n)}var Pr=null,th=!1,bf=!1;function vk(t){Pr===null?Pr=[t]:Pr.push(t)}function hP(t){th=!0,vk(t)}function qs(){if(!bf&&Pr!==null){bf=!0;var t=0,e=Pe;try{var n=Pr;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,th=!1}catch(s){throw Pr!==null&&(Pr=Pr.slice(t+1)),$b(eg,qs),s}finally{Pe=e,bf=!1}}return null}var fo=[],po=0,id=null,od=0,Dn=[],Mn=0,Si=null,Dr=1,Mr="";function ai(t,e){fo[po++]=od,fo[po++]=id,id=t,od=e}function _k(t,e,n){Dn[Mn++]=Dr,Dn[Mn++]=Mr,Dn[Mn++]=Si,Si=t;var r=Dr;t=Mr;var s=32-tr(r)-1;r&=~(1<<s),n+=1;var i=32-tr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Dr=1<<32-tr(e)+s|n<<s|r,Mr=i+t}else Dr=1<<i|n<<s|r,Mr=t}function cg(t){t.return!==null&&(ai(t,1),_k(t,1,0))}function ug(t){for(;t===id;)id=fo[--po],fo[po]=null,od=fo[--po],fo[po]=null;for(;t===Si;)Si=Dn[--Mn],Dn[Mn]=null,Mr=Dn[--Mn],Dn[Mn]=null,Dr=Dn[--Mn],Dn[Mn]=null}var Tn=null,bn=null,Be=!1,Xn=null;function xk(t,e){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,bn=Is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Si!==null?{id:Dr,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,bn=null,!0):!1;default:return!1}}function Dp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mp(t){if(Be){var e=bn;if(e){var n=e;if(!Nv(t,e)){if(Dp(t))throw Error($(418));e=Is(n.nextSibling);var r=Tn;e&&Nv(t,e)?xk(r,n):(t.flags=t.flags&-4097|2,Be=!1,Tn=t)}}else{if(Dp(t))throw Error($(418));t.flags=t.flags&-4097|2,Be=!1,Tn=t}}}function Dv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function Qc(t){if(t!==Tn)return!1;if(!Be)return Dv(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ap(t.type,t.memoizedProps)),e&&(e=bn)){if(Dp(t))throw wk(),Error($(418));for(;e;)xk(t,e),e=Is(e.nextSibling)}if(Dv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=Is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=Tn?Is(t.stateNode.nextSibling):null;return!0}function wk(){for(var t=bn;t;)t=Is(t.nextSibling)}function Mo(){bn=Tn=null,Be=!1}function dg(t){Xn===null?Xn=[t]:Xn.push(t)}var fP=Yr.ReactCurrentBatchConfig;function Aa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var r=n.stateNode}if(!r)throw Error($(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Yc(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mv(t){var e=t._init;return e(t._payload)}function bk(t){function e(v,_){if(t){var b=v.deletions;b===null?(v.deletions=[_],v.flags|=16):b.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function s(v,_){return v=Ps(v,_),v.index=0,v.sibling=null,v}function i(v,_,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<_?(v.flags|=2,_):b):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,b,A){return _===null||_.tag!==6?(_=Af(b,v.mode,A),_.return=v,_):(_=s(_,b),_.return=v,_)}function l(v,_,b,A){var N=b.type;return N===oo?d(v,_,b.props.children,A,b.key):_!==null&&(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ls&&Mv(N)===_.type)?(A=s(_,b.props),A.ref=Aa(v,_,b),A.return=v,A):(A=Mu(b.type,b.key,b.props,null,v.mode,A),A.ref=Aa(v,_,b),A.return=v,A)}function c(v,_,b,A){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=Pf(b,v.mode,A),_.return=v,_):(_=s(_,b.children||[]),_.return=v,_)}function d(v,_,b,A,N){return _===null||_.tag!==7?(_=bi(b,v.mode,A,N),_.return=v,_):(_=s(_,b),_.return=v,_)}function f(v,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Af(""+_,v.mode,b),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fc:return b=Mu(_.type,_.key,_.props,null,v.mode,b),b.ref=Aa(v,null,_),b.return=v,b;case io:return _=Pf(_,v.mode,b),_.return=v,_;case ls:var A=_._init;return f(v,A(_._payload),b)}if(Ua(_)||Ea(_))return _=bi(_,v.mode,b,null),_.return=v,_;Yc(v,_)}return null}function m(v,_,b,A){var N=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:a(v,_,""+b,A);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fc:return b.key===N?l(v,_,b,A):null;case io:return b.key===N?c(v,_,b,A):null;case ls:return N=b._init,m(v,_,N(b._payload),A)}if(Ua(b)||Ea(b))return N!==null?null:d(v,_,b,A,null);Yc(v,b)}return null}function y(v,_,b,A,N){if(typeof A=="string"&&A!==""||typeof A=="number")return v=v.get(b)||null,a(_,v,""+A,N);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Fc:return v=v.get(A.key===null?b:A.key)||null,l(_,v,A,N);case io:return v=v.get(A.key===null?b:A.key)||null,c(_,v,A,N);case ls:var M=A._init;return y(v,_,b,M(A._payload),N)}if(Ua(A)||Ea(A))return v=v.get(b)||null,d(_,v,A,N,null);Yc(_,A)}return null}function w(v,_,b,A){for(var N=null,M=null,T=_,x=_=0,I=null;T!==null&&x<b.length;x++){T.index>x?(I=T,T=null):I=T.sibling;var C=m(v,T,b[x],A);if(C===null){T===null&&(T=I);break}t&&T&&C.alternate===null&&e(v,T),_=i(C,_,x),M===null?N=C:M.sibling=C,M=C,T=I}if(x===b.length)return n(v,T),Be&&ai(v,x),N;if(T===null){for(;x<b.length;x++)T=f(v,b[x],A),T!==null&&(_=i(T,_,x),M===null?N=T:M.sibling=T,M=T);return Be&&ai(v,x),N}for(T=r(v,T);x<b.length;x++)I=y(T,v,x,b[x],A),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?x:I.key),_=i(I,_,x),M===null?N=I:M.sibling=I,M=I);return t&&T.forEach(function(R){return e(v,R)}),Be&&ai(v,x),N}function k(v,_,b,A){var N=Ea(b);if(typeof N!="function")throw Error($(150));if(b=N.call(b),b==null)throw Error($(151));for(var M=N=null,T=_,x=_=0,I=null,C=b.next();T!==null&&!C.done;x++,C=b.next()){T.index>x?(I=T,T=null):I=T.sibling;var R=m(v,T,C.value,A);if(R===null){T===null&&(T=I);break}t&&T&&R.alternate===null&&e(v,T),_=i(R,_,x),M===null?N=R:M.sibling=R,M=R,T=I}if(C.done)return n(v,T),Be&&ai(v,x),N;if(T===null){for(;!C.done;x++,C=b.next())C=f(v,C.value,A),C!==null&&(_=i(C,_,x),M===null?N=C:M.sibling=C,M=C);return Be&&ai(v,x),N}for(T=r(v,T);!C.done;x++,C=b.next())C=y(T,v,x,C.value,A),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?x:C.key),_=i(C,_,x),M===null?N=C:M.sibling=C,M=C);return t&&T.forEach(function(O){return e(v,O)}),Be&&ai(v,x),N}function E(v,_,b,A){if(typeof b=="object"&&b!==null&&b.type===oo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Fc:e:{for(var N=b.key,M=_;M!==null;){if(M.key===N){if(N=b.type,N===oo){if(M.tag===7){n(v,M.sibling),_=s(M,b.props.children),_.return=v,v=_;break e}}else if(M.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ls&&Mv(N)===M.type){n(v,M.sibling),_=s(M,b.props),_.ref=Aa(v,M,b),_.return=v,v=_;break e}n(v,M);break}else e(v,M);M=M.sibling}b.type===oo?(_=bi(b.props.children,v.mode,A,b.key),_.return=v,v=_):(A=Mu(b.type,b.key,b.props,null,v.mode,A),A.ref=Aa(v,_,b),A.return=v,v=A)}return o(v);case io:e:{for(M=b.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(v,_.sibling),_=s(_,b.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=Pf(b,v.mode,A),_.return=v,v=_}return o(v);case ls:return M=b._init,E(v,_,M(b._payload),A)}if(Ua(b))return w(v,_,b,A);if(Ea(b))return k(v,_,b,A);Yc(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_!==null&&_.tag===6?(n(v,_.sibling),_=s(_,b),_.return=v,v=_):(n(v,_),_=Af(b,v.mode,A),_.return=v,v=_),o(v)):n(v,_)}return E}var Oo=bk(!0),kk=bk(!1),ad=Ws(null),ld=null,mo=null,hg=null;function fg(){hg=mo=ld=null}function pg(t){var e=ad.current;Ue(ad),t._currentValue=e}function Op(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ko(t,e){ld=t,hg=mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(an=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(hg!==t)if(t={context:t,memoizedValue:e,next:null},mo===null){if(ld===null)throw Error($(308));mo=t,ld.dependencies={lanes:0,firstContext:t}}else mo=mo.next=t;return e}var fi=null;function mg(t){fi===null?fi=[t]:fi.push(t)}function Ek(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,mg(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hr(t,r)}function Hr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cs=!1;function gg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hr(t,n)}return s=r.interleaved,s===null?(e.next=e,mg(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hr(t,n)}function Cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tg(t,n)}}function Ov(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cd(t,e,n,r){var s=t.updateQueue;cs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=c=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,k=a;switch(m=e,y=n,k.tag){case 1:if(w=k.payload,typeof w=="function"){f=w.call(y,f,m);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=k.payload,m=typeof w=="function"?w.call(y,f,m):w,m==null)break e;f=We({},f,m);break e;case 2:cs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=f):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ai|=o,t.lanes=o,t.memoizedState=f}}function Lv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error($(191,s));s.call(r)}}}var cc={},vr=Ws(cc),Ml=Ws(cc),Ol=Ws(cc);function pi(t){if(t===cc)throw Error($(174));return t}function yg(t,e){switch(Me(Ol,e),Me(Ml,t),Me(vr,cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mp(e,t)}Ue(vr),Me(vr,e)}function Lo(){Ue(vr),Ue(Ml),Ue(Ol)}function Ik(t){pi(Ol.current);var e=pi(vr.current),n=mp(e,t.type);e!==n&&(Me(Ml,t),Me(vr,n))}function vg(t){Ml.current===t&&(Ue(vr),Ue(Ml))}var ze=Ws(0);function ud(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kf=[];function _g(){for(var t=0;t<kf.length;t++)kf[t]._workInProgressVersionPrimary=null;kf.length=0}var Au=Yr.ReactCurrentDispatcher,Ef=Yr.ReactCurrentBatchConfig,Ci=0,$e=null,pt=null,vt=null,dd=!1,sl=!1,Ll=0,pP=0;function Dt(){throw Error($(321))}function xg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ir(t[n],e[n]))return!1;return!0}function wg(t,e,n,r,s,i){if(Ci=i,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Au.current=t===null||t.memoizedState===null?vP:_P,t=n(r,s),sl){i=0;do{if(sl=!1,Ll=0,25<=i)throw Error($(301));i+=1,vt=pt=null,e.updateQueue=null,Au.current=xP,t=n(r,s)}while(sl)}if(Au.current=hd,e=pt!==null&&pt.next!==null,Ci=0,vt=pt=$e=null,dd=!1,e)throw Error($(300));return t}function bg(){var t=Ll!==0;return Ll=0,t}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?$e.memoizedState=vt=t:vt=vt.next=t,vt}function Un(){if(pt===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=vt===null?$e.memoizedState:vt.next;if(e!==null)vt=e,pt=t;else{if(t===null)throw Error($(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},vt===null?$e.memoizedState=vt=t:vt=vt.next=t}return vt}function jl(t,e){return typeof e=="function"?e(t):e}function Tf(t){var e=Un(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=pt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Ci&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,$e.lanes|=d,Ai|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,ir(r,e.memoizedState)||(an=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,$e.lanes|=i,Ai|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function If(t){var e=Un(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ir(i,e.memoizedState)||(an=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Sk(){}function Ck(t,e){var n=$e,r=Un(),s=e(),i=!ir(r.memoizedState,s);if(i&&(r.memoizedState=s,an=!0),r=r.queue,kg(Rk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,Vl(9,Pk.bind(null,n,r,s,e),void 0,null),xt===null)throw Error($(349));Ci&30||Ak(n,e,s)}return s}function Ak(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Pk(t,e,n,r){e.value=n,e.getSnapshot=r,Nk(e)&&Dk(t)}function Rk(t,e,n){return n(function(){Nk(e)&&Dk(t)})}function Nk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ir(t,n)}catch{return!0}}function Dk(t){var e=Hr(t,1);e!==null&&nr(e,t,1,-1)}function jv(t){var e=hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:t},e.queue=t,t=t.dispatch=yP.bind(null,$e,t),[e.memoizedState,t]}function Vl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Mk(){return Un().memoizedState}function Pu(t,e,n,r){var s=hr();$e.flags|=t,s.memoizedState=Vl(1|e,n,void 0,r===void 0?null:r)}function nh(t,e,n,r){var s=Un();r=r===void 0?null:r;var i=void 0;if(pt!==null){var o=pt.memoizedState;if(i=o.destroy,r!==null&&xg(r,o.deps)){s.memoizedState=Vl(e,n,i,r);return}}$e.flags|=t,s.memoizedState=Vl(1|e,n,i,r)}function Vv(t,e){return Pu(8390656,8,t,e)}function kg(t,e){return nh(2048,8,t,e)}function Ok(t,e){return nh(4,2,t,e)}function Lk(t,e){return nh(4,4,t,e)}function jk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vk(t,e,n){return n=n!=null?n.concat([t]):null,nh(4,4,jk.bind(null,e,t),n)}function Eg(){}function Fk(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Uk(t,e){var n=Un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Bk(t,e,n){return Ci&21?(ir(n,e)||(n=qb(),$e.lanes|=n,Ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,an=!0),t.memoizedState=n)}function mP(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=Ef.transition;Ef.transition={};try{t(!1),e()}finally{Pe=n,Ef.transition=r}}function zk(){return Un().memoizedState}function gP(t,e,n){var r=As(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$k(t))Hk(e,n);else if(n=Ek(t,e,n,r),n!==null){var s=Xt();nr(n,t,r,s),Wk(n,e,r)}}function yP(t,e,n){var r=As(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($k(t))Hk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ir(a,o)){var l=e.interleaved;l===null?(s.next=s,mg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Ek(t,e,s,r),n!==null&&(s=Xt(),nr(n,t,r,s),Wk(n,e,r))}}function $k(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function Hk(t,e){sl=dd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Wk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tg(t,n)}}var hd={readContext:Fn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},vP={readContext:Fn,useCallback:function(t,e){return hr().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:Vv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pu(4194308,4,jk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pu(4,2,t,e)},useMemo:function(t,e){var n=hr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gP.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=hr();return t={current:t},e.memoizedState=t},useState:jv,useDebugValue:Eg,useDeferredValue:function(t){return hr().memoizedState=t},useTransition:function(){var t=jv(!1),e=t[0];return t=mP.bind(null,t[1]),hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,s=hr();if(Be){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),xt===null)throw Error($(349));Ci&30||Ak(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vv(Rk.bind(null,r,i,t),[t]),r.flags|=2048,Vl(9,Pk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hr(),e=xt.identifierPrefix;if(Be){var n=Mr,r=Dr;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ll++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_P={readContext:Fn,useCallback:Fk,useContext:Fn,useEffect:kg,useImperativeHandle:Vk,useInsertionEffect:Ok,useLayoutEffect:Lk,useMemo:Uk,useReducer:Tf,useRef:Mk,useState:function(){return Tf(jl)},useDebugValue:Eg,useDeferredValue:function(t){var e=Un();return Bk(e,pt.memoizedState,t)},useTransition:function(){var t=Tf(jl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:Sk,useSyncExternalStore:Ck,useId:zk,unstable_isNewReconciler:!1},xP={readContext:Fn,useCallback:Fk,useContext:Fn,useEffect:kg,useImperativeHandle:Vk,useInsertionEffect:Ok,useLayoutEffect:Lk,useMemo:Uk,useReducer:If,useRef:Mk,useState:function(){return If(jl)},useDebugValue:Eg,useDeferredValue:function(t){var e=Un();return pt===null?e.memoizedState=t:Bk(e,pt.memoizedState,t)},useTransition:function(){var t=If(jl)[0],e=Un().memoizedState;return[t,e]},useMutableSource:Sk,useSyncExternalStore:Ck,useId:zk,unstable_isNewReconciler:!1};function Qn(t,e){if(t&&t.defaultProps){e=We({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:We({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rh={isMounted:function(t){return(t=t._reactInternals)?Bi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=As(t),i=Vr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ss(t,i,s),e!==null&&(nr(e,t,s,r),Cu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=As(t),i=Vr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ss(t,i,s),e!==null&&(nr(e,t,s,r),Cu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=As(t),s=Vr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ss(t,s,r),e!==null&&(nr(e,t,r,n),Cu(e,t,r))}};function Fv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Pl(n,r)||!Pl(s,i):!0}function qk(t,e,n){var r=!1,s=js,i=e.contextType;return typeof i=="object"&&i!==null?i=Fn(i):(s=hn(e)?Ii:Ut.current,r=e.contextTypes,i=(r=r!=null)?Do(t,s):js),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Uv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rh.enqueueReplaceState(e,e.state,null)}function jp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},gg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Fn(i):(i=hn(e)?Ii:Ut.current,s.context=Do(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rh.enqueueReplaceState(s,s.state,null),cd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function jo(t,e){try{var n="",r=e;do n+=GC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Sf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wP=typeof WeakMap=="function"?WeakMap:Map;function Kk(t,e,n){n=Vr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pd||(pd=!0,Gp=r),Vp(t,e)},n}function Gk(t,e,n){n=Vr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Vp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Vp(t,e),typeof r!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Bv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=OP.bind(null,t,e,n),e.then(t,t))}function zv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $v(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vr(-1,1),e.tag=2,Ss(n,e,1))),n.lanes|=1),t)}var bP=Yr.ReactCurrentOwner,an=!1;function Yt(t,e,n,r){e.child=t===null?kk(e,null,n,r):Oo(e,t.child,n,r)}function Hv(t,e,n,r,s){n=n.render;var i=e.ref;return ko(e,s),r=wg(t,e,n,r,i,s),n=bg(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wr(t,e,s)):(Be&&n&&cg(e),e.flags|=1,Yt(t,e,r,s),e.child)}function Wv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ng(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Qk(t,e,i,r,s)):(t=Mu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Pl,n(o,r)&&t.ref===e.ref)return Wr(t,e,s)}return e.flags|=1,t=Ps(i,r),t.ref=e.ref,t.return=e,e.child=t}function Qk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Pl(i,r)&&t.ref===e.ref)if(an=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(an=!0);else return e.lanes=t.lanes,Wr(t,e,s)}return Fp(t,e,n,r,s)}function Yk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Me(yo,wn),wn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Me(yo,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Me(yo,wn),wn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Me(yo,wn),wn|=r;return Yt(t,e,s,n),e.child}function Xk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fp(t,e,n,r,s){var i=hn(n)?Ii:Ut.current;return i=Do(e,i),ko(e,s),n=wg(t,e,n,r,i,s),r=bg(),t!==null&&!an?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wr(t,e,s)):(Be&&r&&cg(e),e.flags|=1,Yt(t,e,n,s),e.child)}function qv(t,e,n,r,s){if(hn(n)){var i=!0;sd(e)}else i=!1;if(ko(e,s),e.stateNode===null)Ru(t,e),qk(e,n,r),jp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fn(c):(c=hn(n)?Ii:Ut.current,c=Do(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Uv(e,o,r,c),cs=!1;var m=e.memoizedState;o.state=m,cd(e,r,o,s),l=e.memoizedState,a!==r||m!==l||dn.current||cs?(typeof d=="function"&&(Lp(e,n,d,r),l=e.memoizedState),(a=cs||Fv(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Tk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Qn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fn(l):(l=hn(n)?Ii:Ut.current,l=Do(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&Uv(e,o,r,l),cs=!1,m=e.memoizedState,o.state=m,cd(e,r,o,s);var w=e.memoizedState;a!==f||m!==w||dn.current||cs?(typeof y=="function"&&(Lp(e,n,y,r),w=e.memoizedState),(c=cs||Fv(e,n,c,r,m,w,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Up(t,e,n,r,i,s)}function Up(t,e,n,r,s,i){Xk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Rv(e,n,!1),Wr(t,e,i);r=e.stateNode,bP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Oo(e,t.child,null,i),e.child=Oo(e,null,a,i)):Yt(t,e,a,i),e.memoizedState=r.state,s&&Rv(e,n,!0),e.child}function Jk(t){var e=t.stateNode;e.pendingContext?Pv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pv(t,e.context,!1),yg(t,e.containerInfo)}function Kv(t,e,n,r,s){return Mo(),dg(s),e.flags|=256,Yt(t,e,n,r),e.child}var Bp={dehydrated:null,treeContext:null,retryLane:0};function zp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zk(t,e,n){var r=e.pendingProps,s=ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Me(ze,s&1),t===null)return Mp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=oh(o,r,0,null),t=bi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zp(n),e.memoizedState=Bp,t):Tg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return kP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ps(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ps(a,i):(i=bi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?zp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Bp,r}return i=t.child,t=i.sibling,r=Ps(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tg(t,e){return e=oh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xc(t,e,n,r){return r!==null&&dg(r),Oo(e,t.child,null,n),t=Tg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Sf(Error($(422))),Xc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=oh({mode:"visible",children:r.children},s,0,null),i=bi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Oo(e,t.child,null,o),e.child.memoizedState=zp(o),e.memoizedState=Bp,i);if(!(e.mode&1))return Xc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error($(419)),r=Sf(i,r,void 0),Xc(t,e,o,r)}if(a=(o&t.childLanes)!==0,an||a){if(r=xt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hr(t,s),nr(r,t,s,-1))}return Rg(),r=Sf(Error($(421))),Xc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,bn=Is(s.nextSibling),Tn=e,Be=!0,Xn=null,t!==null&&(Dn[Mn++]=Dr,Dn[Mn++]=Mr,Dn[Mn++]=Si,Dr=t.id,Mr=t.overflow,Si=e),e=Tg(e,r.children),e.flags|=4096,e)}function Gv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Op(t.return,e,n)}function Cf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function eE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Yt(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gv(t,n,e);else if(t.tag===19)Gv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Me(ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ud(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Cf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ud(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Cf(e,!0,n,null,i);break;case"together":Cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EP(t,e,n){switch(e.tag){case 3:Jk(e),Mo();break;case 5:Ik(e);break;case 1:hn(e.type)&&sd(e);break;case 4:yg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Me(ad,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Me(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?Zk(t,e,n):(Me(ze,ze.current&1),t=Wr(t,e,n),t!==null?t.sibling:null);Me(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return eE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Me(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,Yk(t,e,n)}return Wr(t,e,n)}var tE,$p,nE,rE;tE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$p=function(){};nE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,pi(vr.current);var i=null;switch(n){case"input":s=dp(t,s),r=dp(t,r),i=[];break;case"select":s=We({},s,{value:void 0}),r=We({},r,{value:void 0}),i=[];break;case"textarea":s=pp(t,s),r=pp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nd)}gp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(kl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&je("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};rE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pa(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function TP(t,e,n){var r=e.pendingProps;switch(ug(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(e),null;case 1:return hn(e.type)&&rd(),Mt(e),null;case 3:return r=e.stateNode,Lo(),Ue(dn),Ue(Ut),_g(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(Xp(Xn),Xn=null))),$p(t,e),Mt(e),null;case 5:vg(e);var s=pi(Ol.current);if(n=e.type,t!==null&&e.stateNode!=null)nE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Mt(e),null}if(t=pi(vr.current),Qc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[mr]=e,r[Dl]=i,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<za.length;s++)je(za[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":rv(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":iv(r,i),je("invalid",r)}gp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Gc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Gc(r.textContent,a,t),s=["children",""+a]):kl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":Uc(r),sv(r,i,!0);break;case"textarea":Uc(r),ov(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mr]=e,t[Dl]=r,tE(t,e,!1,!1),e.stateNode=t;e:{switch(o=yp(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<za.length;s++)je(za[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":rv(t,r),s=dp(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=We({},r,{value:void 0}),je("invalid",t);break;case"textarea":iv(t,r),s=pp(t,r),je("invalid",t);break;default:s=r}gp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Mb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Nb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&El(t,l):typeof l=="number"&&El(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(kl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&je("scroll",t):l!=null&&Qm(t,i,l,o))}switch(n){case"input":Uc(t),sv(t,r,!1);break;case"textarea":Uc(t),ov(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ls(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_o(t,!!r.multiple,i,!1):r.defaultValue!=null&&_o(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mt(e),null;case 6:if(t&&e.stateNode!=null)rE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(n=pi(Ol.current),pi(vr.current),Qc(e)){if(r=e.stateNode,n=e.memoizedProps,r[mr]=e,(i=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:Gc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mr]=e,e.stateNode=r}return Mt(e),null;case 13:if(Ue(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&bn!==null&&e.mode&1&&!(e.flags&128))wk(),Mo(),e.flags|=98560,i=!1;else if(i=Qc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error($(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[mr]=e}else Mo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mt(e),i=!1}else Xn!==null&&(Xp(Xn),Xn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?mt===0&&(mt=3):Rg())),e.updateQueue!==null&&(e.flags|=4),Mt(e),null);case 4:return Lo(),$p(t,e),t===null&&Rl(e.stateNode.containerInfo),Mt(e),null;case 10:return pg(e.type._context),Mt(e),null;case 17:return hn(e.type)&&rd(),Mt(e),null;case 19:if(Ue(ze),i=e.memoizedState,i===null)return Mt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Pa(i,!1);else{if(mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ud(t),o!==null){for(e.flags|=128,Pa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Me(ze,ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&nt()>Vo&&(e.flags|=128,r=!0,Pa(i,!1),e.lanes=4194304)}else{if(!r)if(t=ud(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Be)return Mt(e),null}else 2*nt()-i.renderingStartTime>Vo&&n!==1073741824&&(e.flags|=128,r=!0,Pa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=nt(),e.sibling=null,n=ze.current,Me(ze,r?n&1|2:n&1),e):(Mt(e),null);case 22:case 23:return Pg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(Mt(e),e.subtreeFlags&6&&(e.flags|=8192)):Mt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function IP(t,e){switch(ug(e),e.tag){case 1:return hn(e.type)&&rd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Lo(),Ue(dn),Ue(Ut),_g(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vg(e),null;case 13:if(Ue(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Mo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(ze),null;case 4:return Lo(),null;case 10:return pg(e.type._context),null;case 22:case 23:return Pg(),null;case 24:return null;default:return null}}var Jc=!1,jt=!1,SP=typeof WeakSet=="function"?WeakSet:Set,X=null;function go(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function Hp(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var Qv=!1;function CP(t,e){if(Sp=Zu,t=lk(),lg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++d===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cp={focusedElem:t,selectionRange:n},Zu=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var k=w.memoizedProps,E=w.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?k:Qn(e.type,k),E);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(A){Qe(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return w=Qv,Qv=!1,w}function il(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hp(e,n,i)}s=s.next}while(s!==r)}}function sh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sE(t){var e=t.alternate;e!==null&&(t.alternate=null,sE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mr],delete e[Dl],delete e[Rp],delete e[uP],delete e[dP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iE(t){return t.tag===5||t.tag===3||t.tag===4}function Yv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nd));else if(r!==4&&(t=t.child,t!==null))for(qp(t,e,n),t=t.sibling;t!==null;)qp(t,e,n),t=t.sibling}function Kp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kp(t,e,n),t=t.sibling;t!==null;)Kp(t,e,n),t=t.sibling}var bt=null,Yn=!1;function ss(t,e,n){for(n=n.child;n!==null;)oE(t,e,n),n=n.sibling}function oE(t,e,n){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(Yd,n)}catch{}switch(n.tag){case 5:jt||go(n,e);case 6:var r=bt,s=Yn;bt=null,ss(t,e,n),bt=r,Yn=s,bt!==null&&(Yn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Yn?(t=bt,n=n.stateNode,t.nodeType===8?wf(t.parentNode,n):t.nodeType===1&&wf(t,n),Cl(t)):wf(bt,n.stateNode));break;case 4:r=bt,s=Yn,bt=n.stateNode.containerInfo,Yn=!0,ss(t,e,n),bt=r,Yn=s;break;case 0:case 11:case 14:case 15:if(!jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hp(n,e,o),s=s.next}while(s!==r)}ss(t,e,n);break;case 1:if(!jt&&(go(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}ss(t,e,n);break;case 21:ss(t,e,n);break;case 22:n.mode&1?(jt=(r=jt)||n.memoizedState!==null,ss(t,e,n),jt=r):ss(t,e,n);break;default:ss(t,e,n)}}function Xv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SP),e.forEach(function(r){var s=jP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:bt=a.stateNode,Yn=!1;break e;case 3:bt=a.stateNode.containerInfo,Yn=!0;break e;case 4:bt=a.stateNode.containerInfo,Yn=!0;break e}a=a.return}if(bt===null)throw Error($(160));oE(i,o,s),bt=null,Yn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Qe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aE(e,t),e=e.sibling}function aE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),cr(t),r&4){try{il(3,t,t.return),sh(3,t)}catch(k){Qe(t,t.return,k)}try{il(5,t,t.return)}catch(k){Qe(t,t.return,k)}}break;case 1:Gn(e,t),cr(t),r&512&&n!==null&&go(n,n.return);break;case 5:if(Gn(e,t),cr(t),r&512&&n!==null&&go(n,n.return),t.flags&32){var s=t.stateNode;try{El(s,"")}catch(k){Qe(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ab(s,i),yp(a,o);var c=yp(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?Mb(s,f):d==="dangerouslySetInnerHTML"?Nb(s,f):d==="children"?El(s,f):Qm(s,d,f,c)}switch(a){case"input":hp(s,i);break;case"textarea":Pb(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?_o(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?_o(s,!!i.multiple,i.defaultValue,!0):_o(s,!!i.multiple,i.multiple?[]:"",!1))}s[Dl]=i}catch(k){Qe(t,t.return,k)}}break;case 6:if(Gn(e,t),cr(t),r&4){if(t.stateNode===null)throw Error($(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Qe(t,t.return,k)}}break;case 3:if(Gn(e,t),cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(k){Qe(t,t.return,k)}break;case 4:Gn(e,t),cr(t);break;case 13:Gn(e,t),cr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cg=nt())),r&4&&Xv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(jt=(c=jt)||d,Gn(e,t),jt=c):Gn(e,t),cr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(f=X=d;X!==null;){switch(m=X,y=m.child,m.tag){case 0:case 11:case 14:case 15:il(4,m,m.return);break;case 1:go(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(k){Qe(r,n,k)}}break;case 5:go(m,m.return);break;case 22:if(m.memoizedState!==null){Zv(f);continue}}y!==null?(y.return=m,X=y):Zv(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Db("display",o))}catch(k){Qe(t,t.return,k)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(k){Qe(t,t.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Gn(e,t),cr(t),r&4&&Xv(t);break;case 21:break;default:Gn(e,t),cr(t)}}function cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iE(n)){var r=n;break e}n=n.return}throw Error($(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(El(s,""),r.flags&=-33);var i=Yv(t);Kp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Yv(t);qp(t,a,o);break;default:throw Error($(161))}}catch(l){Qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AP(t,e,n){X=t,lE(t)}function lE(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Jc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||jt;a=Jc;var c=jt;if(Jc=o,(jt=l)&&!c)for(X=s;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?e_(s):l!==null?(l.return=o,X=l):e_(s);for(;i!==null;)X=i,lE(i),i=i.sibling;X=s,Jc=a,jt=c}Jv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):Jv(t)}}function Jv(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jt||sh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Lv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Cl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}jt||e.flags&512&&Wp(e)}catch(m){Qe(e,e.return,m)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Zv(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function e_(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sh(4,e)}catch(l){Qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Qe(e,s,l)}}var i=e.return;try{Wp(e)}catch(l){Qe(e,i,l)}break;case 5:var o=e.return;try{Wp(e)}catch(l){Qe(e,o,l)}}}catch(l){Qe(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var PP=Math.ceil,fd=Yr.ReactCurrentDispatcher,Ig=Yr.ReactCurrentOwner,Vn=Yr.ReactCurrentBatchConfig,Ee=0,xt=null,ht=null,St=0,wn=0,yo=Ws(0),mt=0,Fl=null,Ai=0,ih=0,Sg=0,ol=null,sn=null,Cg=0,Vo=1/0,Ar=null,pd=!1,Gp=null,Cs=null,Zc=!1,ys=null,md=0,al=0,Qp=null,Nu=-1,Du=0;function Xt(){return Ee&6?nt():Nu!==-1?Nu:Nu=nt()}function As(t){return t.mode&1?Ee&2&&St!==0?St&-St:fP.transition!==null?(Du===0&&(Du=qb()),Du):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:Zb(t.type)),t):1}function nr(t,e,n,r){if(50<al)throw al=0,Qp=null,Error($(185));oc(t,n,r),(!(Ee&2)||t!==xt)&&(t===xt&&(!(Ee&2)&&(ih|=n),mt===4&&ds(t,St)),fn(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Vo=nt()+500,th&&qs()))}function fn(t,e){var n=t.callbackNode;fA(t,e);var r=Ju(t,t===xt?St:0);if(r===0)n!==null&&cv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cv(n),e===1)t.tag===0?hP(t_.bind(null,t)):vk(t_.bind(null,t)),lP(function(){!(Ee&6)&&qs()}),n=null;else{switch(Kb(r)){case 1:n=eg;break;case 4:n=Hb;break;case 16:n=Xu;break;case 536870912:n=Wb;break;default:n=Xu}n=gE(n,cE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cE(t,e){if(Nu=-1,Du=0,Ee&6)throw Error($(327));var n=t.callbackNode;if(Eo()&&t.callbackNode!==n)return null;var r=Ju(t,t===xt?St:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gd(t,r);else{e=r;var s=Ee;Ee|=2;var i=dE();(xt!==t||St!==e)&&(Ar=null,Vo=nt()+500,wi(t,e));do try{DP();break}catch(a){uE(t,a)}while(!0);fg(),fd.current=i,Ee=s,ht!==null?e=0:(xt=null,St=0,e=mt)}if(e!==0){if(e===2&&(s=bp(t),s!==0&&(r=s,e=Yp(t,s))),e===1)throw n=Fl,wi(t,0),ds(t,r),fn(t,nt()),n;if(e===6)ds(t,r);else{if(s=t.current.alternate,!(r&30)&&!RP(s)&&(e=gd(t,r),e===2&&(i=bp(t),i!==0&&(r=i,e=Yp(t,i))),e===1))throw n=Fl,wi(t,0),ds(t,r),fn(t,nt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:li(t,sn,Ar);break;case 3:if(ds(t,r),(r&130023424)===r&&(e=Cg+500-nt(),10<e)){if(Ju(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Pp(li.bind(null,t,sn,Ar),e);break}li(t,sn,Ar);break;case 4:if(ds(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PP(r/1960))-r,10<r){t.timeoutHandle=Pp(li.bind(null,t,sn,Ar),r);break}li(t,sn,Ar);break;case 5:li(t,sn,Ar);break;default:throw Error($(329))}}}return fn(t,nt()),t.callbackNode===n?cE.bind(null,t):null}function Yp(t,e){var n=ol;return t.current.memoizedState.isDehydrated&&(wi(t,e).flags|=256),t=gd(t,e),t!==2&&(e=sn,sn=n,e!==null&&Xp(e)),t}function Xp(t){sn===null?sn=t:sn.push.apply(sn,t)}function RP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ir(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ds(t,e){for(e&=~Sg,e&=~ih,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function t_(t){if(Ee&6)throw Error($(327));Eo();var e=Ju(t,0);if(!(e&1))return fn(t,nt()),null;var n=gd(t,e);if(t.tag!==0&&n===2){var r=bp(t);r!==0&&(e=r,n=Yp(t,r))}if(n===1)throw n=Fl,wi(t,0),ds(t,e),fn(t,nt()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,li(t,sn,Ar),fn(t,nt()),null}function Ag(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Vo=nt()+500,th&&qs())}}function Pi(t){ys!==null&&ys.tag===0&&!(Ee&6)&&Eo();var e=Ee;Ee|=1;var n=Vn.transition,r=Pe;try{if(Vn.transition=null,Pe=1,t)return t()}finally{Pe=r,Vn.transition=n,Ee=e,!(Ee&6)&&qs()}}function Pg(){wn=yo.current,Ue(yo)}function wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aP(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(ug(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rd();break;case 3:Lo(),Ue(dn),Ue(Ut),_g();break;case 5:vg(r);break;case 4:Lo();break;case 13:Ue(ze);break;case 19:Ue(ze);break;case 10:pg(r.type._context);break;case 22:case 23:Pg()}n=n.return}if(xt=t,ht=t=Ps(t.current,null),St=wn=e,mt=0,Fl=null,Sg=ih=Ai=0,sn=ol=null,fi!==null){for(e=0;e<fi.length;e++)if(n=fi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}fi=null}return t}function uE(t,e){do{var n=ht;try{if(fg(),Au.current=hd,dd){for(var r=$e.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}dd=!1}if(Ci=0,vt=pt=$e=null,sl=!1,Ll=0,Ig.current=null,n===null||n.return===null){mt=1,Fl=e,ht=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=St,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=zv(o);if(y!==null){y.flags&=-257,$v(y,o,a,i,e),y.mode&1&&Bv(i,c,e),e=y,l=c;var w=e.updateQueue;if(w===null){var k=new Set;k.add(l),e.updateQueue=k}else w.add(l);break e}else{if(!(e&1)){Bv(i,c,e),Rg();break e}l=Error($(426))}}else if(Be&&a.mode&1){var E=zv(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),$v(E,o,a,i,e),dg(jo(l,a));break e}}i=l=jo(l,a),mt!==4&&(mt=2),ol===null?ol=[i]:ol.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Kk(i,l,e);Ov(i,v);break e;case 1:a=l;var _=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Cs===null||!Cs.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=Gk(i,a,e);Ov(i,A);break e}}i=i.return}while(i!==null)}fE(n)}catch(N){e=N,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function dE(){var t=fd.current;return fd.current=hd,t===null?hd:t}function Rg(){(mt===0||mt===3||mt===2)&&(mt=4),xt===null||!(Ai&268435455)&&!(ih&268435455)||ds(xt,St)}function gd(t,e){var n=Ee;Ee|=2;var r=dE();(xt!==t||St!==e)&&(Ar=null,wi(t,e));do try{NP();break}catch(s){uE(t,s)}while(!0);if(fg(),Ee=n,fd.current=r,ht!==null)throw Error($(261));return xt=null,St=0,mt}function NP(){for(;ht!==null;)hE(ht)}function DP(){for(;ht!==null&&!sA();)hE(ht)}function hE(t){var e=mE(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?fE(t):ht=e,Ig.current=null}function fE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IP(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{mt=6,ht=null;return}}else if(n=TP(n,e,wn),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);mt===0&&(mt=5)}function li(t,e,n){var r=Pe,s=Vn.transition;try{Vn.transition=null,Pe=1,MP(t,e,n,r)}finally{Vn.transition=s,Pe=r}return null}function MP(t,e,n,r){do Eo();while(ys!==null);if(Ee&6)throw Error($(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(pA(t,i),t===xt&&(ht=xt=null,St=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zc||(Zc=!0,gE(Xu,function(){return Eo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Vn.transition,Vn.transition=null;var o=Pe;Pe=1;var a=Ee;Ee|=4,Ig.current=null,CP(t,n),aE(n,t),eP(Cp),Zu=!!Sp,Cp=Sp=null,t.current=n,AP(n),iA(),Ee=a,Pe=o,Vn.transition=i}else t.current=n;if(Zc&&(Zc=!1,ys=t,md=s),i=t.pendingLanes,i===0&&(Cs=null),lA(n.stateNode),fn(t,nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pd)throw pd=!1,t=Gp,Gp=null,t;return md&1&&t.tag!==0&&Eo(),i=t.pendingLanes,i&1?t===Qp?al++:(al=0,Qp=t):al=0,qs(),null}function Eo(){if(ys!==null){var t=Kb(md),e=Vn.transition,n=Pe;try{if(Vn.transition=null,Pe=16>t?16:t,ys===null)var r=!1;else{if(t=ys,ys=null,md=0,Ee&6)throw Error($(331));var s=Ee;for(Ee|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:il(8,d,i)}var f=d.child;if(f!==null)f.return=d,X=f;else for(;X!==null;){d=X;var m=d.sibling,y=d.return;if(sE(d),d===c){X=null;break}if(m!==null){m.return=y,X=m;break}X=y}}}var w=i.alternate;if(w!==null){var k=w.child;if(k!==null){w.child=null;do{var E=k.sibling;k.sibling=null,k=E}while(k!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:il(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,X=v;break e}X=i.return}}var _=t.current;for(X=_;X!==null;){o=X;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,X=b;else e:for(o=_;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sh(9,a)}}catch(N){Qe(a,a.return,N)}if(a===o){X=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,X=A;break e}X=a.return}}if(Ee=s,qs(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(Yd,t)}catch{}r=!0}return r}finally{Pe=n,Vn.transition=e}}return!1}function n_(t,e,n){e=jo(n,e),e=Kk(t,e,1),t=Ss(t,e,1),e=Xt(),t!==null&&(oc(t,1,e),fn(t,e))}function Qe(t,e,n){if(t.tag===3)n_(t,t,n);else for(;e!==null;){if(e.tag===3){n_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cs===null||!Cs.has(r))){t=jo(n,t),t=Gk(e,t,1),e=Ss(e,t,1),t=Xt(),e!==null&&(oc(e,1,t),fn(e,t));break}}e=e.return}}function OP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(St&n)===n&&(mt===4||mt===3&&(St&130023424)===St&&500>nt()-Cg?wi(t,0):Sg|=n),fn(t,e)}function pE(t,e){e===0&&(t.mode&1?(e=$c,$c<<=1,!($c&130023424)&&($c=4194304)):e=1);var n=Xt();t=Hr(t,e),t!==null&&(oc(t,e,n),fn(t,n))}function LP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pE(t,n)}function jP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),pE(t,n)}var mE;mE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)an=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return an=!1,EP(t,e,n);an=!!(t.flags&131072)}else an=!1,Be&&e.flags&1048576&&_k(e,od,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ru(t,e),t=e.pendingProps;var s=Do(e,Ut.current);ko(e,n),s=wg(null,e,r,t,s,n);var i=bg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(r)?(i=!0,sd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gg(e),s.updater=rh,e.stateNode=s,s._reactInternals=e,jp(e,r,t,n),e=Up(null,e,r,!0,i,n)):(e.tag=0,Be&&i&&cg(e),Yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=FP(r),t=Qn(r,t),s){case 0:e=Fp(null,e,r,t,n);break e;case 1:e=qv(null,e,r,t,n);break e;case 11:e=Hv(null,e,r,t,n);break e;case 14:e=Wv(null,e,r,Qn(r.type,t),n);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Fp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),qv(t,e,r,s,n);case 3:e:{if(Jk(e),t===null)throw Error($(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Tk(t,e),cd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=jo(Error($(423)),e),e=Kv(t,e,r,n,s);break e}else if(r!==s){s=jo(Error($(424)),e),e=Kv(t,e,r,n,s);break e}else for(bn=Is(e.stateNode.containerInfo.firstChild),Tn=e,Be=!0,Xn=null,n=kk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mo(),r===s){e=Wr(t,e,n);break e}Yt(t,e,r,n)}e=e.child}return e;case 5:return Ik(e),t===null&&Mp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ap(r,s)?o=null:i!==null&&Ap(r,i)&&(e.flags|=32),Xk(t,e),Yt(t,e,o,n),e.child;case 6:return t===null&&Mp(e),null;case 13:return Zk(t,e,n);case 4:return yg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oo(e,null,r,n):Yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Hv(t,e,r,s,n);case 7:return Yt(t,e,e.pendingProps,n),e.child;case 8:return Yt(t,e,e.pendingProps.children,n),e.child;case 12:return Yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Me(ad,r._currentValue),r._currentValue=o,i!==null)if(ir(i.value,o)){if(i.children===s.children&&!dn.current){e=Wr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Vr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Op(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Op(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ko(e,n),s=Fn(s),r=r(s),e.flags|=1,Yt(t,e,r,n),e.child;case 14:return r=e.type,s=Qn(r,e.pendingProps),s=Qn(r.type,s),Wv(t,e,r,s,n);case 15:return Qk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Ru(t,e),e.tag=1,hn(r)?(t=!0,sd(e)):t=!1,ko(e,n),qk(e,r,s),jp(e,r,s,n),Up(null,e,r,!0,t,n);case 19:return eE(t,e,n);case 22:return Yk(t,e,n)}throw Error($(156,e.tag))};function gE(t,e){return $b(t,e)}function VP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,e,n,r){return new VP(t,e,n,r)}function Ng(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FP(t){if(typeof t=="function")return Ng(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xm)return 11;if(t===Jm)return 14}return 2}function Ps(t,e){var n=t.alternate;return n===null?(n=Ln(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ng(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oo:return bi(n.children,s,i,e);case Ym:o=8,s|=8;break;case ap:return t=Ln(12,n,e,s|2),t.elementType=ap,t.lanes=i,t;case lp:return t=Ln(13,n,e,s),t.elementType=lp,t.lanes=i,t;case cp:return t=Ln(19,n,e,s),t.elementType=cp,t.lanes=i,t;case Ib:return oh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eb:o=10;break e;case Tb:o=9;break e;case Xm:o=11;break e;case Jm:o=14;break e;case ls:o=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=Ln(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function bi(t,e,n,r){return t=Ln(7,t,r,e),t.lanes=n,t}function oh(t,e,n,r){return t=Ln(22,t,r,e),t.elementType=Ib,t.lanes=n,t.stateNode={isHidden:!1},t}function Af(t,e,n){return t=Ln(6,t,null,e),t.lanes=n,t}function Pf(t,e,n){return e=Ln(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uf(0),this.expirationTimes=uf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dg(t,e,n,r,s,i,o,a,l){return t=new UP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ln(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gg(i),t}function BP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:io,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function yE(t){if(!t)return js;t=t._reactInternals;e:{if(Bi(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(hn(n))return yk(t,n,e)}return e}function vE(t,e,n,r,s,i,o,a,l){return t=Dg(n,r,!0,t,s,i,o,a,l),t.context=yE(null),n=t.current,r=Xt(),s=As(n),i=Vr(r,s),i.callback=e??null,Ss(n,i,s),t.current.lanes=s,oc(t,s,r),fn(t,r),t}function ah(t,e,n,r){var s=e.current,i=Xt(),o=As(s);return n=yE(n),e.context===null?e.context=n:e.pendingContext=n,e=Vr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ss(s,e,o),t!==null&&(nr(t,s,o,i),Cu(t,s,o)),o}function yd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function r_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mg(t,e){r_(t,e),(t=t.alternate)&&r_(t,e)}function zP(){return null}var _E=typeof reportError=="function"?reportError:function(t){console.error(t)};function Og(t){this._internalRoot=t}lh.prototype.render=Og.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));ah(t,e,null,null)};lh.prototype.unmount=Og.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pi(function(){ah(null,t,null,null)}),e[$r]=null}};function lh(t){this._internalRoot=t}lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<us.length&&e!==0&&e<us[n].priority;n++);us.splice(n,0,t),n===0&&Jb(t)}};function Lg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function s_(){}function $P(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=yd(o);i.call(c)}}var o=vE(e,r,t,0,null,!1,!1,"",s_);return t._reactRootContainer=o,t[$r]=o.current,Rl(t.nodeType===8?t.parentNode:t),Pi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=yd(l);a.call(c)}}var l=Dg(t,0,!1,null,null,!1,!1,"",s_);return t._reactRootContainer=l,t[$r]=l.current,Rl(t.nodeType===8?t.parentNode:t),Pi(function(){ah(e,l,n,r)}),l}function uh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=yd(o);a.call(l)}}ah(e,o,t,s)}else o=$P(n,e,t,s,r);return yd(o)}Gb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ba(e.pendingLanes);n!==0&&(tg(e,n|1),fn(e,nt()),!(Ee&6)&&(Vo=nt()+500,qs()))}break;case 13:Pi(function(){var r=Hr(t,1);if(r!==null){var s=Xt();nr(r,t,1,s)}}),Mg(t,1)}};ng=function(t){if(t.tag===13){var e=Hr(t,134217728);if(e!==null){var n=Xt();nr(e,t,134217728,n)}Mg(t,134217728)}};Qb=function(t){if(t.tag===13){var e=As(t),n=Hr(t,e);if(n!==null){var r=Xt();nr(n,t,e,r)}Mg(t,e)}};Yb=function(){return Pe};Xb=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};_p=function(t,e,n){switch(e){case"input":if(hp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=eh(r);if(!s)throw Error($(90));Cb(r),hp(r,s)}}}break;case"textarea":Pb(t,n);break;case"select":e=n.value,e!=null&&_o(t,!!n.multiple,e,!1)}};jb=Ag;Vb=Pi;var HP={usingClientEntryPoint:!1,Events:[lc,uo,eh,Ob,Lb,Ag]},Ra={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WP={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bb(t),t===null?null:t.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||zP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Yd=eu.inject(WP),yr=eu}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HP;Cn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lg(e))throw Error($(200));return BP(t,e,null,n)};Cn.createRoot=function(t,e){if(!Lg(t))throw Error($(299));var n=!1,r="",s=_E;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Dg(t,1,!1,null,null,n,!1,r,s),t[$r]=e.current,Rl(t.nodeType===8?t.parentNode:t),new Og(e)};Cn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Bb(e),t=t===null?null:t.stateNode,t};Cn.flushSync=function(t){return Pi(t)};Cn.hydrate=function(t,e,n){if(!ch(e))throw Error($(200));return uh(null,t,e,!0,n)};Cn.hydrateRoot=function(t,e,n){if(!Lg(t))throw Error($(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=_E;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=vE(e,null,t,1,n??null,s,!1,i,o),t[$r]=e.current,Rl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new lh(e)};Cn.render=function(t,e,n){if(!ch(e))throw Error($(200));return uh(null,t,e,!1,n)};Cn.unmountComponentAtNode=function(t){if(!ch(t))throw Error($(40));return t._reactRootContainer?(Pi(function(){uh(null,null,t,!1,function(){t._reactRootContainer=null,t[$r]=null})}),!0):!1};Cn.unstable_batchedUpdates=Ag;Cn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ch(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return uh(t,e,n,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function xE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xE)}catch(t){console.error(t)}}xE(),xb.exports=Cn;var qP=xb.exports,wE,i_=qP;wE=i_.createRoot,i_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ul.apply(this,arguments)}var vs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vs||(vs={}));const o_="popstate";function KP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Jp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:vd(s)}return QP(e,n,null,t)}function He(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GP(){return Math.random().toString(36).substr(2,8)}function a_(t,e){return{usr:t.state,key:t.key,idx:e}}function Jp(t,e,n,r){return n===void 0&&(n=null),Ul({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ea(e):e,{state:n,key:e&&e.key||r||GP()})}function vd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ea(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function QP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=vs.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ul({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=vs.Pop;let E=d(),v=E==null?null:E-c;c=E,l&&l({action:a,location:k.location,delta:v})}function m(E,v){a=vs.Push;let _=Jp(k.location,E,v);c=d()+1;let b=a_(_,c),A=k.createHref(_);try{o.pushState(b,"",A)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(A)}i&&l&&l({action:a,location:k.location,delta:1})}function y(E,v){a=vs.Replace;let _=Jp(k.location,E,v);c=d();let b=a_(_,c),A=k.createHref(_);o.replaceState(b,"",A),i&&l&&l({action:a,location:k.location,delta:0})}function w(E){let v=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof E=="string"?E:vd(E);return _=_.replace(/ $/,"%20"),He(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let k={get action(){return a},get location(){return t(s,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(o_,f),l=E,()=>{s.removeEventListener(o_,f),l=null}},createHref(E){return e(s,E)},createURL:w,encodeLocation(E){let v=w(E);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:y,go(E){return o.go(E)}};return k}var l_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(l_||(l_={}));function YP(t,e,n){return n===void 0&&(n="/"),XP(t,e,n)}function XP(t,e,n,r){let s=typeof e=="string"?ea(e):e,i=Fo(s.pathname||"/",n);if(i==null)return null;let o=kE(t);JP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=c2(i);a=a2(o[l],c)}return a}function kE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(He(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Rs([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(He(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),kE(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:i2(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of EE(i.path))s(i,o,l)}),e}function EE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=EE(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function JP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:o2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZP=/^:[\w-]+$/,e2=3,t2=2,n2=1,r2=10,s2=-2,c_=t=>t==="*";function i2(t,e){let n=t.split("/"),r=n.length;return n.some(c_)&&(r+=s2),e&&(r+=t2),n.filter(s=>!c_(s)).reduce((s,i)=>s+(ZP.test(i)?e2:i===""?n2:r2),r)}function o2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function a2(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=Zp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Rs([i,f.pathname]),pathnameBase:f2(Rs([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Rs([i,f.pathnameBase]))}return o}function Zp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=l2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let k=a[f]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const w=a[f];return y&&!w?c[m]=void 0:c[m]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function l2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function c2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Fo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function u2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ea(t):t;return{pathname:n?n.startsWith("/")?n:d2(n,e):e,search:p2(r),hash:m2(s)}}function d2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Rf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function h2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jg(t,e){let n=h2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ea(t):(s=Ul({},t),He(!s.pathname||!s.pathname.includes("?"),Rf("?","pathname","search",s)),He(!s.pathname||!s.pathname.includes("#"),Rf("#","pathname","hash",s)),He(!s.search||!s.search.includes("#"),Rf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=u2(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Rs=t=>t.join("/").replace(/\/\/+/g,"/"),f2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),p2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,m2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function g2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TE=["post","put","patch","delete"];new Set(TE);const y2=["get",...TE];new Set(y2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bl.apply(this,arguments)}const dh=D.createContext(null),IE=D.createContext(null),Xr=D.createContext(null),hh=D.createContext(null),Ks=D.createContext({outlet:null,matches:[],isDataRoute:!1}),SE=D.createContext(null);function v2(t,e){let{relative:n}=e===void 0?{}:e;ta()||He(!1);let{basename:r,navigator:s}=D.useContext(Xr),{hash:i,pathname:o,search:a}=fh(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Rs([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ta(){return D.useContext(hh)!=null}function Gs(){return ta()||He(!1),D.useContext(hh).location}function CE(t){D.useContext(Xr).static||D.useLayoutEffect(t)}function uc(){let{isDataRoute:t}=D.useContext(Ks);return t?R2():_2()}function _2(){ta()||He(!1);let t=D.useContext(dh),{basename:e,future:n,navigator:r}=D.useContext(Xr),{matches:s}=D.useContext(Ks),{pathname:i}=Gs(),o=JSON.stringify(jg(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return CE(()=>{a.current=!0}),D.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=Vg(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Rs([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,i,t])}function fh(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Xr),{matches:s}=D.useContext(Ks),{pathname:i}=Gs(),o=JSON.stringify(jg(s,r.v7_relativeSplatPath));return D.useMemo(()=>Vg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function x2(t,e){return w2(t,e)}function w2(t,e,n,r){ta()||He(!1);let{navigator:s}=D.useContext(Xr),{matches:i}=D.useContext(Ks),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Gs(),d;if(e){var f;let E=typeof e=="string"?ea(e):e;l==="/"||(f=E.pathname)!=null&&f.startsWith(l)||He(!1),d=E}else d=c;let m=d.pathname||"/",y=m;if(l!=="/"){let E=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(E.length).join("/")}let w=YP(t,{pathname:y}),k=I2(w&&w.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Rs([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Rs([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&k?D.createElement(hh.Provider,{value:{location:Bl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:vs.Pop}},k):k}function b2(){let t=P2(),e=g2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const k2=D.createElement(b2,null);class E2 extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Ks.Provider,{value:this.props.routeContext},D.createElement(SE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function T2(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(dh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Ks.Provider,{value:e},r)}function I2(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||He(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:m,errors:y}=n,w=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let y,w=!1,k=null,E=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,k=f.route.errorElement||k2,l&&(c<0&&m===0?(N2("route-fallback"),w=!0,E=null):c===m&&(w=!0,E=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),_=()=>{let b;return y?b=k:w?b=E:f.route.Component?b=D.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,D.createElement(T2,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?D.createElement(E2,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var AE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(AE||{}),PE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(PE||{});function S2(t){let e=D.useContext(dh);return e||He(!1),e}function C2(t){let e=D.useContext(IE);return e||He(!1),e}function A2(t){let e=D.useContext(Ks);return e||He(!1),e}function RE(t){let e=A2(),n=e.matches[e.matches.length-1];return n.route.id||He(!1),n.route.id}function P2(){var t;let e=D.useContext(SE),n=C2(),r=RE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function R2(){let{router:t}=S2(AE.UseNavigateStable),e=RE(PE.UseNavigateStable),n=D.useRef(!1);return CE(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Bl({fromRouteId:e},i)))},[t,e])}const u_={};function N2(t,e,n){u_[t]||(u_[t]=!0)}function D2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function M2(t){let{to:e,replace:n,state:r,relative:s}=t;ta()||He(!1);let{future:i,static:o}=D.useContext(Xr),{matches:a}=D.useContext(Ks),{pathname:l}=Gs(),c=uc(),d=Vg(e,jg(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return D.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function Ir(t){He(!1)}function O2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=vs.Pop,navigator:i,static:o=!1,future:a}=t;ta()&&He(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:i,static:o,future:Bl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ea(r));let{pathname:d="/",search:f="",hash:m="",state:y=null,key:w="default"}=r,k=D.useMemo(()=>{let E=Fo(d,l);return E==null?null:{location:{pathname:E,search:f,hash:m,state:y,key:w},navigationType:s}},[l,d,f,m,y,w,s]);return k==null?null:D.createElement(Xr.Provider,{value:c},D.createElement(hh.Provider,{children:n,value:k}))}function L2(t){let{children:e,location:n}=t;return x2(em(e),n)}new Promise(()=>{});function em(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,em(r.props.children,i));return}r.type!==Ir&&He(!1),!r.props.index||!r.props.children||He(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=em(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_d.apply(this,arguments)}function NE(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function j2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function V2(t,e){return t.button===0&&(!e||e==="_self")&&!j2(t)}const F2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],U2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],B2="6";try{window.__reactRouterVersion=B2}catch{}const z2=D.createContext({isTransitioning:!1}),$2="startTransition",d_=OC[$2];function H2(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=KP({window:s,v5Compat:!0}));let o=i.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=D.useCallback(f=>{c&&d_?d_(()=>l(f)):l(f)},[l,c]);return D.useLayoutEffect(()=>o.listen(d),[o,d]),D.useEffect(()=>D2(r),[r]),D.createElement(O2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const W2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",q2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fg=D.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:f}=e,m=NE(e,F2),{basename:y}=D.useContext(Xr),w,k=!1;if(typeof c=="string"&&q2.test(c)&&(w=c,W2))try{let b=new URL(window.location.href),A=c.startsWith("//")?new URL(b.protocol+c):new URL(c),N=Fo(A.pathname,y);A.origin===b.origin&&N!=null?c=N+A.search+A.hash:k=!0}catch{}let E=v2(c,{relative:s}),v=G2(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:f});function _(b){r&&r(b),b.defaultPrevented||v(b)}return D.createElement("a",_d({},m,{href:w||E,onClick:k||i?r:_,ref:n,target:l}))}),rn=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,f=NE(e,U2),m=fh(l,{relative:f.relative}),y=Gs(),w=D.useContext(IE),{navigator:k,basename:E}=D.useContext(Xr),v=w!=null&&Q2(m)&&c===!0,_=k.encodeLocation?k.encodeLocation(m).pathname:m.pathname,b=y.pathname,A=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(b=b.toLowerCase(),A=A?A.toLowerCase():null,_=_.toLowerCase()),A&&E&&(A=Fo(A,E)||A);const N=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let M=b===_||!o&&b.startsWith(_)&&b.charAt(N)==="/",T=A!=null&&(A===_||!o&&A.startsWith(_)&&A.charAt(_.length)==="/"),x={isActive:M,isPending:T,isTransitioning:v},I=M?r:void 0,C;typeof i=="function"?C=i(x):C=[i,M?"active":null,T?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(x):a;return D.createElement(Fg,_d({},f,{"aria-current":I,className:C,ref:n,style:R,to:l,viewTransition:c}),typeof d=="function"?d(x):d)});var tm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tm||(tm={}));var h_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(h_||(h_={}));function K2(t){let e=D.useContext(dh);return e||He(!1),e}function G2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=uc(),c=Gs(),d=fh(t,{relative:o});return D.useCallback(f=>{if(V2(f,n)){f.preventDefault();let m=r!==void 0?r:vd(c)===vd(d);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function Q2(t,e){e===void 0&&(e={});let n=D.useContext(z2);n==null&&He(!1);let{basename:r}=K2(tm.useViewTransitionState),s=fh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Fo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Fo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Zp(s.pathname,o)!=null||Zp(s.pathname,i)!=null}const DE=D.createContext({theme:"light",toggleTheme:()=>{}});function Y2({children:t}){const[e,n]=D.useState(()=>{const s=typeof window<"u"?localStorage.getItem("theme"):null;return s==="light"||s==="dark"?s:"light"});D.useEffect(()=>{const s=document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=D.useMemo(()=>({theme:e,toggleTheme:()=>n(s=>s==="dark"?"light":"dark")}),[e]);return h.jsx(DE.Provider,{value:r,children:t})}function X2(){return D.useContext(DE)}var f_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},J2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},OE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[d],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ME(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):J2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new Z2;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const w=c<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Z2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eR=function(t){const e=ME(t);return OE.encodeByteArray(e,!0)},xd=function(t){return eR(t).replace(/\./g,"")},LE=function(t){try{return OE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=()=>tR().__FIREBASE_DEFAULTS__,rR=()=>{if(typeof process>"u"||typeof f_>"u")return;const t=f_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LE(t[1]);return e&&JSON.parse(e)},ph=()=>{try{return nR()||rR()||sR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jE=t=>{var e,n;return(n=(e=ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VE=t=>{const e=jE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},FE=()=>{var t;return(t=ph())===null||t===void 0?void 0:t.config},UE=t=>{var e;return(e=ph())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xd(JSON.stringify(n)),xd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bt())}function aR(){var t;const e=(t=ph())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ug(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uR(){const t=Bt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dR(){return!aR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bg(){try{return typeof indexedDB=="object"}catch{return!1}}function zg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function zE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="FirebaseError";class $n extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hR,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zi.prototype.create)}}class zi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?fR(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new $n(s,a,r)}}function fR(t,e){return t.replace(pR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const pR=/\{\$([^}]+)}/g;function mR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(p_(i)&&p_(o)){if(!zl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function p_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $a(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ha(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function gR(t,e){const n=new yR(t,e);return n.subscribe.bind(n)}class yR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");vR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Nf),s.error===void 0&&(s.error=Nf),s.complete===void 0&&(s.complete=Nf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=1e3,xR=2,wR=4*60*60*1e3,bR=.5;function m_(t,e=_R,n=xR){const r=e*Math.pow(n,t),s=Math.round(bR*r*(Math.random()-.5)*2);return Math.min(wR,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class Bn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TR(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ER(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ER(t){return t===ci?void 0:t}function TR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const SR={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},CR=ve.INFO,AR={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},PR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mh{constructor(e){this.name=e,this._logLevel=CR,this._logHandler=PR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const RR=(t,e)=>e.some(n=>t instanceof n);let g_,y_;function NR(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DR(){return y_||(y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $E=new WeakMap,nm=new WeakMap,HE=new WeakMap,Df=new WeakMap,$g=new WeakMap;function MR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ns(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$E.set(n,t)}).catch(()=>{}),$g.set(e,t),e}function OR(t){if(nm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});nm.set(t,e)}let rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LR(t){rm=t(rm)}function jR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mf(this),e,...n);return HE.set(r,e.sort?e.sort():[e]),Ns(r)}:DR().includes(t)?function(...e){return t.apply(Mf(this),e),Ns($E.get(this))}:function(...e){return Ns(t.apply(Mf(this),e))}}function VR(t){return typeof t=="function"?jR(t):(t instanceof IDBTransaction&&OR(t),RR(t,NR())?new Proxy(t,rm):t)}function Ns(t){if(t instanceof IDBRequest)return MR(t);if(Df.has(t))return Df.get(t);const e=VR(t);return e!==t&&(Df.set(t,e),$g.set(e,t)),e}const Mf=t=>$g.get(t);function WE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ns(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ns(o.result),l.oldVersion,l.newVersion,Ns(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const FR=["get","getKey","getAll","getAllKeys","count"],UR=["put","add","delete","clear"],Of=new Map;function v_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Of.get(e))return Of.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=UR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||FR.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Of.set(e,i),i}LR(t=>({...t,get:(e,n,r)=>v_(e,n)||t.get(e,n,r),has:(e,n)=>!!v_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sm="@firebase/app",__="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new mh("@firebase/app"),$R="@firebase/app-compat",HR="@firebase/analytics-compat",WR="@firebase/analytics",qR="@firebase/app-check-compat",KR="@firebase/app-check",GR="@firebase/auth",QR="@firebase/auth-compat",YR="@firebase/database",XR="@firebase/data-connect",JR="@firebase/database-compat",ZR="@firebase/functions",eN="@firebase/functions-compat",tN="@firebase/installations",nN="@firebase/installations-compat",rN="@firebase/messaging",sN="@firebase/messaging-compat",iN="@firebase/performance",oN="@firebase/performance-compat",aN="@firebase/remote-config",lN="@firebase/remote-config-compat",cN="@firebase/storage",uN="@firebase/storage-compat",dN="@firebase/firestore",hN="@firebase/vertexai-preview",fN="@firebase/firestore-compat",pN="firebase",mN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="[DEFAULT]",gN={[sm]:"fire-core",[$R]:"fire-core-compat",[WR]:"fire-analytics",[HR]:"fire-analytics-compat",[KR]:"fire-app-check",[qR]:"fire-app-check-compat",[GR]:"fire-auth",[QR]:"fire-auth-compat",[YR]:"fire-rtdb",[XR]:"fire-data-connect",[JR]:"fire-rtdb-compat",[ZR]:"fire-fn",[eN]:"fire-fn-compat",[tN]:"fire-iid",[nN]:"fire-iid-compat",[rN]:"fire-fcm",[sN]:"fire-fcm-compat",[iN]:"fire-perf",[oN]:"fire-perf-compat",[aN]:"fire-rc",[lN]:"fire-rc-compat",[cN]:"fire-gcs",[uN]:"fire-gcs-compat",[dN]:"fire-fst",[fN]:"fire-fst-compat",[hN]:"fire-vertex","fire-js":"fire-js",[pN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,yN=new Map,om=new Map;function x_(t,e){try{t.container.addComponent(e)}catch(n){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function or(t){const e=t.name;if(om.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;om.set(e,t);for(const n of wd.values())x_(n,t);for(const n of yN.values())x_(n,t);return!0}function Qs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new zi("app","Firebase",vN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=mN;function qE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:im,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ds.create("bad-app-name",{appName:String(s)});if(n||(n=FE()),!n)throw Ds.create("no-options");const i=wd.get(s);if(i){if(zl(n,i.options)&&zl(r,i.config))return i;throw Ds.create("duplicate-app",{appName:s})}const o=new IR(s);for(const l of om.values())o.addComponent(l);const a=new _N(n,r,o);return wd.set(s,a),a}function gh(t=im){const e=wd.get(t);if(!e&&t===im&&FE())return qE();if(!e)throw Ds.create("no-app",{appName:t});return e}function pn(t,e,n){var r;let s=(r=gN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(a.join(" "));return}or(new Bn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="firebase-heartbeat-database",wN=1,$l="firebase-heartbeat-store";let Lf=null;function KE(){return Lf||(Lf=WE(xN,wN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($l)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ds.create("idb-open",{originalErrorMessage:t.message})})),Lf}async function bN(t){try{const n=(await KE()).transaction($l),r=await n.objectStore($l).get(GE(t));return await n.done,r}catch(e){if(e instanceof $n)qr.warn(e.message);else{const n=Ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qr.warn(n.message)}}}async function w_(t,e){try{const r=(await KE()).transaction($l,"readwrite");await r.objectStore($l).put(e,GE(t)),await r.done}catch(n){if(n instanceof $n)qr.warn(n.message);else{const r=Ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qr.warn(r.message)}}}function GE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=1024,EN=30*24*60*60*1e3;class TN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=b_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=EN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b_(),{heartbeatsToSend:r,unsentEntries:s}=IN(this._heartbeatsCache.heartbeats),i=xd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return qr.warn(n),""}}}function b_(){return new Date().toISOString().substring(0,10)}function IN(t,e=kN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),k_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),k_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bg()?zg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return w_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return w_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function k_(t){return xd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){or(new Bn("platform-logger",e=>new BR(e),"PRIVATE")),or(new Bn("heartbeat",e=>new TN(e),"PRIVATE")),pn(sm,__,t),pn(sm,__,"esm2017"),pn("fire-js","")}CN("");var AN="firebase",PN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn(AN,PN,"app");function Hg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function QE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RN=QE,YE=new zi("auth","Firebase",QE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new mh("@firebase/auth");function NN(t,...e){bd.logLevel<=ve.WARN&&bd.warn(`Auth (${$i}): ${t}`,...e)}function Ou(t,...e){bd.logLevel<=ve.ERROR&&bd.error(`Auth (${$i}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,...e){throw qg(t,...e)}function mn(t,...e){return qg(t,...e)}function Wg(t,e,n){const r=Object.assign(Object.assign({},RN()),{[e]:n});return new zi("auth","Firebase",r).create(e,{appName:t.name})}function rr(t){return Wg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XE(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&zn(t,"argument-error"),Wg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YE.create(t,...e)}function ee(t,e,...n){if(!t)throw qg(e,...n)}function Or(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ou(e),new Error(e)}function Kr(t,e){t||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JE(){return E_()==="http:"||E_()==="https:"}function E_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JE()||Ug()||"connection"in navigator)?navigator.onLine:!0}function MN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kr(n>e,"Short delay should be less than long delay!"),this.isMobile=oR()||cR()}get(){return DN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){Kr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new dc(3e4,6e4);function vn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pn(t,e,n,r,s={}){return eT(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=na(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return lR()||(c.referrerPolicy="no-referrer"),ZE.fetch()(tT(t,t.config.apiHost,n,a),c)})}async function eT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ON),e);try{const s=new VN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wa(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Wg(t,d,c);zn(t,d)}}catch(s){if(s instanceof $n)throw s;zn(t,"network-request-failed",{message:String(s)})}}async function Ys(t,e,n,r,s={}){const i=await Pn(t,e,n,r,s);return"mfaPendingCredential"in i&&zn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function tT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Kg(t.config,s):`${t.config.apiScheme}://${s}`}function jN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mn(this.auth,"network-request-failed")),LN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=mn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){return t!==void 0&&t.getResponse!==void 0}function I_(t){return t!==void 0&&t.enterprise!==void 0}class FN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t){return(await Pn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function BN(t,e){return Pn(t,"GET","/v2/recaptchaConfig",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){return Pn(t,"POST","/v1/accounts:delete",e)}async function nT(t,e){return Pn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $N(t,e=!1){const n=qe(t),r=await n.getIdToken(e),s=Gg(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ll(jf(s.auth_time)),issuedAtTime:ll(jf(s.iat)),expirationTime:ll(jf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function jf(t){return Number(t)*1e3}function Gg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ou("JWT malformed, contained fewer than 3 sections"),null;try{const s=LE(n);return s?JSON.parse(s):(Ou("Failed to decode base64 JWT payload"),null)}catch(s){return Ou("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function S_(t){const e=Gg(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $n&&HN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function HN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Uo(t,nT(n,{idToken:r}));ee(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?rT(i.providerUserInfo):[],a=KN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new lm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function qN(t){const e=qe(t);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function rT(t){return t.map(e=>{var{providerId:n}=e,r=Hg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){const n=await eT(t,{},async()=>{const r=na({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=tT(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ZE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QN(t,e){return Pn(t,"POST","/v2/accounts:revokeToken",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=S_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await GN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new To;return r&&(ee(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ee(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Lr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Uo(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $N(this,e)}reload(){return qN(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await Uo(this,zN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:A,isAnonymous:N,providerData:M,stsTokenManager:T}=n;ee(b&&T,e,"internal-error");const x=To.fromJSON(this.name,T);ee(typeof b=="string",e,"internal-error"),is(f,e.name),is(m,e.name),ee(typeof A=="boolean",e,"internal-error"),ee(typeof N=="boolean",e,"internal-error"),is(y,e.name),is(w,e.name),is(k,e.name),is(E,e.name),is(v,e.name),is(_,e.name);const I=new Lr({uid:b,auth:e,email:m,emailVerified:A,displayName:f,isAnonymous:N,photoURL:w,phoneNumber:y,tenantId:k,stsTokenManager:x,createdAt:v,lastLoginAt:_});return M&&Array.isArray(M)&&(I.providerData=M.map(C=>Object.assign({},C))),E&&(I._redirectEventId=E),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new To;s.updateFromServerResponse(n);const i=new Lr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?rT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new To;a.updateFromIdToken(r);const l=new Lr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new lm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=new Map;function jr(t){Kr(t instanceof Function,"Expected a class definition");let e=C_.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,C_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sT.type="NONE";const A_=sT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){return`firebase:${t}:${e}:${n}`}class Io{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Lu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Lu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Lr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Io(jr(A_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||jr(A_);const o=Lu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=Lr._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Io(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Io(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uT(e))return"Blackberry";if(dT(e))return"Webos";if(oT(e))return"Safari";if((e.includes("chrome/")||aT(e))&&!e.includes("edge/"))return"Chrome";if(cT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function iT(t=Bt()){return/firefox\//i.test(t)}function oT(t=Bt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aT(t=Bt()){return/crios\//i.test(t)}function lT(t=Bt()){return/iemobile/i.test(t)}function cT(t=Bt()){return/android/i.test(t)}function uT(t=Bt()){return/blackberry/i.test(t)}function dT(t=Bt()){return/webos/i.test(t)}function Qg(t=Bt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YN(t=Bt()){var e;return Qg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XN(){return uR()&&document.documentMode===10}function hT(t=Bt()){return Qg(t)||cT(t)||dT(t)||uT(t)||/windows phone/i.test(t)||lT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e=[]){let n;switch(t){case"Browser":n=P_(Bt());break;case"Worker":n=`${P_(Bt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$i}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e={}){return Pn(t,"GET","/v2/passwordPolicy",vn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=6;class tD{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new JN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nT(this,{idToken:e}),r=await Lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(rr(this));const n=e?qe(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZN(this),n=new tD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await QN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jr(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&NN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Hn(t){return qe(t)}class R_{constructor(e){this.auth=e,this.observer=null,this.addObserver=gR(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rD(t){hc=t}function Yg(t){return hc.loadJS(t)}function sD(){return hc.recaptchaV2Script}function iD(){return hc.recaptchaEnterpriseScript}function oD(){return hc.gapiScript}function pT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const aD="recaptcha-enterprise",lD="NO_RECAPTCHA";class cD{constructor(e){this.type=aD,this.auth=Hn(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{BN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new FN(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;I_(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(lD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&I_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=iD();l.length!==0&&(l+=a),Yg(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function N_(t,e,n,r=!1){const s=new cD(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function cm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await N_(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await N_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e){const n=Qs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(zl(i,e??{}))return s;zn(s,"already-initialized")}return n.initialize({options:e})}function dD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hD(t,e,n){const r=Hn(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=mT(e),{host:o,port:a}=fD(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),pD()}function mT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fD(t){const e=mT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:D_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:D_(o)}}}function D_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,n){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function mD(t,e){return Pn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t,e){return Ys(t,"POST","/v1/accounts:signInWithPassword",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e){return Ys(t,"POST","/v1/accounts:signInWithEmailLink",vn(t,e))}async function vD(t,e){return Ys(t,"POST","/v1/accounts:signInWithEmailLink",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends yh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Hl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Hl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cm(e,n,"signInWithPassword",gD);case"emailLink":return yD(e,{email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cm(e,r,"signUpPassword",mD);case"emailLink":return vD(e,{idToken:n,email:this._email,oobCode:this._password});default:zn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e){return Ys(t,"POST","/v1/accounts:signInWithIdp",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="http://localhost";class Ri extends yh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ri(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Hg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ri(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,So(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:_D,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=na(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(t,e){return Pn(t,"POST","/v1/accounts:sendVerificationCode",vn(t,e))}async function wD(t,e){return Ys(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,e))}async function bD(t,e){const n=await Ys(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,e));if(n.temporaryProof)throw Wa(t,"account-exists-with-different-credential",n);return n}const kD={USER_NOT_FOUND:"user-not-found"};async function ED(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ys(t,"POST","/v1/accounts:signInWithPhoneNumber",vn(t,n),kD)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends yh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new cl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new cl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return wD(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return bD(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return ED(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new cl({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ID(t){const e=$a(Ha(t)).link,n=e?$a(Ha(e)).deep_link_id:null,r=$a(Ha(t)).deep_link_id;return(r?$a(Ha(r)).link:null)||r||n||e||t}class Xg{constructor(e){var n,r,s,i,o,a;const l=$a(Ha(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,f=TD((s=l.mode)!==null&&s!==void 0?s:null);ee(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=ID(e);try{return new Xg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.providerId=ra.PROVIDER_ID}static credential(e,n){return Hl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Xg.parseLink(n);return ee(r,"argument-error"),Hl._fromEmailAndCode(e,r.code,r.tenantId)}}ra.PROVIDER_ID="password";ra.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ra.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends vh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends fc{constructor(){super("facebook.com")}static credential(e){return Ri._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ri._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends fc{constructor(){super("github.com")}static credential(e){return Ri._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends fc{constructor(){super("twitter.com")}static credential(e,n){return Ri._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ps.credential(n,r)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(t,e){return Ys(t,"POST","/v1/accounts:signUp",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Lr._fromIdTokenResponse(e,r,s),o=M_(r);return new Ni({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=M_(r);return new Ni({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function M_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends $n{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ed(e,n,r,s)}}function gT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(t,i,e,r):i})}async function CD(t,e,n=!1){const r=await Uo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ni._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e,n=!1){const{auth:r}=t;if(kn(r.app))return Promise.reject(rr(r));const s="reauthenticate";try{const i=await Uo(t,gT(r,s,e,t),n);ee(i.idToken,r,"internal-error");const o=Gg(i.idToken);ee(o,r,"internal-error");const{sub:a}=o;return ee(t.uid===a,r,"user-mismatch"),Ni._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&zn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(t,e,n=!1){if(kn(t.app))return Promise.reject(rr(t));const r="signIn",s=await gT(t,r,e),i=await Ni._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function vT(t,e){return yT(Hn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(t){const e=Hn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PD(t,e,n){if(kn(t.app))return Promise.reject(rr(t));const r=Hn(t),o=await cm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&_T(t),l}),a=await Ni._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function RD(t,e,n){return kn(t.app)?Promise.reject(rr(t)):vT(qe(t),ra.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_T(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e){return Pn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=qe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Uo(r,ND(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function DD(t,e,n,r){return qe(t).onIdTokenChanged(e,n,r)}function MD(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function OD(t,e,n,r){return qe(t).onAuthStateChanged(e,n,r)}function LD(t){return qe(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e){return Pn(t,"POST","/v2/accounts/mfaEnrollment:start",vn(t,e))}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=1e3,FD=10;class bT extends wT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);XN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bT.type="LOCAL";const UD=bT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends wT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kT.type="SESSION";const ET=kT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await BD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Jg("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return window}function $D(t){dt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(){return typeof dt().WorkerGlobalScope<"u"&&typeof dt().importScripts=="function"}async function HD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qD(){return Zg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="firebaseLocalStorageDb",KD=1,Id="firebaseLocalStorage",IT="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xh(t,e){return t.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function GD(){const t=indexedDB.deleteDatabase(TT);return new pc(t).toPromise()}function um(){const t=indexedDB.open(TT,KD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Id,{keyPath:IT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Id)?e(r):(r.close(),await GD(),e(await um()))})})}async function O_(t,e,n){const r=xh(t,!0).put({[IT]:e,value:n});return new pc(r).toPromise()}async function QD(t,e){const n=xh(t,!1).get(e),r=await new pc(n).toPromise();return r===void 0?null:r.value}function L_(t,e){const n=xh(t,!0).delete(e);return new pc(n).toPromise()}const YD=800,XD=3;class ST{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_h._getInstance(qD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await HD(),!this.activeServiceWorker)return;this.sender=new zD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await um();return await O_(e,Td,"1"),await L_(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>O_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>L_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=xh(s,!1).getAll();return new pc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ST.type="LOCAL";const JD=ST;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t,e){return Pn(t,"POST","/v2/accounts/mfaSignIn:start",vn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=500,tM=6e4,tu=1e12;class nM{constructor(e){this.auth=e,this.counter=tu,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new rM(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||tu;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||tu;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||tu;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class rM{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;ee(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=sM(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},tM)},eM))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function sM(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=pT("rcb"),iM=new dc(3e4,6e4);class oM{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=dt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return ee(aM(n),e,"argument-error"),this.shouldResolveImmediately(n)&&T_(dt().grecaptcha)?Promise.resolve(dt().grecaptcha):new Promise((r,s)=>{const i=dt().setTimeout(()=>{s(mn(e,"network-request-failed"))},iM.get());dt()[Vf]=()=>{dt().clearTimeout(i),delete dt()[Vf];const a=dt().grecaptcha;if(!a||!T_(a)){s(mn(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const f=l(c,d);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${sD()}?${na({onload:Vf,render:"explicit",hl:n})}`;Yg(o).catch(()=>{clearTimeout(i),s(mn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=dt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function aM(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class lM{async load(e){return new nM(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="recaptcha",cM={theme:"light",type:"image"};class uM{constructor(e,n,r=Object.assign({},cM)){this.parameters=r,this.type=CT,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Hn(e),this.isInvisible=this.parameters.size==="invisible",ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;ee(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new lM:new oM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=dt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ee(JE()&&!Zg(),this.auth,"internal-error"),await dM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await UN(this.auth);ee(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function dM(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=cl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function fM(t,e,n){if(kn(t.app))return Promise.reject(rr(t));const r=Hn(t),s=await pM(r,e,qe(n));return new hM(s,i=>vT(r,i))}async function pM(t,e,n){var r;const s=await n.verify();try{ee(typeof s=="string",t,"argument-error"),ee(n.type===CT,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i)return ee(o.type==="enroll",t,"internal-error"),(await jD(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{ee(o.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return ee(a,t,"missing-multi-factor-info"),(await ZD(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await xD(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e){return e?jr(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends yh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mM(t){return yT(t.auth,new t0(t),t.bypassAuthState)}function gM(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),AD(n,new t0(t),t.bypassAuthState)}async function yM(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),CD(n,new t0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mM;case"linkViaPopup":case"linkViaRedirect":return yM;case"reauthViaPopup":case"reauthViaRedirect":return gM;default:zn(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new dc(2e3,1e4);async function _M(t,e,n){if(kn(t.app))return Promise.reject(mn(t,"operation-not-supported-in-this-environment"));const r=Hn(t);XE(t,e,vh);const s=e0(r,n);return new mi(r,"signInViaPopup",e,s).executeNotNull()}class mi extends AT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,mi.currentPopupAction&&mi.currentPopupAction.cancel(),mi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=Jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vM.get())};e()}}mi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="pendingRedirect",ju=new Map;class wM extends AT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ju.get(this.auth._key());if(!e){try{const r=await bM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ju.set(this.auth._key(),e)}return this.bypassAuthState||ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bM(t,e){const n=RT(e),r=PT(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function kM(t,e){return PT(t)._set(RT(e),"true")}function EM(t,e){ju.set(t._key(),e)}function PT(t){return jr(t._redirectPersistence)}function RT(t){return Lu(xM,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t,e,n){return TM(t,e,n)}async function TM(t,e,n){if(kn(t.app))return Promise.reject(rr(t));const r=Hn(t);XE(t,e,vh),await r._initializationPromise;const s=e0(r,n);return await kM(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function IM(t,e){return await Hn(t)._initializationPromise,NT(t,e,!1)}async function NT(t,e,n=!1){if(kn(t.app))return Promise.reject(rr(t));const r=Hn(t),s=e0(r,e),o=await new wM(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=10*60*1e3;class CM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SM&&this.cachedEventUids.clear(),this.cachedEventUids.has(V_(e))}saveEventToCache(e){this.cachedEventUids.add(V_(e)),this.lastProcessedEventTime=Date.now()}}function V_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(t,e={}){return Pn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NM=/^https?/;async function DM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await PM(t);for(const n of e)try{if(MM(n))return}catch{}zn(t,"unauthorized-domain")}function MM(t){const e=am(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!NM.test(n))return!1;if(RM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new dc(3e4,6e4);function F_(){const t=dt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LM(t){return new Promise((e,n)=>{var r,s,i;function o(){F_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F_(),n(mn(t,"network-request-failed"))},timeout:OM.get()})}if(!((s=(r=dt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=dt().gapi)===null||i===void 0)&&i.load)o();else{const a=pT("iframefcb");return dt()[a]=()=>{gapi.load?o():n(mn(t,"network-request-failed"))},Yg(`${oD()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Vu=null,e})}let Vu=null;function jM(t){return Vu=Vu||LM(t),Vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new dc(5e3,15e3),FM="__/auth/iframe",UM="emulator/auth/iframe",BM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $M(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kg(e,UM):`https://${t.config.authDomain}/${FM}`,r={apiKey:e.apiKey,appName:t.name,v:$i},s=zM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${na(r).slice(1)}`}async function HM(t){const e=await jM(t),n=dt().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:$M(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=mn(t,"network-request-failed"),a=dt().setTimeout(()=>{i(o)},VM.get());function l(){dt().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qM=500,KM=600,GM="_blank",QM="http://localhost";class U_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YM(t,e,n,r=qM,s=KM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},WM),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Bt().toLowerCase();n&&(a=aT(c)?GM:n),iT(c)&&(e=e||QM,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,w])=>`${m}${y}=${w},`,"");if(YN(c)&&a!=="_self")return XM(e||"",a),new U_(null);const f=window.open(e||"",a,d);ee(f,t,"popup-blocked");try{f.focus()}catch{}return new U_(f)}function XM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="__/auth/handler",ZM="emulator/auth/handler",eO=encodeURIComponent("fac");async function B_(t,e,n,r,s,i){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$i,eventId:s};if(e instanceof vh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",mR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof fc){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${eO}=${encodeURIComponent(l)}`:"";return`${tO(t)}?${na(a).slice(1)}${c}`}function tO({config:t}){return t.emulator?Kg(t,ZM):`https://${t.authDomain}/${JM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="webStorageSupport";class nO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ET,this._completeRedirectFn=NT,this._overrideRedirectResult=EM}async _openPopup(e,n,r,s){var i;Kr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await B_(e,n,r,am(),s);return YM(e,o,Jg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await B_(e,n,r,am(),s);return $D(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await HM(e),r=new CM(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ff,{type:Ff},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ff];o!==void 0&&n(!!o),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hT()||oT()||Qg()}}const rO=nO;var z_="@firebase/auth",$_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oO(t){or(new Bn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ee(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fT(t)},c=new nD(r,s,i,l);return dD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),or(new Bn("auth-internal",e=>{const n=Hn(e.getProvider("auth").getImmediate());return(r=>new sO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pn(z_,$_,iO(t)),pn(z_,$_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=5*60,lO=UE("authIdTokenMaxAge")||aO;let H_=null;const cO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lO)return;const s=n==null?void 0:n.token;H_!==s&&(H_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function uO(t=gh()){const e=Qs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uD(t,{popupRedirectResolver:rO,persistence:[JD,UD,ET]}),r=UE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=cO(i.toString());MD(n,o,()=>o(n.currentUser)),DD(n,a=>o(a))}}const s=jE("auth");return s&&hD(n,`http://${s}`),n}function dO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=mn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",dO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oO("Browser");const MT="@firebase/installations",n0="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=1e4,LT=`w:${n0}`,jT="FIS_v2",hO="https://firebaseinstallations.googleapis.com/v1",fO=60*60*1e3,pO="installations",mO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Di=new zi(pO,mO,gO);function VT(t){return t instanceof $n&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT({projectId:t}){return`${hO}/projects/${t}/installations`}function UT(t){return{token:t.token,requestStatus:2,expiresIn:vO(t.expiresIn),creationTime:Date.now()}}async function BT(t,e){const r=(await e.json()).error;return Di.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function zT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yO(t,{refreshToken:e}){const n=zT(t);return n.append("Authorization",_O(e)),n}async function $T(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vO(t){return Number(t.replace("s","000"))}function _O(t){return`${jT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=FT(t),s=zT(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:jT,appId:t.appId,sdkVersion:LT},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await $T(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:UT(c.authToken)}}else throw await BT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=/^[cdef][\w-]{21}$/,dm="";function kO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=EO(t);return bO.test(n)?n:dm}catch{return dm}}function EO(t){return wO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=new Map;function qT(t,e){const n=wh(t);KT(n,e),TO(n,e)}function KT(t,e){const n=WT.get(t);if(n)for(const r of n)r(e)}function TO(t,e){const n=IO();n&&n.postMessage({key:t,fid:e}),SO()}let gi=null;function IO(){return!gi&&"BroadcastChannel"in self&&(gi=new BroadcastChannel("[Firebase] FID Change"),gi.onmessage=t=>{KT(t.data.key,t.data.fid)}),gi}function SO(){WT.size===0&&gi&&(gi.close(),gi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="firebase-installations-database",AO=1,Mi="firebase-installations-store";let Uf=null;function r0(){return Uf||(Uf=WE(CO,AO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Mi)}}})),Uf}async function Sd(t,e){const n=wh(t),s=(await r0()).transaction(Mi,"readwrite"),i=s.objectStore(Mi),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&qT(t,e.fid),e}async function GT(t){const e=wh(t),r=(await r0()).transaction(Mi,"readwrite");await r.objectStore(Mi).delete(e),await r.done}async function bh(t,e){const n=wh(t),s=(await r0()).transaction(Mi,"readwrite"),i=s.objectStore(Mi),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&qT(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s0(t){let e;const n=await bh(t.appConfig,r=>{const s=PO(r),i=RO(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===dm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function PO(t){const e=t||{fid:kO(),registrationStatus:0};return QT(e)}function RO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Di.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=NO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:DO(t)}:{installationEntry:e}}async function NO(t,e){try{const n=await xO(t,e);return Sd(t.appConfig,n)}catch(n){throw VT(n)&&n.customData.serverCode===409?await GT(t.appConfig):await Sd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function DO(t){let e=await W_(t.appConfig);for(;e.registrationStatus===1;)await HT(100),e=await W_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await s0(t);return r||n}return e}function W_(t){return bh(t,e=>{if(!e)throw Di.create("installation-not-found");return QT(e)})}function QT(t){return MO(t)?{fid:t.fid,registrationStatus:0}:t}function MO(t){return t.registrationStatus===1&&t.registrationTime+OT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OO({appConfig:t,heartbeatServiceProvider:e},n){const r=LO(t,n),s=yO(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:LT,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await $T(()=>fetch(r,a));if(l.ok){const c=await l.json();return UT(c)}else throw await BT("Generate Auth Token",l)}function LO(t,{fid:e}){return`${FT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i0(t,e=!1){let n;const r=await bh(t.appConfig,i=>{if(!YT(i))throw Di.create("not-registered");const o=i.authToken;if(!e&&FO(o))return i;if(o.requestStatus===1)return n=jO(t,e),i;{if(!navigator.onLine)throw Di.create("app-offline");const a=BO(i);return n=VO(t,a),a}});return n?await n:r.authToken}async function jO(t,e){let n=await q_(t.appConfig);for(;n.authToken.requestStatus===1;)await HT(100),n=await q_(t.appConfig);const r=n.authToken;return r.requestStatus===0?i0(t,e):r}function q_(t){return bh(t,e=>{if(!YT(e))throw Di.create("not-registered");const n=e.authToken;return zO(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function VO(t,e){try{const n=await OO(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Sd(t.appConfig,r),n}catch(n){if(VT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await GT(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Sd(t.appConfig,r)}throw n}}function YT(t){return t!==void 0&&t.registrationStatus===2}function FO(t){return t.requestStatus===2&&!UO(t)}function UO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fO}function BO(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function zO(t){return t.requestStatus===1&&t.requestTime+OT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(t){const e=t,{installationEntry:n,registrationPromise:r}=await s0(e);return r?r.catch(console.error):i0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(t,e=!1){const n=t;return await WO(n),(await i0(n,e)).token}async function WO(t){const{registrationPromise:e}=await s0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){if(!t||!t.options)throw Bf("App Configuration");if(!t.name)throw Bf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Bf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Bf(t){return Di.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="installations",KO="installations-internal",GO=t=>{const e=t.getProvider("app").getImmediate(),n=qO(e),r=Qs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},QO=t=>{const e=t.getProvider("app").getImmediate(),n=Qs(e,XT).getImmediate();return{getId:()=>$O(n),getToken:s=>HO(n,s)}};function YO(){or(new Bn(XT,GO,"PUBLIC")),or(new Bn(KO,QO,"PRIVATE"))}YO();pn(MT,n0);pn(MT,n0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="analytics",XO="firebase_id",JO="origin",ZO=60*1e3,eL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",o0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=new mh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},In=new zi("analytics","Analytics",tL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){if(!t.startsWith(o0)){const e=In.create("invalid-gtag-resource",{gtagURL:t});return gn.warn(e.message),""}return t}function JT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function rL(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function sL(t,e){const n=rL("firebase-js-sdk-policy",{createScriptURL:nL}),r=document.createElement("script"),s=`${o0}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function iL(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function oL(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await JT(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){gn.error(a)}t("config",s,i)}async function aL(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await JT(n);for(const l of o){const c=a.find(f=>f.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){gn.error(i)}}function lL(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await aL(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await oL(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){gn.error(a)}}return s}function cL(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=lL(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function uL(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(o0)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=30,hL=1e3;class fL{constructor(e={},n=hL){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ZT=new fL;function pL(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function mL(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:pL(r)},i=eL.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw In.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function gL(t,e=ZT,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw In.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw In.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new _L;return setTimeout(async()=>{a.abort()},ZO),e1({appId:r,apiKey:s,measurementId:i},o,a,e)}async function e1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=ZT){var i;const{appId:o,measurementId:a}=t;try{await yL(r,e)}catch(l){if(a)return gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await mL(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!vL(c)){if(s.deleteThrottleMetadata(o),a)return gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?m_(n,s.intervalMillis,dL):m_(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,f),gn.debug(`Calling attemptFetch again in ${d} millis`),e1(t,f,r,s)}}function yL(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(In.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vL(t){if(!(t instanceof $n)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class _L{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function xL(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(){if(Bg())try{await zg()}catch(t){return gn.warn(In.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return gn.warn(In.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function bL(t,e,n,r,s,i,o){var a;const l=gL(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&gn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>gn.error(y)),e.push(l);const c=wL().then(y=>{if(y)return r.getId()}),[d,f]=await Promise.all([l,c]);uL(i)||sL(i,d.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[JO]="firebase",m.update=!0,f!=null&&(m[XO]=f),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.app=e}_delete(){return delete ul[this.app.options.appId],Promise.resolve()}}let ul={},K_=[];const G_={};let zf="dataLayer",EL="gtag",Q_,t1,Y_=!1;function TL(){const t=[];if(Ug()&&t.push("This is a browser extension environment."),zE()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=In.create("invalid-analytics-context",{errorInfo:e});gn.warn(n.message)}}function IL(t,e,n){TL();const r=t.options.appId;if(!r)throw In.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw In.create("no-api-key");if(ul[r]!=null)throw In.create("already-exists",{id:r});if(!Y_){iL(zf);const{wrappedGtag:i,gtagCore:o}=cL(ul,K_,G_,zf,EL);t1=i,Q_=o,Y_=!0}return ul[r]=bL(t,K_,G_,e,Q_,zf,n),new kL(t)}function SL(t=gh()){t=qe(t);const e=Qs(t,Cd);return e.isInitialized()?e.getImmediate():CL(t)}function CL(t,e={}){const n=Qs(t,Cd);if(n.isInitialized()){const s=n.getImmediate();if(zl(e,n.getOptions()))return s;throw In.create("already-initialized")}return n.initialize({options:e})}async function AL(){if(Ug()||!zE()||!Bg())return!1;try{return await zg()}catch{return!1}}function PL(t,e,n,r){t=qe(t),xL(t1,ul[t.app.options.appId],e,n,r).catch(s=>gn.error(s))}const X_="@firebase/analytics",J_="0.10.8";function RL(){or(new Bn(Cd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return IL(r,s,n)},"PUBLIC")),or(new Bn("analytics-internal",t,"PRIVATE")),pn(X_,J_),pn(X_,J_,"esm2017");function t(e){try{const n=e.getProvider(Cd).getImmediate();return{logEvent:(r,s,i)=>PL(n,r,s,i)}}catch(n){throw In.create("interop-component-reg-failed",{reason:n})}}}RL();var Z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,n1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,x){function I(){}I.prototype=x.prototype,T.D=x.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(C,R,O){for(var P=Array(arguments.length-2),J=2;J<arguments.length;J++)P[J-2]=arguments[J];return x.prototype[R].apply(C,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,x,I){I||(I=0);var C=Array(16);if(typeof x=="string")for(var R=0;16>R;++R)C[R]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(R=0;16>R;++R)C[R]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=T.g[0],I=T.g[1],R=T.g[2];var O=T.g[3],P=x+(O^I&(R^O))+C[0]+3614090360&4294967295;x=I+(P<<7&4294967295|P>>>25),P=O+(R^x&(I^R))+C[1]+3905402710&4294967295,O=x+(P<<12&4294967295|P>>>20),P=R+(I^O&(x^I))+C[2]+606105819&4294967295,R=O+(P<<17&4294967295|P>>>15),P=I+(x^R&(O^x))+C[3]+3250441966&4294967295,I=R+(P<<22&4294967295|P>>>10),P=x+(O^I&(R^O))+C[4]+4118548399&4294967295,x=I+(P<<7&4294967295|P>>>25),P=O+(R^x&(I^R))+C[5]+1200080426&4294967295,O=x+(P<<12&4294967295|P>>>20),P=R+(I^O&(x^I))+C[6]+2821735955&4294967295,R=O+(P<<17&4294967295|P>>>15),P=I+(x^R&(O^x))+C[7]+4249261313&4294967295,I=R+(P<<22&4294967295|P>>>10),P=x+(O^I&(R^O))+C[8]+1770035416&4294967295,x=I+(P<<7&4294967295|P>>>25),P=O+(R^x&(I^R))+C[9]+2336552879&4294967295,O=x+(P<<12&4294967295|P>>>20),P=R+(I^O&(x^I))+C[10]+4294925233&4294967295,R=O+(P<<17&4294967295|P>>>15),P=I+(x^R&(O^x))+C[11]+2304563134&4294967295,I=R+(P<<22&4294967295|P>>>10),P=x+(O^I&(R^O))+C[12]+1804603682&4294967295,x=I+(P<<7&4294967295|P>>>25),P=O+(R^x&(I^R))+C[13]+4254626195&4294967295,O=x+(P<<12&4294967295|P>>>20),P=R+(I^O&(x^I))+C[14]+2792965006&4294967295,R=O+(P<<17&4294967295|P>>>15),P=I+(x^R&(O^x))+C[15]+1236535329&4294967295,I=R+(P<<22&4294967295|P>>>10),P=x+(R^O&(I^R))+C[1]+4129170786&4294967295,x=I+(P<<5&4294967295|P>>>27),P=O+(I^R&(x^I))+C[6]+3225465664&4294967295,O=x+(P<<9&4294967295|P>>>23),P=R+(x^I&(O^x))+C[11]+643717713&4294967295,R=O+(P<<14&4294967295|P>>>18),P=I+(O^x&(R^O))+C[0]+3921069994&4294967295,I=R+(P<<20&4294967295|P>>>12),P=x+(R^O&(I^R))+C[5]+3593408605&4294967295,x=I+(P<<5&4294967295|P>>>27),P=O+(I^R&(x^I))+C[10]+38016083&4294967295,O=x+(P<<9&4294967295|P>>>23),P=R+(x^I&(O^x))+C[15]+3634488961&4294967295,R=O+(P<<14&4294967295|P>>>18),P=I+(O^x&(R^O))+C[4]+3889429448&4294967295,I=R+(P<<20&4294967295|P>>>12),P=x+(R^O&(I^R))+C[9]+568446438&4294967295,x=I+(P<<5&4294967295|P>>>27),P=O+(I^R&(x^I))+C[14]+3275163606&4294967295,O=x+(P<<9&4294967295|P>>>23),P=R+(x^I&(O^x))+C[3]+4107603335&4294967295,R=O+(P<<14&4294967295|P>>>18),P=I+(O^x&(R^O))+C[8]+1163531501&4294967295,I=R+(P<<20&4294967295|P>>>12),P=x+(R^O&(I^R))+C[13]+2850285829&4294967295,x=I+(P<<5&4294967295|P>>>27),P=O+(I^R&(x^I))+C[2]+4243563512&4294967295,O=x+(P<<9&4294967295|P>>>23),P=R+(x^I&(O^x))+C[7]+1735328473&4294967295,R=O+(P<<14&4294967295|P>>>18),P=I+(O^x&(R^O))+C[12]+2368359562&4294967295,I=R+(P<<20&4294967295|P>>>12),P=x+(I^R^O)+C[5]+4294588738&4294967295,x=I+(P<<4&4294967295|P>>>28),P=O+(x^I^R)+C[8]+2272392833&4294967295,O=x+(P<<11&4294967295|P>>>21),P=R+(O^x^I)+C[11]+1839030562&4294967295,R=O+(P<<16&4294967295|P>>>16),P=I+(R^O^x)+C[14]+4259657740&4294967295,I=R+(P<<23&4294967295|P>>>9),P=x+(I^R^O)+C[1]+2763975236&4294967295,x=I+(P<<4&4294967295|P>>>28),P=O+(x^I^R)+C[4]+1272893353&4294967295,O=x+(P<<11&4294967295|P>>>21),P=R+(O^x^I)+C[7]+4139469664&4294967295,R=O+(P<<16&4294967295|P>>>16),P=I+(R^O^x)+C[10]+3200236656&4294967295,I=R+(P<<23&4294967295|P>>>9),P=x+(I^R^O)+C[13]+681279174&4294967295,x=I+(P<<4&4294967295|P>>>28),P=O+(x^I^R)+C[0]+3936430074&4294967295,O=x+(P<<11&4294967295|P>>>21),P=R+(O^x^I)+C[3]+3572445317&4294967295,R=O+(P<<16&4294967295|P>>>16),P=I+(R^O^x)+C[6]+76029189&4294967295,I=R+(P<<23&4294967295|P>>>9),P=x+(I^R^O)+C[9]+3654602809&4294967295,x=I+(P<<4&4294967295|P>>>28),P=O+(x^I^R)+C[12]+3873151461&4294967295,O=x+(P<<11&4294967295|P>>>21),P=R+(O^x^I)+C[15]+530742520&4294967295,R=O+(P<<16&4294967295|P>>>16),P=I+(R^O^x)+C[2]+3299628645&4294967295,I=R+(P<<23&4294967295|P>>>9),P=x+(R^(I|~O))+C[0]+4096336452&4294967295,x=I+(P<<6&4294967295|P>>>26),P=O+(I^(x|~R))+C[7]+1126891415&4294967295,O=x+(P<<10&4294967295|P>>>22),P=R+(x^(O|~I))+C[14]+2878612391&4294967295,R=O+(P<<15&4294967295|P>>>17),P=I+(O^(R|~x))+C[5]+4237533241&4294967295,I=R+(P<<21&4294967295|P>>>11),P=x+(R^(I|~O))+C[12]+1700485571&4294967295,x=I+(P<<6&4294967295|P>>>26),P=O+(I^(x|~R))+C[3]+2399980690&4294967295,O=x+(P<<10&4294967295|P>>>22),P=R+(x^(O|~I))+C[10]+4293915773&4294967295,R=O+(P<<15&4294967295|P>>>17),P=I+(O^(R|~x))+C[1]+2240044497&4294967295,I=R+(P<<21&4294967295|P>>>11),P=x+(R^(I|~O))+C[8]+1873313359&4294967295,x=I+(P<<6&4294967295|P>>>26),P=O+(I^(x|~R))+C[15]+4264355552&4294967295,O=x+(P<<10&4294967295|P>>>22),P=R+(x^(O|~I))+C[6]+2734768916&4294967295,R=O+(P<<15&4294967295|P>>>17),P=I+(O^(R|~x))+C[13]+1309151649&4294967295,I=R+(P<<21&4294967295|P>>>11),P=x+(R^(I|~O))+C[4]+4149444226&4294967295,x=I+(P<<6&4294967295|P>>>26),P=O+(I^(x|~R))+C[11]+3174756917&4294967295,O=x+(P<<10&4294967295|P>>>22),P=R+(x^(O|~I))+C[2]+718787259&4294967295,R=O+(P<<15&4294967295|P>>>17),P=I+(O^(R|~x))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+x&4294967295,T.g[1]=T.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+O&4294967295}r.prototype.u=function(T,x){x===void 0&&(x=T.length);for(var I=x-this.blockSize,C=this.B,R=this.h,O=0;O<x;){if(R==0)for(;O<=I;)s(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<x;)if(C[R++]=T.charCodeAt(O++),R==this.blockSize){s(this,C),R=0;break}}else for(;O<x;)if(C[R++]=T[O++],R==this.blockSize){s(this,C),R=0;break}}this.h=R,this.o+=x},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var x=1;x<T.length-8;++x)T[x]=0;var I=8*this.o;for(x=T.length-8;x<T.length;++x)T[x]=I&255,I/=256;for(this.u(T),T=Array(16),x=I=0;4>x;++x)for(var C=0;32>C;C+=8)T[I++]=this.g[x]>>>C&255;return T};function i(T,x){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=x(T)}function o(T,x){this.h=x;for(var I=[],C=!0,R=T.length-1;0<=R;R--){var O=T[R]|0;C&&O==x||(I[R]=O,C=!1)}this.g=I}var a={};function l(T){return-128<=T&&128>T?i(T,function(x){return new o([x|0],0>x?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return E(c(-T));for(var x=[],I=1,C=0;T>=I;C++)x[C]=T/I|0,I*=4294967296;return new o(x,0)}function d(T,x){if(T.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(T.charAt(0)=="-")return E(d(T.substring(1),x));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(x,8)),C=f,R=0;R<T.length;R+=8){var O=Math.min(8,T.length-R),P=parseInt(T.substring(R,R+O),x);8>O?(O=c(Math.pow(x,O)),C=C.j(O).add(c(P))):(C=C.j(I),C=C.add(c(P)))}return C}var f=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-E(this).m();for(var T=0,x=1,I=0;I<this.g.length;I++){var C=this.i(I);T+=(0<=C?C:4294967296+C)*x,x*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(w(this))return"0";if(k(this))return"-"+E(this).toString(T);for(var x=c(Math.pow(T,6)),I=this,C="";;){var R=A(I,x).g;I=v(I,R.j(x));var O=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=R,w(I))return O+C;for(;6>O.length;)O="0"+O;C=O+C}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function w(T){if(T.h!=0)return!1;for(var x=0;x<T.g.length;x++)if(T.g[x]!=0)return!1;return!0}function k(T){return T.h==-1}t.l=function(T){return T=v(this,T),k(T)?-1:w(T)?0:1};function E(T){for(var x=T.g.length,I=[],C=0;C<x;C++)I[C]=~T.g[C];return new o(I,~T.h).add(m)}t.abs=function(){return k(this)?E(this):this},t.add=function(T){for(var x=Math.max(this.g.length,T.g.length),I=[],C=0,R=0;R<=x;R++){var O=C+(this.i(R)&65535)+(T.i(R)&65535),P=(O>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);C=P>>>16,O&=65535,P&=65535,I[R]=P<<16|O}return new o(I,I[I.length-1]&-2147483648?-1:0)};function v(T,x){return T.add(E(x))}t.j=function(T){if(w(this)||w(T))return f;if(k(this))return k(T)?E(this).j(E(T)):E(E(this).j(T));if(k(T))return E(this.j(E(T)));if(0>this.l(y)&&0>T.l(y))return c(this.m()*T.m());for(var x=this.g.length+T.g.length,I=[],C=0;C<2*x;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<T.g.length;R++){var O=this.i(C)>>>16,P=this.i(C)&65535,J=T.i(R)>>>16,Q=T.i(R)&65535;I[2*C+2*R]+=P*Q,_(I,2*C+2*R),I[2*C+2*R+1]+=O*Q,_(I,2*C+2*R+1),I[2*C+2*R+1]+=P*J,_(I,2*C+2*R+1),I[2*C+2*R+2]+=O*J,_(I,2*C+2*R+2)}for(C=0;C<x;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=x;C<2*x;C++)I[C]=0;return new o(I,0)};function _(T,x){for(;(T[x]&65535)!=T[x];)T[x+1]+=T[x]>>>16,T[x]&=65535,x++}function b(T,x){this.g=T,this.h=x}function A(T,x){if(w(x))throw Error("division by zero");if(w(T))return new b(f,f);if(k(T))return x=A(E(T),x),new b(E(x.g),E(x.h));if(k(x))return x=A(T,E(x)),new b(E(x.g),x.h);if(30<T.g.length){if(k(T)||k(x))throw Error("slowDivide_ only works with positive integers.");for(var I=m,C=x;0>=C.l(T);)I=N(I),C=N(C);var R=M(I,1),O=M(C,1);for(C=M(C,2),I=M(I,2);!w(C);){var P=O.add(C);0>=P.l(T)&&(R=R.add(I),O=P),C=M(C,1),I=M(I,1)}return x=v(T,R.j(x)),new b(R,x)}for(R=f;0<=T.l(x);){for(I=Math.max(1,Math.floor(T.m()/x.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),O=c(I),P=O.j(x);k(P)||0<P.l(T);)I-=C,O=c(I),P=O.j(x);w(O)&&(O=m),R=R.add(O),T=v(T,P)}return new b(R,T)}t.A=function(T){return A(this,T).h},t.and=function(T){for(var x=Math.max(this.g.length,T.g.length),I=[],C=0;C<x;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},t.or=function(T){for(var x=Math.max(this.g.length,T.g.length),I=[],C=0;C<x;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},t.xor=function(T){for(var x=Math.max(this.g.length,T.g.length),I=[],C=0;C<x;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function N(T){for(var x=T.g.length+1,I=[],C=0;C<x;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function M(T,x){var I=x>>5;x%=32;for(var C=T.g.length-I,R=[],O=0;O<C;O++)R[O]=0<x?T.i(O+I)>>>x|T.i(O+I+1)<<32-x:T.i(O+I);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,n1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ki=o}).apply(typeof Z_<"u"?Z_:typeof self<"u"?self:typeof window<"u"?window:{});var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var r1,qa,s1,Fu,hm,i1,o1,a1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof nu=="object"&&nu];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in g))break e;g=g[L]}u=u[u.length-1],S=g[u],p=p(S),p!=S&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var g=0,S=!1,L={next:function(){if(!S&&g<u.length){var V=g++;return{value:p(V,u[V]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function d(u,p,g){return u.call.apply(u.bind,arguments)}function f(u,p,g){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function m(u,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function y(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function w(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(S,L,V){for(var q=Array(arguments.length-2),De=2;De<arguments.length;De++)q[De-2]=arguments[De];return p.prototype[L].apply(S,q)}}function k(u){const p=u.length;if(0<p){const g=Array(p);for(let S=0;S<p;S++)g[S]=u[S];return g}return[]}function E(u,p){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const L=u.length||0,V=S.length||0;u.length=L+V;for(let q=0;q<V;q++)u[L+q]=S[q]}else u.push(S)}}class v{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function _(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function A(u){return A[" "](u),u}A[" "]=function(){};var N=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(u,p,g){for(const S in u)p.call(g,u[S],S,u)}function T(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function x(u){const p={};for(const g in u)p[g]=u[g];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)u[g]=S[g];for(let V=0;V<I.length;V++)g=I[V],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function R(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function O(u){a.setTimeout(()=>{throw u},0)}function P(){var u=K;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class J{constructor(){this.h=this.g=null}add(p,g){const S=Q.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var Q=new v(()=>new B,u=>u.reset());class B{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let se,U=!1,K=new J,W=()=>{const u=a.Promise.resolve(void 0);se=()=>{u.then(ue)}};var ue=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(g){O(g)}var p=Q;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}U=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function re(u,p){if(j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(N){e:{try{A(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:xe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&re.aa.h.call(this)}}w(re,j);var xe={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var st="closure_listenable_"+(1e6*Math.random()|0),it=0;function en(u,p,g,S,L){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=L,this.key=++it,this.da=this.fa=!1}function ot(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function $t(u){this.src=u,this.g={},this.h=0}$t.prototype.add=function(u,p,g,S,L){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var q=at(u,p,S,L);return-1<q?(p=u[q],g||(p.fa=!1)):(p=new en(p,this.src,V,!!S,L),p.fa=g,u.push(p)),p};function gt(u,p){var g=p.type;if(g in u.g){var S=u.g[g],L=Array.prototype.indexOf.call(S,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(S,L,1),V&&(ot(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function at(u,p,g,S){for(var L=0;L<u.length;++L){var V=u[L];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==S)return L}return-1}var we="closure_lm_"+(1e6*Math.random()|0),Ht={};function Wn(u,p,g,S,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)Wn(u,p[V],g,S,L);return null}return g=le(g),u&&u[st]?u.K(p,g,c(S)?!!S.capture:!1,L):Zr(u,p,g,!1,S,L)}function Zr(u,p,g,S,L,V){if(!p)throw Error("Invalid event type");var q=c(L)?!!L.capture:!!L,De=ne(u);if(De||(u[we]=De=new $t(u)),g=De.add(p,g,S,q,V),g.proxy)return g;if(S=es(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)Z||(L=q),L===void 0&&(L=!1),u.addEventListener(p.toString(),S,L);else if(u.attachEvent)u.attachEvent(ha(p.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function es(){function u(g){return p.call(u.src,u.listener,g)}const p=H;return u}function da(u,p,g,S,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)da(u,p[V],g,S,L);else S=c(S)?!!S.capture:!!S,g=le(g),u&&u[st]?(u=u.i,p=String(p).toString(),p in u.g&&(V=u.g[p],g=at(V,g,S,L),-1<g&&(ot(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete u.g[p],u.h--)))):u&&(u=ne(u))&&(p=u.g[p.toString()],u=-1,p&&(u=at(p,g,S,L)),(g=-1<u?p[u]:null)&&Ki(g))}function Ki(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[st])gt(p.i,u);else{var g=u.type,S=u.proxy;p.removeEventListener?p.removeEventListener(g,S,u.capture):p.detachEvent?p.detachEvent(ha(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=ne(p))?(gt(g,u),g.h==0&&(g.src=null,p[we]=null)):ot(u)}}}function ha(u){return u in Ht?Ht[u]:Ht[u]="on"+u}function H(u,p){if(u.da)u=!0;else{p=new re(p,this);var g=u.listener,S=u.ha||u.src;u.fa&&Ki(u),u=g.call(S,p)}return u}function ne(u){return u=u[we],u instanceof $t?u:null}var G="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(u){return typeof u=="function"?u:(u[G]||(u[G]=function(p){return u.handleEvent(p)}),u[G])}function ae(){oe.call(this),this.i=new $t(this),this.M=this,this.F=null}w(ae,oe),ae.prototype[st]=!0,ae.prototype.removeEventListener=function(u,p,g,S){da(this,u,p,g,S)};function Se(u,p){var g,S=u.F;if(S)for(g=[];S;S=S.F)g.push(S);if(u=u.M,S=p.type||p,typeof p=="string")p=new j(p,u);else if(p instanceof j)p.target=p.target||u;else{var L=p;p=new j(S,u),C(p,L)}if(L=!0,g)for(var V=g.length-1;0<=V;V--){var q=p.g=g[V];L=Ne(q,S,!0,p)&&L}if(q=p.g=u,L=Ne(q,S,!0,p)&&L,L=Ne(q,S,!1,p)&&L,g)for(V=0;V<g.length;V++)q=p.g=g[V],L=Ne(q,S,!1,p)&&L}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],S=0;S<g.length;S++)ot(g[S]);delete u.g[p],u.h--}}this.F=null},ae.prototype.K=function(u,p,g,S){return this.i.add(String(u),p,!1,g,S)},ae.prototype.L=function(u,p,g,S){return this.i.add(String(u),p,!0,g,S)};function Ne(u,p,g,S){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var q=p[V];if(q&&!q.da&&q.capture==g){var De=q.listener,wt=q.ha||q.src;q.fa&&gt(u.i,q),L=De.call(wt,S)!==!1&&L}}return L&&!S.defaultPrevented}function Wt(u,p,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function qt(u){u.g=Wt(()=>{u.g=null,u.i&&(u.i=!1,qt(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class qn extends oe{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(u){oe.call(this),this.h=u,this.g={}}w(me,oe);var lt=[];function Rn(u){M(u.g,function(p,g){this.g.hasOwnProperty(g)&&Ki(p)},u),u.g={}}me.prototype.N=function(){me.aa.N.call(this),Rn(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=a.JSON.stringify,Ze=a.JSON.parse,tn=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Gi(){}Gi.prototype.h=null;function fe(u){return u.h||(u.h=u.i())}function ct(){}var et={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hh(){j.call(this,"d")}w(Hh,j);function Wh(){j.call(this,"c")}w(Wh,j);var Zs={},ly=null;function kc(){return ly=ly||new ae}Zs.La="serverreachability";function cy(u){j.call(this,Zs.La,u)}w(cy,j);function fa(u){const p=kc();Se(p,new cy(p))}Zs.STAT_EVENT="statevent";function uy(u,p){j.call(this,Zs.STAT_EVENT,u),this.stat=p}w(uy,j);function Gt(u){const p=kc();Se(p,new uy(p,u))}Zs.Ma="timingevent";function dy(u,p){j.call(this,Zs.Ma,u),this.size=p}w(dy,j);function pa(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function ma(){this.g=!0}ma.prototype.xa=function(){this.g=!1};function KS(u,p,g,S,L,V){u.info(function(){if(u.g)if(V)for(var q="",De=V.split("&"),wt=0;wt<De.length;wt++){var Te=De[wt].split("=");if(1<Te.length){var Rt=Te[0];Te=Te[1];var Nt=Rt.split("_");q=2<=Nt.length&&Nt[1]=="type"?q+(Rt+"="+Te+"&"):q+(Rt+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+p+`
`+g+`
`+q})}function GS(u,p,g,S,L,V,q){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+p+`
`+g+`
`+V+" "+q})}function Qi(u,p,g,S){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+YS(u,g)+(S?" "+S:"")})}function QS(u,p){u.info(function(){return"TIMEOUT: "+p})}ma.prototype.info=function(){};function YS(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var S=g[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<L.length;q++)L[q]=""}}}}return Kt(g)}catch{return p}}var Ec={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qh;function Tc(){}w(Tc,Gi),Tc.prototype.g=function(){return new XMLHttpRequest},Tc.prototype.i=function(){return{}},qh=new Tc;function ts(u,p,g,S){this.j=u,this.i=p,this.l=g,this.R=S||1,this.U=new me(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fy}function fy(){this.i=null,this.g="",this.h=!1}var py={},Kh={};function Gh(u,p,g){u.L=1,u.v=Ac(kr(p)),u.m=g,u.P=!0,my(u,null)}function my(u,p){u.F=Date.now(),Ic(u),u.A=kr(u.v);var g=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Ay(g.i,"t",S),u.C=0,g=u.j.J,u.h=new fy,u.g=Ky(u.j,g?p:null,!u.m),0<u.O&&(u.M=new qn(m(u.Y,u,u.g),u.O)),p=u.U,g=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(lt[0]=L.toString()),L=lt);for(var V=0;V<L.length;V++){var q=Wn(g,L[V],S||p.handleEvent,!1,p.h||p);if(!q)break;p.g[q.key]=q}p=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),fa(),KS(u.i,u.u,u.A,u.l,u.R,u.m)}ts.prototype.ca=function(u){u=u.target;const p=this.M;p&&Er(u)==3?p.j():this.Y(u)},ts.prototype.Y=function(u){try{if(u==this.g)e:{const Nt=Er(this.g);var p=this.g.Ba();const Ji=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||Ly(this.g)))){this.J||Nt!=4||p==7||(p==8||0>=Ji?fa(3):fa(2)),Qh(this);var g=this.g.Z();this.X=g;t:if(gy(this)){var S=Ly(this.g);u="";var L=S.length,V=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),ga(this);var q="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(S[p],{stream:!(V&&p==L-1)});S.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=g==200,GS(this.i,this.u,this.A,this.l,this.R,Nt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var De,wt=this.g;if((De=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(De)){var Te=De;break t}}Te=null}if(g=Te)Qi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yh(this,g);else{this.o=!1,this.s=3,Gt(12),ei(this),ga(this);break e}}if(this.P){g=!0;let Kn;for(;!this.J&&this.C<q.length;)if(Kn=XS(this,q),Kn==Kh){Nt==4&&(this.s=4,Gt(14),g=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==py){this.s=4,Gt(15),Qi(this.i,this.l,q,"[Invalid Chunk]"),g=!1;break}else Qi(this.i,this.l,Kn,null),Yh(this,Kn);if(gy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||q.length!=0||this.h.h||(this.s=1,Gt(16),g=!1),this.o=this.o&&g,!g)Qi(this.i,this.l,q,"[Invalid Chunked Response]"),ei(this),ga(this);else if(0<q.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),nf(Rt),Rt.M=!0,Gt(11))}}else Qi(this.i,this.l,q,null),Yh(this,q);Nt==4&&ei(this),this.o&&!this.J&&(Nt==4?$y(this.j,this):(this.o=!1,Ic(this)))}else pC(this.g),g==400&&0<q.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),ei(this),ga(this)}}}catch{}finally{}};function gy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function XS(u,p){var g=u.C,S=p.indexOf(`
`,g);return S==-1?Kh:(g=Number(p.substring(g,S)),isNaN(g)?py:(S+=1,S+g>p.length?Kh:(p=p.slice(S,S+g),u.C=S+g,p)))}ts.prototype.cancel=function(){this.J=!0,ei(this)};function Ic(u){u.S=Date.now()+u.I,yy(u,u.I)}function yy(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pa(m(u.ba,u),p)}function Qh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ts.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(QS(this.i,this.A),this.L!=2&&(fa(),Gt(17)),ei(this),this.s=2,ga(this)):yy(this,this.S-u)};function ga(u){u.j.G==0||u.J||$y(u.j,u)}function ei(u){Qh(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Rn(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Yh(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||Xh(g.h,u))){if(!u.K&&Xh(g.h,u)&&g.G==3){try{var S=g.Da.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Oc(g),Dc(g);else break e;tf(g),Gt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=pa(m(g.Za,g),6e3));if(1>=xy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ni(g,11)}else if((u.K||g.g==u)&&Oc(g),!_(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let Te=L[p];if(g.T=Te[0],Te=Te[1],g.G==2)if(Te[0]=="c"){g.K=Te[1],g.ia=Te[2];const Rt=Te[3];Rt!=null&&(g.la=Rt,g.j.info("VER="+g.la));const Nt=Te[4];Nt!=null&&(g.Aa=Nt,g.j.info("SVER="+g.Aa));const Ji=Te[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(S=1.5*Ji,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Kn=u.g;if(Kn){const jc=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jc){var V=S.h;V.g||jc.indexOf("spdy")==-1&&jc.indexOf("quic")==-1&&jc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Jh(V,V.h),V.h=null))}if(S.D){const rf=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;rf&&(S.ya=rf,Le(S.I,S.D,rf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var q=u;if(S.qa=qy(S,S.J?S.ia:null,S.W),q.K){wy(S.h,q);var De=q,wt=S.L;wt&&(De.I=wt),De.B&&(Qh(De),Ic(De)),S.g=q}else By(S);0<g.i.length&&Mc(g)}else Te[0]!="stop"&&Te[0]!="close"||ni(g,7);else g.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?ni(g,7):ef(g):Te[0]!="noop"&&g.l&&g.l.ta(Te),g.v=0)}}fa(4)}catch{}}var JS=class{constructor(u,p){this.g=u,this.map=p}};function vy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _y(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xy(u){return u.h?1:u.g?u.g.size:0}function Xh(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Jh(u,p){u.g?u.g.add(p):u.h=p}function wy(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}vy.prototype.cancel=function(){if(this.i=by(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function by(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return k(u.i)}function ZS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,S=0;S<g;S++)p.push(u[S]);return p}p=[],g=0;for(S in u)p[g++]=u[S];return p}function eC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const S in u)p[g++]=S;return p}}}function ky(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=eC(u),S=ZS(u),L=S.length,V=0;V<L;V++)p.call(void 0,S[V],g&&g[V],u)}var Ey=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tC(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var S=u[g].indexOf("="),L=null;if(0<=S){var V=u[g].substring(0,S);L=u[g].substring(S+1)}else V=u[g];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ti(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ti){this.h=u.h,Sc(this,u.j),this.o=u.o,this.g=u.g,Cc(this,u.s),this.l=u.l;var p=u.i,g=new _a;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Ty(this,g),this.m=u.m}else u&&(p=String(u).match(Ey))?(this.h=!1,Sc(this,p[1]||"",!0),this.o=ya(p[2]||""),this.g=ya(p[3]||"",!0),Cc(this,p[4]),this.l=ya(p[5]||"",!0),Ty(this,p[6]||"",!0),this.m=ya(p[7]||"")):(this.h=!1,this.i=new _a(null,this.h))}ti.prototype.toString=function(){var u=[],p=this.j;p&&u.push(va(p,Iy,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(va(p,Iy,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(va(g,g.charAt(0)=="/"?sC:rC,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",va(g,oC)),u.join("")};function kr(u){return new ti(u)}function Sc(u,p,g){u.j=g?ya(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Cc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Ty(u,p,g){p instanceof _a?(u.i=p,aC(u.i,u.h)):(g||(p=va(p,iC)),u.i=new _a(p,u.h))}function Le(u,p,g){u.i.set(p,g)}function Ac(u){return Le(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ya(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function va(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,nC),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Iy=/[#\/\?@]/g,rC=/[#\?:]/g,sC=/[#\?]/g,iC=/[#\?@]/g,oC=/#/g;function _a(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function ns(u){u.g||(u.g=new Map,u.h=0,u.i&&tC(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=_a.prototype,t.add=function(u,p){ns(this),this.i=null,u=Yi(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function Sy(u,p){ns(u),p=Yi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Cy(u,p){return ns(u),p=Yi(u,p),u.g.has(p)}t.forEach=function(u,p){ns(this),this.g.forEach(function(g,S){g.forEach(function(L){u.call(p,L,S,this)},this)},this)},t.na=function(){ns(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let S=0;S<p.length;S++){const L=u[S];for(let V=0;V<L.length;V++)g.push(p[S])}return g},t.V=function(u){ns(this);let p=[];if(typeof u=="string")Cy(this,u)&&(p=p.concat(this.g.get(Yi(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return ns(this),this.i=null,u=Yi(this,u),Cy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Ay(u,p,g){Sy(u,p),0<g.length&&(u.i=null,u.g.set(Yi(u,p),k(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var S=p[g];const V=encodeURIComponent(String(S)),q=this.V(S);for(S=0;S<q.length;S++){var L=V;q[S]!==""&&(L+="="+encodeURIComponent(String(q[S]))),u.push(L)}}return this.i=u.join("&")};function Yi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function aC(u,p){p&&!u.j&&(ns(u),u.i=null,u.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(Sy(this,S),Ay(this,L,g))},u)),u.j=p}function lC(u,p){const g=new ma;if(a.Image){const S=new Image;S.onload=y(rs,g,"TestLoadImage: loaded",!0,p,S),S.onerror=y(rs,g,"TestLoadImage: error",!1,p,S),S.onabort=y(rs,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=y(rs,g,"TestLoadImage: timeout",!1,p,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else p(!1)}function cC(u,p){const g=new ma,S=new AbortController,L=setTimeout(()=>{S.abort(),rs(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:S.signal}).then(V=>{clearTimeout(L),V.ok?rs(g,"TestPingServer: ok",!0,p):rs(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),rs(g,"TestPingServer: error",!1,p)})}function rs(u,p,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function uC(){this.g=new tn}function dC(u,p,g){const S=g||"";try{ky(u,function(L,V){let q=L;c(L)&&(q=Kt(L)),p.push(S+V+"="+encodeURIComponent(q))})}catch(L){throw p.push(S+"type="+encodeURIComponent("_badmap")),L}}function Pc(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Pc,Gi),Pc.prototype.g=function(){return new Rc(this.l,this.j)},Pc.prototype.i=function(u){return function(){return u}}({});function Rc(u,p){ae.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Rc,ae),t=Rc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,wa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Py(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Py(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?xa(this):wa(this),this.readyState==3&&Py(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,xa(this))},t.Qa=function(u){this.g&&(this.response=u,xa(this))},t.ga=function(){this.g&&xa(this)};function xa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,wa(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function wa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Rc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ry(u){let p="";return M(u,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function Zh(u,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Ry(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Le(u,p,g))}function Ge(u){ae.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ge,ae);var hC=/^https?$/i,fC=["POST","PUT"];t=Ge.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qh.g(),this.v=this.o?fe(this.o):fe(qh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(V){Ny(this,V);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())g.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fC,p,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of g)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oy(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){Ny(this,V)}};function Ny(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Dy(u),Nc(u)}function Dy(u){u.A||(u.A=!0,Se(u,"complete"),Se(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Se(this,"complete"),Se(this,"abort"),Nc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nc(this,!0)),Ge.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?My(this):this.bb())},t.bb=function(){My(this)};function My(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Er(u)!=4||u.Z()!=2)){if(u.u&&Er(u)==4)Wt(u.Ea,0,u);else if(Se(u,"readystatechange"),Er(u)==4){u.h=!1;try{const q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=q===0){var L=String(u.D).match(Ey)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!hC.test(L?L.toLowerCase():"")}g=S}if(g)Se(u,"complete"),Se(u,"success");else{u.m=6;try{var V=2<Er(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",Dy(u)}}finally{Nc(u)}}}}function Nc(u,p){if(u.g){Oy(u);const g=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Se(u,"ready");try{g.onreadystatechange=S}catch{}}}function Oy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Er(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ze(p)}};function Ly(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pC(u){const p={};u=(u.g&&2<=Er(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(_(u[S]))continue;var g=R(u[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[L]||[];p[L]=V,V.push(g)}T(p,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function jy(u){this.Aa=0,this.i=[],this.j=new ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,u),this.cb=ba("retryDelaySeedMs",1e4,u),this.Wa=ba("forwardChannelMaxRetries",2,u),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new vy(u&&u.concurrentRequestLimit),this.Da=new uC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jy.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,S){Gt(0),this.W=u,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=qy(this,null,this.W),Mc(this)};function ef(u){if(Vy(u),u.G==3){var p=u.U++,g=kr(u.I);if(Le(g,"SID",u.K),Le(g,"RID",p),Le(g,"TYPE","terminate"),ka(u,g),p=new ts(u,u.j,p),p.L=2,p.v=Ac(kr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Ky(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ic(p)}Wy(u)}function Dc(u){u.g&&(nf(u),u.g.cancel(),u.g=null)}function Vy(u){Dc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Oc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Mc(u){if(!_y(u.h)&&!u.s){u.s=!0;var p=u.Ga;se||W(),U||(se(),U=!0),K.add(p,u),u.B=0}}function mC(u,p){return xy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pa(m(u.Ga,u,p),Hy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new ts(this,this.j,u);let V=this.o;if(this.S&&(V?(V=x(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=Uy(this,L,p),g=kr(this.I),Le(g,"RID",u),Le(g,"CVER",22),this.D&&Le(g,"X-HTTP-Session-Id",this.D),ka(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(Ry(V)))+"&"+p:this.m&&Zh(g,this.m,V)),Jh(this.h,L),this.Ua&&Le(g,"TYPE","init"),this.P?(Le(g,"$req",p),Le(g,"SID","null"),L.T=!0,Gh(L,g,null)):Gh(L,g,p),this.G=2}}else this.G==3&&(u?Fy(this,u):this.i.length==0||_y(this.h)||Fy(this))};function Fy(u,p){var g;p?g=p.l:g=u.U++;const S=kr(u.I);Le(S,"SID",u.K),Le(S,"RID",g),Le(S,"AID",u.T),ka(u,S),u.m&&u.o&&Zh(S,u.m,u.o),g=new ts(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Uy(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Jh(u.h,g),Gh(g,S,p)}function ka(u,p){u.H&&M(u.H,function(g,S){Le(p,S,g)}),u.l&&ky({},function(g,S){Le(p,S,g)})}function Uy(u,p,g){g=Math.min(u.i.length,g);var S=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let V=-1;for(;;){const q=["count="+g];V==-1?0<g?(V=L[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let De=!0;for(let wt=0;wt<g;wt++){let Te=L[wt].g;const Rt=L[wt].map;if(Te-=V,0>Te)V=Math.max(0,L[wt].g-100),De=!1;else try{dC(Rt,q,"req"+Te+"_")}catch{S&&S(Rt)}}if(De){S=q.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,S}function By(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;se||W(),U||(se(),U=!0),K.add(p,u),u.v=0}}function tf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pa(m(u.Fa,u),Hy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,zy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pa(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Dc(this),zy(this))};function nf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function zy(u){u.g=new ts(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=kr(u.qa);Le(p,"RID","rpc"),Le(p,"SID",u.K),Le(p,"AID",u.T),Le(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&Le(p,"TO",u.ja),Le(p,"TYPE","xmlhttp"),ka(u,p),u.m&&u.o&&Zh(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Ac(kr(p)),g.m=null,g.P=!0,my(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Dc(this),tf(this),Gt(19))};function Oc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function $y(u,p){var g=null;if(u.g==p){Oc(u),nf(u),u.g=null;var S=2}else if(Xh(u.h,p))g=p.D,wy(u.h,p),S=1;else return;if(u.G!=0){if(p.o)if(S==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;S=kc(),Se(S,new dy(S,g)),Mc(u)}else By(u);else if(L=p.s,L==3||L==0&&0<p.X||!(S==1&&mC(u,p)||S==2&&tf(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),L){case 1:ni(u,5);break;case 4:ni(u,10);break;case 3:ni(u,6);break;default:ni(u,2)}}}function Hy(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function ni(u,p){if(u.j.info("Error code "+p),p==2){var g=m(u.fb,u),S=u.Xa;const L=!S;S=new ti(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sc(S,"https"),Ac(S),L?lC(S.toString(),g):cC(S.toString(),g)}else Gt(2);u.G=0,u.l&&u.l.sa(p),Wy(u),Vy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function Wy(u){if(u.G=0,u.ka=[],u.l){const p=by(u.h);(p.length!=0||u.i.length!=0)&&(E(u.ka,p),E(u.ka,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.ra()}}function qy(u,p,g){var S=g instanceof ti?kr(g):new ti(g);if(S.g!="")p&&(S.g=p+"."+S.g),Cc(S,S.s);else{var L=a.location;S=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new ti(null);S&&Sc(V,S),p&&(V.g=p),L&&Cc(V,L),g&&(V.l=g),S=V}return g=u.D,p=u.ya,g&&p&&Le(S,g,p),Le(S,"VER",u.la),ka(u,S),S}function Ky(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Ge(new Pc({eb:g})):new Ge(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gy(){}t=Gy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lc(){}Lc.prototype.g=function(u,p){return new _n(u,p)};function _n(u,p){ae.call(this),this.g=new jy(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!_(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!_(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Xi(this)}w(_n,ae),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){ef(this.g)},_n.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Kt(u),u=g);p.i.push(new JS(p.Ya++,u)),p.G==3&&Mc(p)},_n.prototype.N=function(){this.g.l=null,delete this.j,ef(this.g),delete this.g,_n.aa.N.call(this)};function Qy(u){Hh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}w(Qy,Hh);function Yy(){Wh.call(this),this.status=1}w(Yy,Wh);function Xi(u){this.g=u}w(Xi,Gy),Xi.prototype.ua=function(){Se(this.g,"a")},Xi.prototype.ta=function(u){Se(this.g,new Qy(u))},Xi.prototype.sa=function(u){Se(this.g,new Yy)},Xi.prototype.ra=function(){Se(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,a1=function(){return new Lc},o1=function(){return kc()},i1=Zs,hm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ec.NO_ERROR=0,Ec.TIMEOUT=8,Ec.HTTP_ERROR=6,Fu=Ec,hy.COMPLETE="complete",s1=hy,ct.EventType=et,et.OPEN="a",et.CLOSE="b",et.ERROR="c",et.MESSAGE="d",ae.prototype.listen=ae.prototype.K,qa=ct,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,r1=Ge}).apply(typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{});const ex="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new mh("@firebase/firestore");function Na(){return Oi.logLevel}function te(t,...e){if(Oi.logLevel<=ve.DEBUG){const n=e.map(a0);Oi.debug(`Firestore (${sa}): ${t}`,...n)}}function Gr(t,...e){if(Oi.logLevel<=ve.ERROR){const n=e.map(a0);Oi.error(`Firestore (${sa}): ${t}`,...n)}}function Bo(t,...e){if(Oi.logLevel<=ve.WARN){const n=e.map(a0);Oi.warn(`Firestore (${sa}): ${t}`,...n)}}function a0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t="Unexpected state"){const e=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: `+t;throw Gr(e),new Error(e)}function Re(t,e){t||ce()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends $n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class DL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ML{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new l1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Lt(e)}}class OL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class LL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Re(this.o===void 0);const r=i=>{i.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,te("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new jL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=FL(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function zo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ye(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.timestamp=e}static fromTimestamp(e){return new de(e)}static min(){return new de(new Ye(0,0))}static max(){return new de(new Ye(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ce(),r===void 0?r=e.length-n:r>e.length-n&&ce(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends Wl{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const UL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Wl{construct(e,n,r){return new It(e,n,r)}static isValidIdentifier(e){return UL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Fe.fromString(e))}static fromName(e){return new ie(Fe.fromString(e).popFirst(5))}static empty(){return new ie(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Fe(e.slice()))}}function BL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new Vs(s,ie.empty(),e)}function zL(t){return new Vs(t.readTime,t.key,-1)}class Vs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vs(de.min(),ie.empty(),-1)}static max(){return new Vs(de.max(),ie.empty(),-1)}}function $L(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==HL)throw t;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function qL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}l0.oe=-1;function kh(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function KL(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function u1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ru(this.root,e,this.comparator,!0)}}class ru{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Et.RED,this.left=s??Et.EMPTY,this.right=i??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();const e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nx(this.data.getIterator())}getIteratorFrom(e){return new nx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class nx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Zn([])}unionWith(e){let n=new Ct(It.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new d1("Invalid base64 string: "+i):i}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const GL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(t){if(Re(!!t),typeof t=="string"){let e=0;const n=GL.exec(t);if(Re(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Li(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function u0(t){const e=t.mapValue.fields.__previous_value__;return c0(e)?u0(e):e}function ql(t){const e=Fs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Kl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su={mapValue:{}};function ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?c0(t)?4:XL(t)?9007199254740991:YL(t)?10:11:ce()}function br(t,e){if(t===e)return!0;const n=ji(t);if(n!==ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ql(t).isEqual(ql(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Fs(s.timestampValue),a=Fs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Li(s.bytesValue).isEqual(Li(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return tt(s.geoPointValue.latitude)===tt(i.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return tt(s.integerValue)===tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=tt(s.doubleValue),a=tt(i.doubleValue);return o===a?Ad(o)===Ad(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],br);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(tx(o)!==tx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!br(o[l],a[l])))return!1;return!0}(t,e);default:return ce()}}function Gl(t,e){return(t.values||[]).find(n=>br(n,e))!==void 0}function $o(t,e){if(t===e)return 0;const n=ji(t),r=ji(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=tt(i.integerValue||i.doubleValue),l=tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return rx(t.timestampValue,e.timestampValue);case 4:return rx(ql(t),ql(e));case 5:return Ie(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Li(i),l=Li(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Ie(a[c],l[c]);if(d!==0)return d}return Ie(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ie(tt(i.latitude),tt(o.latitude));return a!==0?a:Ie(tt(i.longitude),tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sx(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const f=i.fields||{},m=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(l=m.value)===null||l===void 0?void 0:l.arrayValue,k=Ie(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return k!==0?k:sx(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===su.mapValue&&o===su.mapValue)return 0;if(i===su.mapValue)return 1;if(o===su.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const m=Ie(l[f],d[f]);if(m!==0)return m;const y=$o(a[l[f]],c[d[f]]);if(y!==0)return y}return Ie(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ce()}}function rx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=Fs(t),r=Fs(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function sx(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$o(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function Ho(t){return fm(t)}function fm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Fs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=fm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${fm(n.fields[o])}`;return s+"}"}(t.mapValue):ce()}function ix(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pm(t){return!!t&&"integerValue"in t}function d0(t){return!!t&&"arrayValue"in t}function ox(t){return!!t&&"nullValue"in t}function ax(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uu(t){return!!t&&"mapValue"in t}function YL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function dl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(n)}setAll(e){let n=It.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=dl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Uu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ia(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new On(dl(this.value))}}function h1(t){const e=[];return ia(t.fields,(n,r)=>{const s=new It([n]);if(Uu(r)){const i=h1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Vt(e,0,de.min(),de.min(),de.min(),On.empty(),0)}static newFoundDocument(e,n,r,s){return new Vt(e,1,n,de.min(),r,s,0)}static newNoDocument(e,n){return new Vt(e,2,n,de.min(),de.min(),On.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,de.min(),de.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.position=e,this.inclusive=n}}function lx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=$o(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function cx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!br(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n="asc"){this.field=e,this.dir=n}}function JL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{}class ft extends f1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ej(e,n,r):n==="array-contains"?new rj(e,r):n==="in"?new sj(e,r):n==="not-in"?new ij(e,r):n==="array-contains-any"?new oj(e,r):new ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tj(e,r):new nj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($o(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison($o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends f1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ar(e,n)}matches(e){return p1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function p1(t){return t.op==="and"}function m1(t){return ZL(t)&&p1(t)}function ZL(t){for(const e of t.filters)if(e instanceof ar)return!1;return!0}function mm(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+Ho(t.value);if(m1(t))return t.filters.map(e=>mm(e)).join(",");{const e=t.filters.map(n=>mm(n)).join(",");return`${t.op}(${e})`}}function g1(t,e){return t instanceof ft?function(r,s){return s instanceof ft&&r.op===s.op&&r.field.isEqual(s.field)&&br(r.value,s.value)}(t,e):t instanceof ar?function(r,s){return s instanceof ar&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&g1(o,s.filters[a]),!0):!1}(t,e):void ce()}function y1(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Ho(n.value)}`}(t):t instanceof ar?function(n){return n.op.toString()+" {"+n.getFilters().map(y1).join(" ,")+"}"}(t):"Filter"}class ej extends ft{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class tj extends ft{constructor(e,n){super(e,"in",n),this.keys=v1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nj extends ft{constructor(e,n){super(e,"not-in",n),this.keys=v1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function v1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class rj extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return d0(n)&&Gl(n.arrayValue,this.value)}}class sj extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gl(this.value.arrayValue,n)}}class ij extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gl(this.value.arrayValue,n)}}class oj extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!d0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function ux(t,e=null,n=[],r=[],s=null,i=null,o=null){return new aj(t,e,n,r,s,i,o)}function h0(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),kh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ho(r)).join(",")),e.ue=n}return e.ue}function f0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!g1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cx(t.startAt,e.startAt)&&cx(t.endAt,e.endAt)}function gm(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function lj(t,e,n,r,s,i,o,a){return new oa(t,e,n,r,s,i,o,a)}function p0(t){return new oa(t)}function dx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _1(t){return t.collectionGroup!==null}function hl(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ct(It.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ql(i,r))}),n.has(It.keyField().canonicalString())||e.ce.push(new Ql(It.keyField(),r))}return e.ce}function _r(t){const e=he(t);return e.le||(e.le=cj(e,hl(t))),e.le}function cj(t,e){if(t.limitType==="F")return ux(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ql(s.field,i)});const n=t.endAt?new Pd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pd(t.startAt.position,t.startAt.inclusive):null;return ux(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ym(t,e){const n=t.filters.concat([e]);return new oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Rd(t,e,n){return new oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eh(t,e){return f0(_r(t),_r(e))&&t.limitType===e.limitType}function x1(t){return`${h0(_r(t))}|lt:${t.limitType}`}function no(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>y1(s)).join(", ")}]`),kh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ho(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ho(s)).join(",")),`Target(${r})`}(_r(t))}; limitType=${t.limitType})`}function Th(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of hl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=lx(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,hl(r),s)||r.endAt&&!function(o,a,l){const c=lx(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,hl(r),s))}(t,e)}function uj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w1(t){return(e,n)=>{let r=!1;for(const s of hl(t)){const i=dj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function dj(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?$o(l,c):ce()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return u1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new Ke(ie.comparator);function Qr(){return hj}const b1=new Ke(ie.comparator);function Ka(...t){let e=b1;for(const n of t)e=e.insert(n.key,n);return e}function k1(t){let e=b1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function yi(){return fl()}function E1(){return fl()}function fl(){return new aa(t=>t.toString(),(t,e)=>t.isEqual(e))}const fj=new Ke(ie.comparator),pj=new Ct(ie.comparator);function ye(...t){let e=pj;for(const n of t)e=e.add(n);return e}const mj=new Ct(Ie);function gj(){return mj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function T1(t){return{integerValue:""+t}}function yj(t,e){return KL(e)?T1(e):m0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this._=void 0}}function vj(t,e,n){return t instanceof Yl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&c0(i)&&(i=u0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Xl?S1(t,e):t instanceof Jl?C1(t,e):function(s,i){const o=I1(s,i),a=hx(o)+hx(s.Pe);return pm(o)&&pm(s.Pe)?T1(a):m0(s.serializer,a)}(t,e)}function _j(t,e,n){return t instanceof Xl?S1(t,e):t instanceof Jl?C1(t,e):n}function I1(t,e){return t instanceof Nd?function(r){return pm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Yl extends Ih{}class Xl extends Ih{constructor(e){super(),this.elements=e}}function S1(t,e){const n=A1(e);for(const r of t.elements)n.some(s=>br(s,r))||n.push(r);return{arrayValue:{values:n}}}class Jl extends Ih{constructor(e){super(),this.elements=e}}function C1(t,e){let n=A1(e);for(const r of t.elements)n=n.filter(s=>!br(s,r));return{arrayValue:{values:n}}}class Nd extends Ih{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hx(t){return tt(t.integerValue||t.doubleValue)}function A1(t){return d0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,n){this.field=e,this.transform=n}}function wj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Xl&&s instanceof Xl||r instanceof Jl&&s instanceof Jl?zo(r.elements,s.elements,br):r instanceof Nd&&s instanceof Nd?br(r.Pe,s.Pe):r instanceof Yl&&s instanceof Yl}(t.transform,e.transform)}class bj{constructor(e,n){this.version=e,this.transformResults=n}}class xr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xr}static exists(e){return new xr(void 0,e)}static updateTime(e){return new xr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sh{}function P1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new N1(t.key,xr.none()):new yc(t.key,t.data,xr.none());{const n=t.data,r=On.empty();let s=new Ct(It.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Hi(t.key,r,new Zn(s.toArray()),xr.none())}}function kj(t,e,n){t instanceof yc?function(s,i,o){const a=s.value.clone(),l=px(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(s,i,o){if(!Bu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=px(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(R1(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function pl(t,e,n,r){return t instanceof yc?function(i,o,a,l){if(!Bu(i.precondition,o))return a;const c=i.value.clone(),d=mx(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hi?function(i,o,a,l){if(!Bu(i.precondition,o))return a;const c=mx(i.fieldTransforms,l,o),d=o.data;return d.setAll(R1(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Bu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Ej(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=I1(r.transform,s||null);i!=null&&(n===null&&(n=On.empty()),n.set(r.field,i))}return n||null}function fx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zo(r,s,(i,o)=>wj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yc extends Sh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hi extends Sh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function R1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function px(t,e,n){const r=new Map;Re(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,_j(o,a,n[s]))}return r}function mx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,vj(i,o,e))}return r}class N1 extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tj extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&kj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=P1(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(n,r)=>fx(n,r))&&zo(this.baseMutations,e.baseMutations,(n,r)=>fx(n,r))}}class g0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Re(e.mutations.length===r.length);let s=function(){return fj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new g0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,be;function Aj(t){switch(t){default:return ce();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function D1(t){if(t===void 0)return Gr("GRPC error has no .code"),F.UNKNOWN;switch(t){case ut.OK:return F.OK;case ut.CANCELLED:return F.CANCELLED;case ut.UNKNOWN:return F.UNKNOWN;case ut.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ut.INTERNAL:return F.INTERNAL;case ut.UNAVAILABLE:return F.UNAVAILABLE;case ut.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ut.NOT_FOUND:return F.NOT_FOUND;case ut.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ut.ABORTED:return F.ABORTED;case ut.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ut.DATA_LOSS:return F.DATA_LOSS;default:return ce()}}(be=ut||(ut={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=new ki([4294967295,4294967295],0);function gx(t){const e=Pj().encode(t),n=new n1;return n.update(e),new Uint8Array(n.digest())}function yx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ki([n,r],0),new ki([s,i],0)]}class y0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ga(`Invalid padding: ${n}`);if(r<0)throw new Ga(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ki.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ki.fromNumber(r)));return s.compare(Rj)===1&&(s=new ki([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=gx(e),[r,s]=yx(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new y0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=gx(e),[r,s]=yx(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ch(de.min(),s,new Ke(Ie),Qr(),ye())}}class vc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vc(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class M1{constructor(e,n){this.targetId=e,this.me=n}}class O1{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class vx{constructor(){this.fe=0,this.ge=xx(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ce()}}),new vc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=xx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Nj{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qr(),this.qe=_x(),this.Qe=new Ke(Ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(gm(i))if(r===0){const o=new ie(i.path);this.Ue(n,o,Vt.newNoDocument(o,de.min()))}else Re(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Li(r).toUint8Array()}catch(l){if(l instanceof d1)return Bo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new y0(o,s,i)}catch(l){return Bo(l instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&gm(a.target)){const l=new ie(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Vt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ye();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Ch(e,n,this.Qe,this.ke,r);return this.ke=Qr(),this.qe=_x(),this.Qe=new Ke(Ie),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new vx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ct(Ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _x(){return new Ke(ie.comparator)}function xx(){return new Ke(ie.comparator)}const Dj={asc:"ASCENDING",desc:"DESCENDING"},Mj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oj={and:"AND",or:"OR"};class Lj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vm(t,e){return t.useProto3Json||kh(e)?e:{value:e}}function Dd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jj(t,e){return Dd(t,e.toTimestamp())}function wr(t){return Re(!!t),de.fromTimestamp(function(n){const r=Fs(n);return new Ye(r.seconds,r.nanos)}(t))}function v0(t,e){return _m(t,e).canonicalString()}function _m(t,e){const n=function(s){return new Fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function j1(t){const e=Fe.fromString(t);return Re(z1(e)),e}function xm(t,e){return v0(t.databaseId,e.path)}function $f(t,e){const n=j1(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(F1(n))}function V1(t,e){return v0(t.databaseId,e)}function Vj(t){const e=j1(t);return e.length===4?Fe.emptyPath():F1(e)}function wm(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function F1(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function wx(t,e,n){return{name:xm(t,e),fields:n.value.mapValue.fields}}function Fj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Re(d===void 0||typeof d=="string"),Pt.fromBase64String(d||"")):(Re(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Pt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?F.UNKNOWN:D1(c.code);return new Y(d,c.message||"")}(o);n=new O1(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$f(t,r.document.name),i=wr(r.document.updateTime),o=r.document.createTime?wr(r.document.createTime):de.min(),a=new On({mapValue:{fields:r.document.fields}}),l=Vt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new zu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$f(t,r.document),i=r.readTime?wr(r.readTime):de.min(),o=Vt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new zu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$f(t,r.document),i=r.removedTargetIds||[];n=new zu([],i,s,null)}else{if(!("filter"in e))return ce();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Cj(s,i),a=r.targetId;n=new M1(a,o)}}return n}function Uj(t,e){let n;if(e instanceof yc)n={update:wx(t,e.key,e.value)};else if(e instanceof N1)n={delete:xm(t,e.key)};else if(e instanceof Hi)n={update:wx(t,e.key,e.data),updateMask:Qj(e.fieldMask)};else{if(!(e instanceof Tj))return ce();n={verify:xm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Yl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Jl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ce()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ce()}(t,e.precondition)),n}function Bj(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?wr(s.updateTime):wr(i);return o.isEqual(de.min())&&(o=wr(i)),new bj(o,s.transformResults||[])}(n,e))):[]}function zj(t,e){return{documents:[V1(t,e.path)]}}function $j(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=V1(t,s);const i=function(c){if(c.length!==0)return B1(ar.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:ro(m.field),direction:qj(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function Hj(t){let e=Vj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Re(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const m=U1(f);return m instanceof ar&&m1(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(w){return new Ql(so(w.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,kh(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,y=f.values||[];return new Pd(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,y=f.values||[];return new Pd(y,m)}(n.endAt)),lj(e,s,o,i,a,"F",l,c)}function Wj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function U1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=so(n.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=so(n.unaryFilter.field);return ft.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=so(n.unaryFilter.field);return ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=so(n.unaryFilter.field);return ft.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(t):t.fieldFilter!==void 0?function(n){return ft.create(so(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ar.create(n.compositeFilter.filters.map(r=>U1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ce()}}(n.compositeFilter.op))}(t):ce()}function qj(t){return Dj[t]}function Kj(t){return Mj[t]}function Gj(t){return Oj[t]}function ro(t){return{fieldPath:t.canonicalString()}}function so(t){return It.fromServerFormat(t.fieldPath)}function B1(t){return t instanceof ft?function(n){if(n.op==="=="){if(ax(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(ox(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ax(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(ox(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:Kj(n.op),value:n.value}}}(t):t instanceof ar?function(n){const r=n.getFilters().map(s=>B1(s));return r.length===1?r[0]:{compositeFilter:{op:Gj(n.op),filters:r}}}(t):ce()}function Qj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function z1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r,s,i=de.min(),o=de.min(),a=Pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.ct=e}}function Xj(t){const e=Hj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(){this.un=new Zj}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Vs.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class Zj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ct(Fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ct(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wo(0)}static kn(){return new Wo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.changes=new aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&pl(r.mutation,s,Zn.empty(),Ye.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const s=yi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ka();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=yi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Qr();const o=fl(),a=function(){return fl()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Hi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),pl(d.mutation,c,d.mutation.getFieldMask(),Ye.now())):o.set(c.key,Zn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new tV(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=fl();let s=new Ke((o,a)=>o-a),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Zn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(s.get(a.batchId)||ye()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=E1();d.forEach(m=>{if(!i.has(m)){const y=P1(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(yi());let a=-1,l=i;return o.next(c=>z.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?z.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ye())).next(d=>({batchId:a,changes:k1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=Ka();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ka();return this.indexManager.getCollectionParents(e,i).next(a=>z.forEach(a,l=>{const c=function(f,m){return new oa(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Vt.newInvalidDocument(d)))});let a=Ka();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&pl(d.mutation,c,Zn.empty(),Ye.now()),Th(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wr(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Xj(s.bundledQuery),readTime:wr(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(){this.overlays=new Ke(ie.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=yi();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=yi(),i=n.length+1,o=new ie(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ke((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=yi(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=yi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return z.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Sj(n,r));let i=this.Ir.get(n);i===void 0&&(i=ye(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.Tr=new Ct(yt.Er),this.dr=new Ct(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new yt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Fe([])),r=new yt(n,e),s=new yt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Fe([])),r=new yt(n,e),s=new yt(n,e+1);let i=ye();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new yt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Ie(e.wr,n.wr)}static Ar(e,n){return Ie(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ct(yt.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ij(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new yt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yt(n,0),s=new yt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ct(Ie);return n.forEach(s=>{const i=new yt(s,0),o=new yt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new yt(new ie(i),0);let a=new Ct(Ie);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),z.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Re(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new yt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new yt(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.Mr=e,this.docs=function(){return new Ke(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let r=Qr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Vt.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Qr();const o=n.path,a=new ie(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||$L(zL(d),r)<=0||(s.has(d.key)||Th(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ce()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lV(this)}getSize(e){return z.resolve(this.size)}}class lV extends eV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.persistence=e,this.Nr=new aa(n=>h0(n),f0),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _0,this.targetCount=0,this.kr=Wo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Wo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new l0(0),this.Kr=!1,this.Kr=!0,this.$r=new iV,this.referenceDelegate=e(this),this.Ur=new cV(this),this.indexManager=new Jj,this.remoteDocumentCache=function(s){return new aV(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Yj(n),this.Gr=new rV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new oV(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){te("MemoryPersistence","Starting transaction:",e);const s=new dV(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class dV extends WL{constructor(e){super(),this.currentSequenceNumber=e}}class x0{constructor(e){this.persistence=e,this.Jr=new _0,this.Yr=null}static Zr(e){return new x0(e)}get Xr(){if(this.Yr)return this.Yr;throw ce()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=ie.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,de.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new w0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return dR()?8:qL(Bt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new hV;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Na()<=ve.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",no(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Na()<=ve.DEBUG&&te("QueryEngine","Query:",no(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Na()<=ve.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",no(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):z.resolve())}Yi(e,n){if(dx(n))return z.resolve(null);let r=_r(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Rd(n,null,"F"),r=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ye(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Rd(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return dx(n)||s.isEqual(de.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?z.resolve(null):(Na()<=ve.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),no(n)),this.rs(e,o,n,BL(s,-1)).next(a=>a))})}ts(e,n){let r=new Ct(w1(e));return n.forEach((s,i)=>{Th(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Na()<=ve.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",no(n)),this.Ji.getDocumentsMatchingQuery(e,n,Vs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ke(Ie),this._s=new aa(i=>h0(i),f0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function mV(t,e,n,r){return new pV(t,e,n,r)}async function $1(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ye();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function gV(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,m=f.keys();let y=z.resolve();return m.forEach(w=>{y=y.next(()=>d.getEntry(l,w)).next(k=>{const E=c.docVersions.get(w);Re(E!==null),k.version.compareTo(E)<0&&(f.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),d.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function H1(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function yV(t,e){const n=he(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Pt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(f,y),function(k,E,v){return k.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,y,d)&&a.push(n.Ur.updateTargetData(i,y))});let l=Qr(),c=ye();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(vV(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(de.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return z.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function vV(t,e,n){let r=ye(),s=ye();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Qr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function _V(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function xV(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new _s(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function bm(t,e,n){const r=he(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!gc(o))throw o;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function bx(t,e,n){const r=he(t);let s=de.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const f=he(l),m=f._s.get(d);return m!==void 0?z.resolve(f.os.get(m)):f.Ur.getTargetData(c,d)}(r,o,_r(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:de.min(),n?i:ye())).next(a=>(wV(r,uj(e),a),{documents:a,Ts:i})))}function wV(t,e,n){let r=t.us.get(e)||de.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class kx{constructor(){this.activeTargetIds=gj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bV{constructor(){this.so=new kx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu=null;function Hf(){return iu===null?iu=function(){return 268435456+Math.round(2147483648*Math.random())}():iu++,"0x"+iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class IV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Hf(),l=this.xo(n,r.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(te("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Bo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=EV[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Hf();return new Promise((o,a)=>{const l=new r1;l.setWithCredentials(!0),l.listenOnce(s1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fu.NO_ERROR:const d=l.getResponseJson();te(Ot,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Fu.TIMEOUT:te(Ot,`RPC '${e}' ${i} timed out`),a(new Y(F.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const f=l.getStatus();if(te(Ot,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const w=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(v)>=0?v:F.UNKNOWN}(y.status);a(new Y(w,y.message))}else a(new Y(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(F.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{te(Ot,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);te(Ot,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Hf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=a1(),a=o1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");te(Ot,`Creating RPC '${e}' stream ${s}: ${d}`,l);const f=o.createWebChannel(d,l);let m=!1,y=!1;const w=new TV({Io:E=>{y?te(Ot,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(m||(te(Ot,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),te(Ot,`RPC '${e}' stream ${s} sending:`,E),f.send(E))},To:()=>f.close()}),k=(E,v,_)=>{E.listen(v,b=>{try{_(b)}catch(A){setTimeout(()=>{throw A},0)}})};return k(f,qa.EventType.OPEN,()=>{y||(te(Ot,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),k(f,qa.EventType.CLOSE,()=>{y||(y=!0,te(Ot,`RPC '${e}' stream ${s} transport closed`),w.So())}),k(f,qa.EventType.ERROR,E=>{y||(y=!0,Bo(Ot,`RPC '${e}' stream ${s} transport errored:`,E),w.So(new Y(F.UNAVAILABLE,"The operation could not be completed")))}),k(f,qa.EventType.MESSAGE,E=>{var v;if(!y){const _=E.data[0];Re(!!_);const b=_,A=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(A){te(Ot,`RPC '${e}' stream ${s} received error:`,A);const N=A.status;let M=function(I){const C=ut[I];if(C!==void 0)return D1(C)}(N),T=A.message;M===void 0&&(M=F.INTERNAL,T="Unknown error status: "+N+" with message "+A.message),y=!0,w.So(new Y(M,T)),f.close()}else te(Ot,`RPC '${e}' stream ${s} received:`,_),w.bo(_)}}),k(a,i1.STAT_EVENT,E=>{E.stat===hm.PROXY?te(Ot,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===hm.NOPROXY&&te(Ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return new Lj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new W1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Gr(n.toString()),Gr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Y(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SV extends q1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Fj(this.serializer,e),r=function(i){if(!("targetChange"in i))return de.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?wr(o.readTime):de.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=wm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=gm(l)?{documents:zj(i,l)}:{query:$j(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=L1(i,o.resumeToken);const c=vm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=Dd(i,o.snapshotVersion.toTimestamp());const c=vm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Wj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=wm(this.serializer),n.removeTarget=e,this.a_(n)}}class CV extends q1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Bj(e.writeResults,e.commitTime),r=wr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=wm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Uj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,_m(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,_m(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class PV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gr(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Wi(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=he(l);c.L_.add(4),await _c(c),c.q_.set("Unknown"),c.L_.delete(4),await Ph(c)}(this))})}),this.q_=new PV(r,s)}}async function Ph(t){if(Wi(t))for(const e of t.B_)await e(!0)}async function _c(t){for(const e of t.B_)await e(!1)}function K1(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),T0(n)?E0(n):la(n).r_()&&k0(n,e))}function b0(t,e){const n=he(t),r=la(n);n.N_.delete(e),r.r_()&&G1(n,e),n.N_.size===0&&(r.r_()?r.o_():Wi(n)&&n.q_.set("Unknown"))}function k0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}la(t).A_(e)}function G1(t,e){t.Q_.xe(e),la(t).R_(e)}function E0(t){t.Q_=new Nj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),la(t).start(),t.q_.v_()}function T0(t){return Wi(t)&&!la(t).n_()&&t.N_.size>0}function Wi(t){return he(t).L_.size===0}function Q1(t){t.Q_=void 0}async function NV(t){t.q_.set("Online")}async function DV(t){t.N_.forEach((e,n)=>{k0(t,e)})}async function MV(t,e){Q1(t),T0(t)?(t.q_.M_(e),E0(t)):t.q_.set("Unknown")}async function OV(t,e,n){if(t.q_.set("Online"),e instanceof O1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Md(t,r)}else if(e instanceof zu?t.Q_.Ke(e):e instanceof M1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(de.min()))try{const r=await H1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(Pt.EMPTY_BYTE_STRING,d.snapshotVersion)),G1(i,l);const f=new _s(d.target,l,c,d.sequenceNumber);k0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){te("RemoteStore","Failed to raise snapshot:",r),await Md(t,r)}}async function Md(t,e,n){if(!gc(e))throw e;t.L_.add(1),await _c(t),t.q_.set("Offline"),n||(n=()=>H1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ph(t)})}function Y1(t,e){return e().catch(n=>Md(t,n,e))}async function Rh(t){const e=he(t),n=Us(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;LV(e);)try{const s=await _V(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,jV(e,s)}catch(s){await Md(e,s)}X1(e)&&J1(e)}function LV(t){return Wi(t)&&t.O_.length<10}function jV(t,e){t.O_.push(e);const n=Us(t);n.r_()&&n.V_&&n.m_(e.mutations)}function X1(t){return Wi(t)&&!Us(t).n_()&&t.O_.length>0}function J1(t){Us(t).start()}async function VV(t){Us(t).p_()}async function FV(t){const e=Us(t);for(const n of t.O_)e.m_(n.mutations)}async function UV(t,e,n){const r=t.O_.shift(),s=g0.from(r,e,n);await Y1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Rh(t)}async function BV(t,e){e&&Us(t).V_&&await async function(r,s){if(function(o){return Aj(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Us(r).s_(),await Y1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Rh(r)}}(t,e),X1(t)&&J1(t)}async function Tx(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const r=Wi(n);n.L_.add(3),await _c(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ph(n)}async function zV(t,e){const n=he(t);e?(n.L_.delete(2),await Ph(n)):e||(n.L_.add(2),await _c(n),n.q_.set("Unknown"))}function la(t){return t.K_||(t.K_=function(n,r,s){const i=he(n);return i.w_(),new SV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:NV.bind(null,t),Ro:DV.bind(null,t),mo:MV.bind(null,t),d_:OV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),T0(t)?E0(t):t.q_.set("Unknown")):(await t.K_.stop(),Q1(t))})),t.K_}function Us(t){return t.U_||(t.U_=function(n,r,s){const i=he(n);return i.w_(),new CV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:VV.bind(null,t),mo:BV.bind(null,t),f_:FV.bind(null,t),g_:UV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Rh(t)):(await t.U_.stop(),t.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new I0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S0(t,e){if(Gr("AsyncQueue",`${e}: ${t}`),gc(t))return new Y(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Ka(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new Co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.W_=new Ke(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ce():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class qo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qo(e,n,Co.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HV{constructor(){this.queries=Sx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=Sx(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Y(F.ABORTED,"Firestore shutting down"))}}function Sx(){return new aa(t=>x1(t),Eh)}async function Z1(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new $V,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=S0(o,`Initialization of query '${no(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&C0(n)}async function eI(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function WV(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&C0(n)}function qV(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function C0(t){t.Y_.forEach(e=>{e.next()})}var km,Cx;(Cx=km||(km={})).ea="default",Cx.Cache="cache";class tI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.key=e}}class rI{constructor(e){this.key=e}}class KV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=w1(e),this.Ra=new Co(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Ix,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),y=Th(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;m&&y?m.data.isEqual(y.data)?w!==k&&(r.track({type:3,doc:y}),E=!0):this.ga(m,y)||(r.track({type:2,doc:y}),E=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),E=!0):m&&!y&&(r.track({type:1,doc:m}),E=!0,(l||c)&&(a=!0)),E&&(y?(o=o.add(y),i=k?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(y,w){const k=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return k(y)-k(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new qo(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ix,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new rI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new nI(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class GV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class QV{constructor(e){this.key=e,this.va=!1}}class YV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new aa(a=>x1(a),Eh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(ie.comparator),this.Na=new Map,this.La=new _0,this.Ba={},this.ka=new Map,this.qa=Wo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function XV(t,e,n=!0){const r=cI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await sI(r,e,n,!0),s}async function JV(t,e){const n=cI(t);await sI(n,e,!0,!1)}async function sI(t,e,n,r){const s=await xV(t.localStore,_r(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await ZV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&K1(t.remoteStore,s),a}async function ZV(t,e,n,r,s){t.Ka=(f,m,y)=>async function(k,E,v,_){let b=E.view.ma(v);b.ns&&(b=await bx(k.localStore,E.query,!1).then(({documents:T})=>E.view.ma(T,b)));const A=_&&_.targetChanges.get(E.targetId),N=_&&_.targetMismatches.get(E.targetId)!=null,M=E.view.applyChanges(b,k.isPrimaryClient,A,N);return Px(k,E.targetId,M.wa),M.snapshot}(t,f,m,y);const i=await bx(t.localStore,e,!0),o=new KV(e,i.Ts),a=o.ma(i.documents),l=vc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Px(t,n,c.wa);const d=new GV(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function e4(t,e,n){const r=he(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Eh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&b0(r.remoteStore,s.targetId),Em(r,s.targetId)}).catch(mc)):(Em(r,s.targetId),await bm(r.localStore,s.targetId,!0))}async function t4(t,e){const n=he(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),b0(n.remoteStore,r.targetId))}async function n4(t,e,n){const r=c4(t);try{const s=await function(o,a){const l=he(o),c=Ye.now(),d=a.reduce((y,w)=>y.add(w.key),ye());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Qr(),k=ye();return l.cs.getEntries(y,d).next(E=>{w=E,w.forEach((v,_)=>{_.isValidDocument()||(k=k.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,w)).next(E=>{f=E;const v=[];for(const _ of a){const b=Ej(_,f.get(_.key).overlayedDocument);b!=null&&v.push(new Hi(_.key,b,h1(b.value.mapValue),xr.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,v,a)}).next(E=>{m=E;const v=E.applyToLocalDocumentSet(f,k);return l.documentOverlayCache.saveOverlays(y,E.batchId,v)})}).then(()=>({batchId:m.batchId,changes:k1(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ke(Ie)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await xc(r,s.changes),await Rh(r.remoteStore)}catch(s){const i=S0(s,"Failed to persist write");n.reject(i)}}async function iI(t,e){const n=he(t);try{const r=await yV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Re(o.va):s.removedDocuments.size>0&&(Re(o.va),o.va=!1))}),await xc(n,r,e)}catch(r){await mc(r)}}function Ax(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=he(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&C0(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function r4(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ke(ie.comparator);o=o.insert(i,Vt.newNoDocument(i,de.min()));const a=ye().add(i),l=new Ch(de.min(),new Map,new Ke(Ie),o,a);await iI(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),A0(r)}else await bm(r.localStore,e,!1).then(()=>Em(r,e,n)).catch(mc)}async function s4(t,e){const n=he(t),r=e.batch.batchId;try{const s=await gV(n.localStore,e);aI(n,r,null),oI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xc(n,s)}catch(s){await mc(s)}}async function i4(t,e,n){const r=he(t);try{const s=await function(o,a){const l=he(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Re(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);aI(r,e,n),oI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xc(r,s)}catch(s){await mc(s)}}function oI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function aI(t,e,n){const r=he(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Em(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||lI(t,r)})}function lI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(b0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),A0(t))}function Px(t,e,n){for(const r of n)r instanceof nI?(t.La.addReference(r.key,e),o4(t,r)):r instanceof rI?(te("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||lI(t,r.key)):ce()}function o4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(te("SyncEngine","New document in limbo: "+n),t.xa.add(r),A0(t))}function A0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Fe.fromString(e)),r=t.qa.next();t.Na.set(r,new QV(n)),t.Oa=t.Oa.insert(n,r),K1(t.remoteStore,new _s(_r(p0(n.path)),r,"TargetPurposeLimboResolution",l0.oe))}}async function xc(t,e,n){const r=he(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=w0.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=he(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>z.forEach(c,m=>z.forEach(m.$i,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>z.forEach(m.Ui,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!gc(f))throw f;te("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=d.os.get(m),w=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(m,k)}}}(r.localStore,i))}async function a4(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const r=await $1(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new Y(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xc(n,r.hs)}}function l4(t,e){const n=he(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let s=ye();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function cI(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r4.bind(null,e),e.Ca.d_=WV.bind(null,e.eventManager),e.Ca.$a=qV.bind(null,e.eventManager),e}function c4(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i4.bind(null,e),e}class Od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ah(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return mV(this.persistence,new fV,e.initialUser,this.serializer)}Ga(e){return new uV(x0.Zr,this.serializer)}Wa(e){return new bV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Od.provider={build:()=>new Od};class Tm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ax(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=a4.bind(null,this.syncEngine),await zV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HV}()}createDatastore(e){const n=Ah(e.databaseInfo.databaseId),r=function(i){return new IV(i)}(e.databaseInfo);return function(i,o,a,l){return new AV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new RV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ax(this.syncEngine,n,0),function(){return Ex.D()?new Ex:new kV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const f=new YV(s,i,o,a,l,c);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=he(s);te("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await _c(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Tm.provider={build:()=>new Tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Gr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Lt.UNAUTHENTICATED,this.clientId=c1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{te("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(te("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=S0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qf(t,e){t.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await d4(t);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Tx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Tx(e.remoteStore,s)),t._onlineComponents=e}async function d4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await qf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Bo("Error using user provided cache. Falling back to memory cache: "+n),await qf(t,new Od)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await qf(t,new Od);return t._offlineComponents}async function dI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await Rx(t,t._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await Rx(t,new Tm))),t._onlineComponents}function h4(t){return dI(t).then(e=>e.syncEngine)}async function hI(t){const e=await dI(t),n=e.eventManager;return n.onListen=XV.bind(null,e.syncEngine),n.onUnlisten=e4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=t4.bind(null,e.syncEngine),n}function f4(t,e,n={}){const r=new Fr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new uI({next:m=>{d.Za(),o.enqueueAndForget(()=>eI(i,f));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Y(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new Y(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new tI(p0(a.path),d,{includeMetadataChanges:!0,_a:!0});return Z1(i,f)}(await hI(t),t.asyncQueue,e,n,r)),r.promise}function p4(t,e,n={}){const r=new Fr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new uI({next:m=>{d.Za(),o.enqueueAndForget(()=>eI(i,f)),m.fromCache&&l.source==="server"?c.reject(new Y(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new tI(a,d,{includeMetadataChanges:!0,_a:!0});return Z1(i,f)}(await hI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t,e,n){if(!n)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m4(t,e,n,r){if(e===!0&&r===!0)throw new Y(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dx(t){if(!ie.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Mx(t){if(ie.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce()}function Bs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nh(t);throw new Y(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ox({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ox(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NL;switch(r.type){case"firstParty":return new LL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nx.get(n);r&&(te("ComponentProvider","Removing Datastore"),Nx.delete(n),r.terminate())}(this),Promise.resolve()}}function g4(t,e,n,r={}){var s;const i=(t=Bs(t,Dh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Lt.MOCK_USER;else{a=BE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Lt(c)}t._authCredentials=new DL(new l1(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class yn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}}class Ms extends Xs{constructor(e,n,r){super(e,n,p0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new ie(e))}withConverter(e){return new Ms(this.firestore,e,this._path)}}function ml(t,e,...n){if(t=qe(t),pI("collection","path",e),t instanceof Dh){const r=Fe.fromString(e,...n);return Mx(r),new Ms(t,null,r)}{if(!(t instanceof yn||t instanceof Ms))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Mx(r),new Ms(t.firestore,null,r)}}function Ld(t,e,...n){if(t=qe(t),arguments.length===1&&(e=c1.newId()),pI("doc","path",e),t instanceof Dh){const r=Fe.fromString(e,...n);return Dx(r),new yn(t,null,new ie(r))}{if(!(t instanceof yn||t instanceof Ms))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Dx(r),new yn(t.firestore,t instanceof Ms?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new W1(this,"async_queue_retry"),this.Vu=()=>{const r=Wf();r&&te("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Wf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Fr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!gc(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Gr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=I0.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class wc extends Dh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Lx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lx(e),this._firestoreClient=void 0,await e}}}function y4(t,e){const n=typeof t=="object"?t:gh(),r=typeof t=="string"?t:"(default)",s=Qs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=VE("firestore");i&&g4(s,...i)}return s}function P0(t){if(t._terminated)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||v4(t),t._firestoreClient}function v4(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new QL(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fI(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new u4(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(Pt.fromBase64String(e))}catch(n){throw new Y(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ko(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=/^__.*__$/;class x4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new yc(e,this.data,n,this.fieldTransforms)}}function mI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}class O0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new O0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mI(this.Cu)&&_4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class w4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ah(e)}Qu(e,n,r,s=!1){return new O0({Cu:e,methodName:n,qu:r,path:It.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function L0(t){const e=t._freezeSettings(),n=Ah(t._databaseId);return new w4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gI(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);_I("Data must be an object, but it was:",o,r);const a=yI(r,o);let l,c;if(i.merge)l=new Zn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=k4(e,f,n);if(!o.contains(m))throw new Y(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);T4(d,m)||d.push(m)}l=new Zn(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new x4(new On(a),l,c)}class j0 extends N0{_toFieldTransform(e){return new xj(e.path,new Yl)}isEqual(e){return e instanceof j0}}function b4(t,e,n,r=!1){return V0(n,t.Qu(r?4:3,e))}function V0(t,e){if(vI(t=qe(t)))return _I("Unsupported field value:",e,t),yI(t,e);if(t instanceof N0)return function(r,s){if(!mI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=V0(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ye.fromDate(r);return{timestampValue:Dd(s.serializer,i)}}if(r instanceof Ye){const i=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dd(s.serializer,i)}}if(r instanceof D0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ko)return{bytesValue:L1(s.serializer,r._byteString)};if(r instanceof yn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:v0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof M0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return m0(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Nh(r)}`)}(t,e)}function yI(t,e){const n={};return u1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(r,s)=>{const i=V0(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function vI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof D0||t instanceof Ko||t instanceof yn||t instanceof N0||t instanceof M0)}function _I(t,e,n){if(!vI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Nh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function k4(t,e,n){if((e=qe(e))instanceof R0)return e._internalPath;if(typeof e=="string")return xI(t,e);throw jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const E4=new RegExp("[~\\*/\\[\\]]");function xI(t,e,n){if(e.search(E4)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new R0(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Y(F.INVALID_ARGUMENT,a+t+l)}function T4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I4 extends wI{data(){return super.data()}}function Mh(t,e){return typeof e=="string"?xI(t,e):e instanceof R0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F0{}class U0 extends F0{}function Im(t,e,...n){let r=[];e instanceof F0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof B0).length,a=i.filter(l=>l instanceof Oh).length;if(o>1||o>0&&a>0)throw new Y(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Oh extends U0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Oh(e,n,r)}_apply(e){const n=this._parse(e);return EI(e._query,n),new Xs(e.firestore,e.converter,ym(e._query,n))}_parse(e){const n=L0(e.firestore);return function(i,o,a,l,c,d,f){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Fx(f,d);const y=[];for(const w of f)y.push(Vx(l,i,w));m={arrayValue:{values:y}}}else m=Vx(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Fx(f,d),m=b4(a,o,f,d==="in"||d==="not-in");return ft.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function jx(t,e,n){const r=e,s=Mh("where",t);return Oh._create(s,r,n)}class B0 extends F0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new B0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ar.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)EI(o,l),o=ym(o,l)}(e._query,n),new Xs(e.firestore,e.converter,ym(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class z0 extends U0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new z0(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ql(i,o)}(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new oa(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function bI(t,e="asc"){const n=e,r=Mh("orderBy",t);return z0._create(r,n)}class $0 extends U0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new $0(e,n,r)}_apply(e){return new Xs(e.firestore,e.converter,Rd(e._query,this._limit,this._limitType))}}function kI(t){return $0._create("limit",t,"F")}function Vx(t,e,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new Y(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_1(e)&&n.indexOf("/")!==-1)throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!ie.isDocumentKey(r))throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ix(t,new ie(r))}if(n instanceof yn)return ix(t,n._key);throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(n)}.`)}function Fx(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EI(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class C4{convertValue(e,n="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ia(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>tt(o.doubleValue));return new M0(i)}convertGeoPoint(e){return new D0(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=u0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const n=Fs(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Re(z1(r));const s=new Kl(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||Gr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class II extends wI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $u extends II{data(e={}){return super.data(e)}}class A4{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Qa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $u(this._firestore,this._userDataWriter,r.key,r,new Qa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new $u(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Qa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new $u(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Qa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:P4(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function P4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t){t=Bs(t,yn);const e=Bs(t.firestore,wc);return f4(P0(e),t._key).then(n=>R4(e,t,n))}class CI extends C4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function Sm(t){t=Bs(t,Xs);const e=Bs(t.firestore,wc),n=P0(e),r=new CI(e);return S4(t._query),p4(n,t._query).then(s=>new A4(e,r,t,s))}function Cm(t,e,n){t=Bs(t,yn);const r=Bs(t.firestore,wc),s=TI(t.converter,e,n);return PI(r,[gI(L0(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,xr.none())])}function AI(t,e){const n=Bs(t.firestore,wc),r=Ld(t),s=TI(t.converter,e);return PI(n,[gI(L0(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,xr.exists(!1))]).then(()=>r)}function PI(t,e){return function(r,s){const i=new Fr;return r.asyncQueue.enqueueAndForget(async()=>n4(await h4(r),s,i)),i.promise}(P0(t),e)}function R4(t,e,n){const r=n.docs.get(e._key),s=new CI(t);return new II(t,s,e._key,r,new Qa(n.hasPendingWrites,n.fromCache),e.converter)}function Zl(){return new j0("serverTimestamp")}(function(e,n=!0){(function(s){sa=s})($i),or(new Bn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new wc(new ML(r.getProvider("auth-internal")),new VL(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),pn(ex,"4.7.3",e),pn(ex,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="firebasestorage.googleapis.com",NI="storageBucket",N4=2*60*1e3,D4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je extends $n{constructor(e,n,r=0){super(Kf(e),`Firebase Storage: ${n} (${Kf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function Kf(t){return"storage/"+t}function H0(){const t="An unknown error occurred, please check the error payload for server response.";return new Je(Xe.UNKNOWN,t)}function M4(t){return new Je(Xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function O4(t){return new Je(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function L4(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Je(Xe.UNAUTHENTICATED,t)}function j4(){return new Je(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function V4(t){return new Je(Xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function F4(){return new Je(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U4(){return new Je(Xe.CANCELED,"User canceled the upload/download.")}function B4(t){return new Je(Xe.INVALID_URL,"Invalid URL '"+t+"'.")}function z4(t){return new Je(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $4(){return new Je(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+NI+"' property when initializing the app?")}function H4(){return new Je(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function W4(){return new Je(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function q4(t){return new Je(Xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Am(t){return new Je(Xe.INVALID_ARGUMENT,t)}function DI(){return new Je(Xe.APP_DELETED,"The Firebase app was deleted.")}function K4(t){return new Je(Xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gl(t,e){return new Je(Xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Da(t){throw new Je(Xe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=En.makeFromUrl(e,n)}catch{return new En(e,"")}if(r.path==="")return r;throw z4(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(A){A.path_=decodeURIComponent(A.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${s}/o${m}`,"i"),w={bucket:1,path:3},k=n===RI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",v=new RegExp(`^https?://${k}/${s}/${E}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:y,indices:w,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let A=0;A<b.length;A++){const N=b[A],M=N.regex.exec(e);if(M){const T=M[N.indices.bucket];let x=M[N.indices.path];x||(x=""),r=new En(T,x),N.postModify(r);break}}if(r==null)throw B4(e);return r}}class G4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...E){c||(c=!0,e.apply(null,E))}function f(E){s=setTimeout(()=>{s=null,t(y,l())},E)}function m(){i&&clearTimeout(i)}function y(E,...v){if(c){m();return}if(E){m(),d.call(null,E,...v);return}if(l()||o){m(),d.call(null,E,...v);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let w=!1;function k(E){w||(w=!0,m(),!c&&(s!==null?(E||(a=2),clearTimeout(s),f(0)):E||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function Y4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){return t!==void 0}function J4(t){return typeof t=="object"&&!Array.isArray(t)}function W0(t){return typeof t=="string"||t instanceof String}function Ux(t){return q0()&&t instanceof Blob}function q0(){return typeof Blob<"u"}function Bx(t,e,n,r){if(r<e)throw Am(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Am(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function MI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ei;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ei||(Ei={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,n,r,s,i,o,a,l,c,d,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,w)=>{this.resolve_=y,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ou(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ei.NO_ERROR,l=i.getStatus();if(!a||Z4(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ei.ABORT;r(!1,new ou(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ou(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());X4(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=H0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?DI():U4();o(l)}else{const l=F4();o(l)}};this.canceled_?n(!1,new ou(!1,null,!0)):this.backoffId_=Q4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Y4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ou{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function iF(t,e,n,r,s,i,o=!0){const a=MI(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return rF(c,e),tF(c,n),nF(c,i),sF(c,r),new eF(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aF(...t){const e=oF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(q0())return new Blob(t);throw new Je(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t){if(typeof atob>"u")throw q4("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gf{constructor(e,n){this.data=e,this.contentType=n||null}}function uF(t,e){switch(t){case gr.RAW:return new Gf(OI(e));case gr.BASE64:case gr.BASE64URL:return new Gf(LI(t,e));case gr.DATA_URL:return new Gf(hF(e),fF(e))}throw H0()}function OI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function dF(t){let e;try{e=decodeURIComponent(t)}catch{throw gl(gr.DATA_URL,"Malformed data URL.")}return OI(e)}function LI(t,e){switch(t){case gr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw gl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case gr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw gl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cF(e)}catch(s){throw s.message.includes("polyfill")?s:gl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class jI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw gl(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=pF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function hF(t){const e=new jI(t);return e.base64?LI(gr.BASE64,e.rest):dF(e.rest)}function fF(t){return new jI(t).contentType}function pF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){let r=0,s="";Ux(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ux(this.data_)){const r=this.data_,s=lF(r,e,n);return s===null?null:new ms(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ms(r,!0)}}static getBlob(...e){if(q0()){const n=e.map(r=>r instanceof ms?r.data_:r);return new ms(aF.apply(null,n))}else{const n=e.map(o=>W0(o)?uF(gr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ms(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){let e;try{e=JSON.parse(t)}catch{return null}return J4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function gF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function FI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t,e){return e}class Qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||yF}}let au=null;function vF(t){return!W0(t)||t.length<2?t:FI(t)}function UI(){if(au)return au;const t=[];t.push(new Qt("bucket")),t.push(new Qt("generation")),t.push(new Qt("metageneration")),t.push(new Qt("name","fullPath",!0));function e(i,o){return vF(o)}const n=new Qt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Qt("size");return s.xform=r,t.push(s),t.push(new Qt("timeCreated")),t.push(new Qt("updated")),t.push(new Qt("md5Hash",null,!0)),t.push(new Qt("cacheControl",null,!0)),t.push(new Qt("contentDisposition",null,!0)),t.push(new Qt("contentEncoding",null,!0)),t.push(new Qt("contentLanguage",null,!0)),t.push(new Qt("contentType",null,!0)),t.push(new Qt("metadata","customMetadata",!0)),au=t,au}function _F(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new En(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function xF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return _F(r,t),r}function BI(t,e,n){const r=VI(e);return r===null?null:xF(t,r,n)}function wF(t,e,n,r){const s=VI(e);if(s===null||!W0(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,f=t.fullPath,m="/b/"+o(d)+"/o/"+o(f),y=K0(m,n,r),w=MI({alt:"media",token:c});return y+w})[0]}function bF(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class zI{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t){if(!t)throw H0()}function kF(t,e){function n(r,s){const i=BI(t,s,e);return $I(i!==null),i}return n}function EF(t,e){function n(r,s){const i=BI(t,s,e);return $I(i!==null),wF(i,s,t.host,t._protocol)}return n}function HI(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=j4():s=L4():n.getStatus()===402?s=O4(t.bucket):n.getStatus()===403?s=V4(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function TF(t){const e=HI(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=M4(t.path)),i.serverResponse=s.serverResponse,i}return n}function IF(t,e,n){const r=e.fullServerUrl(),s=K0(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new zI(s,i,EF(t,n),o);return a.errorHandler=TF(e),a}function SF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function CF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=SF(null,e)),r}function AF(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let A=0;A<2;A++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=CF(e,r,s),d=bF(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=ms.getBlob(f,r,m);if(y===null)throw H4();const w={name:c.fullPath},k=K0(i,t.host,t._protocol),E="POST",v=t.maxUploadRetryTime,_=new zI(k,E,kF(t,n),v);return _.urlParams=w,_.headers=o,_.body=y.uploadData(),_.errorHandler=HI(e),_}class PF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ei.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ei.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ei.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Da("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Da("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Da("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Da("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Da("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class RF extends PF{initXhr(){this.xhr_.responseType="text"}}function WI(){return new RF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this._service=e,n instanceof En?this._location=n:this._location=En.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Vi(e,n)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FI(this._location.path)}get storage(){return this._service}get parent(){const e=mF(this._location.path);if(e===null)return null;const n=new En(this._location.bucket,e);return new Vi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw K4(e)}}function NF(t,e,n){t._throwIfRoot("uploadBytes");const r=AF(t.storage,t._location,UI(),new ms(e,!0),n);return t.storage.makeRequestWithTokens(r,WI).then(s=>({metadata:s,ref:t}))}function DF(t){t._throwIfRoot("getDownloadURL");const e=IF(t.storage,t._location,UI());return t.storage.makeRequestWithTokens(e,WI).then(n=>{if(n===null)throw W4();return n})}function MF(t,e){const n=gF(t._location.path,e),r=new En(t._location.bucket,n);return new Vi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t){return/^[A-Za-z]+:\/\//.test(t)}function LF(t,e){return new Vi(t,e)}function qI(t,e){if(t instanceof G0){const n=t;if(n._bucket==null)throw $4();const r=new Vi(n,n._bucket);return e!=null?qI(r,e):r}else return e!==void 0?MF(t,e):t}function jF(t,e){if(e&&OF(e)){if(t instanceof G0)return LF(t,e);throw Am("To use ref(service, url), the first argument must be a Storage instance.")}else return qI(t,e)}function zx(t,e){const n=e==null?void 0:e[NI];return n==null?null:En.makeFromBucketSpec(n,t)}function VF(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:BE(s,t.app.options.projectId))}class G0{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=RI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=N4,this._maxUploadRetryTime=D4,this._requests=new Set,s!=null?this._bucket=En.makeFromBucketSpec(s,this._host):this._bucket=zx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=zx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Bx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Bx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new G4(DI());{const o=iF(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const $x="@firebase/storage",Hx="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="storage";function FF(t,e,n){return t=qe(t),NF(t,e,n)}function UF(t){return t=qe(t),DF(t)}function BF(t,e){return t=qe(t),jF(t,e)}function Wx(t=gh(),e){t=qe(t);const r=Qs(t,KI).getImmediate({identifier:e}),s=VE("storage");return s&&zF(r,...s),r}function zF(t,e,n,r={}){VF(t,e,n,r)}function $F(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new G0(n,r,s,e,$i)}function HF(){or(new Bn(KI,$F,"PUBLIC").setMultipleInstances(!0)),pn($x,Hx,""),pn($x,Hx,"esm2017")}HF();let GI=null,QI=null;try{({initializeAppCheck:GI,ReCaptchaV3Provider:QI}=require("firebase/app-check"))}catch{}const eo={apiKey:"AIzaSyAgRnS9ugijuxF1qMCfr-USXe5AkYAnLME",authDomain:"agentic-hackthon.firebaseapp.com",projectId:"agentic-hackthon",appId:"1:1063716672043:web:681fd771d31ad548f6106e",storageBucket:"agentic-hackthon.firebasestorage.app",messagingSenderId:"1063716672043",measurementId:"G-S3ZEB9M54W"};function WF(t){try{let e=String(t).trim();if(/^https?:\/\//i.test(e))try{e=new URL(e).hostname}catch{}return/\.firebasestorage\.app$/i.test(e)&&(e=e.replace(/\.firebasestorage\.app$/i,".appspot.com")),e=e.split("/")[0],e}catch{return t}}function qF(t){return!!(t&&t.apiKey&&t.authDomain&&t.projectId&&t.appId)}let as,kt,KF,Tt,Vd;try{if(!qF(eo))throw new Error("Missing Firebase env configuration");const t=WF(eo.storageBucket)||(eo.projectId?`${eo.projectId}.appspot.com`:void 0),e={...eo,storageBucket:t};as=qE(e),kt=uO(as),Tt=y4(as),Vd=t?Wx(as,`gs://${t}`):Wx(as);try{}catch{}if(eo.measurementId)try{AL().then(n=>{n&&(KF=SL(as))}).catch(()=>{})}catch{}}catch(t){console.error("[Firebase] Initialization failed:",(t==null?void 0:t.message)||t),as=null,kt={currentUser:null},Tt=null,Vd=null}function GF(t){return as&&kt?OD(kt,t):(t(null),()=>{})}function QF(){const[t,e]=D.useState(null),[n,r]=D.useState(!0),[s,i]=D.useState(null),o=D.useCallback(async v=>{try{if(!v||!Tt)return;const _=Ld(Tt,"users",v.uid),b=await SI(_),A={uid:v.uid,email:v.email||null,displayName:v.displayName||null,photoURL:v.photoURL||null,phoneNumber:v.phoneNumber||null,providerIds:(v.providerData||[]).map(N=>N.providerId),updatedAt:Zl()};b.exists()?await Cm(_,A,{merge:!0}):await Cm(_,{...A,createdAt:Zl(),role:"user"},{merge:!0})}catch{}},[]);D.useEffect(()=>{const v=GF(async _=>{e(_||null),r(!1)});return IM(kt).then(async _=>{_&&_.user&&(await o(_.user),e(_.user))}).catch(()=>{}).finally(()=>{}),()=>v&&v()},[o]);const a=D.useCallback(async({email:v,password:_})=>{const b=await RD(kt,v,_);return e(b.user),b.user},[]),l=D.useCallback(async({email:v,password:_,name:b})=>{const A=await PD(kt,v,_);if(b)try{await xT(A.user,{displayName:b})}catch{}return await o(A.user),e({...A.user}),A.user},[o]),c=D.useCallback(async()=>{await LD(kt),e(null)},[]),d=D.useCallback(async()=>kt.currentUser?kt.currentUser.getIdToken():null,[]),f=D.useCallback(async()=>{const v=new Nr;v.setCustomParameters({prompt:"select_account"});const _=typeof navigator<"u"&&navigator.userAgent||"",b=/iPad|iPhone|iPod/.test(_),A=/Android/.test(_),N=typeof window<"u"&&window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,M=/FBAN|FBAV|Instagram|Line|MicroMessenger|Twitter|FB_IAB|VKClient|Snapchat/.test(_);try{if(b||A||N||M)return await j_(kt,v),null;const T=await _M(kt,v);return await o(T.user),e(T.user),T.user}catch(T){const x=T&&T.code?String(T.code):"";if(x==="auth/popup-closed-by-user"||x==="auth/popup-blocked"||x==="auth/cancelled-popup-request")return await j_(kt,v),null;throw console.error("[Auth] Google sign-in failed:",T),T}},[o]),m=D.useCallback(()=>{if(typeof window>"u")return null;if(!window.recaptchaVerifier){const v="recaptcha-container";let _=document.getElementById(v);_||(_=document.createElement("div"),_.id=v,_.style.display="inline-block",document.body.appendChild(_)),window.recaptchaVerifier=new uM(kt,v,{size:"invisible"})}return window.recaptchaVerifier},[]);function y(v){if(!v)return"";let b=String(v).replace(/[^0-9]/g,"");return b.startsWith("91")&&b.length>10&&(b=b.slice(b.length-10)),b.length===11&&b.startsWith("0")&&(b=b.slice(1)),b}function w(v){return/^[6-9][0-9]{9}$/.test(v)}const k=D.useCallback(async v=>{const _=m();try{_&&typeof _.render=="function"&&await _.render()}catch{}const b=y(v);if(!w(b)){const M=new Error("Please enter a valid Indian mobile number (10 digits starting with 6-9).");throw M.code="auth/invalid-india-number",M}const A=`+91${b}`,N=await fM(kt,A,_);return i(N),N},[m]),E=D.useCallback(async v=>{const _=s;if(!_)throw new Error("No phone confirmation in progress");const b=await _.confirm(v);return await o(b.user),e(b.user),i(null),b.user},[s,o]);return{user:t,loading:n,login:a,signup:l,logout:c,getIdToken:d,loginWithGoogle:f,sendPhoneCode:k,confirmPhoneCode:E,phoneConfirmation:s}}const YI=D.createContext(null);function YF({children:t}){const e=QF();return h.jsx(YI.Provider,{value:e,children:t})}function Jr(){return D.useContext(YI)}function Ae({variant:t="primary",className:e="",disabled:n=!1,children:r,...s}){const i="inline-flex items-center justify-center rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed px-3.5 py-2.5 text-sm font-medium shadow-sm focus:ring-offset-slate-50 dark:focus:ring-offset-slate-900",o={primary:"bg-gradient-to-tr from-brand-600 to-brand-700 text-white hover:from-brand-600 hover:to-brand-800 focus:ring-brand-600",secondary:"bg-blue-50 text-blue-900 hover:bg-blue-100 focus:ring-blue-300 dark:bg-slate-800 dark:text-blue-100 dark:hover:bg-slate-700",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",ghost:"bg-transparent text-slate-700 hover:bg-brand-50 dark:text-slate-200 dark:hover:bg-slate-800 focus:ring-brand-300"},a=`${i} ${o[t]||o.primary} ${e}`.trim();return h.jsx("button",{className:a,disabled:n,...s,children:r})}function XF(){const{theme:t,toggleTheme:e}=X2(),{user:n,logout:r,loading:s,loginWithGoogle:i}=Jr(),[o,a]=D.useState(!1),[l,c]=D.useState(!1),d=({isActive:f})=>`px-3 py-2 rounded-md transition-colors hover:text-brand-700 hover:bg-brand-50 dark:hover:bg-slate-800 ${f?"text-brand-700 bg-brand-50 dark:text-blue-300 dark:bg-slate-800":"text-slate-700 dark:text-slate-200"}`;return h.jsx("nav",{className:"sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-slate-900/70 bg-white dark:bg-slate-900 border-b border-brand-100 dark:border-slate-800 shadow-subtle",children:h.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-3",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"mr-auto flex items-center gap-3",children:[h.jsx("div",{className:"w-7 h-7 rounded-md bg-gradient-to-tr from-brand-600 to-blue-500 shadow ring-1 ring-brand-500/30"}),h.jsx("span",{className:"font-semibold tracking-wide text-slate-900 dark:text-slate-100",children:"Health Sphere"})]}),h.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[h.jsx(rn,{className:d,to:"/",children:"Home"}),h.jsx(rn,{className:d,to:"/dashboard",children:"Dashboard"}),h.jsx(rn,{className:d,to:"/daily-checkin",children:"Daily Check-in"}),h.jsx(rn,{className:d,to:"/upload-report",children:"Upload Report"})]}),h.jsxs("div",{className:"flex items-center gap-2 relative",children:[h.jsxs("button",{onClick:e,"aria-label":"Toggle theme","aria-pressed":t==="dark",className:`relative inline-flex w-14 h-8 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900
                bg-blue-50 dark:bg-slate-700`,children:[h.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-amber-500 ${theme === 'dark' ? 'opacity-0' : 'opacity-100'}",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M12 4a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1Zm0 13a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm7-6a1 1 0 0 1 1 1h1a1 1 0 1 1 0 2h-1a1 1 0 1 1-2 0 1 1 0 0 1 1-1ZM4 12a1 1 0 0 1 1-1H6a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Zm12.95-6.364a1 1 0 0 1 1.414 0l.707.707a1 1 0 1 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414ZM4.929 17.657a1 1 0 0 1 1.414 0l.707.707a1 1 0 0 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414Zm12.021 2.121a1 1 0 0 1 0-1.414l.707-.707a1 1 0 1 1 1.414 1.414l-.707.707a1 1 0 0 1-1.414 0ZM6.05 5.636a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 3.929 6.343l.707-.707A1 1 0 0 1 6.05 5.636Z"})})}),h.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-blue-400 ${theme === 'dark' ? 'opacity-100' : 'opacity-0'}",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"})})}),h.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 rounded-full bg-white shadow transition-transform duration-300 ${t==="dark"?"translate-x-6":"translate-x-0"}`})]}),!s&&(n?h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>c(f=>!f),className:"relative inline-flex items-center gap-2 px-2 py-1 rounded-md border border-brand-100 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-brand-50 dark:hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600","aria-haspopup":"menu","aria-expanded":l,children:[h.jsxs("span",{className:"relative inline-block",children:[n.photoURL?h.jsx("img",{src:n.photoURL,alt:"avatar",className:"w-8 h-8 rounded-full ring-2 ring-brand-500/40"}):h.jsx("span",{className:"w-8 h-8 rounded-full grid place-items-center text-white text-sm font-medium bg-gradient-to-tr from-brand-600 to-blue-500 ring-2 ring-brand-500/40",children:(n.displayName||n.email||"?").slice(0,1).toUpperCase()}),h.jsx("span",{className:"absolute -right-0.5 -bottom-0.5 block w-3 h-3 rounded-full bg-emerald-500 ring-2 ring-white dark:ring-slate-900","aria-hidden":"true"})]}),h.jsx("span",{className:"hidden sm:inline text-sm max-w-[10rem] truncate",children:n.displayName||n.email}),h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-70",children:h.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),l&&h.jsxs("div",{role:"menu",className:"absolute right-0 mt-2 w-60 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg z-50",children:[h.jsxs("div",{className:"px-3 py-2 text-sm text-slate-700 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700",children:[h.jsx("div",{className:"font-medium truncate",children:n.displayName||"Signed in"}),h.jsx("div",{className:"text-xs text-slate-500 truncate",children:n.email})]}),h.jsx("a",{href:"/profile",className:"block px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",onClick:()=>c(!1),children:"Profile"}),h.jsx("button",{onClick:async()=>{c(!1);try{await r()}catch{}},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",children:"Log out"})]})]}):h.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[h.jsx(rn,{className:d,to:"/login",children:"Log in"}),h.jsx(rn,{className:d,to:"/signup",children:"Sign up"}),h.jsx(Ae,{variant:"secondary",onClick:()=>{try{i()}catch{}},children:"Continue with Google"})]})),h.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-9 h-9 rounded-md border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200",onClick:()=>a(f=>!f),"aria-expanded":o,"aria-controls":"mobile-nav","aria-label":"Toggle navigation",children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),h.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),h.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]}),o&&h.jsxs("div",{id:"mobile-nav",className:"md:hidden mt-3 grid gap-1",children:[h.jsx(rn,{onClick:()=>a(!1),className:d,to:"/",children:"Home"}),h.jsx(rn,{onClick:()=>a(!1),className:d,to:"/dashboard",children:"Dashboard"}),h.jsx(rn,{onClick:()=>a(!1),className:d,to:"/daily-checkin",children:"Daily Check-in"}),h.jsx(rn,{onClick:()=>a(!1),className:d,to:"/upload-report",children:"Upload Report"}),!s&&(n?h.jsx("button",{onClick:async()=>{a(!1);try{await r()}catch{}},className:"text-left px-3 py-2 rounded-md text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Log out"}):h.jsxs(h.Fragment,{children:[h.jsx(rn,{onClick:()=>a(!1),className:d,to:"/login",children:"Log in"}),h.jsx(rn,{onClick:()=>a(!1),className:d,to:"/signup",children:"Sign up"}),h.jsx("button",{onClick:()=>{a(!1);try{i()}catch{}},className:"text-left px-3 py-2 rounded-md text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800",children:"Continue with Google"})]}))]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function bc(t){return t+.5|0}const xs=(t,e,n)=>Math.max(Math.min(t,n),e);function Ya(t){return xs(bc(t*2.55),0,255)}function Os(t){return xs(bc(t*255),0,255)}function Rr(t){return xs(bc(t/2.55)/100,0,1)}function qx(t){return xs(bc(t*100),0,100)}const Nn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Pm=[..."0123456789ABCDEF"],JF=t=>Pm[t&15],ZF=t=>Pm[(t&240)>>4]+Pm[t&15],lu=t=>(t&240)>>4===(t&15),e5=t=>lu(t.r)&&lu(t.g)&&lu(t.b)&&lu(t.a);function t5(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Nn[t[1]]*17,g:255&Nn[t[2]]*17,b:255&Nn[t[3]]*17,a:e===5?Nn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Nn[t[1]]<<4|Nn[t[2]],g:Nn[t[3]]<<4|Nn[t[4]],b:Nn[t[5]]<<4|Nn[t[6]],a:e===9?Nn[t[7]]<<4|Nn[t[8]]:255})),n}const n5=(t,e)=>t<255?e(t):"";function r5(t){var e=e5(t)?JF:ZF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+n5(t.a,e):void 0}const s5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function XI(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function i5(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function o5(t,e,n){const r=XI(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function a5(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Q0(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,d;return i!==o&&(d=i-o,c=a>.5?d/(2-i-o):d/(i+o),l=a5(n,r,s,d,i),l=l*60+.5),[l|0,c||0,a]}function Y0(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Os)}function X0(t,e,n){return Y0(XI,t,e,n)}function l5(t,e,n){return Y0(o5,t,e,n)}function c5(t,e,n){return Y0(i5,t,e,n)}function JI(t){return(t%360+360)%360}function u5(t){const e=s5.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Ya(+e[5]):Os(+e[5]));const s=JI(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=l5(s,i,o):e[1]==="hsv"?r=c5(s,i,o):r=X0(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function d5(t,e){var n=Q0(t);n[0]=JI(n[0]+e),n=X0(n),t.r=n[0],t.g=n[1],t.b=n[2]}function h5(t){if(!t)return;const e=Q0(t),n=e[0],r=qx(e[1]),s=qx(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Rr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Kx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Gx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function f5(){const t={},e=Object.keys(Gx),n=Object.keys(Kx);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,Kx[i]);i=parseInt(Gx[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let cu;function p5(t){cu||(cu=f5(),cu.transparent=[0,0,0,0]);const e=cu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const m5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function g5(t){const e=m5.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Ya(o):xs(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Ya(r):xs(r,0,255)),s=255&(e[4]?Ya(s):xs(s,0,255)),i=255&(e[6]?Ya(i):xs(i,0,255)),{r,g:s,b:i,a:n}}}function y5(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Rr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Qf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,to=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function v5(t,e,n){const r=to(Rr(t.r)),s=to(Rr(t.g)),i=to(Rr(t.b));return{r:Os(Qf(r+n*(to(Rr(e.r))-r))),g:Os(Qf(s+n*(to(Rr(e.g))-s))),b:Os(Qf(i+n*(to(Rr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function uu(t,e,n){if(t){let r=Q0(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=X0(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function ZI(t,e){return t&&Object.assign(e||{},t)}function Qx(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Os(t[3]))):(e=ZI(t,{r:0,g:0,b:0,a:1}),e.a=Os(e.a)),e}function _5(t){return t.charAt(0)==="r"?g5(t):u5(t)}class ec{constructor(e){if(e instanceof ec)return e;const n=typeof e;let r;n==="object"?r=Qx(e):n==="string"&&(r=t5(e)||p5(e)||_5(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=ZI(this._rgb);return e&&(e.a=Rr(e.a)),e}set rgb(e){this._rgb=Qx(e)}rgbString(){return this._valid?y5(this._rgb):void 0}hexString(){return this._valid?r5(this._rgb):void 0}hslString(){return this._valid?h5(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=v5(this._rgb,e._rgb,n)),this}clone(){return new ec(this.rgb)}alpha(e){return this._rgb.a=Os(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=bc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return uu(this._rgb,2,e),this}darken(e){return uu(this._rgb,2,-e),this}saturate(e){return uu(this._rgb,1,e),this}desaturate(e){return uu(this._rgb,1,-e),this}rotate(e){return d5(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Tr(){}const x5=(()=>{let t=0;return()=>t++})();function Oe(t){return t==null}function _t(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ke(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function zt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ur(t,e){return zt(t)?t:e}function _e(t,e){return typeof t>"u"?e:t}const w5=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ve(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ce(t,e,n,r){let s,i,o;if(_t(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(ke(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Fd(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Ud(t){if(_t(t))return t.map(Ud);if(ke(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Ud(t[n[s]]);return e}return t}function eS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function b5(t,e,n,r){if(!eS(t))return;const s=e[t],i=n[t];ke(s)&&ke(i)?tc(s,i,r):e[t]=Ud(i)}function tc(t,e,n){const r=_t(e)?e:[e],s=r.length;if(!ke(t))return t;n=n||{};const i=n.merger||b5;let o;for(let a=0;a<s;++a){if(o=r[a],!ke(o))continue;const l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)i(l[c],t,o,n)}return t}function yl(t,e){return tc(t,e,{merger:k5})}function k5(t,e,n){if(!eS(t))return;const r=e[t],s=n[t];ke(r)&&ke(s)?yl(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ud(s))}const Yx={"":t=>t,x:t=>t.x,y:t=>t.y};function E5(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function T5(t){const e=E5(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Bd(t,e){return(Yx[e]||(Yx[e]=T5(e)))(t)}function J0(t){return t.charAt(0).toUpperCase()+t.slice(1)}const zd=t=>typeof t<"u",zs=t=>typeof t=="function",Xx=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function I5(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ft=Math.PI,sr=2*Ft,S5=sr+Ft,$d=Number.POSITIVE_INFINITY,C5=Ft/180,er=Ft/2,ri=Ft/4,Jx=Ft*2/3,tS=Math.log10,Go=Math.sign;function vl(t,e,n){return Math.abs(t-e)<n}function Zx(t){const e=Math.round(t);t=vl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(tS(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function A5(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function P5(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function nc(t){return!P5(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function R5(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function N5(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function vi(t){return t*(Ft/180)}function D5(t){return t*(180/Ft)}function ew(t){if(!zt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function M5(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Ft&&(i+=sr),{angle:i,distance:s}}function Rm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function O5(t,e){return(t-e+S5)%sr-Ft}function pr(t){return(t%sr+sr)%sr}function nS(t,e,n,r){const s=pr(t),i=pr(e),o=pr(n),a=pr(i-s),l=pr(o-s),c=pr(s-i),d=pr(s-o);return s===i||s===o||r&&i===o||a>l&&c<d}function jn(t,e,n){return Math.max(e,Math.min(n,t))}function L5(t){return jn(t,-32768,32767)}function vo(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Z0(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const _i=(t,e,n,r)=>Z0(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),j5=(t,e,n)=>Z0(t,n,r=>t[r][e]>=n);function V5(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const rS=["push","pop","shift","splice","unshift"];function F5(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),rS.forEach(n=>{const r="_onData"+J0(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function tw(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(rS.forEach(i=>{delete t[i]}),delete t._chartjs)}function U5(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const sS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function iS(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,sS.call(window,()=>{r=!1,t.apply(e,n)}))}}function B5(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const oS=t=>t==="start"?"left":t==="end"?"right":"center",xn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,z5=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function $5(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=o.axis,{min:f,max:m,minDefined:y,maxDefined:w}=o.getUserBounds();if(y){if(s=Math.min(_i(l,d,f).lo,n?r:_i(e,d,o.getPixelForValue(f)).lo),c){const k=l.slice(0,s+1).reverse().findIndex(E=>!Oe(E[a.axis]));s-=Math.max(0,k)}s=jn(s,0,r-1)}if(w){let k=Math.max(_i(l,o.axis,m,!0).hi+1,n?0:_i(e,d,o.getPixelForValue(m),!0).hi+1);if(c){const E=l.slice(k-1).findIndex(v=>!Oe(v[a.axis]));k+=Math.max(0,E)}i=jn(k,s,r)-s}else i=r-s}return{start:s,count:i}}function H5(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const du=t=>t===0||t===1,nw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*sr/n)),rw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*sr/n)+1,_l={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*er)+1,easeOutSine:t=>Math.sin(t*er),easeInOutSine:t=>-.5*(Math.cos(Ft*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>du(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>du(t)?t:nw(t,.075,.3),easeOutElastic:t=>du(t)?t:rw(t,.075,.3),easeInOutElastic(t){return du(t)?t:t<.5?.5*nw(t*2,.1125,.45):.5+.5*rw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-_l.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?_l.easeInBounce(t*2)*.5:_l.easeOutBounce(t*2-1)*.5+.5};function ey(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function sw(t){return ey(t)?t:new ec(t)}function Yf(t){return ey(t)?t:new ec(t).saturate(.5).darken(.1).hexString()}const W5=["x","y","borderWidth","radius","tension"],q5=["color","borderColor","backgroundColor"];function K5(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:q5},numbers:{type:"number",properties:W5}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function G5(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const iw=new Map;function Q5(t,e){e=e||{};const n=t+JSON.stringify(e);let r=iw.get(n);return r||(r=new Intl.NumberFormat(t,e),iw.set(n,r)),r}function aS(t,e,n){return Q5(e,n).format(t)}const Y5={values(t){return _t(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=X5(t,n)}const o=tS(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),aS(t,r,l)}};function X5(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var lS={formatters:Y5};function J5(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:lS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Fi=Object.create(null),Nm=Object.create(null);function xl(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Xf(t,e,n){return typeof e=="string"?tc(xl(t,e),n):tc(xl(t,""),e)}class Z5{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Yf(s.backgroundColor),this.hoverBorderColor=(r,s)=>Yf(s.borderColor),this.hoverColor=(r,s)=>Yf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Xf(this,e,n)}get(e){return xl(this,e)}describe(e,n){return Xf(Nm,e,n)}override(e,n){return Xf(Fi,e,n)}route(e,n,r,s){const i=xl(this,e),o=xl(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return ke(l)?Object.assign({},c,l):_e(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var rt=new Z5({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[K5,G5,J5]);function e3(t){return!t||Oe(t.size)||Oe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ow(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function si(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function aw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Dm(t,e,n,r){cS(t,e,n,r,null)}function cS(t,e,n,r,s){let i,o,a,l,c,d,f,m;const y=e.pointStyle,w=e.rotation,k=e.radius;let E=(w||0)*C5;if(y&&typeof y=="object"&&(i=y.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(E),t.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),t.restore();return}if(!(isNaN(k)||k<=0)){switch(t.beginPath(),y){default:s?t.ellipse(n,r,s/2,k,0,0,sr):t.arc(n,r,k,0,sr),t.closePath();break;case"triangle":d=s?s/2:k,t.moveTo(n+Math.sin(E)*d,r-Math.cos(E)*k),E+=Jx,t.lineTo(n+Math.sin(E)*d,r-Math.cos(E)*k),E+=Jx,t.lineTo(n+Math.sin(E)*d,r-Math.cos(E)*k),t.closePath();break;case"rectRounded":c=k*.516,l=k-c,o=Math.cos(E+ri)*l,f=Math.cos(E+ri)*(s?s/2-c:l),a=Math.sin(E+ri)*l,m=Math.sin(E+ri)*(s?s/2-c:l),t.arc(n-f,r-a,c,E-Ft,E-er),t.arc(n+m,r-o,c,E-er,E),t.arc(n+f,r+a,c,E,E+er),t.arc(n-m,r+o,c,E+er,E+Ft),t.closePath();break;case"rect":if(!w){l=Math.SQRT1_2*k,d=s?s/2:l,t.rect(n-d,r-l,2*d,2*l);break}E+=ri;case"rectRot":f=Math.cos(E)*(s?s/2:k),o=Math.cos(E)*k,a=Math.sin(E)*k,m=Math.sin(E)*(s?s/2:k),t.moveTo(n-f,r-a),t.lineTo(n+m,r-o),t.lineTo(n+f,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":E+=ri;case"cross":f=Math.cos(E)*(s?s/2:k),o=Math.cos(E)*k,a=Math.sin(E)*k,m=Math.sin(E)*(s?s/2:k),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":f=Math.cos(E)*(s?s/2:k),o=Math.cos(E)*k,a=Math.sin(E)*k,m=Math.sin(E)*(s?s/2:k),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),E+=ri,f=Math.cos(E)*(s?s/2:k),o=Math.cos(E)*k,a=Math.sin(E)*k,m=Math.sin(E)*(s?s/2:k),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(E)*k,a=Math.sin(E)*k,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(E)*(s?s/2:k),r+Math.sin(E)*k);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function rc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Lh(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function jh(t){t.restore()}function t3(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function n3(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function r3(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Oe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function s3(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function i3(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Hd(t,e,n,r,s,i={}){const o=_t(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,r3(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&i3(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Oe(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),s3(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function Mm(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ft,Ft,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Ft,er,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,er,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-er,!0),t.lineTo(n+o.topLeft,r)}const o3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,a3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function l3(t,e){const n=(""+t).match(o3);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const c3=t=>+t||0;function uS(t,e){const n={},r=ke(e),s=r?Object.keys(e):e,i=ke(t)?r?o=>_e(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=c3(i(o));return n}function u3(t){return uS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function wl(t){return uS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function lr(t){const e=u3(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ln(t,e){t=t||{},e=e||rt.font;let n=_e(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=_e(t.style,e.style);r&&!(""+r).match(a3)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:_e(t.family,e.family),lineHeight:l3(_e(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:_e(t.weight,e.weight),string:""};return s.string=e3(s),s}function hu(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function d3(t,e,n){const{min:r,max:s}=t,i=w5(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function qi(t,e){return Object.assign(Object.create(t),e)}function ty(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=pS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>ty([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return hS(a,l,()=>_3(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return cw(a).includes(l)},ownKeys(a){return cw(a)},set(a,l,c){const d=a._storage||(a._storage=s());return a[l]=d[l]=c,delete a._keys,!0}})}function Qo(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:dS(t,r),setContext:i=>Qo(t,i,n,r),override:i=>Qo(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return hS(i,o,()=>f3(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function dS(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:zs(n)?n:()=>n,isIndexable:zs(r)?r:()=>r}}const h3=(t,e)=>t?t+J0(e):e,ny=(t,e)=>ke(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function hS(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function f3(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return zs(a)&&o.isScriptable(e)&&(a=p3(e,a,t,n)),_t(a)&&a.length&&(a=m3(e,a,t,o.isIndexable)),ny(e,a)&&(a=Qo(a,s,i&&i[e],o)),a}function p3(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),ny(t,l)&&(l=ry(s._scopes,s,t,l)),l}function m3(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(ke(e[0])){const l=e,c=s._scopes.filter(d=>d!==l);e=[];for(const d of l){const f=ry(c,s,t,d);e.push(Qo(f,i,o&&o[t],a))}}return e}function fS(t,e,n){return zs(t)?t(e,n):t}const g3=(t,e)=>t===!0?e:typeof t=="string"?Bd(e,t):void 0;function y3(t,e,n,r,s){for(const i of e){const o=g3(n,i);if(o){t.add(o);const a=fS(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function ry(t,e,n,r){const s=e._rootScopes,i=fS(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=lw(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=lw(a,o,i,l,r),l===null)?!1:ty(Array.from(a),[""],s,i,()=>v3(e,n,r))}function lw(t,e,n,r,s){for(;n;)n=y3(t,e,n,r,s);return n}function v3(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return _t(s)&&ke(n)?n:s||{}}function _3(t,e,n,r){let s;for(const i of e)if(s=pS(h3(i,t),n),typeof s<"u")return ny(t,s)?ry(n,r,t,s):s}function pS(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function cw(t){let e=t._keys;return e||(e=t._keys=x3(t._scopes)),e}function x3(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const w3=Number.EPSILON||1e-14,Yo=(t,e)=>e<t.length&&!t[e].skip&&t[e],mS=t=>t==="x"?"y":"x";function b3(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Rm(i,s),l=Rm(o,i);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const f=r*c,m=r*d;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+m*(o.x-s.x),y:i.y+m*(o.y-s.y)}}}function k3(t,e,n){const r=t.length;let s,i,o,a,l,c=Yo(t,0);for(let d=0;d<r-1;++d)if(l=c,c=Yo(t,d+1),!(!l||!c)){if(vl(e[d],0,w3)){n[d]=n[d+1]=0;continue}s=n[d]/e[d],i=n[d+1]/e[d],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=s*o*e[d],n[d+1]=i*o*e[d])}}function E3(t,e,n="x"){const r=mS(n),s=t.length;let i,o,a,l=Yo(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Yo(t,c+1),!a)continue;const d=a[n],f=a[r];o&&(i=(d-o[n])/3,a[`cp1${n}`]=d-i,a[`cp1${r}`]=f-i*e[c]),l&&(i=(l[n]-d)/3,a[`cp2${n}`]=d+i,a[`cp2${r}`]=f+i*e[c])}}function T3(t,e="x"){const n=mS(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Yo(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Yo(t,o+1),!!l){if(c){const d=c[e]-l[e];s[o]=d!==0?(c[n]-l[n])/d:0}i[o]=a?c?Go(s[o-1])!==Go(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}k3(t,s,i),E3(t,i,e)}function fu(t,e,n){return Math.max(Math.min(t,n),e)}function I3(t,e){let n,r,s,i,o,a=rc(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&rc(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=fu(s.cp1x,e.left,e.right),s.cp1y=fu(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=fu(s.cp2x,e.left,e.right),s.cp2y=fu(s.cp2y,e.top,e.bottom)))}function S3(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")T3(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=b3(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&I3(t,n)}function sy(){return typeof window<"u"&&typeof document<"u"}function iy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Wd(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Vh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function C3(t,e){return Vh(t).getPropertyValue(e)}const A3=["top","right","bottom","left"];function Ti(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=A3[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const P3=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function R3(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(P3(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ui(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Vh(n),i=s.boxSizing==="border-box",o=Ti(s,"padding"),a=Ti(s,"border","width"),{x:l,y:c,box:d}=R3(t,n),f=o.left+(d&&a.left),m=o.top+(d&&a.top);let{width:y,height:w}=e;return i&&(y-=o.width+a.width,w-=o.height+a.height),{x:Math.round((l-f)/y*n.width/r),y:Math.round((c-m)/w*n.height/r)}}function N3(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&iy(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Vh(i),l=Ti(a,"border","width"),c=Ti(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Wd(a.maxWidth,i,"clientWidth"),s=Wd(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||$d,maxHeight:s||$d}}const pu=t=>Math.round(t*10)/10;function D3(t,e,n,r){const s=Vh(t),i=Ti(s,"margin"),o=Wd(s.maxWidth,t,"clientWidth")||$d,a=Wd(s.maxHeight,t,"clientHeight")||$d,l=N3(t,e,n);let{width:c,height:d}=l;if(s.boxSizing==="content-box"){const m=Ti(s,"border","width"),y=Ti(s,"padding");c-=y.width+m.width,d-=y.height+m.height}return c=Math.max(0,c-i.width),d=Math.max(0,r?c/r:d-i.height),c=pu(Math.min(c,o,l.maxWidth)),d=pu(Math.min(d,a,l.maxHeight)),c&&!d&&(d=pu(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,c=pu(Math.floor(d*r))),{width:c,height:d}}function uw(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const M3=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};sy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function dw(t,e){const n=C3(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function di(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function O3(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function L3(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=di(t,s,n),a=di(s,i,n),l=di(i,e,n),c=di(o,a,n),d=di(a,l,n);return di(c,d,n)}const j3=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},V3=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ao(t,e,n){return t?j3(e,n):V3()}function gS(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function yS(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function vS(t){return t==="angle"?{between:nS,compare:O5,normalize:pr}:{between:vo,compare:(e,n)=>e-n,normalize:e=>e}}function hw({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function F3(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=vS(r),l=e.length;let{start:c,end:d,loop:f}=t,m,y;if(f){for(c+=l,d+=l,m=0,y=l;m<y&&o(a(e[c%l][r]),s,i);++m)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:f,style:t.style}}function _S(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=vS(r),{start:d,end:f,loop:m,style:y}=F3(t,e,n),w=[];let k=!1,E=null,v,_,b;const A=()=>l(s,b,v)&&a(s,b)!==0,N=()=>a(i,v)===0||l(i,b,v),M=()=>k||A(),T=()=>!k||N();for(let x=d,I=d;x<=f;++x)_=e[x%o],!_.skip&&(v=c(_[r]),v!==b&&(k=l(v,s,i),E===null&&M()&&(E=a(v,s)===0?x:I),E!==null&&T()&&(w.push(hw({start:E,end:x,loop:m,count:o,style:y})),E=null),I=x,b=v));return E!==null&&w.push(hw({start:E,end:f,loop:m,count:o,style:y})),w}function xS(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=_S(r[s],t.points,e);i.length&&n.push(...i)}return n}function U3(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function B3(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function z3(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=U3(n,s,i,r);if(r===!0)return fw(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return fw(t,B3(n,o,l,c),n,e)}function fw(t,e,n,r){return!r||!r.setContext||!n?e:$3(t,e,n,r)}function $3(t,e,n,r){const s=t._chart.getContext(),i=pw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let d=i,f=e[0].start,m=f;function y(w,k,E,v){const _=a?-1:1;if(w!==k){for(w+=l;n[w%l].skip;)w-=_;for(;n[k%l].skip;)k+=_;w%l!==k%l&&(c.push({start:w%l,end:k%l,loop:E,style:v}),d=v,f=k%l)}}for(const w of e){f=a?f:w.start;let k=n[f%l],E;for(m=f+1;m<=w.end;m++){const v=n[m%l];E=pw(r.setContext(qi(s,{type:"segment",p0:k,p1:v,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),H3(E,d)&&y(f,m-1,w.loop,d),k=v,d=E}f<m-1&&y(f,m-1,w.loop,d)}return c}function pw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function H3(t,e){if(!e)return!1;const n=[],r=function(s,i){return ey(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function mu(t,e,n){return t.options.clip?t[n]:e[n]}function W3(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:mu(n,e,"left"),right:mu(n,e,"right"),top:mu(r,e,"top"),bottom:mu(r,e,"bottom")}:e}function wS(t,e){const n=e._clip;if(n.disabled)return!1;const r=W3(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class q3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=sS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Sr=new q3;const mw="transparent",K3={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=sw(t||mw),s=r.valid&&sw(e||mw);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class G3{constructor(e,n,r,s){const i=n[r];s=hu([e.to,s,i,e.from]);const o=hu([e.from,i,s]);this._active=!0,this._fn=e.fn||K3[e.type||typeof o],this._easing=_l[e.easing]||_l.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=hu([e.to,n,s,e.from]),this._from=hu([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class bS{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ke(e))return;const n=Object.keys(rt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!ke(i))return;const o={};for(const a of n)o[a]=i[a];(_t(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=Y3(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&Q3(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const d=n[c];let f=i[c];const m=r.get(c);if(f)if(m&&f.active()){f.update(m,d,a);continue}else f.cancel();if(!m||!m.duration){e[c]=d;continue}i[c]=f=new G3(m,e,c,d),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Sr.add(this._chart,r),!0}}function Q3(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function Y3(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function gw(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function X3(t,e,n){if(n===!1)return!1;const r=gw(t,n),s=gw(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function J3(t){let e,n,r,s;return ke(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function kS(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function yw(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let d=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(d=!0,r.all)continue;break}c=t.values[l],zt(c)&&(i||e===0||Go(e)===Go(c))&&(e+=c)}return!d&&!r.all?0:e}function Z3(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,d;for(l=0,c=o.length;l<c;++l)d=o[l],a[l]={[s]:d,[i]:t[d]};return a}function Jf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function e6(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function t6(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function n6(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function vw(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function _w(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,d=e6(i,o,r),f=e.length;let m;for(let y=0;y<f;++y){const w=e[y],{[l]:k,[c]:E}=w,v=w._stacks||(w._stacks={});m=v[c]=n6(s,d,k),m[a]=E,m._top=vw(m,o,!0,r.type),m._bottom=vw(m,o,!1,r.type);const _=m._visualValues||(m._visualValues={});_[a]=E}}function Zf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function r6(t,e){return qi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function s6(t,e,n){return qi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ma(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const ep=t=>t==="reset"||t==="none",xw=(t,e)=>e?t:Object.assign({},t),i6=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:kS(n,!0),values:null};class bl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Jf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ma(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,m,y,w)=>f==="x"?m:f==="r"?w:y,i=n.xAxisID=_e(r.xAxisID,Zf(e,"x")),o=n.yAxisID=_e(r.yAxisID,Zf(e,"y")),a=n.rAxisID=_e(r.rAxisID,Zf(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),d=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tw(this._data,this),e._stacked&&Ma(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ke(n)){const s=this._cachedMeta;this._data=Z3(n,s)}else if(r!==n){if(r){tw(r,this);const s=this._cachedMeta;Ma(s),s._parsed=[]}n&&Object.isExtensible(n)&&F5(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Jf(n.vScale,n),n.stack!==r.stack&&(s=!0,Ma(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(_w(this,n._parsed),n._stacked=Jf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],d,f,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{_t(s[e])?m=this.parseArrayData(r,s,e,n):ke(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const y=()=>f[a]===null||c&&f[a]<c[a];for(d=0;d<n;++d)r._parsed[d+e]=f=m[d],l&&(y()&&(l=!1),c=f);r._sorted=l}o&&_w(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),d=i===o,f=new Array(s);let m,y,w;for(m=0,y=s;m<y;++m)w=m+r,f[m]={[a]:d||i.parse(c[w],w),[l]:o.parse(n[w],w)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,d,f;for(l=0,c=s;l<c;++l)d=l+r,f=n[d],a[l]={x:i.parse(f[0],d),y:o.parse(f[1],d)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let d,f,m,y;for(d=0,f=s;d<f;++d)m=d+r,y=n[m],c[d]={x:i.parse(Bd(y,a),m),y:o.parse(Bd(y,l),m)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:kS(s,!0),values:n._stacks[e.axis]._visualValues};return yw(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=yw(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=i6(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=t6(a);let m,y;function w(){y=s[m];const k=y[a.axis];return!zt(y[e.axis])||d>k||f<k}for(m=0;m<o&&!(!w()&&(this.updateRangeFromParsed(c,e,y,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!w()){this.updateRangeFromParsed(c,e,y,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],zt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=J3(_e(this.options.clip,X3(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,i,a,l),d=a;d<a+l;++d){const f=s[d];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=s6(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=r6(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&zd(r);if(a)return xw(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],m=c.getOptionScopes(this.getDataset(),d),y=Object.keys(rt.elements[e]),w=()=>this.getContext(r,s,n),k=c.resolveNamedOptions(m,y,w,f);return k.$shared&&(k.$shared=l,i[o]=Object.freeze(xw(k,l))),k}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,n),m=d.getOptionScopes(this.getDataset(),f);l=d.createResolver(m,this.getContext(e,r,n))}const c=new bS(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ep(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){ep(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!ep(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Ma(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}pe(bl,"defaults",{}),pe(bl,"datasetElementType",null),pe(bl,"dataElementType",null);class Hu extends bl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=$5(n,s,o);this._drawStart=a,this._drawCount=l,H5(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,s),m=o.axis,y=a.axis,{spanGaps:w,segment:k}=this.options,E=nc(w)?w:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||s==="none",_=n+r,b=e.length;let A=n>0&&this.getParsed(n-1);for(let N=0;N<b;++N){const M=e[N],T=v?M:{};if(N<n||N>=_){T.skip=!0;continue}const x=this.getParsed(N),I=Oe(x[y]),C=T[m]=o.getPixelForValue(x[m],N),R=T[y]=i||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,x,l):x[y],N);T.skip=isNaN(C)||isNaN(R)||I,T.stop=N>0&&Math.abs(x[m]-A[m])>E,k&&(T.parsed=x,T.raw=c.data[N]),f&&(T.options=d||this.resolveDataElementOptions(N,M.active?"active":s)),v||this.updateElement(M,N,T,s),A=x}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}pe(Hu,"id","line"),pe(Hu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),pe(Hu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function ii(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class oy{constructor(e){pe(this,"options");this.options=e||{}}static override(e){Object.assign(oy.prototype,e)}init(){}formats(){return ii()}parse(){return ii()}format(){return ii()}add(){return ii()}diff(){return ii()}startOf(){return ii()}endOf(){return ii()}}var o6={_date:oy};function a6(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?j5:_i;if(r){if(s._sharedOptions){const d=i[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const m=c(i,e,n-f),y=c(i,e,n+f);return{lo:m.lo,hi:y.hi}}}}else{const d=c(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:m}=t,y=m.slice(0,d.lo+1).reverse().findIndex(k=>!Oe(k[f.axis]));d.lo-=Math.max(0,y);const w=m.slice(d.hi).findIndex(k=>!Oe(k[f.axis]));d.hi+=Math.max(0,w)}return d}}return{lo:0,hi:i.length-1}}function Fh(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:d}=i[a],{lo:f,hi:m}=a6(i[a],e,o,s);for(let y=f;y<=m;++y){const w=d[y];w.skip||r(w,c,y)}}}function l6(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function tp(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Fh(t,n,e,function(a,l,c){!s&&!rc(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function c6(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:f}=M5(o,{x:e.x,y:e.y});nS(f,c,d)&&s.push({element:o,datasetIndex:a,index:l})}return Fh(t,n,e,i),s}function u6(t,e,n,r,s,i){let o=[];const a=l6(n);let l=Number.POSITIVE_INFINITY;function c(d,f,m){const y=d.inRange(e.x,e.y,s);if(r&&!y)return;const w=d.getCenterPoint(s);if(!(!!i||t.isPointInArea(w))&&!y)return;const E=a(e,w);E<l?(o=[{element:d,datasetIndex:f,index:m}],l=E):E===l&&o.push({element:d,datasetIndex:f,index:m})}return Fh(t,n,e,c),o}function np(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?c6(t,e,n,s):u6(t,e,n,r,s,i)}function ww(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Fh(t,n,e,(l,c,d)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var d6={modes:{index(t,e,n,r){const s=ui(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?tp(t,s,i,r,o):np(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,f=c.data[d];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:d})}),l):[]},dataset(t,e,n,r){const s=ui(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?tp(t,s,i,r,o):np(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(t,e,n,r){const s=ui(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return tp(t,s,i,r,o)},nearest(t,e,n,r){const s=ui(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return np(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=ui(e,t);return ww(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=ui(e,t);return ww(t,s,"y",n.intersect,r)}}};const ES=["left","top","right","bottom"];function Oa(t,e){return t.filter(n=>n.pos===e)}function bw(t,e){return t.filter(n=>ES.indexOf(n.pos)===-1&&n.box.axis===e)}function La(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function h6(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function f6(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!ES.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function p6(t,e){const n=f6(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=d?d*s:l&&e.availableHeight)}return n}function m6(t){const e=h6(t),n=La(e.filter(c=>c.box.fullSize),!0),r=La(Oa(e,"left"),!0),s=La(Oa(e,"right")),i=La(Oa(e,"top"),!0),o=La(Oa(e,"bottom")),a=bw(e,"x"),l=bw(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Oa(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function kw(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function TS(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function g6(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!ke(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&TS(o,i.getPadding());const a=Math.max(0,e.outerWidth-kw(o,t,"left","right")),l=Math.max(0,e.outerHeight-kw(o,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function y6(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function v6(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Xa(t,e,n,r){const s=[];let i,o,a,l,c,d;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,v6(a.horizontal,e));const{same:f,other:m}=g6(e,n,a,r);c|=f&&s.length,d=d||m,l.fullSize||s.push(a)}return c&&Xa(s,e,n,r)||d}function gu(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function Ew(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*d,m=c.size||l.height;zd(c.start)&&(o=c.start),l.fullSize?gu(l,s.left,o,n.outerWidth-s.right-s.left,m):gu(l,e.left+c.placed,o,f,m),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*d,m=c.size||l.width;zd(c.start)&&(i=c.start),l.fullSize?gu(l,i,s.top,m,n.outerHeight-s.bottom-s.top):gu(l,i,e.top+c.placed,m,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var ws={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=lr(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=m6(t.boxes),l=a.vertical,c=a.horizontal;Ce(t.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const d=l.reduce((k,E)=>E.box.options&&E.box.options.display===!1?k:k+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),m=Object.assign({},s);TS(m,lr(r));const y=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),w=p6(l.concat(c),f);Xa(a.fullSize,y,f,w),Xa(l,y,f,w),Xa(c,y,f,w)&&Xa(l,y,f,w),y6(y),Ew(a.leftAndTop,y,f,w),y.x+=y.w,y.y+=y.h,Ew(a.rightAndBottom,y,f,w),t.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},Ce(a.chartArea,k=>{const E=k.box;Object.assign(E,t.chartArea),E.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class IS{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class _6 extends IS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Wu="$chartjs",x6={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Tw=t=>t===null||t==="";function w6(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Wu]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Tw(s)){const i=dw(t,"width");i!==void 0&&(t.width=i)}if(Tw(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=dw(t,"height");i!==void 0&&(t.height=i)}return t}const SS=M3?{passive:!0}:!1;function b6(t,e,n){t&&t.addEventListener(e,n,SS)}function k6(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,SS)}function E6(t,e){const n=x6[t.type]||t.type,{x:r,y:s}=ui(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function qd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function T6(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||qd(a.addedNodes,r),o=o&&!qd(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function I6(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||qd(a.removedNodes,r),o=o&&!qd(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const sc=new Map;let Iw=0;function CS(){const t=window.devicePixelRatio;t!==Iw&&(Iw=t,sc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function S6(t,e){sc.size||window.addEventListener("resize",CS),sc.set(t,e)}function C6(t){sc.delete(t),sc.size||window.removeEventListener("resize",CS)}function A6(t,e,n){const r=t.canvas,s=r&&iy(r);if(!s)return;const i=iS((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||i(c,d)});return o.observe(s),S6(t,i),o}function rp(t,e,n){n&&n.disconnect(),e==="resize"&&C6(t)}function P6(t,e,n){const r=t.canvas,s=iS(i=>{t.ctx!==null&&n(E6(i,t))},t);return b6(r,e,s),s}class R6 extends IS{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(w6(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Wu])return!1;const r=n[Wu].initial;["height","width"].forEach(i=>{const o=r[i];Oe(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Wu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:T6,detach:I6,resize:A6}[n]||P6;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:rp,detach:rp,resize:rp}[n]||k6)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return D3(e,n,r,s)}isAttached(e){const n=e&&iy(e);return!!(n&&n.isConnected)}}function N6(t){return!sy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?_6:R6}class $s{constructor(){pe(this,"x");pe(this,"y");pe(this,"active",!1);pe(this,"options");pe(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return nc(this.x)&&nc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}pe($s,"defaults",{}),pe($s,"defaultRoutes");function D6(t,e){const n=t.options.ticks,r=M6(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?L6(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return j6(e,c,i,o/s),c;const d=O6(i,e,s);if(o>0){let f,m;const y=o>1?Math.round((l-a)/(o-1)):null;for(yu(e,c,d,Oe(y)?0:a-y,a),f=0,m=o-1;f<m;f++)yu(e,c,d,i[f],i[f+1]);return yu(e,c,d,l,Oe(y)?e.length:l+y),c}return yu(e,c,d),c}function M6(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function O6(t,e,n){const r=V6(t),s=e.length/n;if(!r)return Math.max(s,1);const i=A5(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function L6(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function j6(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function yu(t,e,n,r,s){const i=_e(r,0),o=Math.min(_e(s,t.length),t.length);let a=0,l,c,d;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),d=i;d<0;)a++,d=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===d&&(e.push(t[c]),a++,d=Math.round(i+a*n))}function V6(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const F6=t=>t==="left"?"right":t==="right"?"left":t,Sw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Cw=(t,e)=>Math.min(e||t,t);function Aw(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function U6(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function B6(t,e){Ce(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function ja(t){return t.drawTicks?t.tickLength:0}function Pw(t,e){if(!t.display)return 0;const n=ln(t.font,e),r=lr(t.padding);return(_t(t.text)?t.text.length:1)*n.lineHeight+r.height}function z6(t,e){return qi(t,{scale:e,type:"scale"})}function $6(t,e,n){return qi(t,{tick:n,index:e,type:"tick"})}function H6(t,e,n){let r=oS(t);return(n&&e!=="right"||!n&&e==="right")&&(r=F6(r)),r}function W6(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let f=0,m,y,w;const k=o-s,E=a-i;if(t.isHorizontal()){if(y=xn(r,i,a),ke(n)){const v=Object.keys(n)[0],_=n[v];w=d[v].getPixelForValue(_)+k-e}else n==="center"?w=(c.bottom+c.top)/2+k-e:w=Sw(t,n,e);m=a-i}else{if(ke(n)){const v=Object.keys(n)[0],_=n[v];y=d[v].getPixelForValue(_)-E+e}else n==="center"?y=(c.left+c.right)/2-E+e:y=Sw(t,n,e);w=xn(r,o,s),f=n==="left"?-er:er}return{titleX:y,titleY:w,maxWidth:m,rotation:f}}class ca extends $s{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=ur(e,Number.POSITIVE_INFINITY),n=ur(n,Number.NEGATIVE_INFINITY),r=ur(r,Number.POSITIVE_INFINITY),s=ur(s,Number.NEGATIVE_INFINITY),{min:ur(e,r),max:ur(n,s),minDefined:zt(e),maxDefined:zt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:ur(n,ur(r,n)),max:ur(r,ur(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ve(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=d3(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Aw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=D6(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ve(this.options.afterUpdate,[this])}beforeSetDimensions(){Ve(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ve(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ve(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ve(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Ve(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Ve(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ve(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Cw(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),f=d.widest.width,m=d.highest.height,y=jn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:y/(r-1),f+6>a&&(a=y/(r-(e.offset?.5:1)),l=this.maxHeight-ja(e.grid)-n.padding-Pw(e.title,this.chart.options.font),c=Math.sqrt(f*f+m*m),o=D5(Math.min(Math.asin(jn((d.highest.height+6)/a,-1,1)),Math.asin(jn(l/c,-1,1))-Math.asin(jn(m/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ve(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ve(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Pw(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=ja(i)+l):(e.height=this.maxHeight,e.width=ja(i)+l),r.display&&this.ticks.length){const{first:c,last:d,widest:f,highest:m}=this._getLabelSizes(),y=r.padding*2,w=vi(this.labelRotation),k=Math.cos(w),E=Math.sin(w);if(a){const v=r.mirror?0:E*f.width+k*m.height;e.height=Math.min(this.maxHeight,e.height+v+y)}else{const v=r.mirror?0:k*f.width+E*m.height;e.width=Math.min(this.maxWidth,e.width+v+y)}this._calculatePadding(c,d,E,k)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,y=0;l?c?(m=s*e.width,y=r*n.height):(m=r*e.height,y=s*n.width):i==="start"?y=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,y=n.width/2),this.paddingLeft=Math.max((m-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((y-f+o)*this.width/(this.width-f),0)}else{let d=n.height/2,f=e.height/2;i==="start"?(d=0,f=e.height):i==="end"&&(d=n.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ve(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Oe(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Aw(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Cw(n,r));let c=0,d=0,f,m,y,w,k,E,v,_,b,A,N;for(f=0;f<n;f+=l){if(w=e[f].label,k=this._resolveTickFontOptions(f),s.font=E=k.string,v=i[E]=i[E]||{data:{},gc:[]},_=k.lineHeight,b=A=0,!Oe(w)&&!_t(w))b=ow(s,v.data,v.gc,b,w),A=_;else if(_t(w))for(m=0,y=w.length;m<y;++m)N=w[m],!Oe(N)&&!_t(N)&&(b=ow(s,v.data,v.gc,b,N),A+=_);o.push(b),a.push(A),c=Math.max(b,c),d=Math.max(A,d)}B6(i,n);const M=o.indexOf(c),T=a.indexOf(d),x=I=>({width:o[I]||0,height:a[I]||0});return{first:x(0),last:x(n-1),widest:x(M),highest:x(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return L5(this._alignToPixels?si(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=$6(this.getContext(),e,r))}return this.$context||(this.$context=z6(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=vi(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=ja(i),y=[],w=a.setContext(this.getContext()),k=w.display?w.width:0,E=k/2,v=function(B){return si(r,B,k)};let _,b,A,N,M,T,x,I,C,R,O,P;if(o==="top")_=v(this.bottom),T=this.bottom-m,I=_-E,R=v(e.top)+E,P=e.bottom;else if(o==="bottom")_=v(this.top),R=e.top,P=v(e.bottom)-E,T=_+E,I=this.top+m;else if(o==="left")_=v(this.right),M=this.right-m,x=_-E,C=v(e.left)+E,O=e.right;else if(o==="right")_=v(this.left),C=e.left,O=v(e.right)-E,M=_+E,x=this.left+m;else if(n==="x"){if(o==="center")_=v((e.top+e.bottom)/2+.5);else if(ke(o)){const B=Object.keys(o)[0],se=o[B];_=v(this.chart.scales[B].getPixelForValue(se))}R=e.top,P=e.bottom,T=_+E,I=T+m}else if(n==="y"){if(o==="center")_=v((e.left+e.right)/2);else if(ke(o)){const B=Object.keys(o)[0],se=o[B];_=v(this.chart.scales[B].getPixelForValue(se))}M=_-E,x=M-m,C=e.left,O=e.right}const J=_e(s.ticks.maxTicksLimit,f),Q=Math.max(1,Math.ceil(f/J));for(b=0;b<f;b+=Q){const B=this.getContext(b),se=i.setContext(B),U=a.setContext(B),K=se.lineWidth,W=se.color,ue=U.dash||[],oe=U.dashOffset,j=se.tickWidth,Z=se.tickColor,re=se.tickBorderDash||[],xe=se.tickBorderDashOffset;A=U6(this,b,l),A!==void 0&&(N=si(r,A,K),c?M=x=C=O=N:T=I=R=P=N,y.push({tx1:M,ty1:T,tx2:x,ty2:I,x1:C,y1:R,x2:O,y2:P,width:K,color:W,borderDash:ue,borderDashOffset:oe,tickWidth:j,tickColor:Z,tickBorderDash:re,tickBorderDashOffset:xe}))}return this._ticksLength=f,this._borderValue=_,y}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:f}=i,m=ja(r.grid),y=m+d,w=f?-d:y,k=-vi(this.labelRotation),E=[];let v,_,b,A,N,M,T,x,I,C,R,O,P="middle";if(s==="top")M=this.bottom-w,T=this._getXAxisLabelAlignment();else if(s==="bottom")M=this.top+w,T=this._getXAxisLabelAlignment();else if(s==="left"){const Q=this._getYAxisLabelAlignment(m);T=Q.textAlign,N=Q.x}else if(s==="right"){const Q=this._getYAxisLabelAlignment(m);T=Q.textAlign,N=Q.x}else if(n==="x"){if(s==="center")M=(e.top+e.bottom)/2+y;else if(ke(s)){const Q=Object.keys(s)[0],B=s[Q];M=this.chart.scales[Q].getPixelForValue(B)+y}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")N=(e.left+e.right)/2-y;else if(ke(s)){const Q=Object.keys(s)[0],B=s[Q];N=this.chart.scales[Q].getPixelForValue(B)}T=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const J=this._getLabelSizes();for(v=0,_=a.length;v<_;++v){b=a[v],A=b.label;const Q=i.setContext(this.getContext(v));x=this.getPixelForTick(v)+i.labelOffset,I=this._resolveTickFontOptions(v),C=I.lineHeight,R=_t(A)?A.length:1;const B=R/2,se=Q.color,U=Q.textStrokeColor,K=Q.textStrokeWidth;let W=T;o?(N=x,T==="inner"&&(v===_-1?W=this.options.reverse?"left":"right":v===0?W=this.options.reverse?"right":"left":W="center"),s==="top"?c==="near"||k!==0?O=-R*C+C/2:c==="center"?O=-J.highest.height/2-B*C+C:O=-J.highest.height+C/2:c==="near"||k!==0?O=C/2:c==="center"?O=J.highest.height/2-B*C:O=J.highest.height-R*C,f&&(O*=-1),k!==0&&!Q.showLabelBackdrop&&(N+=C/2*Math.sin(k))):(M=x,O=(1-R)*C/2);let ue;if(Q.showLabelBackdrop){const oe=lr(Q.backdropPadding),j=J.heights[v],Z=J.widths[v];let re=O-oe.top,xe=0-oe.left;switch(P){case"middle":re-=j/2;break;case"bottom":re-=j;break}switch(T){case"center":xe-=Z/2;break;case"right":xe-=Z;break;case"inner":v===_-1?xe-=Z:v>0&&(xe-=Z/2);break}ue={left:xe,top:re,width:Z+oe.width,height:j+oe.height,color:Q.backdropColor}}E.push({label:A,font:I,textOffset:O,options:{rotation:k,color:se,strokeColor:U,strokeWidth:K,textAlign:W,textBaseline:P,translation:[N,M],backdrop:ue}})}return E}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-vi(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,d;return n==="left"?s?(d=this.right+i,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d=this.left)):n==="right"?s?(d=this.left+i,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,f,m;this.isHorizontal()?(c=si(e,this.left,o)-o/2,d=si(e,this.right,a)+a/2,f=m=l):(f=si(e,this.top,o)-o/2,m=si(e,this.bottom,a)+a/2,c=d=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(d,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Lh(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,d=o.textOffset;Hd(r,c,0,d,l,a)}s&&jh(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=ln(r.font),o=lr(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||ke(n)?(l+=o.bottom,_t(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:f,rotation:m}=W6(this,l,n,a);Hd(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:m,textAlign:H6(a,n,s),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=_e(e.grid&&e.grid.z,-1),s=_e(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ca.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ln(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class vu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;G6(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,q6(e,o,r),this.override&&rt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in rt[s]&&(delete rt[s][r],this.override&&delete Fi[r])}}function q6(t,e,n){const r=tc(Object.create(null),[n?rt.get(n):{},rt.get(e),t.defaults]);rt.set(e,r),t.defaultRoutes&&K6(e,t.defaultRoutes),t.descriptors&&rt.describe(e,t.descriptors)}function K6(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");rt.route(i,s,l,a)})}function G6(t){return"id"in t&&"defaults"in t}class Q6{constructor(){this.controllers=new vu(bl,"datasets",!0),this.elements=new vu($s,"elements"),this.plugins=new vu(Object,"plugins"),this.scales=new vu(ca,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Ce(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=J0(e);Ve(r["before"+s],[],r),n[e](r),Ve(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var fr=new Q6;class Y6{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Ve(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Oe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=_e(r.options&&r.options.plugins,{}),i=X6(r);return s===!1&&!n?[]:Z6(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function X6(t){const e={},n=[],r=Object.keys(fr.plugins.items);for(let i=0;i<r.length;i++)n.push(fr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function J6(t,e){return!e&&t===!1?null:t===!0?{}:t}function Z6(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=J6(r[l],s);c!==null&&i.push({plugin:a,options:eU(t.config,{plugin:a,local:n[l]},c,o)})}return i}function eU(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Om(t,e){const n=rt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function tU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function nU(t,e){return t===e?"_index_":"_value_"}function Rw(t){if(t==="x"||t==="y"||t==="r")return t}function rU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Lm(t,...e){if(Rw(t))return t;for(const n of e){const r=n.axis||rU(n.position)||t.length>1&&Rw(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Nw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function sU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Nw(t,"x",n[0])||Nw(t,"y",n[0])}return{}}function iU(t,e){const n=Fi[t.type]||{scales:{}},r=e.scales||{},s=Om(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ke(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Lm(o,a,sU(o,t),rt.scales[a.type]),c=nU(l,s),d=n.scales||{};i[o]=yl(Object.create(null),[{axis:l},a,d[l],d[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Om(a,e),d=(Fi[a]||{}).scales||{};Object.keys(d).forEach(f=>{const m=tU(f,l),y=o[m+"AxisID"]||m;i[y]=i[y]||Object.create(null),yl(i[y],[{axis:m},r[y],d[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];yl(a,[rt.scales[a.type],rt.scale])}),i}function AS(t){const e=t.options||(t.options={});e.plugins=_e(e.plugins,{}),e.scales=iU(t,e)}function PS(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function oU(t){return t=t||{},t.data=PS(t.data),AS(t),t}const Dw=new Map,RS=new Set;function _u(t,e){let n=Dw.get(t);return n||(n=e(),Dw.set(t,n),RS.add(n)),n}const Va=(t,e,n)=>{const r=Bd(e,n);r!==void 0&&t.add(r)};class aU{constructor(e){this._config=oU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=PS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),AS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return _u(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return _u(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return _u(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return _u(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(f=>Va(l,e,f))),d.forEach(f=>Va(l,s,f)),d.forEach(f=>Va(l,Fi[i]||{},f)),d.forEach(f=>Va(l,rt,f)),d.forEach(f=>Va(l,Nm,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),RS.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Fi[n]||{},rt.datasets[n]||{},{type:n},rt,Nm]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Mw(this._resolverCache,e,s);let l=o;if(cU(o,n)){i.$shared=!1,r=zs(r)?r():r;const c=this.createResolver(e,r,a);l=Qo(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Mw(this._resolverCache,e,r);return ke(n)?Qo(i,n,void 0,s):i}}function Mw(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:ty(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const lU=t=>ke(t)&&Object.getOwnPropertyNames(t).some(e=>zs(t[e]));function cU(t,e){const{isScriptable:n,isIndexable:r}=dS(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(zs(a)||lU(a))||o&&_t(a))return!0}return!1}var uU="4.5.0";const dU=["top","bottom","left","right","chartArea"];function Ow(t,e){return t==="top"||t==="bottom"||dU.indexOf(t)===-1&&e==="x"}function Lw(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function jw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ve(n&&n.onComplete,[t],e)}function hU(t){const e=t.chart,n=e.options.animation;Ve(n&&n.onProgress,[t],e)}function NS(t){return sy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const qu={},Vw=t=>{const e=NS(t);return Object.values(qu).filter(n=>n.canvas===e).pop()};function fU(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function pU(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var os;let Uh=(os=class{static register(...e){fr.add(...e),Fw()}static unregister(...e){fr.remove(...e),Fw()}constructor(e,n){const r=this.config=new aU(n),s=NS(e),i=Vw(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||N6(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=x5(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Y6,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=B5(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],qu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Sr.listen(this,"complete",jw),Sr.listen(this,"progress",hU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Oe(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return fr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():uw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return aw(this.canvas,this.ctx),this}stop(){return Sr.stop(this),this}resize(e,n){Sr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,uw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ve(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ce(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Lm(o,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),Ce(i,o=>{const a=o.options,l=a.id,c=Lm(l,a),d=_e(a.type,o.dtype);(a.position===void 0||Ow(a.position,c)!==Ow(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===d)f=r[l];else{const m=fr.getScale(d);f=new m({id:l,type:d,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),Ce(s,(o,a)=>{o||delete r[a]}),Ce(r,o=>{ws.configure(this,o,o.options),ws.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Lw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||Om(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=fr.getController(a),{datasetElementType:c,dataElementType:d}=rt.datasets[a];Object.assign(l,{dataElementType:fr.getElement(d),datasetElementType:c&&fr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ce(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:f}=this.getDatasetMeta(c),m=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Ce(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Lw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ce(this.scales,e=>{ws.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Xx(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;fU(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Xx(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ws.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ce(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,zs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Sr.has(this)?this.attached&&!Sr.running(this)&&Sr.start(this):(this.draw(),jw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=wS(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Lh(n,s),e.controller.draw(),s&&jh(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return rc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=d6.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=qi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);zd(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Sr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),aw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete qu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Ce(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ce(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ce(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Fd(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(d=>!c.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=I5(e),c=pU(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Ve(i.onHover,[e,a,this],this),l&&Ve(i.onClick,[e,a,this],this));const d=!Fd(a,s);return(d||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,d}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},pe(os,"defaults",rt),pe(os,"instances",qu),pe(os,"overrides",Fi),pe(os,"registry",fr),pe(os,"version",uU),pe(os,"getChart",Vw),os);function Fw(){return Ce(Uh.instances,t=>t._plugins.invalidate())}function DS(t,e,n=e){t.lineCap=_e(n.borderCapStyle,e.borderCapStyle),t.setLineDash(_e(n.borderDash,e.borderDash)),t.lineDashOffset=_e(n.borderDashOffset,e.borderDashOffset),t.lineJoin=_e(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=_e(n.borderWidth,e.borderWidth),t.strokeStyle=_e(n.borderColor,e.borderColor)}function mU(t,e,n){t.lineTo(n.x,n.y)}function gU(t){return t.stepped?t3:t.tension||t.cubicInterpolationMode==="monotone"?n3:mU}function MS(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),d=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!d?r+c-l:c-l}}function yU(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=MS(s,n,r),d=gU(i);let{move:f=!0,reverse:m}=r||{},y,w,k;for(y=0;y<=c;++y)w=s[(a+(m?c-y:y))%o],!w.skip&&(f?(t.moveTo(w.x,w.y),f=!1):d(t,k,w,m,i.stepped),k=w);return l&&(w=s[(a+(m?c:0))%o],d(t,k,w,m,i.stepped)),!!l}function vU(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=MS(s,n,r),{move:l=!0,reverse:c}=r||{};let d=0,f=0,m,y,w,k,E,v;const _=A=>(o+(c?a-A:A))%i,b=()=>{k!==E&&(t.lineTo(d,E),t.lineTo(d,k),t.lineTo(d,v))};for(l&&(y=s[_(0)],t.moveTo(y.x,y.y)),m=0;m<=a;++m){if(y=s[_(m)],y.skip)continue;const A=y.x,N=y.y,M=A|0;M===w?(N<k?k=N:N>E&&(E=N),d=(f*d+A)/++f):(b(),t.lineTo(A,N),w=M,f=0,k=E=N),v=N}b()}function jm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?vU:yU}function _U(t){return t.stepped?O3:t.tension||t.cubicInterpolationMode==="monotone"?L3:di}function xU(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),DS(t,e.options),t.stroke(s)}function wU(t,e,n,r){const{segments:s,options:i}=e,o=jm(e);for(const a of s)DS(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const bU=typeof Path2D=="function";function kU(t,e,n,r){bU&&!e.options.segment?xU(t,e,n,r):wU(t,e,n,r)}class bs extends $s{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;S3(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=z3(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=xS(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=_U(r);let c,d;for(c=0,d=o.length;c<d;++c){const{start:f,end:m}=o[c],y=i[f],w=i[m];if(y===w){a.push(y);continue}const k=Math.abs((s-y[n])/(w[n]-y[n])),E=l(y,w,k,r.stepped);E[n]=e[n],a.push(E)}return a.length===1?a[0]:a}pathSegment(e,n,r){return jm(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=jm(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),kU(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}pe(bs,"id","line"),pe(bs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),pe(bs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),pe(bs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Uw(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Ku extends $s{constructor(n){super();pe(this,"parsed");pe(this,"skip");pe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return Uw(this,n,"x",r)}inYRange(n,r){return Uw(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!rc(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Dm(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}pe(Ku,"id","point"),pe(Ku,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),pe(Ku,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function EU(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Bh(l,c,s);const d=Vm(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:d,start:s[l],end:s[c]});continue}const f=xS(e,d);for(const m of f){const y=Vm(n,i[m.start],i[m.end],m.loop),w=_S(a,s,y);for(const k of w)o.push({source:k,target:m,start:{[n]:Bw(d,y,"start",Math.max)},end:{[n]:Bw(d,y,"end",Math.min)}})}}return o}function Vm(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=pr(s),i=pr(i)),{property:t,start:s,end:i}}function TU(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=Bh(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function Bh(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Bw(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function OS(t,e){let n=[],r=!1;return _t(t)?(r=!0,n=t):n=TU(t,e),n.length?new bs({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function zw(t){return t&&t.fill!==!1}function IU(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!zt(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function SU(t,e,n){const r=RU(t);if(ke(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return zt(s)&&Math.floor(s)===s?CU(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function CU(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function AU(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ke(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function PU(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:ke(t)?r=t.value:r=e.getBaseValue(),r}function RU(t){const e=t.options,n=e.fill;let r=_e(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function NU(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=DU(e,n);a.push(OS({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let d=c.start;d<=c.end;d++)MU(s,o[d],a)}return new bs({points:s,options:{}})}function DU(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function MU(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=OU(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function OU(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const d=i[c],f=o[d.start][n],m=o[d.end][n];if(vo(s,f,m)){a=s===f,l=s===m;break}}return{first:a,last:l,point:r}}class LS{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:sr},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function LU(t){const{chart:e,fill:n,line:r}=t;if(zt(n))return jU(e,n);if(n==="stack")return NU(t);if(n==="shape")return!0;const s=VU(t);return s instanceof LS?s:OS(s,r)}function jU(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function VU(t){return(t.scale||{}).getPointPositionForValue?UU(t):FU(t)}function FU(t){const{scale:e={},fill:n}=t,r=AU(n,e);if(zt(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function UU(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=PU(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new LS({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function sp(t,e,n){const r=LU(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,d=c.fill,f=c.backgroundColor,{above:m=f,below:y=f}=d||{},w=s.getDatasetMeta(i),k=wS(s,w);r&&o.points.length&&(Lh(t,n),BU(t,{line:o,target:r,above:m,below:y,area:n,scale:a,axis:l,clip:k}),jh(t))}function BU(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let d=i;i!==s&&(c==="x"?($w(t,r,o.top),ip(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),$w(t,r,o.bottom)):c==="y"&&(Hw(t,r,o.left),ip(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Hw(t,r,o.right),d=s)),ip(t,{line:n,target:r,color:d,scale:a,property:c,clip:l}),t.restore()}function $w(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,d=s[l],f=s[Bh(l,c,s)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Hw(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,d=s[l],f=s[Bh(l,c,s)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(n,d.y),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function ip(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=EU(n,r,s);for(const{source:c,target:d,start:f,end:m}of l){const{style:{backgroundColor:y=i}={}}=c,w=r!==!0;t.save(),t.fillStyle=y,zU(t,o,a,w&&Vm(s,f,m)),t.beginPath();const k=!!n.pathSegment(t,c);let E;if(w){k?t.closePath():Ww(t,r,m,s);const v=!!r.pathSegment(t,d,{move:k,reverse:!0});E=k&&v,E||Ww(t,r,f,s)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function zU(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,d,f;i==="x"?(l=o,c=s.top,d=a,f=s.bottom):(l=s.left,c=o,d=s.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),d=Math.min(d,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,d-l,f-c),t.clip()}}function Ww(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var $U={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof bs&&(l={visible:t.isDatasetVisible(o),index:o,fill:SU(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=IU(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&sp(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;zw(i)&&sp(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!zw(r)||n.drawTime!=="beforeDatasetDraw"||sp(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const qw=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},HU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Kw extends $s{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ve(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=ln(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=qw(r,i);let c,d;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,i,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let m=-1,y=-d;return this.legendItems.forEach((w,k)=>{const E=r+n/2+i.measureText(w.text).width;(k===0||c[c.length-1]+E+2*a>o)&&(f+=d,c[c.length-(k>0?0:1)]=0,y+=d,m++),l[k]={left:0,top:y,row:m,width:E,height:s},c[c.length-1]+=E+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let f=a,m=0,y=0,w=0,k=0;return this.legendItems.forEach((E,v)=>{const{itemWidth:_,itemHeight:b}=WU(r,n,i,E,s);v>0&&y+b+2*a>d&&(f+=m+a,c.push({width:m,height:y}),w+=m+a,k++,m=y=0),l[v]={left:w,top:y,col:k,width:_,height:b},m=Math.max(m,_),y+=b+a}),f+=m,c.push({width:m,height:y}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Ao(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=xn(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=xn(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=xn(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=xn(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Lh(e,this),this._draw(),jh(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=rt.color,l=Ao(e.rtl,this.left,this.width),c=ln(o.font),{padding:d}=o,f=c.size,m=f/2;let y;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:w,boxHeight:k,itemHeight:E}=qw(o,f),v=function(M,T,x){if(isNaN(w)||w<=0||isNaN(k)||k<0)return;s.save();const I=_e(x.lineWidth,1);if(s.fillStyle=_e(x.fillStyle,a),s.lineCap=_e(x.lineCap,"butt"),s.lineDashOffset=_e(x.lineDashOffset,0),s.lineJoin=_e(x.lineJoin,"miter"),s.lineWidth=I,s.strokeStyle=_e(x.strokeStyle,a),s.setLineDash(_e(x.lineDash,[])),o.usePointStyle){const C={radius:k*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:I},R=l.xPlus(M,w/2),O=T+m;cS(s,C,R,O,o.pointStyleWidth&&w)}else{const C=T+Math.max((f-k)/2,0),R=l.leftForLtr(M,w),O=wl(x.borderRadius);s.beginPath(),Object.values(O).some(P=>P!==0)?Mm(s,{x:R,y:C,w,h:k,radius:O}):s.rect(R,C,w,k),s.fill(),I!==0&&s.stroke()}s.restore()},_=function(M,T,x){Hd(s,x.text,M,T+E/2,c,{strikethrough:x.hidden,textAlign:l.textAlign(x.textAlign)})},b=this.isHorizontal(),A=this._computeTitleHeight();b?y={x:xn(i,this.left+d,this.right-r[0]),y:this.top+d+A,line:0}:y={x:this.left+d,y:xn(i,this.top+A+d,this.bottom-n[0].height),line:0},gS(this.ctx,e.textDirection);const N=E+d;this.legendItems.forEach((M,T)=>{s.strokeStyle=M.fontColor,s.fillStyle=M.fontColor;const x=s.measureText(M.text).width,I=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),C=w+m+x;let R=y.x,O=y.y;l.setWidth(this.width),b?T>0&&R+C+d>this.right&&(O=y.y+=N,y.line++,R=y.x=xn(i,this.left+d,this.right-r[y.line])):T>0&&O+N>this.bottom&&(R=y.x=R+n[y.line].width+d,y.line++,O=y.y=xn(i,this.top+A+d,this.bottom-n[y.line].height));const P=l.x(R);if(v(P,O,M),R=z5(I,R+w+m,b?R+C:this.right,e.rtl),_(l.x(R),O,M),b)y.x+=C+d;else if(typeof M.text!="string"){const J=c.lineHeight;y.y+=jS(M,J)+d}else y.y+=N}),yS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ln(n.font),s=lr(n.padding);if(!n.display)return;const i=Ao(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let d,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+c,f=xn(e.align,f,this.right-m);else{const w=this.columnSizes.reduce((k,E)=>Math.max(k,E.height),0);d=c+xn(e.align,this.top,this.bottom-w-e.labels.padding-this._computeTitleHeight())}const y=xn(a,f,f+m);o.textAlign=i.textAlign(oS(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Hd(o,n.text,y,d,r)}_computeTitleHeight(){const e=this.options.title,n=ln(e.font),r=lr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(vo(e,this.left,this.right)&&vo(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],vo(e,s.left,s.left+s.width)&&vo(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!GU(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=HU(s,r);s&&!i&&Ve(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Ve(n.onHover,[e,r,this],this)}else r&&Ve(n.onClick,[e,r,this],this)}}function WU(t,e,n,r,s){const i=qU(r,t,e,n),o=KU(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function qU(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function KU(t,e,n){let r=t;return typeof e.text!="string"&&(r=jS(e,n)),r}function jS(t,e){const n=t.text?t.text.length:0;return e*n}function GU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var QU={id:"legend",_element:Kw,start(t,e,n){const r=t.legend=new Kw({ctx:t.ctx,options:n,chart:t});ws.configure(t,r,n),ws.addBox(t,r)},stop(t){ws.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;ws.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),d=lr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Ja={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Rm(e,c);d<s&&(s=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function dr(t,e){return e&&(_t(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Cr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function YU(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Gw(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=ln(e.bodyFont),c=ln(e.titleFont),d=ln(e.footerFont),f=i.length,m=s.length,y=r.length,w=lr(e.padding);let k=w.height,E=0,v=r.reduce((A,N)=>A+N.before.length+N.lines.length+N.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,f&&(k+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),v){const A=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;k+=y*A+(v-y)*l.lineHeight+(v-1)*e.bodySpacing}m&&(k+=e.footerMarginTop+m*d.lineHeight+(m-1)*e.footerSpacing);let _=0;const b=function(A){E=Math.max(E,n.measureText(A).width+_)};return n.save(),n.font=c.string,Ce(t.title,b),n.font=l.string,Ce(t.beforeBody.concat(t.afterBody),b),_=e.displayColors?o+2+e.boxPadding:0,Ce(r,A=>{Ce(A.before,b),Ce(A.lines,b),Ce(A.after,b)}),_=0,n.font=d.string,Ce(t.footer,b),n.restore(),E+=w.width,{width:E,height:k}}function XU(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function JU(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function ZU(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),JU(c,t,e,n)&&(c="center"),c}function Qw(t,e,n){const r=n.yAlign||e.yAlign||XU(t,n);return{xAlign:n.xAlign||e.xAlign||ZU(t,e,n,r),yAlign:r}}function e9(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function t9(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Yw(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:y}=wl(o);let w=e9(e,a);const k=t9(e,l,c);return l==="center"?a==="left"?w+=c:a==="right"&&(w-=c):a==="left"?w-=Math.max(d,m)+s:a==="right"&&(w+=Math.max(f,y)+s),{x:jn(w,0,r.width-e.width),y:jn(k,0,r.height-e.height)}}function xu(t,e,n){const r=lr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Xw(t){return dr([],Cr(t))}function n9(t,e,n){return qi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Jw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const VS={beforeTitle:Tr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Tr,beforeBody:Tr,beforeLabel:Tr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Oe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Tr,afterBody:Tr,beforeFooter:Tr,footer:Tr,afterFooter:Tr};function nn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?VS[e].call(n,r):s}class Fm extends $s{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new bS(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=n9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=nn(r,"beforeTitle",this,e),i=nn(r,"title",this,e),o=nn(r,"afterTitle",this,e);let a=[];return a=dr(a,Cr(s)),a=dr(a,Cr(i)),a=dr(a,Cr(o)),a}getBeforeBody(e,n){return Xw(nn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Ce(e,i=>{const o={before:[],lines:[],after:[]},a=Jw(r,i);dr(o.before,Cr(nn(a,"beforeLabel",this,i))),dr(o.lines,nn(a,"label",this,i)),dr(o.after,Cr(nn(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return Xw(nn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=nn(r,"beforeFooter",this,e),i=nn(r,"footer",this,e),o=nn(r,"afterFooter",this,e);let a=[];return a=dr(a,Cr(s)),a=dr(a,Cr(i)),a=dr(a,Cr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(YU(this.chart,n[l]));return e.filter&&(a=a.filter((d,f,m)=>e.filter(d,f,m,r))),e.itemSort&&(a=a.sort((d,f)=>e.itemSort(d,f,r))),Ce(a,d=>{const f=Jw(e.callbacks,d);s.push(nn(f,"labelColor",this,d)),i.push(nn(f,"labelPointStyle",this,d)),o.push(nn(f,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Ja[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Gw(this,r),c=Object.assign({},a,l),d=Qw(this.chart,r,c),f=Yw(r,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:f}=wl(a),{x:m,y}=e,{width:w,height:k}=n;let E,v,_,b,A,N;return i==="center"?(A=y+k/2,s==="left"?(E=m,v=E-o,b=A+o,N=A-o):(E=m+w,v=E+o,b=A-o,N=A+o),_=E):(s==="left"?v=m+Math.max(l,d)+o:s==="right"?v=m+w-Math.max(c,f)-o:v=this.caretX,i==="top"?(b=y,A=b-o,E=v-o,_=v+o):(b=y+k,A=b+o,E=v+o,_=v-o),N=b),{x1:E,x2:v,x3:_,y1:b,y2:A,y3:N}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=Ao(r.rtl,this.x,this.width);for(e.x=xu(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=ln(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,d=ln(i.bodyFont),f=xu(this,"left",i),m=s.x(f),y=l<d.lineHeight?(d.lineHeight-l)/2:0,w=n.y+y;if(i.usePointStyle){const k={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},E=s.leftForLtr(m,c)+c/2,v=w+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Dm(e,k,E,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Dm(e,k,E,v)}else{e.lineWidth=ke(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const k=s.leftForLtr(m,c),E=s.leftForLtr(s.xPlus(m,1),c-2),v=wl(o.borderRadius);Object.values(v).some(_=>_!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Mm(e,{x:k,y:w,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Mm(e,{x:E,y:w+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(k,w,c,l),e.strokeRect(k,w,c,l),e.fillStyle=o.backgroundColor,e.fillRect(E,w+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=r,f=ln(r.bodyFont);let m=f.lineHeight,y=0;const w=Ao(r.rtl,this.x,this.width),k=function(x){n.fillText(x,w.x(e.x+y),e.y+m/2),e.y+=m+i},E=w.textAlign(o);let v,_,b,A,N,M,T;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=xu(this,E,r),n.fillStyle=r.bodyColor,Ce(this.beforeBody,k),y=a&&E!=="right"?o==="center"?c/2+d:c+2+d:0,A=0,M=s.length;A<M;++A){for(v=s[A],_=this.labelTextColors[A],n.fillStyle=_,Ce(v.before,k),b=v.lines,a&&b.length&&(this._drawColorBox(n,e,A,w,r),m=Math.max(f.lineHeight,l)),N=0,T=b.length;N<T;++N)k(b[N]),m=f.lineHeight;Ce(v.after,k)}y=0,m=f.lineHeight,Ce(this.afterBody,k),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Ao(r.rtl,this.x,this.width);for(e.x=xu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=ln(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:d}=r,{topLeft:f,topRight:m,bottomLeft:y,bottomRight:w}=wl(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-m,l),n.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+d-w),n.quadraticCurveTo(a+c,l+d,a+c-w,l+d),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+y,l+d),n.quadraticCurveTo(a,l+d,a,l+d-y),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Ja[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Gw(this,e),l=Object.assign({},o,this._size),c=Qw(n,e,l),d=Yw(e,l,c,n);(s._to!==d.x||i._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=lr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),gS(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),yS(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Fd(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Fd(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Ja[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}pe(Fm,"positioners",Ja);var r9={id:"tooltip",_element:Fm,positioners:Ja,afterInit(t,e,n){n&&(t.tooltip=new Fm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:VS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const s9=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function i9(t,e,n,r){const s=t.indexOf(e);if(s===-1)return s9(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const o9=(t,e)=>t===null?null:jn(Math.round(t),0,e);function Zw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Um extends ca{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Oe(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:i9(r,e,_e(n,e),this._addedLabels),o9(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Zw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}pe(Um,"id","category"),pe(Um,"defaults",{ticks:{callback:Zw}});function a9(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:f,includeBounds:m}=t,y=i||1,w=d-1,{min:k,max:E}=e,v=!Oe(o),_=!Oe(a),b=!Oe(c),A=(E-k)/(f+1);let N=Zx((E-k)/w/y)*y,M,T,x,I;if(N<1e-14&&!v&&!_)return[{value:k},{value:E}];I=Math.ceil(E/N)-Math.floor(k/N),I>w&&(N=Zx(I*N/w/y)*y),Oe(l)||(M=Math.pow(10,l),N=Math.ceil(N*M)/M),s==="ticks"?(T=Math.floor(k/N)*N,x=Math.ceil(E/N)*N):(T=k,x=E),v&&_&&i&&R5((a-o)/i,N/1e3)?(I=Math.round(Math.min((a-o)/N,d)),N=(a-o)/I,T=o,x=a):b?(T=v?o:T,x=_?a:x,I=c-1,N=(x-T)/I):(I=(x-T)/N,vl(I,Math.round(I),N/1e3)?I=Math.round(I):I=Math.ceil(I));const C=Math.max(ew(N),ew(T));M=Math.pow(10,Oe(l)?C:l),T=Math.round(T*M)/M,x=Math.round(x*M)/M;let R=0;for(v&&(m&&T!==o?(n.push({value:o}),T<o&&R++,vl(Math.round((T+R*N)*M)/M,o,eb(o,A,t))&&R++):T<o&&R++);R<I;++R){const O=Math.round((T+R*N)*M)/M;if(_&&O>a)break;n.push({value:O})}return _&&m&&x!==a?n.length&&vl(n[n.length-1].value,a,eb(a,A,t))?n[n.length-1].value=a:n.push({value:a}):(!_||x===a)&&n.push({value:x}),n}function eb(t,e,{horizontal:n,minRotation:r}){const s=vi(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class l9 extends ca{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Oe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Go(s),c=Go(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=a9(s,i);return e.bounds==="ticks"&&N5(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return aS(e,this.chart.options.locale,this.options.ticks.format)}}class Bm extends l9{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=zt(e)?e:0,this.max=zt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=vi(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}pe(Bm,"id","linear"),pe(Bm,"defaults",{ticks:{callback:lS.formatters.numeric}});const zh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},on=Object.keys(zh);function tb(t,e){return t-e}function nb(t,e){if(Oe(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),zt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(nc(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function rb(t,e,n,r){const s=on.length;for(let i=on.indexOf(t);i<s-1;++i){const o=zh[on[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return on[i]}return on[s-1]}function c9(t,e,n,r,s){for(let i=on.length-1;i>=on.indexOf(n);i--){const o=on[i];if(zh[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return on[n?on.indexOf(n):0]}function u9(t){for(let e=on.indexOf(t)+1,n=on.length;e<n;++e)if(zh[on[e]].common)return on[e]}function sb(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Z0(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function d9(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function ib(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:d9(t,r,s,n)}class Kd extends ca{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new o6._date(e.adapters.date);s.init(n),yl(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:nb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=zt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=zt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=V5(s,i,o);return this._unit=n.unit||(r.autoSkip?rb(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):c9(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:u9(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),ib(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=jn(n,0,o),r=jn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||rb(i.minUnit,n,r,this._getLabelCapacity(n)),a=_e(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=nc(l)||l===!0,d={};let f=n,m,y;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const w=s.ticks.source==="data"&&this.getDataTimestamps();for(m=f,y=0;m<r;m=+e.add(m,a,o),y++)sb(d,m,w);return(m===r||s.bounds==="ticks"||y===1)&&sb(d,m,w),Object.keys(d).sort(tb).map(k=>+k)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Ve(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],f=c&&a[c],m=r[n],y=c&&f&&m&&m.major;return this._adapter.format(e,s||(y?f:d))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=vi(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,ib(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(nb(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return U5(e.sort(tb))}}pe(Kd,"id","time"),pe(Kd,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function wu(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=_i(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=_i(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class ob extends Kd{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=wu(n,this.min),this._tableRange=wu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,d;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)d=s[o+1],l=s[o-1],c=s[o],Math.round((d+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(wu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return wu(this._table,r*this._tableRange+this._minPos,!0)}}pe(ob,"id","timeseries"),pe(ob,"defaults",Kd.defaults);const FS="label";function ab(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function h9(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function US(t,e){t.labels=e}function BS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:FS;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function f9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FS;const n={labels:[],datasets:[]};return US(n,t.labels),BS(n,t.datasets,e),n}function p9(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:d,updateMode:f,...m}=t,y=D.useRef(null),w=D.useRef(null),k=()=>{y.current&&(w.current=new Uh(y.current,{type:o,data:f9(a,i),options:l&&{...l},plugins:c}),ab(e,w.current))},E=()=>{ab(e,null),w.current&&(w.current.destroy(),w.current=null)};return D.useEffect(()=>{!s&&w.current&&l&&h9(w.current,l)},[s,l]),D.useEffect(()=>{!s&&w.current&&US(w.current.config.data,a.labels)},[s,a.labels]),D.useEffect(()=>{!s&&w.current&&a.datasets&&BS(w.current.config.data,a.datasets,i)},[s,a.datasets]),D.useEffect(()=>{w.current&&(s?(E(),setTimeout(k)):w.current.update(f))},[s,l,a.labels,a.datasets,f]),D.useEffect(()=>{w.current&&(E(),setTimeout(k))},[o]),D.useEffect(()=>(k(),()=>E()),[]),Qd.createElement("canvas",{ref:y,role:"img",height:n,width:r,...m},d)}const m9=D.forwardRef(p9);function g9(t,e){return Uh.register(e),D.forwardRef((n,r)=>Qd.createElement(m9,{...n,ref:r,type:t}))}const y9=g9("line",Hu);Uh.register(Um,Bm,Ku,bs,r9,QU,$U);function zS({points:t=[],labels:e,yRange:n={min:0,max:1},height:r=220}){const s=D.useRef(null),i=(c,d)=>{const f=c.createLinearGradient(0,d.bottom,0,d.top);return f.addColorStop(0,"rgba(16, 185, 129, 0.15)"),f.addColorStop(.5,"rgba(245, 158, 11, 0.2)"),f.addColorStop(1,"rgba(239, 68, 68, 0.25)"),f},a={labels:Array.isArray(e)&&e.length===t.length?e:t.map((c,d)=>`Day ${d+1}`),datasets:[{label:"Risk Level",data:t,borderColor:"rgb(59, 130, 246)",backgroundColor:function(c){const d=c.chart,{ctx:f,chartArea:m}=d;return m?i(f,m):null},borderWidth:2,pointBackgroundColor:"white",pointBorderColor:"rgb(59, 130, 246)",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6,pointHoverBackgroundColor:"white",pointHoverBorderColor:"rgb(59, 130, 246)",pointHoverBorderWidth:2,tension:.3,fill:!0}]},l={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.95)",titleColor:"white",bodyColor:"white",padding:12,borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,usePointStyle:!0,callbacks:{label:function(c){return`Risk: ${c.parsed.y.toFixed(2)}`}},titleFont:{size:14,weight:"500"},bodyFont:{size:13},boxPadding:6}},scales:{y:{min:(n==null?void 0:n.min)??0,max:(n==null?void 0:n.max)??1,grid:{color:"rgba(226, 232, 240, 0.2)",borderDash:[4,4],drawTicks:!1},border:{display:!1},ticks:{color:"rgba(100, 116, 139, 0.8)",padding:8,callback:function(c){return c.toFixed(1)},font:{size:12}}},x:{grid:{display:!1},border:{display:!1},ticks:{color:"rgba(100, 116, 139, 0.8)",maxRotation:45,minRotation:45,padding:10,font:{size:12}}}},elements:{line:{borderWidth:2},point:{hoverRadius:7,hoverBorderWidth:2}},interaction:{intersect:!1,mode:"index"},animation:{duration:800,easing:"easeInOutCubic"},layout:{padding:{top:10,right:15,bottom:10,left:15}}};return h.jsx("div",{className:"relative w-full",style:{height:`${r}px`},children:h.jsx(y9,{ref:s,data:a,options:l,updateMode:"resize"})})}const Js="",$h={"x-user-id":"demo"};async function ay(){try{const t=kt.currentUser;if(t)return{Authorization:`Bearer ${await t.getIdToken()}`}}catch{}return{...$h}}async function v9(){return(await fetch(`${Js}/api/ai/health`)).json()}async function _9(t,{useOcr:e,lang:n}={}){const r=await fetch(`${Js}/api/pdf-extract`,{method:"POST",headers:{"Content-Type":"application/json",...$h},body:JSON.stringify({url:t,useOcr:e,lang:n})}),s=await r.text();let i={};try{i=s?JSON.parse(s):{}}catch{i={}}if(!r.ok){const o=(i==null?void 0:i.error)||(i==null?void 0:i.message)||`HTTP ${r.status}`,a=new Error(o);throw a.status=r.status,a.body=i,a}return i}function x9(t,{onProgress:e,signal:n}={}){return new Promise((r,s)=>{try{const i=new XMLHttpRequest,o=new FormData;if(o.append("file",t),i.open("POST",`${Js}/functions/processReport`,!0),i.setRequestHeader("x-user-id",$h["x-user-id"]),i.upload&&typeof e=="function"&&(i.upload.onprogress=a=>{if(!a.lengthComputable)return;const l=Math.min(99,Math.round(a.loaded/a.total*100));e(l)}),i.onreadystatechange=()=>{if(i.readyState===4)if(i.status>=200&&i.status<300)try{const a=JSON.parse(i.responseText||"{}");r(a)}catch{r({ok:!0})}else{let a="Upload failed";try{const c=JSON.parse(i.responseText||"{}");a=(c==null?void 0:c.error)||(c==null?void 0:c.message)||a;const d=new Error(a);return d.status=i.status,d.body=c,s(d)}catch{}const l=new Error(a);l.status=i.status,s(l)}},i.onerror=()=>s(new Error("Network error during upload")),i.onabort=()=>s(new Error("Upload canceled")),n)if(n.aborted)i.abort();else{const a=()=>i.abort();n.addEventListener("abort",a,{once:!0})}i.send(o)}catch(i){s(i)}})}async function w9(t){return(await fetch(`${Js}/functions/analyzeCheckin`,{method:"POST",headers:{"Content-Type":"application/json",...$h},body:JSON.stringify(t)})).json()}async function b9(t,e,n){const r=new URL(`${Js}/functions/findNearbyAmbulance`);return r.searchParams.set("lat",String(t)),r.searchParams.set("lng",String(e)),Number.isFinite(n)&&r.searchParams.set("radiusMeters",String(n)),(await fetch(r.toString())).json()}async function k9(t,{signal:e}={}){const n=await fetch(`${Js}/functions/chat`,{method:"POST",headers:{"Content-Type":"application/json",...await ay()},body:JSON.stringify(t),signal:e}),r=await n.text();let s=null;try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}async function $S(t){const e=new URL(`${Js}/functions/riskSeries`);t&&e.searchParams.set("userId",String(t));const n=await fetch(e.toString(),{headers:{...await ay()}}),r=await n.text();let s={};try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}async function E9(t,e){const n=await fetch(`${Js}/functions/generateReportSummary`,{method:"POST",headers:{"Content-Type":"application/json",...await ay()},body:JSON.stringify({extractedData:t,ocrText:e})}),r=await n.text();let s={};try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}function cn({className:t="",children:e,hoverable:n=!1}){return h.jsx("div",{className:`
        bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm 
        rounded-xl border border-slate-200 dark:border-slate-800 
        shadow-sm hover:shadow-md transition-all duration-300
        ${n?"hover:-translate-y-0.5 hover:shadow-lg":""}
        ${t}
      `.trim(),children:e})}function Ur({className:t="",children:e}){return h.jsx("div",{className:`
        px-6 py-4 border-b border-slate-200/80 dark:border-slate-800/80
        ${t}
      `.trim(),children:e})}function Br({className:t="",children:e}){return h.jsx("h2",{className:`
        text-lg font-semibold tracking-tight 
        text-slate-900 dark:text-slate-100
        ${t}
      `.trim(),children:e})}function un({className:t="",children:e}){return h.jsx("div",{className:`
        p-6 text-slate-800 dark:text-slate-200 
        ${t}
      `.trim(),children:e})}function Po({size:t=16,className:e=""}){const n={width:t,height:t};return h.jsxs("svg",{className:`animate-spin text-blue-600 ${e}`,style:n,viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}const HS=D.createContext({notify:()=>{}});function T9({children:t}){const[e,n]=D.useState([]),r=D.useCallback((i,o="info",a=3e3)=>{const l=Math.random().toString(36).slice(2);n(c=>c.concat({id:l,message:i,type:o})),setTimeout(()=>n(c=>c.filter(d=>d.id!==l)),a)},[]),s=D.useMemo(()=>({notify:r}),[r]);return h.jsxs(HS.Provider,{value:s,children:[t,h.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:e.map(i=>h.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${i.type==="error"?"bg-red-600":i.type==="success"?"bg-emerald-600":"bg-slate-900"}`,children:i.message},i.id))})]})}function ua(){return D.useContext(HS)}function I9({title:t,subtitle:e,cta:n}){return h.jsxs("section",{className:"mb-8 rounded-xl border border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[h.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 dark:text-slate-100 mb-3 tracking-tight",children:t}),e&&h.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 max-w-3xl leading-relaxed",children:e}),n&&h.jsx("div",{className:"mt-6 flex flex-wrap gap-3",children:n})]})}const lb={calendar:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),shield:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),chart:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),user:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})};function Ro({label:t,value:e,hint:n,accent:r="blue",icon:s="chart"}){const i={blue:{bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200 dark:border-blue-800/50",icon:"text-blue-500"},emerald:{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-700 dark:text-emerald-300",border:"border-emerald-200 dark:border-emerald-800/50",icon:"text-emerald-500"},amber:{bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800/50",icon:"text-amber-500"},red:{bg:"bg-rose-50 dark:bg-rose-900/20",text:"text-rose-700 dark:text-rose-300",border:"border-rose-200 dark:border-rose-800/50",icon:"text-rose-500"},purple:{bg:"bg-purple-50 dark:bg-purple-900/20",text:"text-purple-700 dark:text-purple-300",border:"border-purple-200 dark:border-purple-800/50",icon:"text-purple-500"},green:{bg:"bg-green-50 dark:bg-green-900/20",text:"text-green-700 dark:text-green-300",border:"border-green-200 dark:border-green-800/50",icon:"text-green-500"}},o=i[r]||i.blue;return h.jsx("div",{className:`
      rounded-xl border ${o.border} ${o.bg} 
      p-5 transition-all duration-300 transform hover:scale-[1.02] hover:shadow-sm
    `,children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("div",{className:`text-sm font-medium ${o.text} mb-1`,children:t}),h.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:e}),n&&h.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:n})]}),h.jsx("div",{className:`p-2.5 rounded-lg ${o.bg} ${o.border}`,children:h.jsx("div",{className:o.icon,children:lb[s]||lb.chart})})]})})}function S9(t){if(!t)return .5;const e=s=>({None:1,Normal:1,"Slept well  no trouble falling or staying asleep":1,"None  no unusual warmth":1,Mild:.7,"Mild  occasional discomfort":.7,"Mild  didnt interfere with work":.7,"Mild  occasional queasiness":.7,"Mild  slightly tired":.7,"Mild  slight temperature fluctuation":.7,"Mild  occasional cough or shortness of breath":.7,"Slight irregularity  mild constipation/diarrhea":.7,"Slight  minor discomfort or frequency change":.7,"Minor  small rashes, bruises, or pimples":.7,"Mild  occasional lightheadedness":.7,Moderate:.4,"Moderate  noticeable, affects tasks":.4,"Moderate  interfered with tasks":.4,"Moderate  affected meals":.4,"Moderate  noticeable fatigue":.4,"Moderate  measurable fever (100102F / 37.738.8C)":.4,"Moderate  daily cough or breathing difficulty":.4,"Moderate  frequent or loose stools":.4,"Moderate  frequent or painful urination":.4,"Noticeable  persistent rash, sores, or swelling":.4,"Moderate  dizziness affecting tasks":.4,"Moderate difficulty  frequent waking or poor sleep quality":.4,"Moderate  noticeable episodes affecting comfort":.4,Severe:.2,"Severe  persistent pain":.2,"Severe  unable to perform daily activities":.2,"Severe  persistent vomiting":.2,"Severe  could barely perform activities":.2,"Severe  high fever (>102F / 38.8C)":.2,"Severe  persistent cough or severe breathing issues":.2,"Severe  persistent diarrhea/constipation":.2,"Severe  inability to urinate normally or severe discomfort":.2,"Severe  bleeding, large lesions, or non-healing wounds":.2,"Severe  fainting or inability to stand":.2,"Severe  frequent or intense hot flashes":.2})[s]??.5,n=[e(t.ns_q1),e(t.ns_q2),e(t.ns_q3),e(t.ns_q4),e(t.ns_q5),e(t.ns_q6),e(t.ns_q7),e(t.ns_q8),e(t.ns_q9),e(t.ns_q10),e(t.ns_q11),e(t.ns_q12)],r=n.reduce((s,i)=>s+(typeof i=="number"?i:.5),0)/n.length;return Math.max(0,Math.min(1,Number(r.toFixed(3))))}function WS(t){return 1-S9(t)}function C9(){const{notify:t}=ua(),{user:e}=Jr(),n=uc(),[r,s]=D.useState(null),[i,o]=D.useState(!1),[a,l]=D.useState(null),[c,d]=D.useState([]),[f,m]=D.useState([]),[y,w]=D.useState([]),[k,E]=D.useState({level:"Low",reason:"No data yet.",score:0});function v(b){var O,P;let A=0,N=0,M=0,T=0,x=0,I=0;for(const J of b){const Q=(J==null?void 0:J.answers)||{},B=Q.ns_q2&&Q.ns_q2.toLowerCase().startsWith("mild")||((O=Q.ns_q2)==null?void 0:O.toLowerCase().startsWith("moderate"))||((P=Q.ns_q2)==null?void 0:P.toLowerCase().startsWith("severe")),se=Q.ns_q11&&(Q.ns_q11.toLowerCase().includes("hardly")||Q.ns_q11.toLowerCase().includes("moderate difficulty")),U=Q.ns_q5&&(Q.ns_q5.toLowerCase().includes("very low")||Q.ns_q5.toLowerCase()==="low"),K=Q.ns_q5&&Q.ns_q5.toLowerCase().includes("fever"),W=Q.ns_q3&&!Q.ns_q3.toLowerCase().startsWith("none"),ue=Q.ns_q4&&!Q.ns_q4.toLowerCase().startsWith("none");B&&(A+=2,N+=1),se&&(A+=3,M+=1),U?(A+=4,x+=1):x=0,x>=5&&(T=Math.max(T,x)),(K?1:0)+(W?1:0)+(ue?1:0)>=2&&(A+=6,I+=1)}let C="Low",R="No major recurring symptoms.";return N>=3&&M>=3&&(C="Mid",R="Frequent headaches with low sleep across several days."),T>=5&&(C="Mid",R="Sustained low mood/stress for 5+ days."),I>=2&&(C="High",R="Multiple symptoms clustered (e.g., nausea + weakness) on several days."),A>=20?(C="High",(!R||R==="No major recurring symptoms.")&&(R="Multiple risk factors accumulated in recent logs.")):A>=10&&C!=="High"&&(C="Mid",(!R||R==="No major recurring symptoms.")&&(R="Some recurring issues detected (sleep/mood/symptoms).")),{level:C,reason:R,score:A}}D.useEffect(()=>{async function b(){if(!(!Tt||!e))try{const A=ml(Tt,"users",e.uid,"dailyCheckins"),N=Im(A,bI("date","desc"),kI(30)),T=(await Sm(N)).docs.map(J=>({id:J.id,...J.data()})),x=T.slice().reverse();let I=x.map(J=>WS(J.answers));const C=x.map(J=>{var Q;return(Q=J==null?void 0:J.date)!=null&&Q.toDate?J.date.toDate().toLocaleDateString():""});d(T),m(I),w(C);try{const J=await $S(e.uid);J&&J.ok&&Array.isArray(J.points)&&J.points.length>0&&(m(J.points),Array.isArray(J.labels)&&J.labels.length===J.points.length&&w(J.labels.map(Q=>{try{return new Date(Q).toLocaleDateString()}catch{return Q}})))}catch{}const R=T.slice(-7),P=v(T);E(P)}catch(A){console.error("[Dashboard] loadCheckins error:",A)}}b()},[e]);async function _(){try{if(l(null),o(!0),!navigator.geolocation)throw new Error("Geolocation is not supported by this browser.");t("Finding nearby ambulance services...","info"),await new Promise((b,A)=>{navigator.geolocation.getCurrentPosition(async N=>{try{const{latitude:M,longitude:T}=N.coords,x=await b9(M,T);if(!x||x.ok===!1){const C=x&&x.error?x.error:"Failed to fetch nearby services";throw new Error(C)}s(x);const I=Array.isArray(x.data)?x.data.length:0;t(`Found ${I} ambulance service${I===1?"":"s"}`,"success"),b()}catch(M){A(M)}},N=>{const M=N&&N.message?N.message:"Unable to retrieve location.";A(new Error(M))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}catch(b){const A=(b==null?void 0:b.message)||"Failed to find nearby ambulances";l(A),t(A,"error")}finally{o(!1)}}return h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsx(I9,{title:"AI Diagnostic & Triage Dashboard",subtitle:"Track your health, upload reports, and monitor trends with our AI-powered health monitoring system.",cta:h.jsxs("div",{className:"flex flex-wrap gap-3",children:[h.jsxs(Ae,{onClick:()=>n("/daily-checkin"),className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Daily Check-in"]}),h.jsxs(Ae,{variant:"secondary",onClick:()=>n("/upload-report"),className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Report"]}),h.jsxs(Ae,{variant:"secondary",onClick:_,className:"flex items-center gap-2",children:[h.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Find Ambulance"]})]})}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[h.jsx(cn,{className:`transition-all duration-300 transform hover:scale-[1.02] ${k.level==="High"?"bg-gradient-to-br from-rose-50 to-rose-100 dark:from-rose-900/30 dark:to-rose-900/10 border-rose-200 dark:border-rose-800/50":k.level==="Mid"?"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/10 border-amber-200 dark:border-amber-800/50":"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/30 dark:to-emerald-900/10 border-emerald-200 dark:border-emerald-800/50"}`,children:h.jsxs(un,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Health Risk"}),h.jsx("div",{className:`text-2xl font-bold ${k.level==="High"?"text-rose-700 dark:text-rose-300":k.level==="Mid"?"text-amber-700 dark:text-amber-300":"text-emerald-700 dark:text-emerald-300"}`,children:k.level})]}),h.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs font-medium ${k.level==="High"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-300":k.level==="Mid"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300"}`,children:"Last 30 days"})]}),h.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:k.reason})]})}),h.jsxs(cn,{className:"lg:col-span-2 transition-all duration-300 transform hover:scale-[1.01]",children:[h.jsx(Ur,{children:h.jsxs(Br,{className:"flex items-center",children:[h.jsx("svg",{className:"w-5 h-5 mr-2 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Risk Trend (last ",y.length," check-ins)"]})}),h.jsx(un,{children:f.length>0?h.jsx("div",{className:"h-[220px] -mx-2 -mb-2",children:h.jsx(zS,{points:f,labels:y,yRange:{min:0,max:1},title:"Rule-based risk"})}):h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"text-slate-400 dark:text-slate-500 mb-2",children:h.jsx("svg",{className:"w-12 h-12 mx-auto opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17v-2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No check-ins yet. Your risk trend will appear here."}),h.jsxs("button",{onClick:()=>n("/daily-checkin"),className:"mt-3 text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors inline-flex items-center",children:["Record your first check-in",h.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[h.jsx(Ro,{label:"Check-ins today",value:c.filter(b=>{var M;const A=new Date;return((M=b==null?void 0:b.date)!=null&&M.toDate?b.date.toDate():new Date(b==null?void 0:b.date)).toDateString()===A.toDateString()}).length,hint:"Daily check-ins",icon:"calendar",accent:"blue"}),h.jsx(Ro,{label:"Risk level",value:k.level,hint:"Based on recent data",icon:"shield",accent:k.level==="High"?"red":k.level==="Mid"?"amber":"green"}),h.jsx(Ro,{label:"Total check-ins",value:c.length,hint:"Last 30 days",icon:"chart",accent:"purple"})]}),h.jsx("div",{className:"grid grid-cols-1 gap-6",children:h.jsxs(cn,{className:"relative overflow-hidden border-0 shadow-xl bg-white/80 dark:bg-slate-900/80 ring-1 ring-slate-900/5",children:[h.jsx(Ur,{children:h.jsxs(Br,{className:"flex items-center text-xl md:text-2xl",children:[h.jsx("svg",{className:"w-6 h-6 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z"})}),"About Us"]})}),h.jsx(un,{children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"pointer-events-none absolute -top-24 -right-24 h-72 w-72 rounded-full bg-blue-500/10 blur-3xl"}),h.jsx("div",{className:"pointer-events-none absolute -bottom-20 -left-20 h-72 w-72 rounded-full bg-emerald-500/10 blur-3xl"}),h.jsxs("div",{className:"relative rounded-2xl p-6 md:p-8 bg-gradient-to-br from-slate-50 to-white dark:from-slate-900 dark:to-slate-950 border border-slate-200/70 dark:border-slate-800/70 shadow-xl",children:[h.jsxs("div",{className:"mb-6 inline-flex items-center gap-2 rounded-full border border-blue-200/60 dark:border-blue-900/50 bg-blue-50/60 dark:bg-blue-900/20 px-3 py-1 text-xs font-medium text-blue-700 dark:text-blue-300",children:[h.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-blue-500"}),"Health Sphere"]}),h.jsx("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Your Partner in Proactive Health"}),h.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-300 leading-relaxed",children:"Health Sphere is an AI-powered health monitoring and triage platform that helps you track symptoms, understand risk trends, and take timely action. Were building a privacy-first, reliable, and clinician-informed experience to support everyday well-being."}),h.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 p-4 hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200 font-medium",children:[h.jsx("svg",{className:"w-5 h-5 text-emerald-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M20 6L9 17l-5-5"})}),"Daily check-ins"]}),h.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Monitor well-being and symptoms over time."})]}),h.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 p-4 hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200 font-medium",children:[h.jsx("svg",{className:"w-5 h-5 text-indigo-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M3 3v18h18"})}),"AI risk insights"]}),h.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Clear summaries and trend visualizations."})]}),h.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 p-4 hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200 font-medium",children:[h.jsx("svg",{className:"w-5 h-5 text-rose-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M12 8v4l3 3"})}),"Rapid actions"]}),h.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Find emergency services when you need them."})]})]}),h.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 border border-emerald-200/60 dark:border-emerald-800/50 p-4 text-center",children:[h.jsx("div",{className:"text-2xl font-bold",children:"Privacy-first"}),h.jsx("div",{className:"text-xs opacity-80 mt-1",children:"Your data, your control"})]}),h.jsxs("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200/60 dark:border-blue-800/50 p-4 text-center",children:[h.jsx("div",{className:"text-2xl font-bold",children:"AI + Clinicians"}),h.jsx("div",{className:"text-xs opacity-80 mt-1",children:"Human-centered insights"})]}),h.jsxs("div",{className:"rounded-lg bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 border border-purple-200/60 dark:border-purple-800/50 p-4 text-center",children:[h.jsx("div",{className:"text-2xl font-bold",children:"Actionable"}),h.jsx("div",{className:"text-xs opacity-80 mt-1",children:"Guidance you can use"})]})]})]})]})})]})}),(i||a||r&&Array.isArray(r.data))&&h.jsx("div",{className:"mt-8",children:h.jsxs(cn,{children:[h.jsx(Ur,{children:h.jsxs(Br,{className:"flex items-center",children:[h.jsx("svg",{className:"w-5 h-5 mr-2 text-rose-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Nearby Ambulance Services"]})}),h.jsxs(un,{children:[i&&h.jsxs("div",{className:"flex items-center justify-center py-8",children:[h.jsx(Po,{className:"w-6 h-6 text-blue-500"}),h.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-300",children:"Locating nearby services..."})]}),a&&h.jsx("div",{className:"p-4 rounded-lg bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300",children:h.jsxs("div",{className:"flex",children:[h.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium",children:"Unable to locate services"}),h.jsx("p",{className:"text-sm mt-1",children:a})]})]})}),!i&&!a&&h.jsxs("div",{className:"space-y-4",children:[((r==null?void 0:r.data)||[]).slice(0,3).map((b,A)=>h.jsxs("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-800 hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-slate-900 dark:text-slate-100",children:b.name}),h.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:b.address||"Address not available"})]}),typeof b.distance_meters=="number"&&h.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:[b.distance_meters.toLocaleString()," m"]})]}),b.rating&&h.jsxs("div",{className:"mt-2 flex items-center text-sm text-amber-600 dark:text-amber-400",children:[[...Array(5)].map((N,M)=>h.jsx("svg",{className:`w-4 h-4 ${M<Math.floor(b.rating)?"fill-current":"fill-none"}`,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},M)),h.jsx("span",{className:"ml-1 text-slate-600 dark:text-slate-400",children:b.rating.toFixed(1)})]})]},A)),((r==null?void 0:r.data)||[]).length===0&&h.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[h.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsx("p",{children:"No ambulance services found nearby."})]})]})]})]})})]})}function A9(){return h.jsxs("div",{className:"relative",children:[h.jsxs("header",{className:"mb-6",children:[h.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-slate-900 dark:text-slate-100",children:"Health Sphere"}),h.jsx("p",{className:"mt-1 text-slate-600 dark:text-slate-300",children:"Your AI Health Companion"})]}),h.jsx("section",{className:"prose dark:prose-invert max-w-none",children:h.jsx("p",{children:"Stay proactive with AI-powered insights. Log quick daily check-ins, visualize trends, and upload medical reports to get simplified, plain-language summaries."})}),h.jsxs("div",{className:"mt-8 space-y-6",children:[h.jsx("article",{className:"rounded-md border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-slate-900/60 shadow-sm p-4",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"mt-0.5 text-emerald-600 dark:text-emerald-400","aria-hidden":"true",children:h.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M3 3v18h18"})})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-medium text-slate-900 dark:text-slate-100",children:"Daily CheckIn"}),h.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Log how you feel each day and review your history to spot patterns early. AI summarizes trends to help you stay ahead."}),h.jsx(rn,{to:"/daily-checkin",className:"inline-block mt-2 text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"Get Started "})]})]})}),h.jsx("article",{className:"rounded-md border border-slate-200 dark:border-slate-800 bg-white/60 dark:bg-slate-900/60 shadow-sm p-4",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"mt-0.5 text-blue-600 dark:text-blue-400","aria-hidden":"true",children:h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M12 20l9-5-9-5-9 5 9 5z"}),h.jsx("path",{d:"M12 12l9-5-9-5-9 5 9 5z"})]})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-medium text-slate-900 dark:text-slate-100",children:"Medical Report Analysis"}),h.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-300",children:"Upload reports; OCR extracts key details and provides a clear summary to discuss with your clinician."}),h.jsx(rn,{to:"/upload-report",className:"inline-block mt-2 text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:"Get Started "})]})]})})]}),h.jsx("p",{className:"mt-6 text-sm text-slate-600 dark:text-slate-400",children:"These tools help you track daytoday health and gain proactive insights, keeping you informed and prepared."})]})}function Jn({className:t="",...e}){return h.jsx("input",{className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-blue-600 focus:ring-2 focus:ring-blue-600 focus:ring-offset-0 outline-none ${t}`.trim(),...e})}const oi={"auth/invalid-email":"Please enter a valid email address.","auth/user-disabled":"This account has been disabled. Contact support if this is a mistake.","auth/user-not-found":"No account found with that email.","auth/wrong-password":"Incorrect password. Please try again.","auth/missing-password":"Please enter your password.","auth/too-many-requests":"Too many attempts. Please wait a moment and try again.","auth/network-request-failed":"Network error. Check your connection and try again.","auth/popup-closed-by-user":"Sign-in popup was closed before completing.","auth/popup-blocked":"Sign-in popup was blocked by your browser.","auth/cancelled-popup-request":"Another sign-in is already in progress.","auth/account-exists-with-different-credential":"An account with this email exists using a different sign-in method.","auth/invalid-credential":"Invalid credentials. Please try again.","auth/operation-not-allowed":"This sign-in method is disabled. Contact support.","auth/weak-password":"Please choose a stronger password (at least 6 characters).","auth/email-already-in-use":"An account with this email already exists."};function xi(t){if(!t)return"Something went wrong. Please try again.";const e=typeof t=="string"?t:t.code||t.message||"",n=oi[e]||oi[`auth/${e}`];if(n)return n;const r=(t.message||"").toLowerCase();return r.includes("user-not-found")?oi["auth/user-not-found"]:r.includes("wrong-password")?oi["auth/wrong-password"]:r.includes("email-already-in-use")?oi["auth/email-already-in-use"]:r.includes("invalid-email")?oi["auth/invalid-email"]:r.includes("weak-password")?oi["auth/weak-password"]:"Authentication failed. Please check your details and try again."}function P9(){var R,O;const{user:t,login:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:s}=Jr(),[i,o]=D.useState(""),[a,l]=D.useState(""),[c,d]=D.useState(""),[f,m]=D.useState(""),[y,w]=D.useState("enter"),[k,E]=D.useState(!1),[v,_]=D.useState(""),{notify:b}=ua(),A=uc(),M=((O=(R=Gs().state)==null?void 0:R.from)==null?void 0:O.pathname)||"/";D.useEffect(()=>{t&&A(M,{replace:!0})},[t,M,A]);async function T(P){P.preventDefault(),_(""),E(!0);try{await e({email:i,password:a}),A(M,{replace:!0})}catch(J){const Q=xi(J);_(Q),b(Q,"error")}finally{E(!1)}}async function x(){_(""),E(!0);try{await n()&&A(M,{replace:!0})}catch(P){const J=xi(P)||"Google sign-in failed";_(J),b(J,"error")}finally{E(!1)}}async function I(P){P.preventDefault(),_(""),E(!0);try{await r(c),w("verify")}catch(J){const Q=xi(J)||"Failed to send OTP";_(Q),b(Q,"error")}finally{E(!1)}}async function C(P){P.preventDefault(),_(""),E(!0);try{await s(f),A(M,{replace:!0})}catch(J){const Q=xi(J)||"Invalid OTP";_(Q),b(Q,"error")}finally{E(!1)}}return t?null:h.jsx("div",{className:"grid place-items-center",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Welcome back"}),h.jsx(cn,{children:h.jsxs(un,{children:[h.jsxs("form",{className:"space-y-4",onSubmit:T,children:[h.jsx(Jn,{type:"email",placeholder:"Email",value:i,onChange:P=>o(P.target.value),disabled:k}),h.jsx(Jn,{type:"password",placeholder:"Password",value:a,onChange:P=>l(P.target.value),disabled:k}),v&&h.jsx("p",{className:"text-red-600 text-sm",children:v}),h.jsx(Ae,{type:"submit",className:"w-full",disabled:k,children:k?"Signing in":"Sign in"})]}),h.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[h.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),h.jsx("span",{children:"or"}),h.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),h.jsx(Ae,{variant:"secondary",onClick:x,disabled:k,children:"Continue with Google"}),h.jsx("div",{id:"recaptcha-container",className:"mt-3"}),y==="enter"&&h.jsxs("form",{className:"space-y-2 mt-2",onSubmit:I,children:[h.jsx(Jn,{type:"tel",placeholder:"Indian mobile (10 digits)",value:c,onChange:P=>d(P.target.value),disabled:k}),h.jsx(Ae,{type:"submit",variant:"secondary",disabled:k||!c,children:"Send OTP"})]}),y==="verify"&&h.jsxs("form",{className:"space-y-2 mt-2",onSubmit:C,children:[h.jsx(Jn,{type:"text",placeholder:"Enter OTP",value:f,onChange:P=>m(P.target.value),disabled:k}),h.jsx(Ae,{type:"submit",variant:"secondary",disabled:k||!f,children:"Verify OTP"})]}),h.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-3",children:["No account? ",h.jsx(Fg,{className:"text-blue-600",to:"/signup",children:"Sign up"})]})]})})]})})}function R9(){const{user:t,signup:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:s}=Jr(),[i,o]=D.useState(""),[a,l]=D.useState(""),[c,d]=D.useState(""),[f,m]=D.useState(""),[y,w]=D.useState(""),[k,E]=D.useState("enter"),[v,_]=D.useState(""),[b,A]=D.useState(!1),N=uc(),{notify:M}=ua();D.useEffect(()=>{t&&N("/")},[t,N]);async function T(C){C.preventDefault(),_(""),A(!0);try{const R=await e({email:i,password:a,name:c});f?(await r(f),E("verify")):N("/")}catch(R){const O=xi(R)||"Signup failed";_(O),M(O,"error")}finally{A(!1)}}async function x(C){C.preventDefault(),_(""),A(!0);try{await s(y),N("/")}catch(R){const O=xi(R)||"Invalid OTP";_(O),M(O,"error")}finally{A(!1)}}async function I(){_(""),A(!0);try{await n()&&N("/")}catch(C){const R=xi(C)||"Google sign-in failed";_(R),M(R,"error")}finally{A(!1)}}return t?null:h.jsx("div",{className:"grid place-items-center",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Create your account"}),h.jsx(cn,{children:h.jsxs(un,{children:[k==="enter"?h.jsxs("form",{className:"space-y-4",onSubmit:T,children:[h.jsx(Jn,{type:"text",placeholder:"Name",value:c,onChange:C=>d(C.target.value),disabled:b}),h.jsx(Jn,{type:"email",placeholder:"Email",value:i,onChange:C=>o(C.target.value),disabled:b}),h.jsx(Jn,{type:"password",placeholder:"Password",value:a,onChange:C=>l(C.target.value),disabled:b}),h.jsx(Jn,{type:"tel",placeholder:"Indian phone (optional)",value:f,onChange:C=>m(C.target.value),disabled:b}),v&&h.jsx("p",{className:"text-red-600 text-sm",children:v}),h.jsx(Ae,{type:"submit",className:"w-full",disabled:b,children:b?"Creating":"Create Account"})]}):h.jsxs("form",{className:"space-y-2",onSubmit:x,children:[h.jsx(Jn,{type:"text",placeholder:"Enter OTP",value:y,onChange:C=>w(C.target.value),disabled:b}),v&&h.jsx("p",{className:"text-red-600 text-sm",children:v}),h.jsx(Ae,{type:"submit",className:"w-full",disabled:b||!y,children:"Verify OTP"})]}),h.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[h.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),h.jsx("span",{children:"or"}),h.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),h.jsx(Ae,{variant:"secondary",onClick:I,disabled:b,children:"Continue with Google"}),h.jsx("div",{id:"recaptcha-container"})]})})]})})}const qS=Qd.forwardRef(function({className:e="",rows:n=4,...r},s){return h.jsx("textarea",{ref:s,rows:n,className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-brand-600 focus:ring-2 focus:ring-brand-600 focus:ring-offset-0 outline-none ${e}`.trim(),...r})});function N9(){var oe;const{notify:t}=ua(),{user:e,loading:n}=Jr(),[r,s]=D.useState({q1:"",q2:"",q2_specify:"",q3:"",q3_severity:"",q4:"",q4_specify:"",q5:"",q6_activity:"",q6_hydration:"",q6_diet:""}),[i,o]=D.useState(!1),[a,l]=D.useState(!1),[c,d]=D.useState(null),[f,m]=D.useState([]),[y,w]=D.useState([]),[k,E]=D.useState(""),[v,_]=D.useState([]),[b,A]=D.useState(""),[N,M]=D.useState(null),[T,x]=D.useState(!1),[I,C]=D.useState(3),[R,O]=D.useState("auto"),[P,J]=D.useState(!0),[Q,B]=D.useState(!1);D.useEffect(()=>{try{const j=JSON.parse(localStorage.getItem("analysisPrefs")||"{}");j&&typeof j=="object"&&(j.topK&&C(j.topK),j.explainMethod&&O(j.explainMethod),typeof j.useScipyWinsorize=="boolean"&&J(j.useScipyWinsorize),typeof j.forceLocal=="boolean"&&B(j.forceLocal))}catch{}},[]),D.useEffect(()=>{try{localStorage.setItem("analysisPrefs",JSON.stringify({topK:I,explainMethod:R,useScipyWinsorize:P,forceLocal:Q}))}catch{}},[I,R,P,Q]);const se=D.useMemo(()=>{const j=["ns_q1","ns_q2","ns_q3","ns_q4","ns_q5","ns_q6","ns_q7","ns_q8","ns_q9","ns_q10","ns_q11","ns_q12"];for(const Z of j)if(!r[Z])return!1;return!0},[r]);function U(){const j=new Date,Z=new Date(j.getFullYear(),j.getMonth(),j.getDate(),0,0,0,0),re=new Date(j.getFullYear(),j.getMonth(),j.getDate()+1,0,0,0,0);return{start:Ye.fromDate(Z),end:Ye.fromDate(re)}}D.useEffect(()=>{async function j(){if(!Tt||!e)return;const{start:Z,end:re}=U(),xe=ml(Tt,"users",e.uid,"dailyCheckins"),st=Im(xe,jx("date",">=",Z),jx("date","<",re));try{const it=await Sm(st);it.empty?(l(!1),d(null)):(l(!0),d(it.docs[0].data()))}catch(it){console.error("[DailyCheckin] checkToday error:",it)}}j()},[e]);function K(j){if(!j)return .5;const Z=st=>({None:1,Normal:1,Mild:.7,"Slight irregularity  mild constipation/diarrhea":.7,"Slight  minor discomfort or frequency change":.7,Moderate:.4,"Moderate  noticeable, affects tasks":.4,"Moderate  interfered with tasks":.4,"Moderate  affected meals":.4,"Moderate  frequent or loose stools":.4,"Moderate  frequent or painful urination":.4,Severe:.2,"Severe  persistent pain":.2,"Severe  unable to perform daily activities":.2,"Severe  persistent vomiting":.2,"Severe  could barely perform activities":.2,"Severe  high fever (>102F / 38.8C)":.2,"Severe  persistent cough or severe breathing issues":.2,"Severe  persistent diarrhea/constipation":.2,"Severe  inability to urinate normally or severe discomfort":.2,"Severe  bleeding, large lesions, or non-healing wounds":.2,"Severe  fainting or inability to stand":.2})[st]??.5,re=[Z(j.ns_q1),Z(j.ns_q2),Z(j.ns_q3),Z(j.ns_q4),Z(j.ns_q5),Z(j.ns_q6),Z(j.ns_q7),Z(j.ns_q8),Z(j.ns_q9),Z(j.ns_q10),Z(j.ns_q11),Z(j.ns_q12)],xe=re.reduce((st,it)=>st+it,0)/re.length;return Math.max(0,Math.min(1,Number(xe.toFixed(3))))}D.useEffect(()=>{async function j(){var Z;if(!(!Tt||!e))try{const re=ml(Tt,"users",e.uid,"dailyCheckins"),xe=Im(re,bI("date","desc"),kI(30)),it=(await Sm(xe)).docs.map(we=>({id:we.id,...we.data()})),en=it.slice().reverse();let ot=en.map(we=>WS(we.answers)),$t=en.map(we=>{var Ht;return(Ht=we==null?void 0:we.date)!=null&&Ht.toDate?we.date.toDate().toLocaleDateString():""});try{if((Z=N==null?void 0:N.python)!=null&&Z.available){const we=await $S(e.uid);we&&we.ok&&Array.isArray(we.points)&&we.points.length>0&&(ot=we.points,Array.isArray(we.labels)&&we.labels.length===we.points.length?$t=we.labels.map(Ht=>{try{return new Date(Ht).toLocaleDateString()}catch{return Ht}}):$t=we.points.map((Ht,Wn)=>`T${Wn+1}`))}}catch{}const gt=ot.length;let at="";if(gt>=6){const we=ot.slice(gt-6,gt-3).reduce((Zr,es)=>Zr+es,0)/3,Wn=ot.slice(gt-3).reduce((Zr,es)=>Zr+es,0)/3-we;Wn>.06?at="Worsening":Wn<-.06?at="Improving":at="Stable"}m(it),w(ot),_($t),E(at)}catch(re){console.error("[DailyCheckin] loadHistory error:",re)}}j()},[e,a]),D.useEffect(()=>{let j=!0;return(async()=>{try{x(!0);const Z=await v9();j&&M(Z)}catch{j&&M({ok:!0,python:{available:!1}})}finally{j&&x(!1)}})(),()=>{j=!1}},[]);function W(j,Z){s(re=>({...re,[j]:Z}))}async function ue(j){if(j.preventDefault(),!e){t("Please log in first!","error");return}if(!Tt){t("App is not connected to Firestore. Check Firebase config.","error");return}if(a){t("You've already completed today's check-in.","info");return}if(!se){t("Please answer all required questions.","error");return}o(!0);try{const Z=ml(Tt,"users",e.uid,"dailyCheckins"),re={date:Ye.now(),dateServer:Zl(),answers:{ns_q1:r.ns_q1,ns_q2:r.ns_q2,ns_q3:r.ns_q3,ns_q4:r.ns_q4,ns_q5:r.ns_q5,ns_q6:r.ns_q6,ns_q7:r.ns_q7,ns_q8:r.ns_q8,ns_q9:r.ns_q9,ns_q10:r.ns_q10,ns_q11:r.ns_q11,ns_q12:r.ns_q12},analyzed:!1,notes:b||null,topK:Number(I),explainMethod:R,useScipyWinsorize:P,forceLocal:Q};console.log("[DailyCheckin] Submitting payload:",re),await AI(Z,re),t("Daily check-in saved!","success"),l(!0);try{w9({userId:e.uid,payload:re})}catch{}}catch(Z){console.error("[DailyCheckin] Firestore addDoc error:",Z);const re=(Z==null?void 0:Z.message)||"Error saving check-in. Please try again.";t(re,"error")}finally{o(!1)}}return h.jsxs("div",{className:"relative bg-[radial-gradient(ellipse_at_top_left,rgba(125,211,252,0.22),transparent_60%),radial-gradient(ellipse_at_bottom_right,rgba(167,139,250,0.18),transparent_60%)]",children:[h.jsx("div",{className:"pointer-events-none absolute -top-20 -right-10 h-56 w-56 rounded-full bg-blue-500/10 blur-3xl"}),h.jsx("div",{className:"pointer-events-none absolute -bottom-10 -left-10 h-56 w-56 rounded-full bg-emerald-500/10 blur-3xl"}),h.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight mb-6 text-slate-900 dark:text-slate-100 flex items-center gap-2",children:[h.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-md bg-gradient-to-tr from-brand-600 to-blue-500 text-white text-sm shadow ring-1 ring-brand-500/30",children:""}),"Daily Check-in"]}),h.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[h.jsxs(cn,{className:"border-0 ring-1 ring-slate-900/5 shadow-md bg-white/85 dark:bg-slate-900/85 rounded-2xl",children:[h.jsx(Ur,{children:h.jsxs(Br,{className:"flex items-center gap-2",children:[h.jsxs("svg",{className:"w-5 h-5 text-purple-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M12 20l9-5-9-5-9 5 9 5z"}),h.jsx("path",{d:"M12 12l9-5-9-5-9 5 9 5z"})]}),"Why this matters"]})}),h.jsx(un,{children:h.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 space-y-2 leading-relaxed",children:[h.jsx("p",{children:"Your daily responses help track trends in sleep, mood, pain, and lifestyle. If you report concerning symptoms, your clinician or AI assistant can prioritize guidance."}),h.jsx("p",{children:"We limit to one check-in per day to keep insights consistent. You can update tomorrow if anything changes."})]})})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs(cn,{className:"border-0 ring-1 ring-slate-900/5 shadow-md bg-white/85 dark:bg-slate-900/85 rounded-2xl md:order-1",children:[h.jsx(Ur,{children:h.jsxs(Br,{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5 text-emerald-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M3 3v18h18"})}),"Your recent check-ins"]})}),h.jsx(un,{children:y.length>0?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Overall trend: ",h.jsx("span",{className:`font-medium ${k==="Worsening"?"text-red-600":k==="Improving"?"text-emerald-600":"text-slate-700 dark:text-slate-200"}`,children:k||"Not enough data"})]}),h.jsx("div",{className:"bg-white dark:bg-slate-950 rounded-2xl p-4 border border-slate-200 dark:border-slate-800 shadow-sm",children:h.jsx(zS,{points:y,labels:v,title:(oe=N==null?void 0:N.python)!=null&&oe.available?"AI risk":"Risk",yRange:{min:0,max:1}})}),h.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800 text-sm rounded-lg overflow-hidden border border-slate-200 dark:border-slate-800",children:f.slice(0,10).map((j,Z)=>{var re;return h.jsxs("li",{className:"py-2 px-3 flex items-center justify-between hover:bg-slate-50/70 dark:hover:bg-slate-800/40 transition-colors",children:[h.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:(re=j==null?void 0:j.date)!=null&&re.toDate?j.date.toDate().toLocaleDateString():""}),h.jsx("span",{className:"font-medium tabular-nums",children:K(j.answers)})]},j.id||Z)})})]}):h.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"No history yet. Your check-ins will appear here."})})]}),h.jsxs(cn,{className:"border-0 ring-1 ring-slate-900/5 shadow-md bg-white/85 dark:bg-slate-900/85 rounded-2xl md:order-2",children:[h.jsx(Ur,{children:h.jsxs(Br,{className:"text-lg md:text-xl flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5 text-blue-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M8 2v4M16 2v4M3 10h18M5 22h14a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z"})}),"Today's Check-in"]})}),h.jsx(un,{children:a?h.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[h.jsx("p",{className:"font-medium",children:"You've already submitted today's check-in. Come back tomorrow."}),c&&c.answers&&h.jsxs("div",{className:"mt-4",children:[h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Your last responses:"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Sleep & Energy"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.q1||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Pain / Discomfort"}),h.jsxs("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:[c.answers.q2||"",c.answers.q2_specify?` (${c.answers.q2_specify})`:""]})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Heart / Respiratory"}),h.jsxs("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:[c.answers.q3||"",c.answers.q3==="Yes"&&c.answers.q3_severity?` (${c.answers.q3_severity})`:""]})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Digestive / Temperature"}),h.jsxs("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:[c.answers.q4||"",c.answers.q4_specify?` (${c.answers.q4_specify})`:""]})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Mental & Emotional"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.q5||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Activity / Hydration / Diet"}),h.jsxs("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:[c.answers.q6_activity||"",c.answers.q6_activity?", ":"",c.answers.q6_hydration||"",c.answers.q6_hydration?", ":"",c.answers.q6_diet||""]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Bowel Changes"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q7||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Urination Changes"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q8||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Skin / Wounds"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q9||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Dizziness / Fainting"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q10||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Sleep / Insomnia"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q11||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Hot Flashes / Warmth"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q12||""})]})]})]})]})]}):h.jsxs("form",{onSubmit:ue,className:"space-y-10",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-blue-200/60 dark:border-blue-900/50 bg-blue-50/60 dark:bg-blue-900/20 px-3 py-1 text-xs font-medium text-blue-700 dark:text-blue-300",children:[h.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-blue-500"}),"Daily Symptom Tracking MCQs"]}),[{key:"ns_q1",title:"Stomach / Abdominal Pain Today",opts:["None","Mild  occasional discomfort","Moderate  noticeable, affects tasks","Severe  persistent pain"]},{key:"ns_q2",title:"Headache or Migraine Today",opts:["None","Mild  didnt interfere with work","Moderate  interfered with tasks","Severe  unable to perform daily activities"]},{key:"ns_q3",title:"Nausea or Vomiting Today",opts:["None","Mild  occasional queasiness","Moderate  affected meals","Severe  persistent vomiting"]},{key:"ns_q4",title:"Fatigue or Weakness Today",opts:["None  felt energetic","Mild  slightly tired","Moderate  noticeable fatigue","Severe  could barely perform activities"]},{key:"ns_q5",title:"Fever or Chills Today",opts:["None","Mild  slight temperature fluctuation","Moderate  measurable fever (100102F / 37.738.8C)","Severe  high fever (>102F / 38.8C)"]},{key:"ns_q6",title:"Cough or Shortness of Breath Today",opts:["None","Mild  occasional cough or shortness of breath","Moderate  daily cough or breathing difficulty","Severe  persistent cough or severe breathing issues"]},{key:"ns_q7",title:"Changes in Bowel Movements Today",opts:["Normal","Slight irregularity  mild constipation/diarrhea","Moderate  frequent or loose stools","Severe  persistent diarrhea/constipation"]},{key:"ns_q8",title:"Changes in Urination Today",opts:["Normal","Slight  minor discomfort or frequency change","Moderate  frequent or painful urination","Severe  inability to urinate normally or severe discomfort"]},{key:"ns_q9",title:"Skin Changes / Wounds Today",opts:["None","Minor  small rashes, bruises, or pimples","Noticeable  persistent rash, sores, or swelling","Severe  bleeding, large lesions, or non-healing wounds"]},{key:"ns_q10",title:"Dizziness or Fainting Today",opts:["None","Mild  occasional lightheadedness","Moderate  dizziness affecting tasks","Severe  fainting or inability to stand"]},{key:"ns_q11",title:"Sleep / Insomnia Today",opts:["Slept well  no trouble falling or staying asleep","Mild difficulty  took longer than usual to fall asleep","Moderate difficulty  frequent waking or poor sleep quality","Severe  hardly slept or very restless night"]},{key:"ns_q12",title:"Hot Flashes / Sudden Warmth Today",opts:["None  no unusual warmth","Mild  occasional warmth or flushing","Moderate  noticeable episodes affecting comfort","Severe  frequent or intense hot flashes"]}].map((j,Z)=>h.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/75 dark:bg-slate-900/60 p-5 md:p-6 transition hover:shadow-md hover:scale-[1.01]",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-md bg-gradient-to-tr from-brand-600 to-blue-500 text-white text-[11px] shadow ring-1 ring-brand-500/30",children:Z+1}),h.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-800 dark:text-slate-100 leading-snug",children:j.title})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-3",children:j.opts.map(re=>h.jsx("button",{type:"button",onClick:()=>W(j.key,re),className:`px-4 py-3 rounded-xl border text-sm text-left transition transform focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-900 ${r[j.key]===re?"bg-gradient-to-tr from-brand-600 to-blue-500 text-white border-transparent shadow-md ring-brand-500/40":"bg-white/80 dark:bg-slate-900/60 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 hover:shadow-md hover:-translate-y-[1px]"}`,children:re},re))})]},j.key)),h.jsxs("div",{className:"pt-2",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Add notes for today (optional)"}),h.jsx("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white/75 dark:bg-slate-900/60 p-3",children:h.jsx(qS,{value:b,onChange:j=>A(j.target.value),placeholder:"Type anything noteworthy about your health today..."})})]}),h.jsxs("div",{className:"hidden",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"1"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sleep & Energy"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How well did you sleep last night, and how energetic do you feel today?"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Moderate","High","Very high"].map(j=>h.jsx("button",{type:"button",onClick:()=>W("q1",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q1===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"2"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Pain or Discomfort"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you experience any unusual pain, discomfort, or bodily symptoms today?"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(j=>h.jsx("button",{type:"button",onClick:()=>W("q2",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q2===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),(r.q2==="Mild"||r.q2==="Moderate"||r.q2==="Severe")&&h.jsx("input",{type:"text",placeholder:"Specify location (optional)",value:r.q2_specify,onChange:j=>W("q2_specify",j.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"3"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Heart & Respiratory Health"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Chest pain, palpitations, shortness of breath, or rapid heartbeat today?"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["No","Yes"].map(j=>h.jsx("button",{type:"button",onClick:()=>W("q3",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),r.q3==="Yes"&&h.jsx("div",{className:"mt-2 grid grid-cols-3 md:grid-cols-6 gap-2",children:["Mild","Moderate","Severe"].map(j=>h.jsx("button",{type:"button",onClick:()=>W("q3_severity",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3_severity===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"4"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Digestive & Temperature Symptoms"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Digestive issues (nausea, vomiting, diarrhea, constipation, heartburn) or fever/chills today?"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(j=>h.jsx("button",{type:"button",onClick:()=>W("q4",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q4===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),(r.q4==="Mild"||r.q4==="Moderate"||r.q4==="Severe")&&h.jsx("input",{type:"text",placeholder:"Specify (optional)",value:r.q4_specify,onChange:j=>W("q4_specify",j.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"5"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Mental & Emotional Well-being"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How would you rate your mood and stress levels today?"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Neutral","Good","Very good"].map(j=>h.jsx("button",{type:"button",onClick:()=>W("q5",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q5===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"6"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Physical Activity & Lifestyle"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you maintain physical activity, hydration, and balanced meals today?"}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Activity"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Light","Moderate","Intense"].map(j=>h.jsx("button",{type:"button",onClick:()=>W("q6_activity",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_activity===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Hydration"}),h.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(j=>h.jsx("button",{type:"button",onClick:()=>W("q6_hydration",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_hydration===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Diet"}),h.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(j=>h.jsx("button",{type:"button",onClick:()=>W("q6_diet",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_diet===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]})]})]})]}),h.jsxs("div",{className:"flex items-center justify-between gap-3 pt-2",children:[h.jsx("div",{className:"text-xs text-slate-500",children:"Complete all sections to enable saving."}),h.jsx(Ae,{type:"submit",disabled:i||!se||n,className:"shadow-md",children:i?h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx(Po,{size:16})," Saving..."]}):"Save today's check-in"})]})]})})]})]})]})]})}function D9(){var Wn,Zr,es,da,Ki,ha;const{notify:t}=ua(),{user:e}=Jr(),[n,r]=D.useState(null),[s,i]=D.useState(null),[o,a]=D.useState(null),[l,c]=D.useState(!1),[d,f]=D.useState(!1),[m,y]=D.useState(0),w=D.useRef(null),[k,E]=D.useState(""),[v,_]=D.useState("Idle"),b=D.useRef(null),[A,N]=D.useState(""),[M,T]=D.useState(null),[x,I]=D.useState(""),[C,R]=D.useState(!1),[O,P]=D.useState("eng"),[J,Q]=D.useState(null),[B,se]=D.useState(!1),[U,K]=D.useState(null),[W,ue]=D.useState(0),[oe]=D.useState(3),j=D.useCallback(H=>{if(!H)return{score:0,issues:["No data extracted"]};const ne=Array.isArray(H==null?void 0:H.labs)?H.labs:[],G=(H==null?void 0:H.meta)||{},le=[];let ae=1;return ne.length===0?(le.push("No lab values extracted"),ae-=.4):(ne.filter(me=>me.confidence>=.7).length/ne.length<.5&&(le.push("Low confidence in extracted lab values"),ae-=.2),ne.filter(me=>me.value!==null&&me.value!==void 0).length<ne.length*.7&&(le.push("Many lab values missing or invalid"),ae-=.2)),!G.patientName&&!G.patientId&&(le.push("No patient identification found"),ae-=.1),G.date||(le.push("No report date found"),ae-=.1),["hemoglobin","glucose","creatinine","sodium","potassium"].some(Wt=>ne.some(qt=>qt.name===Wt&&qt.value!==null))||(le.push("No critical lab values found"),ae-=.1),{score:Math.max(0,Math.min(1,ae)),issues:le.length>0?le:["Good extraction quality"],labCount:ne.length,highConfidenceCount:ne.filter(Wt=>Wt.confidence>=.7).length}},[]),Z=D.useCallback(async()=>{if(!(!o||B)){se(!0),Q(null);try{const H=(s==null?void 0:s.text)||"",ne=await E9(o,H);if(ne.ok&&ne.summary){Q(ne.summary),t("AI summary generated successfully","success");try{if(Tt&&e&&e.uid){const G=ml(Tt,"users",e.uid,"reportSummaries"),le=(o==null?void 0:o.meta)||{};await AI(G,{createdAt:Zl(),summary:ne.summary,simpleSummary:re(o),meta:{patientName:le.patientName||null,patientId:le.patientId||null,date:le.date||null},stats:{labCount:Array.isArray(o==null?void 0:o.labs)?o.labs.length:0},ocrPreview:(H||"").slice(0,2e3)||null}),t("Summary saved to your records","success")}else t("Login required to save summary","info")}catch(G){console.error("Failed to save summary:",G),t("Summary generated but saving to cloud failed.","warning")}}else throw new Error(ne.error||"Failed to generate summary")}catch(H){console.error("Error generating AI summary:",H),t("Failed to generate AI summary: "+(H.message||"Unknown error"),"error")}finally{se(!1)}}},[o,s,B,t]);function re(H){try{const ne=Array.isArray(H==null?void 0:H.labs)?H.labs:[],G=(H==null?void 0:H.meta)||{},le=Array.isArray(H==null?void 0:H.diagnoses)?H.diagnoses:[],ae=Array.isArray(H==null?void 0:H.medications)?H.medications:[],Se=fe=>ne.find(ct=>(ct.name||"").toLowerCase()===fe.toLowerCase()),Ne=Se("hemoglobin"),Wt=Se("glucose"),qt=Se("creatinine"),qn=Se("wbc"),me=Se("platelets"),lt=Se("sodium"),Rn=Se("potassium"),Kt=Se("hbA1c"),Ze=[];G!=null&&G.patientName&&Ze.push(`Patient: ${G.patientName}`),G!=null&&G.patientId&&Ze.push(`ID: ${G.patientId}`),G!=null&&G.date&&Ze.push(`Report Date: ${G.date}`),Ze.length>0&&Ze.push("");const tn=[];if(Ne&&typeof Ne.value=="number"){const fe=Ne.value,ct=Ne.unit||"g/dL",et=fe<12?"LOW":fe>16?"HIGH":"NORMAL";tn.push(` Hemoglobin: ${fe} ${ct} (${et}) - Blood oxygen-carrying protein`)}if(Wt&&typeof Wt.value=="number"){const fe=Wt.value,ct=Wt.unit||"mg/dL",et=fe<70?"LOW":fe>140?"HIGH":"NORMAL";tn.push(` Glucose: ${fe} ${ct} (${et}) - Blood sugar level`)}if(qt&&typeof qt.value=="number"){const fe=qt.value,ct=qt.unit||"mg/dL",et=fe<.6?"LOW":fe>1.3?"HIGH":"NORMAL";tn.push(` Creatinine: ${fe} ${ct} (${et}) - Kidney function indicator`)}if(qn&&typeof qn.value=="number"){const fe=qn.value,ct=qn.unit||"10^3/L",et=fe<4?"LOW":fe>11?"HIGH":"NORMAL";tn.push(` White Blood Cells: ${fe} ${ct} (${et}) - Immune system cells`)}if(me&&typeof me.value=="number"){const fe=me.value,ct=me.unit||"10^3/L",et=fe<150?"LOW":fe>450?"HIGH":"NORMAL";tn.push(` Platelets: ${fe} ${ct} (${et}) - Blood clotting cells`)}if(lt&&typeof lt.value=="number"){const fe=lt.value,ct=lt.unit||"mmol/L",et=fe<136?"LOW":fe>145?"HIGH":"NORMAL";tn.push(` Sodium: ${fe} ${ct} (${et}) - Electrolyte balance`)}if(Rn&&typeof Rn.value=="number"){const fe=Rn.value,ct=Rn.unit||"mmol/L",et=fe<3.5?"LOW":fe>5?"HIGH":"NORMAL";tn.push(` Potassium: ${fe} ${ct} (${et}) - Heart and muscle function`)}if(Kt&&typeof Kt.value=="number"){const fe=Kt.value,ct=Kt.unit||"%",et=fe<5.7?"NORMAL":fe<6.5?"PREDIABETES":"DIABETES";tn.push(` HbA1c: ${fe} ${ct} (${et}) - 3-month average blood sugar`)}tn.length>0&&(Ze.push("LABORATORY RESULTS:"),Ze.push(...tn),Ze.push("")),le.length>0&&(Ze.push("DIAGNOSES:"),le.forEach(fe=>Ze.push(` ${fe}`)),Ze.push("")),ae.length>0&&(Ze.push("MEDICATIONS:"),ae.forEach(fe=>Ze.push(` ${fe}`)),Ze.push(""));const Gi=tn.filter(fe=>fe.includes("HIGH")||fe.includes("LOW")).length;return Gi>0?Ze.push(`SUMMARY: ${Gi} lab value(s) outside normal range. Please consult with your healthcare provider for interpretation and follow-up.`):tn.length>0&&Ze.push("SUMMARY: All lab values appear to be within normal ranges. Continue regular monitoring as recommended by your healthcare provider."),Ze.length===0?"We parsed the report and extracted key details. Values will appear here once identified.":Ze.join(`
`)}catch(ne){return console.error("Error generating summary:",ne),"We parsed the report and extracted key details."}}const xe=D.useMemo(()=>["application/pdf","image/jpeg","image/png","image/heic","image/heif"],[]),st=10*1024*1024,it=D.useCallback(H=>H?xe.includes(H.type)?H.size>st?"File is too large. Max 10MB.":null:"Unsupported file type. Use PDF, JPG, or PNG.":"No file selected",[xe]),en=D.useCallback(H=>!H||H.length===0?null:H.length>1?Array.from(H).filter(G=>G.type==="application/pdf").length>1?"Multiple PDF files detected. Please upload only one PDF at a time.":"Multiple files detected. Please upload only one file at a time.":null,[]),ot=D.useCallback(H=>{if(H.preventDefault(),H.stopPropagation(),c(!1),n){t("A file is already uploaded. Please remove it first before uploading a new one.","error");return}const ne=H.dataTransfer.files,G=en(ne);if(G){t(G,"error");return}const le=ne==null?void 0:ne[0],ae=it(le);if(ae){t(ae,"error");return}r(le||null)},[t,it,en,n]),$t=D.useCallback(H=>{const ne=H.target.files;if(n){t("A file is already uploaded. Please remove it first before uploading a new one.","error"),H.target.value="";return}const G=en(ne);if(G){t(G,"error"),H.target.value="";return}const le=ne==null?void 0:ne[0],ae=it(le);if(ae){t(ae,"error"),H.target.value="";return}r(le||null)},[t,it,en,n]);D.useEffect(()=>{if(n&&n.type.startsWith("image/")){const H=URL.createObjectURL(n);return E(H),()=>URL.revokeObjectURL(H)}E("")},[n]),D.useEffect(()=>{w.current&&(w.current.multiple=!1)},[]),D.useEffect(()=>{const H=async ne=>{var G;try{if(n){t("A file is already uploaded. Please remove it first before uploading a new one.","error");return}const le=Array.from(((G=ne.clipboardData)==null?void 0:G.items)||[]).find(Ne=>Ne.type.startsWith("image/"));if(!le)return;const ae=le.getAsFile();if(!ae)return;const Se=it(ae);if(Se){t(Se,"error");return}r(new File([ae],ae.name||"pasted-image.png",{type:ae.type})),t("Image pasted from clipboard","success")}catch{}};return window.addEventListener("paste",H),()=>window.removeEventListener("paste",H)},[t,it,n]);async function gt(H){if(H.preventDefault(),!n){t("Please select a file to process.","error");return}f(!0),y(0),N(""),_("Uploading"),ue(0),K(null);try{const ne=new AbortController;b.current=ne;const G=await x9(n,{onProgress:ae=>y(ae),signal:ne.signal});y(100),i((G==null?void 0:G.ocr)||G),a((G==null?void 0:G.extracted)||null),Q(null);const le=j(G==null?void 0:G.extracted);K(le),_("Completed"),le.score>=.8?t("Report processed successfully with high quality extraction.","success"):le.score>=.6?t("Report processed with moderate quality extraction. Please review results.","warning"):t("Report processed with low quality extraction. Consider retrying with a clearer image.","warning")}catch(ne){const G=(ne==null?void 0:ne.message)||"Failed to process the report.";N(G),T(ne&&ne.body?ne.body:null),_(G.toLowerCase().includes("canceled")?"Canceled":"Failed"),W<oe&&!G.toLowerCase().includes("canceled")?(t(`${G} Retrying... (${W+1}/${oe})`,"warning"),setTimeout(()=>{ue(le=>le+1),gt(H)},2e3)):t(G,"error")}finally{b.current=null,setTimeout(()=>f(!1),200)}}async function at(H){H.preventDefault();const ne=(x||"").trim();if(!ne){t("Enter a PDF URL to process.","error");return}f(!0),y(0),N(""),T(null),_("Processing URL");try{const G=await _9(ne,{useOcr:C?!0:null,lang:O});i((G==null?void 0:G.ocr)||G),a((G==null?void 0:G.extracted)||null),Q(null),_("Completed"),t("PDF URL processed successfully.","success")}catch(G){const le=(G==null?void 0:G.message)||"Failed to process the PDF URL.";N(le),T(G&&G.body?G.body:null),_("Failed"),t(le,"error")}finally{setTimeout(()=>f(!1),200)}}const we=D.useCallback(()=>{b.current&&b.current.abort()},[]),Ht=D.useCallback(()=>{if(!n)return;i(null),y(0),_("Retrying"),gt({preventDefault:()=>{}})},[n]);return h.jsxs("div",{children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h1",{className:"text-2xl font-semibold mb-1 text-transparent bg-clip-text bg-gradient-to-r from-brand-600 via-blue-600 to-blue-500",children:"Upload Report"}),h.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Upload a single medical report to extract key details with OCR. We support PDF and image formats (one file at a time - remove current file to upload a new one)."})]}),h.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[h.jsxs(cn,{children:[h.jsx(Ur,{className:"bg-blue-50 dark:bg-slate-800/50 border-b border-blue-100 dark:border-slate-700",children:h.jsx(Br,{className:"text-blue-900 dark:text-slate-100",children:"Select file"})}),h.jsxs(un,{children:[h.jsxs("form",{onSubmit:gt,className:"space-y-4",children:[h.jsxs("div",{className:`relative flex flex-col items-center justify-center gap-2 rounded border-2 border-dashed px-6 py-10 text-center transition-colors bg-gradient-to-r ${n?"from-slate-50 via-slate-50 to-slate-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-800 border-slate-200 dark:border-slate-600 cursor-not-allowed opacity-60":l?"from-blue-50 via-sky-50 to-indigo-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-800 border-blue-600 dark:border-blue-500":"from-brand-50 via-blue-50 to-blue-50 dark:from-slate-900 dark:via-slate-900 dark:to-slate-900 border-slate-300 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-400"}`,onDragOver:H=>{n||(H.preventDefault(),c(!0))},onDragLeave:()=>c(!1),onDrop:ot,role:"button",tabIndex:n?-1:0,"aria-label":n?"File already uploaded. Remove current file to upload a new one.":"Drag and drop a report file here or choose a file",onKeyDown:H=>{n||(H.key==="Enter"||H.key===" ")&&(H.preventDefault(),w.current&&(w.current.multiple=!1,w.current.click()))},children:[l&&h.jsx("div",{className:"absolute inset-0 bg-blue-600/10 dark:bg-blue-500/10 border-2 border-blue-600 dark:border-blue-500 rounded pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-3",children:[d?h.jsx(Po,{size:20}):h.jsxs("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-300",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("path",{d:"M12 16V4m0 12l-4-4m4 4l4-4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("rect",{x:"3",y:"16",width:"18",height:"4",rx:"1",stroke:"currentColor",strokeWidth:"1.5"})]}),h.jsxs("div",{className:"text-slate-800 dark:text-slate-100",children:[h.jsx("div",{className:"font-medium",children:n?"File already uploaded":"Drag and drop your report"}),h.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:n?"Remove current file to upload a new one":"PDF, JPG, or PNG up to 10MB (one file at a time). Paste an image with Ctrl/Cmd+V."})]})]}),h.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"or"}),h.jsx("input",{ref:w,type:"file",accept:xe.join(","),onChange:$t,multiple:!1,className:"hidden","data-testid":"file-input"}),h.jsx(Ae,{type:"button",variant:"secondary",onClick:()=>{w.current&&(w.current.multiple=!1,w.current.click())},disabled:d||!!n,className:"hover:bg-indigo-100",children:n?"File uploaded":"Choose file"}),n&&h.jsx("div",{className:"mt-3 w-full max-w-md",children:k?h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:k,alt:"preview",className:"h-20 w-20 object-cover rounded border border-emerald-200 dark:border-emerald-700"}),h.jsxs("div",{className:"text-left",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100 truncate",children:n.name}),h.jsx("span",{className:"rounded-full bg-emerald-100 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300 text-[10px] px-2 py-0.5 border border-emerald-200 dark:border-emerald-800",children:"IMAGE"})]}),h.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Math.ceil(n.size/1024)," KB"]})]})]}):h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"h-10 w-10 rounded bg-rose-100 text-rose-700 dark:bg-rose-900/20 dark:text-rose-300 flex items-center justify-center font-semibold border border-rose-200 dark:border-rose-800",children:"PDF"}),h.jsxs("div",{className:"text-left",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100 truncate",children:n.name}),h.jsx("span",{className:"rounded-full bg-rose-100 text-rose-700 dark:bg-rose-900/20 dark:text-rose-300 text-[10px] px-2 py-0.5 border border-rose-200 dark:border-rose-800",children:"PDF"})]}),h.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Math.ceil(n.size/1024)," KB"]})]})]})}),d&&h.jsx("div",{className:"absolute inset-x-0 bottom-0",children:h.jsx("div",{className:"h-1 w-full bg-blue-100 dark:bg-slate-800",children:h.jsx("div",{className:"h-1 bg-brand-600 dark:bg-blue-500 transition-all",style:{width:`${m}%`}})})})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[h.jsx(Ae,{type:"button",variant:"secondary",onClick:()=>{r(null),i(null),a(null),Q(null),_("Idle"),w.current&&(w.current.value="")},disabled:d,children:"Remove"}),h.jsx(Ae,{type:"button",variant:"ghost",onClick:()=>w.current&&w.current.click(),disabled:d||!n,children:"Replace"}),h.jsx("div",{className:"ml-auto"}),d?h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Ae,{type:"button",variant:"danger",onClick:we,children:"Cancel"}),h.jsx(Ae,{type:"button",variant:"primary",disabled:!0,className:"bg-brand-600 dark:bg-brand-600",children:h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx(Po,{size:16})," Uploading"]})})]}):h.jsx(Ae,{type:"submit",disabled:!n,className:"bg-brand-600 hover:bg-brand-700 focus:ring-brand-600",children:"Process report"})]})]}),h.jsxs("div",{className:"mt-4 space-y-2",children:[h.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Or process a PDF by URL"}),h.jsxs("form",{onSubmit:at,className:"flex items-stretch gap-2",children:[h.jsx("input",{type:"url",placeholder:"https://example.com/report.pdf",className:"flex-1 rounded border px-3 py-2 text-sm border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-brand-200 dark:focus:ring-blue-300",value:x,onChange:H=>I(H.target.value),disabled:d}),h.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[h.jsx("input",{type:"checkbox",checked:C,onChange:H=>R(H.target.checked),disabled:d}),"Force OCR"]}),h.jsxs("select",{className:"rounded border px-2 py-2 text-xs border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",value:O,onChange:H=>P(H.target.value),disabled:d,title:"OCR language",children:[h.jsx("option",{value:"eng",children:"English (eng)"}),h.jsx("option",{value:"hin",children:"Hindi (hin)"}),h.jsx("option",{value:"eng+hin",children:"English+Hindi (eng+hin)"})]}),h.jsx(Ae,{type:"submit",variant:"secondary",disabled:d||!x.trim(),className:"hover:bg-indigo-100",children:"Process URL"})]})]}),h.jsxs("div",{className:"mt-6",children:[h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 border ${v==="Completed"?"bg-emerald-50 text-emerald-700 border-emerald-200":v==="Failed"||v==="Canceled"?"bg-rose-50 text-rose-700 border-rose-200":"bg-sky-50 text-sky-700 border-sky-200"}`,children:[h.jsx("span",{className:`h-2 w-2 rounded-full ${v==="Completed"?"bg-emerald-600":v==="Failed"||v==="Canceled"?"bg-rose-600":"bg-sky-600"}`}),v]}),!!A&&!d&&h.jsx("button",{className:"text-rose-700 underline",onClick:Ht,children:"Retry"})]}),!!A&&M&&h.jsxs("div",{className:"mt-2 text-xs text-rose-700",children:[(M==null?void 0:M.acceptedTypes)&&h.jsxs("div",{children:["Supported types: ",(M.acceptedTypes||[]).join(", ")]}),(M==null?void 0:M.maxSizeMb)&&h.jsxs("div",{children:["Max file size: ",M.maxSizeMb," MB"]})]})]})]})]}),h.jsxs(cn,{className:"md:col-span-2",children:[h.jsx(Ur,{className:"bg-white dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(Br,{className:"text-slate-900 dark:text-slate-100",children:"Summary"}),o&&h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Ae,{type:"button",variant:"secondary",onClick:Z,disabled:B,className:"text-sm px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:B?h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(Po,{size:14}),h.jsx("span",{children:"Generating AI Analysis..."})]}):h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsx("span",{children:" Generate AI Health Analysis"})]})}),h.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:"Powered by Gemini AI"})]})]})}),h.jsx(un,{className:"bg-white dark:bg-slate-900/40",children:o?h.jsxs("div",{className:"space-y-4",children:[(()=>{const H=Array.isArray(o==null?void 0:o.labs)?o.labs:[],ne=me=>H.find(lt=>(lt.name||"").toLowerCase()===me.toLowerCase()),G=ne("hemoglobin"),le=ne("glucose"),ae=ne("creatinine"),Se=H.length,Ne={hemoglobin:{min:12,max:16,unit:"g/dL"},glucose:{min:70,max:140,unit:"mg/dL"},creatinine:{min:.6,max:1.3,unit:"mg/dL"}};function Wt(me){if(typeof me=="number"&&Number.isFinite(me))return me;if(typeof me=="string"){const lt=me.match(/-?\d+(?:[\.,]\d+)?/);if(lt)return Number(lt[0].replace(",","."))}return null}function qt(me,{min:lt,max:Rn}){const Kt=Wt(me);return Number.isFinite(Kt)?Kt<lt?{text:"Low",cls:"bg-amber-100 text-amber-800"}:Kt>Rn?{text:"High",cls:"bg-rose-100 text-rose-800"}:{text:"Normal",cls:"bg-emerald-100 text-emerald-800"}:{text:"",cls:"bg-slate-100 text-slate-700"}}function qn(me,{min:lt,max:Rn}){const Kt=Wt(me);return Number.isFinite(Kt)?(Math.max(lt,Math.min(Rn,Kt))-lt)/(Rn-lt):.5}return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[h.jsx(Ro,{label:"Labs detected",value:String(Se),hint:"Parsed from OCR",accent:"blue"}),h.jsx(Ro,{label:"Hemoglobin",value:G?`${G.value??""} ${G.unit||""}`:"",hint:"g/dL",accent:"emerald"}),h.jsx(Ro,{label:"Glucose",value:le?`${le.value??""} ${le.unit||""}`:"",hint:"mg/dL",accent:"amber"})]}),U&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Extraction Quality"}),h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400 mb-1",children:[h.jsx("span",{children:"Quality Score"}),h.jsxs("span",{children:[Math.round(U.score*100),"%"]})]}),h.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:h.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${U.score>=.8?"bg-green-500":U.score>=.6?"bg-yellow-500":"bg-red-500"}`,style:{width:`${U.score*100}%`}})})]}),h.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[U.labCount," labs, ",U.highConfidenceCount," high confidence"]})]}),h.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:U.issues.map((me,lt)=>h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx("span",{className:`w-1 h-1 rounded-full ${me.includes("Good")?"bg-green-500":"bg-amber-500"}`}),h.jsx("span",{children:me})]},lt))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Report Summary"}),h.jsx("div",{className:"text-[13px] leading-6 text-slate-800 dark:text-slate-200 bg-slate-50 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700 rounded p-3 whitespace-pre-line",children:re(o)})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[h.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Hemoglobin"}),(()=>{const me=qt(G==null?void 0:G.value,Ne.hemoglobin);return h.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${me.cls}`,children:me.text})})()]}),h.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:h.jsx("div",{className:"h-2 bg-emerald-500 dark:bg-emerald-400 rounded",style:{width:`${Math.round(qn(G==null?void 0:G.value,Ne.hemoglobin)*100)}%`}})}),h.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",Ne.hemoglobin.min,"-",Ne.hemoglobin.max," ",Ne.hemoglobin.unit]})]}),h.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Glucose"}),(()=>{const me=qt(le==null?void 0:le.value,Ne.glucose);return h.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${me.cls}`,children:me.text})})()]}),h.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:h.jsx("div",{className:"h-2 bg-blue-500 dark:bg-blue-400 rounded",style:{width:`${Math.round(qn(le==null?void 0:le.value,Ne.glucose)*100)}%`}})}),h.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",Ne.glucose.min,"-",Ne.glucose.max," ",Ne.glucose.unit]})]}),h.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Creatinine"}),(()=>{const me=qt(ae==null?void 0:ae.value,Ne.creatinine);return h.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${me.cls}`,children:me.text})})()]}),h.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:h.jsx("div",{className:"h-2 bg-indigo-500 dark:bg-indigo-400 rounded",style:{width:`${Math.round(qn(ae==null?void 0:ae.value,Ne.creatinine)*100)}%`}})}),h.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",Ne.creatinine.min,"-",Ne.creatinine.max," ",Ne.creatinine.unit]})]})]})]})})(),J&&h.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"h-3 w-3 bg-blue-500 rounded-full animate-pulse"}),h.jsx("h3",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:"AI Health Analysis"}),h.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[h.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded-full",children:"Powered by Gemini AI"}),h.jsx(Ae,{type:"button",variant:"ghost",onClick:()=>Q(null),className:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 p-1",children:""})]})]}),h.jsx("div",{className:"whitespace-pre-wrap w-full font-sans antialiased text-slate-900 dark:text-slate-100 text-[17px] md:text-[18px] leading-8 tracking-[0.008em] selection:bg-blue-100 selection:text-blue-900",children:J}),h.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("div",{className:"text-yellow-600 dark:text-yellow-400 mt-0.5",children:""}),h.jsxs("div",{className:"text-xs text-yellow-800 dark:text-yellow-200",children:[h.jsx("strong",{children:"Medical Disclaimer:"})," This AI analysis is for informational purposes only and should not replace professional medical advice. Please consult with your healthcare provider for proper diagnosis and treatment."]})]})})]})]}):h.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Upload or process a report to see a quick summary."})})]}),h.jsxs(cn,{children:[h.jsx(Ur,{className:"bg-white dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:h.jsx(Br,{className:"text-slate-900 dark:text-slate-100",children:"Extracted Fields"})}),h.jsx(un,{className:"bg-white dark:bg-slate-900/40",children:o?h.jsxs("div",{className:"space-y-4 text-base text-slate-900 dark:text-slate-100",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Meta"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Patient:"})," ",h.jsx("span",{className:"font-medium",children:((Wn=o==null?void 0:o.meta)==null?void 0:Wn.patientName)||""})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Patient ID:"})," ",h.jsx("span",{className:"font-medium",children:((Zr=o==null?void 0:o.meta)==null?void 0:Zr.patientId)||""})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Date:"})," ",h.jsx("span",{className:"font-medium",children:((es=o==null?void 0:o.meta)==null?void 0:es.date)||""})]})]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Labs"}),(da=o==null?void 0:o.labs)!=null&&da.length?h.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded",children:h.jsxs("table",{className:"min-w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-300",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Name"}),h.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Value"}),h.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Unit"}),h.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Confidence"})]})}),h.jsx("tbody",{children:o.labs.map((H,ne)=>h.jsxs("tr",{className:ne%2===0?"bg-white dark:bg-slate-900":"bg-slate-50 dark:bg-slate-800/60",children:[h.jsx("td",{className:"px-3 py-2 capitalize text-slate-900 dark:text-slate-100",children:H.name}),h.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:H.value??""}),h.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:H.unit||""}),h.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:typeof H.confidence=="number"?`${Math.round(H.confidence*100)}%`:""})]},ne))})]})}):h.jsx("div",{className:"text-slate-700 dark:text-slate-300",children:"No labs found"})]}),(Ki=o==null?void 0:o.diagnoses)!=null&&Ki.length||(ha=o==null?void 0:o.medications)!=null&&ha.length?h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Diagnoses"}),h.jsx("ul",{className:"list-disc pl-5",children:(o.diagnoses||[]).map((H,ne)=>h.jsx("li",{children:H},ne))})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Medications"}),h.jsx("ul",{className:"list-disc pl-5",children:(o.medications||[]).map((H,ne)=>h.jsx("li",{children:H},ne))})]})]}):null,h.jsx("div",{className:"flex items-center gap-3",children:h.jsx(Ae,{type:"button",variant:"primary",className:"bg-emerald-600 hover:bg-emerald-700",disabled:!o,onClick:()=>{try{const H=JSON.stringify(o,null,2);navigator.clipboard.writeText(H),t("Extracted fields copied","success")}catch{t("Copy failed","error")}},children:"Copy extracted JSON"})})]}):h.jsx("div",{className:"text-base text-slate-700 dark:text-slate-300",children:"No structured fields extracted yet."})})]})]})]})}function M9(){return h.jsxs("footer",{className:"mt-10 relative overflow-hidden border-t border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/70 backdrop-blur",children:[h.jsx("div",{className:"pointer-events-none absolute -top-16 right-0 h-40 w-40 rounded-full bg-blue-500/10 blur-2xl"}),h.jsx("div",{className:"pointer-events-none absolute -bottom-16 left-0 h-40 w-40 rounded-full bg-emerald-500/10 blur-2xl"}),h.jsx("div",{className:"mx-auto max-w-7xl px-4 py-8",children:h.jsxs("div",{className:"flex flex-col items-center gap-3",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200/70 dark:border-slate-700/60 bg-white/80 dark:bg-slate-900/80 px-3 py-1 text-xs font-medium text-slate-700 dark:text-slate-200 shadow-sm",children:[h.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-gradient-to-tr from-brand-600 to-blue-500"}),"Health Sphere"]}),h.jsxs("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:[" ",new Date().getFullYear()," Health Sphere  All rights reserved"]}),h.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex flex-wrap items-center gap-3",children:[h.jsx("a",{href:"/",className:"hover:text-slate-700 dark:hover:text-slate-200",children:"Home"}),h.jsx("a",{href:"/dashboard",className:"hover:text-slate-700 dark:hover:text-slate-200",children:"Dashboard"}),h.jsx("a",{href:"/daily-checkin",className:"hover:text-slate-700 dark:hover:text-slate-200",children:"Daily CheckIn"}),h.jsx("a",{href:"/upload-report",className:"hover:text-slate-700 dark:hover:text-slate-200",children:"Upload Report"}),h.jsx("a",{href:"mailto:contact@example.com",className:"hover:text-slate-700 dark:hover:text-slate-200",children:"Contact"})]})]})})]})}function O9(){return h.jsxs("div",{className:"text-center py-16",children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Page not found"}),h.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"The page you are looking for doesnt exist."}),h.jsx(Fg,{className:"text-blue-600 hover:underline",to:"/",children:"Go back home"})]})}function bu({children:t}){const{user:e,loading:n}=Jr(),r=Gs();return n?h.jsx("div",{className:"flex items-center justify-center py-16",children:h.jsx(Po,{size:24})}):e?t:h.jsx(M2,{to:"/login",replace:!0,state:{from:r}})}function zm(t){return new Date(t).toLocaleString()}function L9({compact:t=!1}){const{user:e}=Jr(),{notify:n}=ua(),r=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:messages`,[e==null?void 0:e.uid]),s=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:useCheckins`,[e==null?void 0:e.uid]),i=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:useAllCheckins`,[e==null?void 0:e.uid]),o=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:useProfile`,[e==null?void 0:e.uid]),[a,l]=D.useState([]),[c,d]=D.useState(""),[f,m]=D.useState(!1),[y,w]=D.useState(null),[k,E]=D.useState({}),v=D.useRef(null),_=D.useRef(null),b=D.useMemo(()=>["Summarize my last diagnosis","What red flags should I watch?","Explain this lab result in simple terms","What are next steps for follow-up?"],[]),[A,N]=D.useState(!0),[M,T]=D.useState(!1),[x,I]=D.useState(!1);D.useEffect(()=>{try{const B=localStorage.getItem(r);if(B){const W=JSON.parse(B);Array.isArray(W)?l(W):l([])}else l([]);const se=localStorage.getItem(s);N(se==="true"||se==="false"?se==="true":!0);const U=localStorage.getItem(i);T(U==="true"||U==="false"?U==="true":!1);const K=localStorage.getItem(o);I(K==="true"||K==="false"?K==="true":!0)}catch{l([])}E({})},[r,s,i]),D.useEffect(()=>{var B;(B=v.current)==null||B.scrollTo({top:v.current.scrollHeight});try{localStorage.setItem(r,JSON.stringify(a))}catch{}},[a,r]),D.useEffect(()=>{try{localStorage.setItem(s,String(A))}catch{}},[A,s]),D.useEffect(()=>{try{localStorage.setItem(i,String(M))}catch{}},[M,i]),D.useEffect(()=>{try{localStorage.setItem(o,String(x))}catch{}},[x,o]);const C=D.useMemo(()=>c.trim().length>0&&!f,[c,f]),R=D.useMemo(()=>{const B=[...a].reverse().find(se=>se.role==="assistant");return!!(B&&typeof B.content=="string"&&B.content.toLowerCase().includes("gemini api key missing"))},[a]);async function O(){var se,U;if(!C)return;if(!e&&(A||M||x)){n("Please sign in to use your profile or check-ins in chat.","info");return}const B=[...a,{role:"user",content:c,createdAt:Date.now()}];l(B),d(""),m(!0);try{const K={messages:B,options:{maxOutputTokens:512,useCheckins:A,checkinLimit:7,useAllCheckins:M,checkinMax:365,useProfile:x,userId:(e==null?void 0:e.uid)||void 0}},W=new AbortController;w(W);const ue=await k9(K,{signal:W.signal}),oe=((se=ue==null?void 0:ue.data)==null?void 0:se.error)||((U=ue==null?void 0:ue.data)==null?void 0:U.reply)||"...";l(j=>j.concat({role:"assistant",content:oe,createdAt:Date.now()}))}catch(K){console.error("chat error:",K);const W=(K==null?void 0:K.message)||"Network error";n(W,"error")}finally{m(!1),w(null)}}function P(){l([])}D.useEffect(()=>{const B=()=>P();return window.addEventListener("chat:clear",B),()=>window.removeEventListener("chat:clear",B)},[]);function J(B){var se;try{(se=navigator.clipboard)==null||se.writeText(B)}catch{}}D.useEffect(()=>{const B=_.current;B&&(B.style.height="auto",B.style.height=Math.min(B.scrollHeight,120)+"px")},[c]);function Q(B){if(typeof B!="string"||B.length===0)return null;const se=B.split(/\r?\n/);function U(oe,j){const Z=[];let re=oe,xe=0;const st=/\*\*([^*]+)\*\*/,it=/(^|[^*])\*([^*]+)\*(?!\*)/;for(;re.length>0;){const en=st.exec(re),ot=it.exec(re);let $t=re.length,gt=null,at=null;if(en&&(!ot||en.index<=ot.index)?($t=en.index,gt="bold",at=en):ot&&($t=ot.index+(ot[1]?ot[1].length:0),gt="italic",at=ot),!gt){Z.push(h.jsx("span",{children:re},`${j}-t-${xe++}`));break}if($t>0&&Z.push(h.jsx("span",{children:re.slice(0,$t)},`${j}-t-${xe++}`)),gt==="bold")Z.push(h.jsx("strong",{children:at[1]},`${j}-b-${xe++}`)),re=re.slice(at.index+at[0].length);else if(gt==="italic"){const we=at[1]||"";we&&Z.push(h.jsx("span",{children:we},`${j}-l-${xe++}`)),Z.push(h.jsx("em",{children:at[2]},`${j}-i-${xe++}`));const Ht=at.index+we.length+at[0].length-(we?0:1);re=re.slice(Ht)}}return Z}const K=[];let W=[];const ue=()=>{W.length>0&&(K.push(h.jsx("ul",{className:"list-disc pl-5 my-2 space-y-1",children:W.map((oe,j)=>h.jsx("li",{children:U(oe.replace(/^\s*[*-]\s+/,""),`li-${j}`)},`li-${j}`))},`ul-${K.length}`)),W=[])};for(let oe=0;oe<se.length;oe++){const j=se[oe];if(/^\s*[*-]\s+/.test(j)){W.push(j);continue}ue(),j.trim()===""?K.push(h.jsx("div",{className:"h-2"},`br-${oe}`)):K.push(h.jsx("p",{children:U(j,`p-${oe}`)},`p-${oe}`))}return ue(),h.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:K})}return h.jsxs("div",{className:`${t?"flex h-full flex-col gap-0":"flex flex-col gap-3"}`,children:[R&&h.jsxs("div",{className:"rounded-md border border-amber-300 bg-amber-50 text-amber-900 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200 px-3 py-2 text-xs",children:["Gemini API key is not configured on the backend. Set ",h.jsx("code",{children:"GEMINI_API_KEY"})," and restart the server."]}),!t&&h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),"Gemini  Online"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[f?h.jsx(Ae,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>y==null?void 0:y.abort(),children:"Stop"}):null,h.jsx(Ae,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:P,disabled:a.length===0&&!f,children:"Clear"})]})]}),h.jsxs("div",{ref:v,className:`${t?"flex-1 min-h-0 overflow-auto p-3":"max-h-[70vh] min-h-[55vh] overflow-auto p-4"} rounded-xl border border-slate-200/80 dark:border-slate-800/80 bg-white/70 dark:bg-slate-950/70 backdrop-blur shadow-inner`,children:[a.length===0&&h.jsxs("div",{className:"rounded-xl border border-dashed border-slate-300 dark:border-slate-700 p-4 bg-slate-50/60 dark:bg-slate-900/40",children:[h.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 mb-3",children:"Start the conversation by asking a question, or try one of these:"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((B,se)=>h.jsx("button",{onClick:()=>d(B),className:"px-3 py-1.5 rounded-full text-xs bg-white hover:bg-slate-100 text-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-slate-100 border border-slate-200 dark:border-slate-700 shadow-subtle",children:B},se))})]}),a.map((B,se)=>h.jsx("div",{className:`mb-3 flex ${B.role==="user"?"justify-end":"justify-start"}`,children:h.jsxs("div",{className:`flex items-end gap-2 ${B.role==="user"?"flex-row-reverse":"flex-row"}`,children:[h.jsx("div",{className:`hidden lg:flex h-8 w-8 shrink-0 rounded-full items-center justify-center text-xs font-semibold ${B.role==="user"?"bg-brand-600 text-white":"bg-slate-200 text-slate-700 dark:bg-slate-800 dark:text-slate-100"}`,children:B.role==="user"?"You":"AI"}),h.jsxs("div",{children:[(()=>{const U=`${B.createdAt||se}-${se}`;B.role==="assistant"&&typeof B.content=="string"&&B.content.length>500;const K=!!k[U];return h.jsxs("div",{className:`group relative max-w-[95%] sm:max-w-[92%] md:max-w-[90%] lg:max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-subtle break-words whitespace-pre-wrap leading-relaxed ${B.role==="user"?"bg-gradient-to-br from-brand-600 to-brand-700 text-white rounded-br-md":"bg-slate-100/90 dark:bg-slate-900/80 text-slate-900 dark:text-slate-100 rounded-bl-md border border-slate-200/60 dark:border-slate-800/60"}`,children:[h.jsx("div",{className:"max-h-60 overflow-y-auto pr-1 custom-scrollbar",children:B.role==="assistant"?h.jsx("div",{className:`chat-content select-text ${K?"":"line-clamp-10"}`,children:Q(B.content)}):h.jsx("div",{className:"break-words whitespace-pre-wrap",children:B.content})}),h.jsx("button",{onClick:()=>J(B.content),title:"Copy",className:`absolute -top-2 ${B.role==="user"?"-left-2":"-right-2"} hidden group-hover:inline-flex items-center justify-center h-6 w-6 rounded-full bg-white text-slate-700 hover:bg-slate-100 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600 border border-slate-200 dark:border-slate-600 shadow`,children:""})]})})(),h.jsxs("div",{className:`mt-1 flex items-center gap-2 ${B.role==="user"?"justify-end":"justify-start"}`,children:[h.jsx("div",{className:`text-[10px] ${B.role==="user"?"text-slate-300":"text-slate-500 dark:text-slate-400"}`,children:B.createdAt?zm(B.createdAt):""}),B.role==="assistant"&&typeof B.content=="string"&&B.content.length>500&&(()=>{const U=`${B.createdAt||se}-${se}`,K=!!k[U];return h.jsx("button",{className:"text-[10px] px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 shadow-subtle",onClick:()=>E(W=>({...W,[U]:!W[U]})),children:K?"Collapse":"Expand"})})()]})]})]})},se)),f&&h.jsxs("div",{className:"inline-flex items-center gap-2 text-slate-500 text-sm",children:[h.jsxs("span",{className:"relative flex h-2 w-2",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-brand-600"})]}),"Thinking"]})]}),h.jsxs("div",{className:`${t?"sticky bottom-0 z-10 border-t border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur pt-3":""}`,children:[h.jsxs("div",{className:"flex gap-2 items-end",children:[h.jsx(qS,{ref:_,value:c,onChange:B=>d(B.target.value.slice(0,1e3)),onKeyDown:B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),O())},placeholder:"Type your message",rows:t?2:3}),h.jsxs("div",{className:"flex flex-col items-end gap-1",children:[h.jsx(Ae,{onClick:O,disabled:!C,className:"shadow-subtle",children:"Send"}),h.jsxs("div",{className:"text-[10px] text-slate-500",children:[c.length,"/1000"]})]})]}),h.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-600 dark:text-slate-300",children:[h.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 dark:border-slate-700",checked:A,onChange:B=>N(B.target.checked)}),"Use my daily check-ins for answers"]}),h.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-600 dark:text-slate-300",children:[h.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 dark:border-slate-700",checked:x,onChange:B=>I(B.target.checked)}),"Use my profile data"]}),h.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-600 dark:text-slate-300",children:[h.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 dark:border-slate-700",checked:M,onChange:B=>T(B.target.checked),disabled:!A}),"Include all check-ins (compact)"]})]}),t?h.jsxs("div",{className:"flex items-center gap-2",children:[f?h.jsx(Ae,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>y==null?void 0:y.abort(),children:"Stop"}):null,h.jsx(Ae,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:P,disabled:a.length===0&&!f,children:"Clear"})]}):null]})]})]})}function j9(){const[t,e]=D.useState(!1),[n,r]=D.useState(!1);D.useEffect(()=>{try{const o=localStorage.getItem("chat:widgetOpen");o!=null&&e(o==="true");const a=localStorage.getItem("chat:messages");if(a){const l=JSON.parse(a);r(Array.isArray(l)&&l.length>0)}}catch{}},[]),D.useEffect(()=>{try{localStorage.setItem("chat:widgetOpen",String(t))}catch{}},[t]);const s=D.useCallback(()=>e(o=>!o),[]),i=D.useCallback(()=>e(!1),[]);return D.useEffect(()=>{const o=a=>{a.key==="Escape"&&i(),(a.altKey||a.metaKey)&&a.key==="/"&&s()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[s,i]),h.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[!t&&h.jsx(Ae,{onClick:s,className:`h-14 w-14 rounded-full shadow-xl p-0 ring-2 ring-brand-500 bg-gradient-to-br from-brand-500 to-brand-700 text-white hover:from-brand-600 hover:to-brand-800 focus:outline-none focus:ring-4 focus:ring-brand-300 transition-transform duration-200 hover:scale-105 ${n?"":"animate-pulse"}`,"aria-label":"Open chat",title:"Open chat (Alt+/)",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-7 w-7 m-auto",children:[h.jsx("path",{d:"M7.5 8.25h9a.75.75 0 0 1 0 1.5h-9a.75.75 0 0 1 0-1.5Zm0 4.5h5.25a.75.75 0 0 1 0 1.5H7.5a.75.75 0 0 1 0-1.5Z"}),h.jsx("path",{fillRule:"evenodd",d:"M4.5 3.75A2.25 2.25 0 0 0 2.25 6v8.25A2.25 2.25 0 0 0 4.5 16.5H6v3.19a.75.75 0 0 0 1.28.53l3.72-3.72h6.5A2.25 2.25 0 0 0 20.25 14.25V6A2.25 2.25 0 0 0 18 3.75h-13.5Z",clipRule:"evenodd"})]})}),t&&h.jsxs("div",{className:"relative w-[500px] max-w-[96vw] h-[60vh] sm:h-[65vh] md:h-[72vh] lg:h-[75vh] rounded-2xl shadow-2xl overflow-hidden border border-slate-200/80 dark:border-slate-800/80 bg-white dark:bg-slate-900",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200/80 dark:border-slate-800/80 bg-gradient-to-r from-white to-slate-50 dark:from-slate-900 dark:to-slate-950/60 backdrop-blur",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:[h.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),h.jsx("span",{className:"font-medium",children:"Assistive Chat"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>window.dispatchEvent(new Event("chat:clear")),"aria-label":"Clear conversation",className:"h-7 px-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-100 text-xs border border-slate-200 dark:border-slate-700",title:"Clear conversation",children:"Clear"}),h.jsx("button",{onClick:i,"aria-label":"Close chat",className:"h-7 w-7 rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-100 flex items-center justify-center text-xs shadow-subtle",title:"Close",children:""})]})]}),h.jsx("div",{className:"h-full flex flex-col",children:h.jsx("div",{className:"flex-1 p-4 overflow-auto bg-[radial-gradient(ellipse_at_top_left,rgba(14,165,233,0.06),transparent_50%),radial-gradient(ellipse_at_bottom_right,rgba(99,102,241,0.06),transparent_50%)]",children:h.jsx(L9,{compact:!0})})})]})]})}function V9(){const{user:t}=Jr(),[e,n]=D.useState(""),[r,s]=D.useState(""),[i,o]=D.useState(!1),[a,l]=D.useState(""),[c,d]=D.useState(null),[f,m]=D.useState(!1),[y,w]=D.useState(""),[k,E]=D.useState(""),[v,_]=D.useState(null);function b(N){try{if(!N)return null;if(typeof N.toDate=="function")return N.toDate();if(typeof N.seconds=="number")return new Date(N.seconds*1e3);const M=new Date(N);return Number.isNaN(M.getTime())?null:M}catch{return null}}D.useEffect(()=>{let N=!0;async function M(){if(!(!t||!Tt))try{const T=Ld(Tt,"users",t.uid),x=await SI(T),I=x.exists()?x.data():{};if(!N)return;n(t.displayName||I.displayName||""),s(t.photoURL||I.photoURL||""),_({uid:t.uid,email:t.email||I.email||null,phoneNumber:t.phoneNumber||I.phoneNumber||null,providerIds:(t.providerData||[]).map(C=>C.providerId),role:I.role||"user",createdAt:b(I.createdAt)||null,updatedAt:b(I.updatedAt)||null})}catch{}}return M(),()=>{N=!1}},[t]);async function A(N){if(N.preventDefault(),!!t){o(!0),l("");try{let M=r||null;if(c&&Vd){m(!0);try{const x=c.name&&c.name.includes(".")?c.name.split(".").pop():"jpg",I=`avatars/${t.uid}/${Date.now()}.${x}`,C=BF(Vd,I);await FF(C,c,{contentType:c.type||"image/jpeg"}),M=await UF(C)}catch(x){throw console.error("[Profile] Upload failed:",x),x}finally{m(!1)}}await xT(kt.currentUser,{displayName:e||null,photoURL:M});const T=Ld(Tt,"users",t.uid);await Cm(T,{displayName:e||null,photoURL:M,updatedAt:Zl()},{merge:!0}),l("Profile updated")}catch(M){l((M==null?void 0:M.message)||"Failed to update"),console.error("[Profile] Save failed:",M)}finally{o(!1)}}}return h.jsx("div",{className:"grid place-items-center",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Your profile"}),h.jsx(cn,{children:h.jsx(un,{children:h.jsxs("form",{className:"space-y-4",onSubmit:A,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[r?h.jsx("img",{src:r,alt:"avatar",className:"w-12 h-12 rounded-full border border-slate-200 dark:border-slate-700"}):h.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-600 text-white grid place-items-center text-lg",children:(e||(t==null?void 0:t.email)||"?").slice(0,1).toUpperCase()}),h.jsx("div",{className:"text-sm text-slate-500",children:"Update your display info"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Display name"}),h.jsx(Jn,{type:"text",value:e,onChange:N=>n(N.target.value),disabled:i})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Upload photo"}),h.jsx("input",{type:"file",accept:"image/*",onChange:N=>{w("");const M=N.target.files&&N.target.files[0]?N.target.files[0]:null;if(!M){d(null),E("");return}const T=["image/jpeg","image/png","image/webp"],x=5*1024*1024;if(!T.includes(M.type)){w("Only JPG, PNG or WebP images are allowed."),d(null),E("");return}if(M.size>x){w("File too large. Max size is 5MB."),d(null),E("");return}d(M);const I=new FileReader;I.onload=()=>E(String(I.result||"")),I.readAsDataURL(M)},disabled:i,className:"block w-full text-sm text-slate-700 dark:text-slate-200"}),h.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"JPEG/PNG up to ~5MB."}),k?h.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[h.jsx("img",{src:k,alt:"preview",className:"w-16 h-16 rounded-full border border-slate-200 dark:border-slate-700 object-cover"}),h.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>{d(null),E(""),w("")},children:"Remove"})]}):null,y?h.jsx("p",{className:"text-sm text-red-600 mt-1",children:y}):null]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Or photo URL"}),h.jsx(Jn,{type:"url",value:r,onChange:N=>s(N.target.value),disabled:i})]}),f?h.jsx("p",{className:"text-sm text-slate-500",children:"Uploading photo"}):null,a?h.jsx("p",{className:`text-sm ${a==="Profile updated"?"text-green-600":"text-red-600"}`,children:a}):null,h.jsx(Ae,{type:"submit",className:"w-full",disabled:i||f,children:i?"Saving":"Save changes"})]})})}),v?h.jsx(cn,{className:"mt-4",children:h.jsx(un,{children:h.jsxs("div",{className:"space-y-2 text-sm text-slate-700 dark:text-slate-300",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Email"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.email||""})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"User ID"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.uid})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Phone"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.phoneNumber||""})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Providers"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:(v.providerIds||[]).length?v.providerIds.join(", "):""})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Role"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.role})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Created"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.createdAt?zm(v.createdAt):""})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Updated"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.updatedAt?zm(v.updatedAt):""})]})]})})}):null]})})}function F9(){return h.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",children:[h.jsx(XF,{}),h.jsx("main",{className:"mx-auto max-w-7xl px-4 py-6",children:h.jsxs(L2,{children:[h.jsx(Ir,{path:"/",element:h.jsx(A9,{})}),h.jsx(Ir,{path:"/dashboard",element:h.jsx(bu,{children:h.jsx(C9,{})})}),h.jsx(Ir,{path:"/daily-checkin",element:h.jsx(bu,{children:h.jsx(N9,{})})}),h.jsx(Ir,{path:"/upload-report",element:h.jsx(bu,{children:h.jsx(D9,{})})}),h.jsx(Ir,{path:"/profile",element:h.jsx(bu,{children:h.jsx(V9,{})})}),h.jsx(Ir,{path:"/login",element:h.jsx(P9,{})}),h.jsx(Ir,{path:"/signup",element:h.jsx(R9,{})}),h.jsx(Ir,{path:"*",element:h.jsx(O9,{})})]})}),h.jsx(M9,{}),h.jsx(j9,{})]})}wE(document.getElementById("root")).render(h.jsx(Y2,{children:h.jsx(T9,{children:h.jsx(YF,{children:h.jsx(H2,{children:h.jsx(F9,{})})})})}));
