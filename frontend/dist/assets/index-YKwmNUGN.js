var gC=Object.defineProperty;var yC=(t,e,n)=>e in t?gC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pe=(t,e,n)=>yC(t,typeof e!="symbol"?e+"":e,n);function vC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function _C(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cb={exports:{}},Gd={},ub={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic=Symbol.for("react.element"),wC=Symbol.for("react.portal"),xC=Symbol.for("react.fragment"),bC=Symbol.for("react.strict_mode"),kC=Symbol.for("react.profiler"),EC=Symbol.for("react.provider"),TC=Symbol.for("react.context"),IC=Symbol.for("react.forward_ref"),SC=Symbol.for("react.suspense"),CC=Symbol.for("react.memo"),AC=Symbol.for("react.lazy"),Xy=Symbol.iterator;function PC(t){return t===null||typeof t!="object"?null:(t=Xy&&t[Xy]||t["@@iterator"],typeof t=="function"?t:null)}var db={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hb=Object.assign,fb={};function Xo(t,e,n){this.props=t,this.context=e,this.refs=fb,this.updater=n||db}Xo.prototype.isReactComponent={};Xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pb(){}pb.prototype=Xo.prototype;function $m(t,e,n){this.props=t,this.context=e,this.refs=fb,this.updater=n||db}var Hm=$m.prototype=new pb;Hm.constructor=$m;hb(Hm,Xo.prototype);Hm.isPureReactComponent=!0;var Jy=Array.isArray,mb=Object.prototype.hasOwnProperty,Wm={current:null},gb={key:!0,ref:!0,__self:!0,__source:!0};function yb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)mb.call(e,r)&&!gb.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ic,type:t,key:i,ref:o,props:s,_owner:Wm.current}}function RC(t,e){return{$$typeof:ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qm(t){return typeof t=="object"&&t!==null&&t.$$typeof===ic}function NC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zy=/\/+/g;function sf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NC(""+t.key):e.toString(36)}function ku(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ic:case wC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+sf(o,0):r,Jy(s)?(n="",t!=null&&(n=t.replace(Zy,"$&/")+"/"),ku(s,e,n,"",function(c){return c})):s!=null&&(qm(s)&&(s=RC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Jy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+sf(i,a);o+=ku(i,e,n,l,s)}else if(l=PC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+sf(i,a++),o+=ku(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vc(t,e,n){if(t==null)return t;var r=[],s=0;return ku(t,r,"","",function(i){return e.call(n,i,s++)}),r}function DC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},Eu={transition:null},MC={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:Eu,ReactCurrentOwner:Wm};function vb(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:Vc,forEach:function(t,e,n){Vc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vc(t,function(){e++}),e},toArray:function(t){return Vc(t,function(e){return e})||[]},only:function(t){if(!qm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Xo;ge.Fragment=xC;ge.Profiler=kC;ge.PureComponent=$m;ge.StrictMode=bC;ge.Suspense=SC;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MC;ge.act=vb;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Wm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)mb.call(e,l)&&!gb.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ic,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:TC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EC,_context:t},t.Consumer=t};ge.createElement=yb;ge.createFactory=function(t){var e=yb.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:IC,render:t}};ge.isValidElement=qm;ge.lazy=function(t){return{$$typeof:AC,_payload:{_status:-1,_result:t},_init:DC}};ge.memo=function(t,e){return{$$typeof:CC,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Eu.transition;Eu.transition={};try{t()}finally{Eu.transition=e}};ge.unstable_act=vb;ge.useCallback=function(t,e){return Yt.current.useCallback(t,e)};ge.useContext=function(t){return Yt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Yt.current.useEffect(t,e)};ge.useId=function(){return Yt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Yt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};ge.useRef=function(t){return Yt.current.useRef(t)};ge.useState=function(t){return Yt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Yt.current.useTransition()};ge.version="18.3.1";ub.exports=ge;var D=ub.exports;const Qd=_C(D),OC=vC({__proto__:null,default:Qd},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LC=D,jC=Symbol.for("react.element"),VC=Symbol.for("react.fragment"),FC=Object.prototype.hasOwnProperty,UC=LC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BC={key:!0,ref:!0,__self:!0,__source:!0};function _b(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)FC.call(e,r)&&!BC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jC,type:t,key:i,ref:o,props:s,_owner:UC.current}}Gd.Fragment=VC;Gd.jsx=_b;Gd.jsxs=_b;cb.exports=Gd;var h=cb.exports,wb={exports:{}},In={},xb={exports:{}},bb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var q=B.length;B.push(Q);e:for(;0<q;){var fe=q-1>>>1,se=B[fe];if(0<s(se,Q))B[fe]=Q,B[q]=se,q=fe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],q=B.pop();if(q!==Q){B[0]=q;e:for(var fe=0,se=B.length,j=se>>>1;fe<j;){var ee=2*(fe+1)-1,oe=B[ee],be=ee+1,Me=B[be];if(0>s(oe,q))be<se&&0>s(Me,oe)?(B[fe]=Me,B[be]=q,fe=be):(B[fe]=oe,B[ee]=q,fe=ee);else if(be<se&&0>s(Me,q))B[fe]=Me,B[be]=q,fe=be;else break e}}return Q}function s(B,Q){var q=B.sortIndex-Q.sortIndex;return q!==0?q:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,m=3,y=!1,x=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=B)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function P(B){if(k=!1,b(B),!x)if(n(l)!==null)x=!0,re(N);else{var Q=n(c);Q!==null&&de(P,Q.startTime-B)}}function N(B,Q){x=!1,k&&(k=!1,v(w),w=-1),y=!0;var q=m;try{for(b(Q),f=n(l);f!==null&&(!(f.expirationTime>Q)||B&&!R());){var fe=f.callback;if(typeof fe=="function"){f.callback=null,m=f.priorityLevel;var se=fe(f.expirationTime<=Q);Q=t.unstable_now(),typeof se=="function"?f.callback=se:f===n(l)&&r(l),b(Q)}else r(l);f=n(l)}if(f!==null)var j=!0;else{var ee=n(c);ee!==null&&de(P,ee.startTime-Q),j=!1}return j}finally{f=null,m=q,y=!1}}var M=!1,T=null,w=-1,C=5,A=-1;function R(){return!(t.unstable_now()-A<C)}function O(){if(T!==null){var B=t.unstable_now();A=B;var Q=!0;try{Q=T(!0,B)}finally{Q?I():(M=!1,T=null)}}else M=!1}var I;if(typeof _=="function")I=function(){_(O)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,H=W.port2;W.port1.onmessage=O,I=function(){H.postMessage(null)}}else I=function(){E(O,0)};function re(B){T=B,M||(M=!0,I())}function de(B,Q){w=E(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,re(N))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var q=m;m=Q;try{return B()}finally{m=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var q=m;m=B;try{return Q()}finally{m=q}},t.unstable_scheduleCallback=function(B,Q,q){var fe=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?fe+q:fe):q=fe,B){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=q+se,B={id:d++,callback:Q,priorityLevel:B,startTime:q,expirationTime:se,sortIndex:-1},q>fe?(B.sortIndex=q,e(c,B),n(l)===null&&B===n(c)&&(k?(v(w),w=-1):k=!0,de(P,q-fe))):(B.sortIndex=se,e(l,B),x||y||(x=!0,re(N))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var Q=m;return function(){var q=m;m=Q;try{return B.apply(this,arguments)}finally{m=q}}}})(bb);xb.exports=bb;var zC=xb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $C=D,Tn=zC;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kb=new Set,kl={};function Ui(t,e){No(t,e),No(t+"Capture",e)}function No(t,e){for(kl[t]=e,t=0;t<e.length;t++)kb.add(e[t])}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),op=Object.prototype.hasOwnProperty,HC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ev={},tv={};function WC(t){return op.call(tv,t)?!0:op.call(ev,t)?!1:HC.test(t)?tv[t]=!0:(ev[t]=!0,!1)}function qC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function KC(t,e,n,r){if(e===null||typeof e>"u"||qC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Km=/[\-:]([a-z])/g;function Gm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Km,Gm);St[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Km,Gm);St[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Km,Gm);St[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qm(t,e,n,r){var s=St.hasOwnProperty(e)?St[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(KC(e,n,s,r)&&(n=null),r||s===null?WC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Qr=$C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fc=Symbol.for("react.element"),io=Symbol.for("react.portal"),oo=Symbol.for("react.fragment"),Ym=Symbol.for("react.strict_mode"),ap=Symbol.for("react.profiler"),Eb=Symbol.for("react.provider"),Tb=Symbol.for("react.context"),Xm=Symbol.for("react.forward_ref"),lp=Symbol.for("react.suspense"),cp=Symbol.for("react.suspense_list"),Jm=Symbol.for("react.memo"),ls=Symbol.for("react.lazy"),Ib=Symbol.for("react.offscreen"),nv=Symbol.iterator;function Ea(t){return t===null||typeof t!="object"?null:(t=nv&&t[nv]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,of;function Fa(t){if(of===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);of=e&&e[1]||""}return`
`+of+t}var af=!1;function lf(t,e){if(!t||af)return"";af=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{af=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fa(t):""}function GC(t){switch(t.tag){case 5:return Fa(t.type);case 16:return Fa("Lazy");case 13:return Fa("Suspense");case 19:return Fa("SuspenseList");case 0:case 2:case 15:return t=lf(t.type,!1),t;case 11:return t=lf(t.type.render,!1),t;case 1:return t=lf(t.type,!0),t;default:return""}}function up(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oo:return"Fragment";case io:return"Portal";case ap:return"Profiler";case Ym:return"StrictMode";case lp:return"Suspense";case cp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Tb:return(t.displayName||"Context")+".Consumer";case Eb:return(t._context.displayName||"Context")+".Provider";case Xm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jm:return e=t.displayName||null,e!==null?e:up(t.type)||"Memo";case ls:e=t._payload,t=t._init;try{return up(t(e))}catch{}}return null}function QC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return up(e);case 8:return e===Ym?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YC(t){var e=Sb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uc(t){t._valueTracker||(t._valueTracker=YC(t))}function Cb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dp(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ab(t,e){e=e.checked,e!=null&&Qm(t,"checked",e,!1)}function hp(t,e){Ab(t,e);var n=Ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fp(t,e.type,n):e.hasOwnProperty("defaultValue")&&fp(t,e.type,Ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fp(t,e,n){(e!=="number"||Gu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ua=Array.isArray;function _o(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ls(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function pp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function iv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ua(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ls(n)}}function Pb(t,e){var n=Ls(e.value),r=Ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ov(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bc,Nb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bc=Bc||document.createElement("div"),Bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function El(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XC=["Webkit","ms","Moz","O"];Object.keys(Za).forEach(function(t){XC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Za[e]=Za[t]})});function Db(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Za.hasOwnProperty(t)&&Za[t]?(""+e).trim():e+"px"}function Mb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Db(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JC=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gp(t,e){if(e){if(JC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vp=null;function Zm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _p=null,wo=null,xo=null;function av(t){if(t=lc(t)){if(typeof _p!="function")throw Error(z(280));var e=t.stateNode;e&&(e=eh(e),_p(t.stateNode,t.type,e))}}function Ob(t){wo?xo?xo.push(t):xo=[t]:wo=t}function Lb(){if(wo){var t=wo,e=xo;if(xo=wo=null,av(t),e)for(t=0;t<e.length;t++)av(e[t])}}function jb(t,e){return t(e)}function Vb(){}var cf=!1;function Fb(t,e,n){if(cf)return t(e,n);cf=!0;try{return jb(t,e,n)}finally{cf=!1,(wo!==null||xo!==null)&&(Vb(),Lb())}}function Tl(t,e){var n=t.stateNode;if(n===null)return null;var r=eh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var wp=!1;if(Br)try{var Ta={};Object.defineProperty(Ta,"passive",{get:function(){wp=!0}}),window.addEventListener("test",Ta,Ta),window.removeEventListener("test",Ta,Ta)}catch{wp=!1}function ZC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var el=!1,Qu=null,Yu=!1,xp=null,eA={onError:function(t){el=!0,Qu=t}};function tA(t,e,n,r,s,i,o,a,l){el=!1,Qu=null,ZC.apply(eA,arguments)}function nA(t,e,n,r,s,i,o,a,l){if(tA.apply(this,arguments),el){if(el){var c=Qu;el=!1,Qu=null}else throw Error(z(198));Yu||(Yu=!0,xp=c)}}function Bi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ub(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lv(t){if(Bi(t)!==t)throw Error(z(188))}function rA(t){var e=t.alternate;if(!e){if(e=Bi(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lv(s),t;if(i===r)return lv(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Bb(t){return t=rA(t),t!==null?zb(t):null}function zb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zb(t);if(e!==null)return e;t=t.sibling}return null}var $b=Tn.unstable_scheduleCallback,cv=Tn.unstable_cancelCallback,sA=Tn.unstable_shouldYield,iA=Tn.unstable_requestPaint,it=Tn.unstable_now,oA=Tn.unstable_getCurrentPriorityLevel,eg=Tn.unstable_ImmediatePriority,Hb=Tn.unstable_UserBlockingPriority,Xu=Tn.unstable_NormalPriority,aA=Tn.unstable_LowPriority,Wb=Tn.unstable_IdlePriority,Yd=null,yr=null;function lA(t){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(Yd,t,void 0,(t.current.flags&128)===128)}catch{}}var Zn=Math.clz32?Math.clz32:dA,cA=Math.log,uA=Math.LN2;function dA(t){return t>>>=0,t===0?32:31-(cA(t)/uA|0)|0}var zc=64,$c=4194304;function Ba(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ju(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ba(a):(i&=o,i!==0&&(r=Ba(i)))}else o=n&~s,o!==0?r=Ba(o):i!==0&&(r=Ba(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zn(e),s=1<<n,r|=t[n],e&=~s;return r}function hA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Zn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=hA(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function bp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qb(){var t=zc;return zc<<=1,!(zc&4194240)&&(zc=64),t}function uf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zn(e),t[e]=n}function pA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Zn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function tg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Pe=0;function Kb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Gb,ng,Qb,Yb,Xb,kp=!1,Hc=[],ks=null,Es=null,Ts=null,Il=new Map,Sl=new Map,us=[],mA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uv(t,e){switch(t){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(e.pointerId)}}function Ia(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=lc(e),e!==null&&ng(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function gA(t,e,n,r,s){switch(e){case"focusin":return ks=Ia(ks,t,e,n,r,s),!0;case"dragenter":return Es=Ia(Es,t,e,n,r,s),!0;case"mouseover":return Ts=Ia(Ts,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Il.set(i,Ia(Il.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Sl.set(i,Ia(Sl.get(i)||null,t,e,n,r,s)),!0}return!1}function Jb(t){var e=hi(t.target);if(e!==null){var n=Bi(e);if(n!==null){if(e=n.tag,e===13){if(e=Ub(n),e!==null){t.blockedOn=e,Xb(t.priority,function(){Qb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ep(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vp=r,n.target.dispatchEvent(r),vp=null}else return e=lc(n),e!==null&&ng(e),t.blockedOn=n,!1;e.shift()}return!0}function dv(t,e,n){Tu(t)&&n.delete(e)}function yA(){kp=!1,ks!==null&&Tu(ks)&&(ks=null),Es!==null&&Tu(Es)&&(Es=null),Ts!==null&&Tu(Ts)&&(Ts=null),Il.forEach(dv),Sl.forEach(dv)}function Sa(t,e){t.blockedOn===e&&(t.blockedOn=null,kp||(kp=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,yA)))}function Cl(t){function e(s){return Sa(s,t)}if(0<Hc.length){Sa(Hc[0],t);for(var n=1;n<Hc.length;n++){var r=Hc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ks!==null&&Sa(ks,t),Es!==null&&Sa(Es,t),Ts!==null&&Sa(Ts,t),Il.forEach(e),Sl.forEach(e),n=0;n<us.length;n++)r=us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<us.length&&(n=us[0],n.blockedOn===null);)Jb(n),n.blockedOn===null&&us.shift()}var bo=Qr.ReactCurrentBatchConfig,Zu=!0;function vA(t,e,n,r){var s=Pe,i=bo.transition;bo.transition=null;try{Pe=1,rg(t,e,n,r)}finally{Pe=s,bo.transition=i}}function _A(t,e,n,r){var s=Pe,i=bo.transition;bo.transition=null;try{Pe=4,rg(t,e,n,r)}finally{Pe=s,bo.transition=i}}function rg(t,e,n,r){if(Zu){var s=Ep(t,e,n,r);if(s===null)wf(t,e,r,ed,n),uv(t,r);else if(gA(s,t,e,n,r))r.stopPropagation();else if(uv(t,r),e&4&&-1<mA.indexOf(t)){for(;s!==null;){var i=lc(s);if(i!==null&&Gb(i),i=Ep(t,e,n,r),i===null&&wf(t,e,r,ed,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else wf(t,e,r,null,n)}}var ed=null;function Ep(t,e,n,r){if(ed=null,t=Zm(r),t=hi(t),t!==null)if(e=Bi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ub(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ed=t,null}function Zb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oA()){case eg:return 1;case Hb:return 4;case Xu:case aA:return 16;case Wb:return 536870912;default:return 16}default:return 16}}var gs=null,sg=null,Iu=null;function ek(){if(Iu)return Iu;var t,e=sg,n=e.length,r,s="value"in gs?gs.value:gs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Iu=s.slice(t,1<r?1-r:void 0)}function Su(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wc(){return!0}function hv(){return!1}function Sn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wc:hv,this.isPropagationStopped=hv,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),e}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ig=Sn(Jo),ac=Ke({},Jo,{view:0,detail:0}),wA=Sn(ac),df,hf,Ca,Xd=Ke({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:og,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ca&&(Ca&&t.type==="mousemove"?(df=t.screenX-Ca.screenX,hf=t.screenY-Ca.screenY):hf=df=0,Ca=t),df)},movementY:function(t){return"movementY"in t?t.movementY:hf}}),fv=Sn(Xd),xA=Ke({},Xd,{dataTransfer:0}),bA=Sn(xA),kA=Ke({},ac,{relatedTarget:0}),ff=Sn(kA),EA=Ke({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),TA=Sn(EA),IA=Ke({},Jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SA=Sn(IA),CA=Ke({},Jo,{data:0}),pv=Sn(CA),AA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=RA[t])?!!e[t]:!1}function og(){return NA}var DA=Ke({},ac,{key:function(t){if(t.key){var e=AA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Su(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:og,charCode:function(t){return t.type==="keypress"?Su(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Su(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MA=Sn(DA),OA=Ke({},Xd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mv=Sn(OA),LA=Ke({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:og}),jA=Sn(LA),VA=Ke({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),FA=Sn(VA),UA=Ke({},Xd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BA=Sn(UA),zA=[9,13,27,32],ag=Br&&"CompositionEvent"in window,tl=null;Br&&"documentMode"in document&&(tl=document.documentMode);var $A=Br&&"TextEvent"in window&&!tl,tk=Br&&(!ag||tl&&8<tl&&11>=tl),gv=" ",yv=!1;function nk(t,e){switch(t){case"keyup":return zA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ao=!1;function HA(t,e){switch(t){case"compositionend":return rk(e);case"keypress":return e.which!==32?null:(yv=!0,gv);case"textInput":return t=e.data,t===gv&&yv?null:t;default:return null}}function WA(t,e){if(ao)return t==="compositionend"||!ag&&nk(t,e)?(t=ek(),Iu=sg=gs=null,ao=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tk&&e.locale!=="ko"?null:e.data;default:return null}}var qA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qA[t.type]:e==="textarea"}function sk(t,e,n,r){Ob(r),e=td(e,"onChange"),0<e.length&&(n=new ig("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nl=null,Al=null;function KA(t){mk(t,0)}function Jd(t){var e=uo(t);if(Cb(e))return t}function GA(t,e){if(t==="change")return e}var ik=!1;if(Br){var pf;if(Br){var mf="oninput"in document;if(!mf){var _v=document.createElement("div");_v.setAttribute("oninput","return;"),mf=typeof _v.oninput=="function"}pf=mf}else pf=!1;ik=pf&&(!document.documentMode||9<document.documentMode)}function wv(){nl&&(nl.detachEvent("onpropertychange",ok),Al=nl=null)}function ok(t){if(t.propertyName==="value"&&Jd(Al)){var e=[];sk(e,Al,t,Zm(t)),Fb(KA,e)}}function QA(t,e,n){t==="focusin"?(wv(),nl=e,Al=n,nl.attachEvent("onpropertychange",ok)):t==="focusout"&&wv()}function YA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jd(Al)}function XA(t,e){if(t==="click")return Jd(e)}function JA(t,e){if(t==="input"||t==="change")return Jd(e)}function ZA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:ZA;function Pl(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!op.call(e,s)||!rr(t[s],e[s]))return!1}return!0}function xv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bv(t,e){var n=xv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xv(n)}}function ak(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ak(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lk(){for(var t=window,e=Gu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gu(t.document)}return e}function lg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eP(t){var e=lk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ak(n.ownerDocument.documentElement,n)){if(r!==null&&lg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=bv(n,i);var o=bv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tP=Br&&"documentMode"in document&&11>=document.documentMode,lo=null,Tp=null,rl=null,Ip=!1;function kv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ip||lo==null||lo!==Gu(r)||(r=lo,"selectionStart"in r&&lg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rl&&Pl(rl,r)||(rl=r,r=td(Tp,"onSelect"),0<r.length&&(e=new ig("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lo)))}function qc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var co={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},gf={},ck={};Br&&(ck=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function Zd(t){if(gf[t])return gf[t];if(!co[t])return t;var e=co[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ck)return gf[t]=e[n];return t}var uk=Zd("animationend"),dk=Zd("animationiteration"),hk=Zd("animationstart"),fk=Zd("transitionend"),pk=new Map,Ev="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hs(t,e){pk.set(t,e),Ui(e,[t])}for(var yf=0;yf<Ev.length;yf++){var vf=Ev[yf],nP=vf.toLowerCase(),rP=vf[0].toUpperCase()+vf.slice(1);Hs(nP,"on"+rP)}Hs(uk,"onAnimationEnd");Hs(dk,"onAnimationIteration");Hs(hk,"onAnimationStart");Hs("dblclick","onDoubleClick");Hs("focusin","onFocus");Hs("focusout","onBlur");Hs(fk,"onTransitionEnd");No("onMouseEnter",["mouseout","mouseover"]);No("onMouseLeave",["mouseout","mouseover"]);No("onPointerEnter",["pointerout","pointerover"]);No("onPointerLeave",["pointerout","pointerover"]);Ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sP=new Set("cancel close invalid load scroll toggle".split(" ").concat(za));function Tv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nA(r,e,void 0,t),t.currentTarget=null}function mk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Tv(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Tv(s,a,c),i=l}}}if(Yu)throw t=xp,Yu=!1,xp=null,t}function Ve(t,e){var n=e[Rp];n===void 0&&(n=e[Rp]=new Set);var r=t+"__bubble";n.has(r)||(gk(e,t,2,!1),n.add(r))}function _f(t,e,n){var r=0;e&&(r|=4),gk(n,t,r,e)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function Rl(t){if(!t[Kc]){t[Kc]=!0,kb.forEach(function(n){n!=="selectionchange"&&(sP.has(n)||_f(n,!1,t),_f(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kc]||(e[Kc]=!0,_f("selectionchange",!1,e))}}function gk(t,e,n,r){switch(Zb(e)){case 1:var s=vA;break;case 4:s=_A;break;default:s=rg}n=s.bind(null,e,n,t),s=void 0,!wp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function wf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=hi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Fb(function(){var c=i,d=Zm(n),f=[];e:{var m=pk.get(t);if(m!==void 0){var y=ig,x=t;switch(t){case"keypress":if(Su(n)===0)break e;case"keydown":case"keyup":y=MA;break;case"focusin":x="focus",y=ff;break;case"focusout":x="blur",y=ff;break;case"beforeblur":case"afterblur":y=ff;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=bA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=jA;break;case uk:case dk:case hk:y=TA;break;case fk:y=FA;break;case"scroll":y=wA;break;case"wheel":y=BA;break;case"copy":case"cut":case"paste":y=SA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=mv}var k=(e&4)!==0,E=!k&&t==="scroll",v=k?m!==null?m+"Capture":null:m;k=[];for(var _=c,b;_!==null;){b=_;var P=b.stateNode;if(b.tag===5&&P!==null&&(b=P,v!==null&&(P=Tl(_,v),P!=null&&k.push(Nl(_,P,b)))),E)break;_=_.return}0<k.length&&(m=new y(m,x,null,n,d),f.push({event:m,listeners:k}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==vp&&(x=n.relatedTarget||n.fromElement)&&(hi(x)||x[zr]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=c,x=x?hi(x):null,x!==null&&(E=Bi(x),x!==E||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=c),y!==x)){if(k=fv,P="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=mv,P="onPointerLeave",v="onPointerEnter",_="pointer"),E=y==null?m:uo(y),b=x==null?m:uo(x),m=new k(P,_+"leave",y,n,d),m.target=E,m.relatedTarget=b,P=null,hi(d)===c&&(k=new k(v,_+"enter",x,n,d),k.target=b,k.relatedTarget=E,P=k),E=P,y&&x)t:{for(k=y,v=x,_=0,b=k;b;b=Zi(b))_++;for(b=0,P=v;P;P=Zi(P))b++;for(;0<_-b;)k=Zi(k),_--;for(;0<b-_;)v=Zi(v),b--;for(;_--;){if(k===v||v!==null&&k===v.alternate)break t;k=Zi(k),v=Zi(v)}k=null}else k=null;y!==null&&Iv(f,m,y,k,!1),x!==null&&E!==null&&Iv(f,E,x,k,!0)}}e:{if(m=c?uo(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var N=GA;else if(vv(m))if(ik)N=JA;else{N=YA;var M=QA}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=XA);if(N&&(N=N(t,c))){sk(f,N,n,d);break e}M&&M(t,m,c),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&fp(m,"number",m.value)}switch(M=c?uo(c):window,t){case"focusin":(vv(M)||M.contentEditable==="true")&&(lo=M,Tp=c,rl=null);break;case"focusout":rl=Tp=lo=null;break;case"mousedown":Ip=!0;break;case"contextmenu":case"mouseup":case"dragend":Ip=!1,kv(f,n,d);break;case"selectionchange":if(tP)break;case"keydown":case"keyup":kv(f,n,d)}var T;if(ag)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ao?nk(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(tk&&n.locale!=="ko"&&(ao||w!=="onCompositionStart"?w==="onCompositionEnd"&&ao&&(T=ek()):(gs=d,sg="value"in gs?gs.value:gs.textContent,ao=!0)),M=td(c,w),0<M.length&&(w=new pv(w,t,null,n,d),f.push({event:w,listeners:M}),T?w.data=T:(T=rk(n),T!==null&&(w.data=T)))),(T=$A?HA(t,n):WA(t,n))&&(c=td(c,"onBeforeInput"),0<c.length&&(d=new pv("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=T))}mk(f,e)})}function Nl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function td(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Tl(t,n),i!=null&&r.unshift(Nl(t,i,s)),i=Tl(t,e),i!=null&&r.push(Nl(t,i,s))),t=t.return}return r}function Zi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Iv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Tl(n,i),l!=null&&o.unshift(Nl(n,l,a))):s||(l=Tl(n,i),l!=null&&o.push(Nl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var iP=/\r\n?/g,oP=/\u0000|\uFFFD/g;function Sv(t){return(typeof t=="string"?t:""+t).replace(iP,`
`).replace(oP,"")}function Gc(t,e,n){if(e=Sv(e),Sv(t)!==e&&n)throw Error(z(425))}function nd(){}var Sp=null,Cp=null;function Ap(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pp=typeof setTimeout=="function"?setTimeout:void 0,aP=typeof clearTimeout=="function"?clearTimeout:void 0,Cv=typeof Promise=="function"?Promise:void 0,lP=typeof queueMicrotask=="function"?queueMicrotask:typeof Cv<"u"?function(t){return Cv.resolve(null).then(t).catch(cP)}:Pp;function cP(t){setTimeout(function(){throw t})}function xf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Cl(e)}function Is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Av(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),mr="__reactFiber$"+Zo,Dl="__reactProps$"+Zo,zr="__reactContainer$"+Zo,Rp="__reactEvents$"+Zo,uP="__reactListeners$"+Zo,dP="__reactHandles$"+Zo;function hi(t){var e=t[mr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zr]||n[mr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Av(t);t!==null;){if(n=t[mr])return n;t=Av(t)}return e}t=n,n=t.parentNode}return null}function lc(t){return t=t[mr]||t[zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function eh(t){return t[Dl]||null}var Np=[],ho=-1;function Ws(t){return{current:t}}function Be(t){0>ho||(t.current=Np[ho],Np[ho]=null,ho--)}function Oe(t,e){ho++,Np[ho]=t.current,t.current=e}var js={},Vt=Ws(js),ln=Ws(!1),Ii=js;function Do(t,e){var n=t.type.contextTypes;if(!n)return js;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function cn(t){return t=t.childContextTypes,t!=null}function rd(){Be(ln),Be(Vt)}function Pv(t,e,n){if(Vt.current!==js)throw Error(z(168));Oe(Vt,e),Oe(ln,n)}function yk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,QC(t)||"Unknown",s));return Ke({},n,r)}function sd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||js,Ii=Vt.current,Oe(Vt,t),Oe(ln,ln.current),!0}function Rv(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=yk(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,Be(ln),Be(Vt),Oe(Vt,t)):Be(ln),Oe(ln,n)}var Ar=null,th=!1,bf=!1;function vk(t){Ar===null?Ar=[t]:Ar.push(t)}function hP(t){th=!0,vk(t)}function qs(){if(!bf&&Ar!==null){bf=!0;var t=0,e=Pe;try{var n=Ar;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ar=null,th=!1}catch(s){throw Ar!==null&&(Ar=Ar.slice(t+1)),$b(eg,qs),s}finally{Pe=e,bf=!1}}return null}var fo=[],po=0,id=null,od=0,Rn=[],Nn=0,Si=null,Nr=1,Dr="";function ai(t,e){fo[po++]=od,fo[po++]=id,id=t,od=e}function _k(t,e,n){Rn[Nn++]=Nr,Rn[Nn++]=Dr,Rn[Nn++]=Si,Si=t;var r=Nr;t=Dr;var s=32-Zn(r)-1;r&=~(1<<s),n+=1;var i=32-Zn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Nr=1<<32-Zn(e)+s|n<<s|r,Dr=i+t}else Nr=1<<i|n<<s|r,Dr=t}function cg(t){t.return!==null&&(ai(t,1),_k(t,1,0))}function ug(t){for(;t===id;)id=fo[--po],fo[po]=null,od=fo[--po],fo[po]=null;for(;t===Si;)Si=Rn[--Nn],Rn[Nn]=null,Dr=Rn[--Nn],Rn[Nn]=null,Nr=Rn[--Nn],Rn[Nn]=null}var kn=null,wn=null,ze=!1,Qn=null;function wk(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kn=t,wn=Is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kn=t,wn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Si!==null?{id:Nr,overflow:Dr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kn=t,wn=null,!0):!1;default:return!1}}function Dp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mp(t){if(ze){var e=wn;if(e){var n=e;if(!Nv(t,e)){if(Dp(t))throw Error(z(418));e=Is(n.nextSibling);var r=kn;e&&Nv(t,e)?wk(r,n):(t.flags=t.flags&-4097|2,ze=!1,kn=t)}}else{if(Dp(t))throw Error(z(418));t.flags=t.flags&-4097|2,ze=!1,kn=t}}}function Dv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kn=t}function Qc(t){if(t!==kn)return!1;if(!ze)return Dv(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ap(t.type,t.memoizedProps)),e&&(e=wn)){if(Dp(t))throw xk(),Error(z(418));for(;e;)wk(t,e),e=Is(e.nextSibling)}if(Dv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wn=Is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wn=null}}else wn=kn?Is(t.stateNode.nextSibling):null;return!0}function xk(){for(var t=wn;t;)t=Is(t.nextSibling)}function Mo(){wn=kn=null,ze=!1}function dg(t){Qn===null?Qn=[t]:Qn.push(t)}var fP=Qr.ReactCurrentBatchConfig;function Aa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Yc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mv(t){var e=t._init;return e(t._payload)}function bk(t){function e(v,_){if(t){var b=v.deletions;b===null?(v.deletions=[_],v.flags|=16):b.push(_)}}function n(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function r(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function s(v,_){return v=Ps(v,_),v.index=0,v.sibling=null,v}function i(v,_,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<_?(v.flags|=2,_):b):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,_,b,P){return _===null||_.tag!==6?(_=Af(b,v.mode,P),_.return=v,_):(_=s(_,b),_.return=v,_)}function l(v,_,b,P){var N=b.type;return N===oo?d(v,_,b.props.children,P,b.key):_!==null&&(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ls&&Mv(N)===_.type)?(P=s(_,b.props),P.ref=Aa(v,_,b),P.return=v,P):(P=Mu(b.type,b.key,b.props,null,v.mode,P),P.ref=Aa(v,_,b),P.return=v,P)}function c(v,_,b,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==b.containerInfo||_.stateNode.implementation!==b.implementation?(_=Pf(b,v.mode,P),_.return=v,_):(_=s(_,b.children||[]),_.return=v,_)}function d(v,_,b,P,N){return _===null||_.tag!==7?(_=bi(b,v.mode,P,N),_.return=v,_):(_=s(_,b),_.return=v,_)}function f(v,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Af(""+_,v.mode,b),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fc:return b=Mu(_.type,_.key,_.props,null,v.mode,b),b.ref=Aa(v,null,_),b.return=v,b;case io:return _=Pf(_,v.mode,b),_.return=v,_;case ls:var P=_._init;return f(v,P(_._payload),b)}if(Ua(_)||Ea(_))return _=bi(_,v.mode,b,null),_.return=v,_;Yc(v,_)}return null}function m(v,_,b,P){var N=_!==null?_.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return N!==null?null:a(v,_,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fc:return b.key===N?l(v,_,b,P):null;case io:return b.key===N?c(v,_,b,P):null;case ls:return N=b._init,m(v,_,N(b._payload),P)}if(Ua(b)||Ea(b))return N!==null?null:d(v,_,b,P,null);Yc(v,b)}return null}function y(v,_,b,P,N){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(b)||null,a(_,v,""+P,N);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Fc:return v=v.get(P.key===null?b:P.key)||null,l(_,v,P,N);case io:return v=v.get(P.key===null?b:P.key)||null,c(_,v,P,N);case ls:var M=P._init;return y(v,_,b,M(P._payload),N)}if(Ua(P)||Ea(P))return v=v.get(b)||null,d(_,v,P,N,null);Yc(_,P)}return null}function x(v,_,b,P){for(var N=null,M=null,T=_,w=_=0,C=null;T!==null&&w<b.length;w++){T.index>w?(C=T,T=null):C=T.sibling;var A=m(v,T,b[w],P);if(A===null){T===null&&(T=C);break}t&&T&&A.alternate===null&&e(v,T),_=i(A,_,w),M===null?N=A:M.sibling=A,M=A,T=C}if(w===b.length)return n(v,T),ze&&ai(v,w),N;if(T===null){for(;w<b.length;w++)T=f(v,b[w],P),T!==null&&(_=i(T,_,w),M===null?N=T:M.sibling=T,M=T);return ze&&ai(v,w),N}for(T=r(v,T);w<b.length;w++)C=y(T,v,w,b[w],P),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?w:C.key),_=i(C,_,w),M===null?N=C:M.sibling=C,M=C);return t&&T.forEach(function(R){return e(v,R)}),ze&&ai(v,w),N}function k(v,_,b,P){var N=Ea(b);if(typeof N!="function")throw Error(z(150));if(b=N.call(b),b==null)throw Error(z(151));for(var M=N=null,T=_,w=_=0,C=null,A=b.next();T!==null&&!A.done;w++,A=b.next()){T.index>w?(C=T,T=null):C=T.sibling;var R=m(v,T,A.value,P);if(R===null){T===null&&(T=C);break}t&&T&&R.alternate===null&&e(v,T),_=i(R,_,w),M===null?N=R:M.sibling=R,M=R,T=C}if(A.done)return n(v,T),ze&&ai(v,w),N;if(T===null){for(;!A.done;w++,A=b.next())A=f(v,A.value,P),A!==null&&(_=i(A,_,w),M===null?N=A:M.sibling=A,M=A);return ze&&ai(v,w),N}for(T=r(v,T);!A.done;w++,A=b.next())A=y(T,v,w,A.value,P),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?w:A.key),_=i(A,_,w),M===null?N=A:M.sibling=A,M=A);return t&&T.forEach(function(O){return e(v,O)}),ze&&ai(v,w),N}function E(v,_,b,P){if(typeof b=="object"&&b!==null&&b.type===oo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Fc:e:{for(var N=b.key,M=_;M!==null;){if(M.key===N){if(N=b.type,N===oo){if(M.tag===7){n(v,M.sibling),_=s(M,b.props.children),_.return=v,v=_;break e}}else if(M.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ls&&Mv(N)===M.type){n(v,M.sibling),_=s(M,b.props),_.ref=Aa(v,M,b),_.return=v,v=_;break e}n(v,M);break}else e(v,M);M=M.sibling}b.type===oo?(_=bi(b.props.children,v.mode,P,b.key),_.return=v,v=_):(P=Mu(b.type,b.key,b.props,null,v.mode,P),P.ref=Aa(v,_,b),P.return=v,v=P)}return o(v);case io:e:{for(M=b.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===b.containerInfo&&_.stateNode.implementation===b.implementation){n(v,_.sibling),_=s(_,b.children||[]),_.return=v,v=_;break e}else{n(v,_);break}else e(v,_);_=_.sibling}_=Pf(b,v.mode,P),_.return=v,v=_}return o(v);case ls:return M=b._init,E(v,_,M(b._payload),P)}if(Ua(b))return x(v,_,b,P);if(Ea(b))return k(v,_,b,P);Yc(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_!==null&&_.tag===6?(n(v,_.sibling),_=s(_,b),_.return=v,v=_):(n(v,_),_=Af(b,v.mode,P),_.return=v,v=_),o(v)):n(v,_)}return E}var Oo=bk(!0),kk=bk(!1),ad=Ws(null),ld=null,mo=null,hg=null;function fg(){hg=mo=ld=null}function pg(t){var e=ad.current;Be(ad),t._currentValue=e}function Op(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ko(t,e){ld=t,hg=mo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(rn=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(hg!==t)if(t={context:t,memoizedValue:e,next:null},mo===null){if(ld===null)throw Error(z(308));mo=t,ld.dependencies={lanes:0,firstContext:t}}else mo=mo.next=t;return e}var fi=null;function mg(t){fi===null?fi=[t]:fi.push(t)}function Ek(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,mg(e)):(n.next=s.next,s.next=n),e.interleaved=n,$r(t,r)}function $r(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cs=!1;function gg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$r(t,n)}return s=r.interleaved,s===null?(e.next=e,mg(r)):(e.next=s.next,s.next=e),r.interleaved=e,$r(t,n)}function Cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tg(t,n)}}function Ov(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cd(t,e,n,r){var s=t.updateQueue;cs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,d=c=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,k=a;switch(m=e,y=n,k.tag){case 1:if(x=k.payload,typeof x=="function"){f=x.call(y,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=k.payload,m=typeof x=="function"?x.call(y,f,m):x,m==null)break e;f=Ke({},f,m);break e;case 2:cs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=f):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ai|=o,t.lanes=o,t.memoizedState=f}}function Lv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var cc={},vr=Ws(cc),Ml=Ws(cc),Ol=Ws(cc);function pi(t){if(t===cc)throw Error(z(174));return t}function yg(t,e){switch(Oe(Ol,e),Oe(Ml,t),Oe(vr,cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mp(e,t)}Be(vr),Oe(vr,e)}function Lo(){Be(vr),Be(Ml),Be(Ol)}function Ik(t){pi(Ol.current);var e=pi(vr.current),n=mp(e,t.type);e!==n&&(Oe(Ml,t),Oe(vr,n))}function vg(t){Ml.current===t&&(Be(vr),Be(Ml))}var He=Ws(0);function ud(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kf=[];function _g(){for(var t=0;t<kf.length;t++)kf[t]._workInProgressVersionPrimary=null;kf.length=0}var Au=Qr.ReactCurrentDispatcher,Ef=Qr.ReactCurrentBatchConfig,Ci=0,We=null,ft=null,gt=null,dd=!1,sl=!1,Ll=0,pP=0;function Rt(){throw Error(z(321))}function wg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function xg(t,e,n,r,s,i){if(Ci=i,We=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Au.current=t===null||t.memoizedState===null?vP:_P,t=n(r,s),sl){i=0;do{if(sl=!1,Ll=0,25<=i)throw Error(z(301));i+=1,gt=ft=null,e.updateQueue=null,Au.current=wP,t=n(r,s)}while(sl)}if(Au.current=hd,e=ft!==null&&ft.next!==null,Ci=0,gt=ft=We=null,dd=!1,e)throw Error(z(300));return t}function bg(){var t=Ll!==0;return Ll=0,t}function hr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?We.memoizedState=gt=t:gt=gt.next=t,gt}function Vn(){if(ft===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var e=gt===null?We.memoizedState:gt.next;if(e!==null)gt=e,ft=t;else{if(t===null)throw Error(z(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},gt===null?We.memoizedState=gt=t:gt=gt.next=t}return gt}function jl(t,e){return typeof e=="function"?e(t):e}function Tf(t){var e=Vn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ft,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Ci&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,We.lanes|=d,Ai|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,rr(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,We.lanes|=i,Ai|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function If(t){var e=Vn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);rr(i,e.memoizedState)||(rn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Sk(){}function Ck(t,e){var n=We,r=Vn(),s=e(),i=!rr(r.memoizedState,s);if(i&&(r.memoizedState=s,rn=!0),r=r.queue,kg(Rk.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,Vl(9,Pk.bind(null,n,r,s,e),void 0,null),vt===null)throw Error(z(349));Ci&30||Ak(n,e,s)}return s}function Ak(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Pk(t,e,n,r){e.value=n,e.getSnapshot=r,Nk(e)&&Dk(t)}function Rk(t,e,n){return n(function(){Nk(e)&&Dk(t)})}function Nk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function Dk(t){var e=$r(t,1);e!==null&&er(e,t,1,-1)}function jv(t){var e=hr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:t},e.queue=t,t=t.dispatch=yP.bind(null,We,t),[e.memoizedState,t]}function Vl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=We.updateQueue,e===null?(e={lastEffect:null,stores:null},We.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Mk(){return Vn().memoizedState}function Pu(t,e,n,r){var s=hr();We.flags|=t,s.memoizedState=Vl(1|e,n,void 0,r===void 0?null:r)}function nh(t,e,n,r){var s=Vn();r=r===void 0?null:r;var i=void 0;if(ft!==null){var o=ft.memoizedState;if(i=o.destroy,r!==null&&wg(r,o.deps)){s.memoizedState=Vl(e,n,i,r);return}}We.flags|=t,s.memoizedState=Vl(1|e,n,i,r)}function Vv(t,e){return Pu(8390656,8,t,e)}function kg(t,e){return nh(2048,8,t,e)}function Ok(t,e){return nh(4,2,t,e)}function Lk(t,e){return nh(4,4,t,e)}function jk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vk(t,e,n){return n=n!=null?n.concat([t]):null,nh(4,4,jk.bind(null,e,t),n)}function Eg(){}function Fk(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Uk(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Bk(t,e,n){return Ci&21?(rr(n,e)||(n=qb(),We.lanes|=n,Ai|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,rn=!0),t.memoizedState=n)}function mP(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=Ef.transition;Ef.transition={};try{t(!1),e()}finally{Pe=n,Ef.transition=r}}function zk(){return Vn().memoizedState}function gP(t,e,n){var r=As(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$k(t))Hk(e,n);else if(n=Ek(t,e,n,r),n!==null){var s=Qt();er(n,t,r,s),Wk(n,e,r)}}function yP(t,e,n){var r=As(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($k(t))Hk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,rr(a,o)){var l=e.interleaved;l===null?(s.next=s,mg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Ek(t,e,s,r),n!==null&&(s=Qt(),er(n,t,r,s),Wk(n,e,r))}}function $k(t){var e=t.alternate;return t===We||e!==null&&e===We}function Hk(t,e){sl=dd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Wk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,tg(t,n)}}var hd={readContext:jn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},vP={readContext:jn,useCallback:function(t,e){return hr().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:Vv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pu(4194308,4,jk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pu(4,2,t,e)},useMemo:function(t,e){var n=hr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gP.bind(null,We,t),[r.memoizedState,t]},useRef:function(t){var e=hr();return t={current:t},e.memoizedState=t},useState:jv,useDebugValue:Eg,useDeferredValue:function(t){return hr().memoizedState=t},useTransition:function(){var t=jv(!1),e=t[0];return t=mP.bind(null,t[1]),hr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=We,s=hr();if(ze){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),vt===null)throw Error(z(349));Ci&30||Ak(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vv(Rk.bind(null,r,i,t),[t]),r.flags|=2048,Vl(9,Pk.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hr(),e=vt.identifierPrefix;if(ze){var n=Dr,r=Nr;n=(r&~(1<<32-Zn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ll++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_P={readContext:jn,useCallback:Fk,useContext:jn,useEffect:kg,useImperativeHandle:Vk,useInsertionEffect:Ok,useLayoutEffect:Lk,useMemo:Uk,useReducer:Tf,useRef:Mk,useState:function(){return Tf(jl)},useDebugValue:Eg,useDeferredValue:function(t){var e=Vn();return Bk(e,ft.memoizedState,t)},useTransition:function(){var t=Tf(jl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:Sk,useSyncExternalStore:Ck,useId:zk,unstable_isNewReconciler:!1},wP={readContext:jn,useCallback:Fk,useContext:jn,useEffect:kg,useImperativeHandle:Vk,useInsertionEffect:Ok,useLayoutEffect:Lk,useMemo:Uk,useReducer:If,useRef:Mk,useState:function(){return If(jl)},useDebugValue:Eg,useDeferredValue:function(t){var e=Vn();return ft===null?e.memoizedState=t:Bk(e,ft.memoizedState,t)},useTransition:function(){var t=If(jl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:Sk,useSyncExternalStore:Ck,useId:zk,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rh={isMounted:function(t){return(t=t._reactInternals)?Bi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Qt(),s=As(t),i=jr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ss(t,i,s),e!==null&&(er(e,t,s,r),Cu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Qt(),s=As(t),i=jr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ss(t,i,s),e!==null&&(er(e,t,s,r),Cu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Qt(),r=As(t),s=jr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ss(t,s,r),e!==null&&(er(e,t,r,n),Cu(e,t,r))}};function Fv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Pl(n,r)||!Pl(s,i):!0}function qk(t,e,n){var r=!1,s=js,i=e.contextType;return typeof i=="object"&&i!==null?i=jn(i):(s=cn(e)?Ii:Vt.current,r=e.contextTypes,i=(r=r!=null)?Do(t,s):js),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Uv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rh.enqueueReplaceState(e,e.state,null)}function jp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},gg(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=jn(i):(i=cn(e)?Ii:Vt.current,s.context=Do(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Lp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rh.enqueueReplaceState(s,s.state,null),cd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function jo(t,e){try{var n="",r=e;do n+=GC(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Sf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xP=typeof WeakMap=="function"?WeakMap:Map;function Kk(t,e,n){n=jr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pd||(pd=!0,Gp=r),Vp(t,e)},n}function Gk(t,e,n){n=jr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Vp(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Vp(t,e),typeof r!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Bv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xP;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=OP.bind(null,t,e,n),e.then(t,t))}function zv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $v(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jr(-1,1),e.tag=2,Ss(n,e,1))),n.lanes|=1),t)}var bP=Qr.ReactCurrentOwner,rn=!1;function Gt(t,e,n,r){e.child=t===null?kk(e,null,n,r):Oo(e,t.child,n,r)}function Hv(t,e,n,r,s){n=n.render;var i=e.ref;return ko(e,s),r=xg(t,e,n,r,i,s),n=bg(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hr(t,e,s)):(ze&&n&&cg(e),e.flags|=1,Gt(t,e,r,s),e.child)}function Wv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ng(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Qk(t,e,i,r,s)):(t=Mu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Pl,n(o,r)&&t.ref===e.ref)return Hr(t,e,s)}return e.flags|=1,t=Ps(i,r),t.ref=e.ref,t.return=e,e.child=t}function Qk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Pl(i,r)&&t.ref===e.ref)if(rn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(rn=!0);else return e.lanes=t.lanes,Hr(t,e,s)}return Fp(t,e,n,r,s)}function Yk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(yo,_n),_n|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(yo,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Oe(yo,_n),_n|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Oe(yo,_n),_n|=r;return Gt(t,e,s,n),e.child}function Xk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fp(t,e,n,r,s){var i=cn(n)?Ii:Vt.current;return i=Do(e,i),ko(e,s),n=xg(t,e,n,r,i,s),r=bg(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Hr(t,e,s)):(ze&&r&&cg(e),e.flags|=1,Gt(t,e,n,s),e.child)}function qv(t,e,n,r,s){if(cn(n)){var i=!0;sd(e)}else i=!1;if(ko(e,s),e.stateNode===null)Ru(t,e),qk(e,n,r),jp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=jn(c):(c=cn(n)?Ii:Vt.current,c=Do(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Uv(e,o,r,c),cs=!1;var m=e.memoizedState;o.state=m,cd(e,r,o,s),l=e.memoizedState,a!==r||m!==l||ln.current||cs?(typeof d=="function"&&(Lp(e,n,d,r),l=e.memoizedState),(a=cs||Fv(e,n,a,r,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Tk(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Kn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=jn(l):(l=cn(n)?Ii:Vt.current,l=Do(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&Uv(e,o,r,l),cs=!1,m=e.memoizedState,o.state=m,cd(e,r,o,s);var x=e.memoizedState;a!==f||m!==x||ln.current||cs?(typeof y=="function"&&(Lp(e,n,y,r),x=e.memoizedState),(c=cs||Fv(e,n,c,r,m,x,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Up(t,e,n,r,i,s)}function Up(t,e,n,r,s,i){Xk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Rv(e,n,!1),Hr(t,e,i);r=e.stateNode,bP.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Oo(e,t.child,null,i),e.child=Oo(e,null,a,i)):Gt(t,e,a,i),e.memoizedState=r.state,s&&Rv(e,n,!0),e.child}function Jk(t){var e=t.stateNode;e.pendingContext?Pv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pv(t,e.context,!1),yg(t,e.containerInfo)}function Kv(t,e,n,r,s){return Mo(),dg(s),e.flags|=256,Gt(t,e,n,r),e.child}var Bp={dehydrated:null,treeContext:null,retryLane:0};function zp(t){return{baseLanes:t,cachePool:null,transitions:null}}function Zk(t,e,n){var r=e.pendingProps,s=He.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Oe(He,s&1),t===null)return Mp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=oh(o,r,0,null),t=bi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zp(n),e.memoizedState=Bp,t):Tg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return kP(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ps(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ps(a,i):(i=bi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?zp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Bp,r}return i=t.child,t=i.sibling,r=Ps(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tg(t,e){return e=oh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xc(t,e,n,r){return r!==null&&dg(r),Oo(e,t.child,null,n),t=Tg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kP(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Sf(Error(z(422))),Xc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=oh({mode:"visible",children:r.children},s,0,null),i=bi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Oo(e,t.child,null,o),e.child.memoizedState=zp(o),e.memoizedState=Bp,i);if(!(e.mode&1))return Xc(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=Sf(i,r,void 0),Xc(t,e,o,r)}if(a=(o&t.childLanes)!==0,rn||a){if(r=vt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$r(t,s),er(r,t,s,-1))}return Rg(),r=Sf(Error(z(421))),Xc(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,wn=Is(s.nextSibling),kn=e,ze=!0,Qn=null,t!==null&&(Rn[Nn++]=Nr,Rn[Nn++]=Dr,Rn[Nn++]=Si,Nr=t.id,Dr=t.overflow,Si=e),e=Tg(e,r.children),e.flags|=4096,e)}function Gv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Op(t.return,e,n)}function Cf(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function eE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Gt(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gv(t,n,e);else if(t.tag===19)Gv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(He,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ud(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Cf(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ud(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Cf(e,!0,n,null,i);break;case"together":Cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ai|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function EP(t,e,n){switch(e.tag){case 3:Jk(e),Mo();break;case 5:Ik(e);break;case 1:cn(e.type)&&sd(e);break;case 4:yg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Oe(ad,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?Zk(t,e,n):(Oe(He,He.current&1),t=Hr(t,e,n),t!==null?t.sibling:null);Oe(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return eE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,Yk(t,e,n)}return Hr(t,e,n)}var tE,$p,nE,rE;tE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$p=function(){};nE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,pi(vr.current);var i=null;switch(n){case"input":s=dp(t,s),r=dp(t,r),i=[];break;case"select":s=Ke({},s,{value:void 0}),r=Ke({},r,{value:void 0}),i=[];break;case"textarea":s=pp(t,s),r=pp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nd)}gp(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kl.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(kl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ve("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};rE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pa(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function TP(t,e,n){var r=e.pendingProps;switch(ug(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return cn(e.type)&&rd(),Nt(e),null;case 3:return r=e.stateNode,Lo(),Be(ln),Be(Vt),_g(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(Xp(Qn),Qn=null))),$p(t,e),Nt(e),null;case 5:vg(e);var s=pi(Ol.current);if(n=e.type,t!==null&&e.stateNode!=null)nE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Nt(e),null}if(t=pi(vr.current),Qc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[mr]=e,r[Dl]=i,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(s=0;s<za.length;s++)Ve(za[s],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":rv(r,i),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",r);break;case"textarea":iv(r,i),Ve("invalid",r)}gp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Gc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Gc(r.textContent,a,t),s=["children",""+a]):kl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":Uc(r),sv(r,i,!0);break;case"textarea":Uc(r),ov(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=nd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mr]=e,t[Dl]=r,tE(t,e,!1,!1),e.stateNode=t;e:{switch(o=yp(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),s=r;break;case"iframe":case"object":case"embed":Ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<za.length;s++)Ve(za[s],t);s=r;break;case"source":Ve("error",t),s=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),s=r;break;case"details":Ve("toggle",t),s=r;break;case"input":rv(t,r),s=dp(t,r),Ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ke({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":iv(t,r),s=pp(t,r),Ve("invalid",t);break;default:s=r}gp(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Mb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Nb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&El(t,l):typeof l=="number"&&El(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(kl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ve("scroll",t):l!=null&&Qm(t,i,l,o))}switch(n){case"input":Uc(t),sv(t,r,!1);break;case"textarea":Uc(t),ov(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ls(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_o(t,!!r.multiple,i,!1):r.defaultValue!=null&&_o(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=nd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)rE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=pi(Ol.current),pi(vr.current),Qc(e)){if(r=e.stateNode,n=e.memoizedProps,r[mr]=e,(i=r.nodeValue!==n)&&(t=kn,t!==null))switch(t.tag){case 3:Gc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mr]=e,e.stateNode=r}return Nt(e),null;case 13:if(Be(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&wn!==null&&e.mode&1&&!(e.flags&128))xk(),Mo(),e.flags|=98560,i=!1;else if(i=Qc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[mr]=e}else Mo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),i=!1}else Qn!==null&&(Xp(Qn),Qn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?pt===0&&(pt=3):Rg())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return Lo(),$p(t,e),t===null&&Rl(e.stateNode.containerInfo),Nt(e),null;case 10:return pg(e.type._context),Nt(e),null;case 17:return cn(e.type)&&rd(),Nt(e),null;case 19:if(Be(He),i=e.memoizedState,i===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Pa(i,!1);else{if(pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ud(t),o!==null){for(e.flags|=128,Pa(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(He,He.current&1|2),e.child}t=t.sibling}i.tail!==null&&it()>Vo&&(e.flags|=128,r=!0,Pa(i,!1),e.lanes=4194304)}else{if(!r)if(t=ud(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ze)return Nt(e),null}else 2*it()-i.renderingStartTime>Vo&&n!==1073741824&&(e.flags|=128,r=!0,Pa(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=it(),e.sibling=null,n=He.current,Oe(He,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return Pg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_n&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function IP(t,e){switch(ug(e),e.tag){case 1:return cn(e.type)&&rd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Lo(),Be(ln),Be(Vt),_g(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vg(e),null;case 13:if(Be(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Mo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(He),null;case 4:return Lo(),null;case 10:return pg(e.type._context),null;case 22:case 23:return Pg(),null;case 24:return null;default:return null}}var Jc=!1,Ot=!1,SP=typeof WeakSet=="function"?WeakSet:Set,X=null;function go(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function Hp(t,e,n){try{n()}catch(r){Je(t,e,r)}}var Qv=!1;function CP(t,e){if(Sp=Zu,t=lk(),lg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++d===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cp={focusedElem:t,selectionRange:n},Zu=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var k=x.memoizedProps,E=x.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?k:Kn(e.type,k),E);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){Je(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return x=Qv,Qv=!1,x}function il(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Hp(e,n,i)}s=s.next}while(s!==r)}}function sh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function sE(t){var e=t.alternate;e!==null&&(t.alternate=null,sE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mr],delete e[Dl],delete e[Rp],delete e[uP],delete e[dP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iE(t){return t.tag===5||t.tag===3||t.tag===4}function Yv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nd));else if(r!==4&&(t=t.child,t!==null))for(qp(t,e,n),t=t.sibling;t!==null;)qp(t,e,n),t=t.sibling}function Kp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kp(t,e,n),t=t.sibling;t!==null;)Kp(t,e,n),t=t.sibling}var wt=null,Gn=!1;function rs(t,e,n){for(n=n.child;n!==null;)oE(t,e,n),n=n.sibling}function oE(t,e,n){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(Yd,n)}catch{}switch(n.tag){case 5:Ot||go(n,e);case 6:var r=wt,s=Gn;wt=null,rs(t,e,n),wt=r,Gn=s,wt!==null&&(Gn?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(Gn?(t=wt,n=n.stateNode,t.nodeType===8?xf(t.parentNode,n):t.nodeType===1&&xf(t,n),Cl(t)):xf(wt,n.stateNode));break;case 4:r=wt,s=Gn,wt=n.stateNode.containerInfo,Gn=!0,rs(t,e,n),wt=r,Gn=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Hp(n,e,o),s=s.next}while(s!==r)}rs(t,e,n);break;case 1:if(!Ot&&(go(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Je(n,e,a)}rs(t,e,n);break;case 21:rs(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,rs(t,e,n),Ot=r):rs(t,e,n);break;default:rs(t,e,n)}}function Xv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SP),e.forEach(function(r){var s=jP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wt=a.stateNode,Gn=!1;break e;case 3:wt=a.stateNode.containerInfo,Gn=!0;break e;case 4:wt=a.stateNode.containerInfo,Gn=!0;break e}a=a.return}if(wt===null)throw Error(z(160));oE(i,o,s),wt=null,Gn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Je(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aE(e,t),e=e.sibling}function aE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),lr(t),r&4){try{il(3,t,t.return),sh(3,t)}catch(k){Je(t,t.return,k)}try{il(5,t,t.return)}catch(k){Je(t,t.return,k)}}break;case 1:qn(e,t),lr(t),r&512&&n!==null&&go(n,n.return);break;case 5:if(qn(e,t),lr(t),r&512&&n!==null&&go(n,n.return),t.flags&32){var s=t.stateNode;try{El(s,"")}catch(k){Je(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ab(s,i),yp(a,o);var c=yp(a,i);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?Mb(s,f):d==="dangerouslySetInnerHTML"?Nb(s,f):d==="children"?El(s,f):Qm(s,d,f,c)}switch(a){case"input":hp(s,i);break;case"textarea":Pb(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?_o(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?_o(s,!!i.multiple,i.defaultValue,!0):_o(s,!!i.multiple,i.multiple?[]:"",!1))}s[Dl]=i}catch(k){Je(t,t.return,k)}}break;case 6:if(qn(e,t),lr(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Je(t,t.return,k)}}break;case 3:if(qn(e,t),lr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(k){Je(t,t.return,k)}break;case 4:qn(e,t),lr(t);break;case 13:qn(e,t),lr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Cg=it())),r&4&&Xv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(c=Ot)||d,qn(e,t),Ot=c):qn(e,t),lr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(X=t,d=t.child;d!==null;){for(f=X=d;X!==null;){switch(m=X,y=m.child,m.tag){case 0:case 11:case 14:case 15:il(4,m,m.return);break;case 1:go(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(k){Je(r,n,k)}}break;case 5:go(m,m.return);break;case 22:if(m.memoizedState!==null){Zv(f);continue}}y!==null?(y.return=m,X=y):Zv(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Db("display",o))}catch(k){Je(t,t.return,k)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(k){Je(t,t.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qn(e,t),lr(t),r&4&&Xv(t);break;case 21:break;default:qn(e,t),lr(t)}}function lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iE(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(El(s,""),r.flags&=-33);var i=Yv(t);Kp(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Yv(t);qp(t,a,o);break;default:throw Error(z(161))}}catch(l){Je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AP(t,e,n){X=t,lE(t)}function lE(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Jc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Ot;a=Jc;var c=Ot;if(Jc=o,(Ot=l)&&!c)for(X=s;X!==null;)o=X,l=o.child,o.tag===22&&o.memoizedState!==null?e_(s):l!==null?(l.return=o,X=l):e_(s);for(;i!==null;)X=i,lE(i),i=i.sibling;X=s,Jc=a,Ot=c}Jv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):Jv(t)}}function Jv(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||sh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Lv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Cl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ot||e.flags&512&&Wp(e)}catch(m){Je(e,e.return,m)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Zv(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function e_(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sh(4,e)}catch(l){Je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Je(e,s,l)}}var i=e.return;try{Wp(e)}catch(l){Je(e,i,l)}break;case 5:var o=e.return;try{Wp(e)}catch(l){Je(e,o,l)}}}catch(l){Je(e,e.return,l)}if(e===t){X=null;break}var a=e.sibling;if(a!==null){a.return=e.return,X=a;break}X=e.return}}var PP=Math.ceil,fd=Qr.ReactCurrentDispatcher,Ig=Qr.ReactCurrentOwner,Ln=Qr.ReactCurrentBatchConfig,ke=0,vt=null,dt=null,Tt=0,_n=0,yo=Ws(0),pt=0,Fl=null,Ai=0,ih=0,Sg=0,ol=null,tn=null,Cg=0,Vo=1/0,Cr=null,pd=!1,Gp=null,Cs=null,Zc=!1,ys=null,md=0,al=0,Qp=null,Nu=-1,Du=0;function Qt(){return ke&6?it():Nu!==-1?Nu:Nu=it()}function As(t){return t.mode&1?ke&2&&Tt!==0?Tt&-Tt:fP.transition!==null?(Du===0&&(Du=qb()),Du):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:Zb(t.type)),t):1}function er(t,e,n,r){if(50<al)throw al=0,Qp=null,Error(z(185));oc(t,n,r),(!(ke&2)||t!==vt)&&(t===vt&&(!(ke&2)&&(ih|=n),pt===4&&ds(t,Tt)),un(t,r),n===1&&ke===0&&!(e.mode&1)&&(Vo=it()+500,th&&qs()))}function un(t,e){var n=t.callbackNode;fA(t,e);var r=Ju(t,t===vt?Tt:0);if(r===0)n!==null&&cv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cv(n),e===1)t.tag===0?hP(t_.bind(null,t)):vk(t_.bind(null,t)),lP(function(){!(ke&6)&&qs()}),n=null;else{switch(Kb(r)){case 1:n=eg;break;case 4:n=Hb;break;case 16:n=Xu;break;case 536870912:n=Wb;break;default:n=Xu}n=gE(n,cE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cE(t,e){if(Nu=-1,Du=0,ke&6)throw Error(z(327));var n=t.callbackNode;if(Eo()&&t.callbackNode!==n)return null;var r=Ju(t,t===vt?Tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gd(t,r);else{e=r;var s=ke;ke|=2;var i=dE();(vt!==t||Tt!==e)&&(Cr=null,Vo=it()+500,xi(t,e));do try{DP();break}catch(a){uE(t,a)}while(!0);fg(),fd.current=i,ke=s,dt!==null?e=0:(vt=null,Tt=0,e=pt)}if(e!==0){if(e===2&&(s=bp(t),s!==0&&(r=s,e=Yp(t,s))),e===1)throw n=Fl,xi(t,0),ds(t,r),un(t,it()),n;if(e===6)ds(t,r);else{if(s=t.current.alternate,!(r&30)&&!RP(s)&&(e=gd(t,r),e===2&&(i=bp(t),i!==0&&(r=i,e=Yp(t,i))),e===1))throw n=Fl,xi(t,0),ds(t,r),un(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:li(t,tn,Cr);break;case 3:if(ds(t,r),(r&130023424)===r&&(e=Cg+500-it(),10<e)){if(Ju(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Pp(li.bind(null,t,tn,Cr),e);break}li(t,tn,Cr);break;case 4:if(ds(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Zn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PP(r/1960))-r,10<r){t.timeoutHandle=Pp(li.bind(null,t,tn,Cr),r);break}li(t,tn,Cr);break;case 5:li(t,tn,Cr);break;default:throw Error(z(329))}}}return un(t,it()),t.callbackNode===n?cE.bind(null,t):null}function Yp(t,e){var n=ol;return t.current.memoizedState.isDehydrated&&(xi(t,e).flags|=256),t=gd(t,e),t!==2&&(e=tn,tn=n,e!==null&&Xp(e)),t}function Xp(t){tn===null?tn=t:tn.push.apply(tn,t)}function RP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!rr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ds(t,e){for(e&=~Sg,e&=~ih,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zn(e),r=1<<n;t[n]=-1,e&=~r}}function t_(t){if(ke&6)throw Error(z(327));Eo();var e=Ju(t,0);if(!(e&1))return un(t,it()),null;var n=gd(t,e);if(t.tag!==0&&n===2){var r=bp(t);r!==0&&(e=r,n=Yp(t,r))}if(n===1)throw n=Fl,xi(t,0),ds(t,e),un(t,it()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,li(t,tn,Cr),un(t,it()),null}function Ag(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Vo=it()+500,th&&qs())}}function Pi(t){ys!==null&&ys.tag===0&&!(ke&6)&&Eo();var e=ke;ke|=1;var n=Ln.transition,r=Pe;try{if(Ln.transition=null,Pe=1,t)return t()}finally{Pe=r,Ln.transition=n,ke=e,!(ke&6)&&qs()}}function Pg(){_n=yo.current,Be(yo)}function xi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aP(n)),dt!==null)for(n=dt.return;n!==null;){var r=n;switch(ug(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rd();break;case 3:Lo(),Be(ln),Be(Vt),_g();break;case 5:vg(r);break;case 4:Lo();break;case 13:Be(He);break;case 19:Be(He);break;case 10:pg(r.type._context);break;case 22:case 23:Pg()}n=n.return}if(vt=t,dt=t=Ps(t.current,null),Tt=_n=e,pt=0,Fl=null,Sg=ih=Ai=0,tn=ol=null,fi!==null){for(e=0;e<fi.length;e++)if(n=fi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}fi=null}return t}function uE(t,e){do{var n=dt;try{if(fg(),Au.current=hd,dd){for(var r=We.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}dd=!1}if(Ci=0,gt=ft=We=null,sl=!1,Ll=0,Ig.current=null,n===null||n.return===null){pt=1,Fl=e,dt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Tt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=zv(o);if(y!==null){y.flags&=-257,$v(y,o,a,i,e),y.mode&1&&Bv(i,c,e),e=y,l=c;var x=e.updateQueue;if(x===null){var k=new Set;k.add(l),e.updateQueue=k}else x.add(l);break e}else{if(!(e&1)){Bv(i,c,e),Rg();break e}l=Error(z(426))}}else if(ze&&a.mode&1){var E=zv(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),$v(E,o,a,i,e),dg(jo(l,a));break e}}i=l=jo(l,a),pt!==4&&(pt=2),ol===null?ol=[i]:ol.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Kk(i,l,e);Ov(i,v);break e;case 1:a=l;var _=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Cs===null||!Cs.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=Gk(i,a,e);Ov(i,P);break e}}i=i.return}while(i!==null)}fE(n)}catch(N){e=N,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(!0)}function dE(){var t=fd.current;return fd.current=hd,t===null?hd:t}function Rg(){(pt===0||pt===3||pt===2)&&(pt=4),vt===null||!(Ai&268435455)&&!(ih&268435455)||ds(vt,Tt)}function gd(t,e){var n=ke;ke|=2;var r=dE();(vt!==t||Tt!==e)&&(Cr=null,xi(t,e));do try{NP();break}catch(s){uE(t,s)}while(!0);if(fg(),ke=n,fd.current=r,dt!==null)throw Error(z(261));return vt=null,Tt=0,pt}function NP(){for(;dt!==null;)hE(dt)}function DP(){for(;dt!==null&&!sA();)hE(dt)}function hE(t){var e=mE(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?fE(t):dt=e,Ig.current=null}function fE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IP(n,e),n!==null){n.flags&=32767,dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pt=6,dt=null;return}}else if(n=TP(n,e,_n),n!==null){dt=n;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);pt===0&&(pt=5)}function li(t,e,n){var r=Pe,s=Ln.transition;try{Ln.transition=null,Pe=1,MP(t,e,n,r)}finally{Ln.transition=s,Pe=r}return null}function MP(t,e,n,r){do Eo();while(ys!==null);if(ke&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(pA(t,i),t===vt&&(dt=vt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zc||(Zc=!0,gE(Xu,function(){return Eo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ln.transition,Ln.transition=null;var o=Pe;Pe=1;var a=ke;ke|=4,Ig.current=null,CP(t,n),aE(n,t),eP(Cp),Zu=!!Sp,Cp=Sp=null,t.current=n,AP(n),iA(),ke=a,Pe=o,Ln.transition=i}else t.current=n;if(Zc&&(Zc=!1,ys=t,md=s),i=t.pendingLanes,i===0&&(Cs=null),lA(n.stateNode),un(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(pd)throw pd=!1,t=Gp,Gp=null,t;return md&1&&t.tag!==0&&Eo(),i=t.pendingLanes,i&1?t===Qp?al++:(al=0,Qp=t):al=0,qs(),null}function Eo(){if(ys!==null){var t=Kb(md),e=Ln.transition,n=Pe;try{if(Ln.transition=null,Pe=16>t?16:t,ys===null)var r=!1;else{if(t=ys,ys=null,md=0,ke&6)throw Error(z(331));var s=ke;for(ke|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(X=c;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:il(8,d,i)}var f=d.child;if(f!==null)f.return=d,X=f;else for(;X!==null;){d=X;var m=d.sibling,y=d.return;if(sE(d),d===c){X=null;break}if(m!==null){m.return=y,X=m;break}X=y}}}var x=i.alternate;if(x!==null){var k=x.child;if(k!==null){x.child=null;do{var E=k.sibling;k.sibling=null,k=E}while(k!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:il(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,X=v;break e}X=i.return}}var _=t.current;for(X=_;X!==null;){o=X;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,X=b;else e:for(o=_;X!==null;){if(a=X,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sh(9,a)}}catch(N){Je(a,a.return,N)}if(a===o){X=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,X=P;break e}X=a.return}}if(ke=s,qs(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(Yd,t)}catch{}r=!0}return r}finally{Pe=n,Ln.transition=e}}return!1}function n_(t,e,n){e=jo(n,e),e=Kk(t,e,1),t=Ss(t,e,1),e=Qt(),t!==null&&(oc(t,1,e),un(t,e))}function Je(t,e,n){if(t.tag===3)n_(t,t,n);else for(;e!==null;){if(e.tag===3){n_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cs===null||!Cs.has(r))){t=jo(n,t),t=Gk(e,t,1),e=Ss(e,t,1),t=Qt(),e!==null&&(oc(e,1,t),un(e,t));break}}e=e.return}}function OP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Qt(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(Tt&n)===n&&(pt===4||pt===3&&(Tt&130023424)===Tt&&500>it()-Cg?xi(t,0):Sg|=n),un(t,e)}function pE(t,e){e===0&&(t.mode&1?(e=$c,$c<<=1,!($c&130023424)&&($c=4194304)):e=1);var n=Qt();t=$r(t,e),t!==null&&(oc(t,e,n),un(t,n))}function LP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pE(t,n)}function jP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),pE(t,n)}var mE;mE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ln.current)rn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return rn=!1,EP(t,e,n);rn=!!(t.flags&131072)}else rn=!1,ze&&e.flags&1048576&&_k(e,od,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ru(t,e),t=e.pendingProps;var s=Do(e,Vt.current);ko(e,n),s=xg(null,e,r,t,s,n);var i=bg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(i=!0,sd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,gg(e),s.updater=rh,e.stateNode=s,s._reactInternals=e,jp(e,r,t,n),e=Up(null,e,r,!0,i,n)):(e.tag=0,ze&&i&&cg(e),Gt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=FP(r),t=Kn(r,t),s){case 0:e=Fp(null,e,r,t,n);break e;case 1:e=qv(null,e,r,t,n);break e;case 11:e=Hv(null,e,r,t,n);break e;case 14:e=Wv(null,e,r,Kn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Fp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),qv(t,e,r,s,n);case 3:e:{if(Jk(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Tk(t,e),cd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=jo(Error(z(423)),e),e=Kv(t,e,r,n,s);break e}else if(r!==s){s=jo(Error(z(424)),e),e=Kv(t,e,r,n,s);break e}else for(wn=Is(e.stateNode.containerInfo.firstChild),kn=e,ze=!0,Qn=null,n=kk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mo(),r===s){e=Hr(t,e,n);break e}Gt(t,e,r,n)}e=e.child}return e;case 5:return Ik(e),t===null&&Mp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ap(r,s)?o=null:i!==null&&Ap(r,i)&&(e.flags|=32),Xk(t,e),Gt(t,e,o,n),e.child;case 6:return t===null&&Mp(e),null;case 13:return Zk(t,e,n);case 4:return yg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oo(e,null,r,n):Gt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Hv(t,e,r,s,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Oe(ad,r._currentValue),r._currentValue=o,i!==null)if(rr(i.value,o)){if(i.children===s.children&&!ln.current){e=Hr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=jr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Op(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Op(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Gt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ko(e,n),s=jn(s),r=r(s),e.flags|=1,Gt(t,e,r,n),e.child;case 14:return r=e.type,s=Kn(r,e.pendingProps),s=Kn(r.type,s),Wv(t,e,r,s,n);case 15:return Qk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Ru(t,e),e.tag=1,cn(r)?(t=!0,sd(e)):t=!1,ko(e,n),qk(e,r,s),jp(e,r,s,n),Up(null,e,r,!0,t,n);case 19:return eE(t,e,n);case 22:return Yk(t,e,n)}throw Error(z(156,e.tag))};function gE(t,e){return $b(t,e)}function VP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new VP(t,e,n,r)}function Ng(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FP(t){if(typeof t=="function")return Ng(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xm)return 11;if(t===Jm)return 14}return 2}function Ps(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ng(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oo:return bi(n.children,s,i,e);case Ym:o=8,s|=8;break;case ap:return t=Mn(12,n,e,s|2),t.elementType=ap,t.lanes=i,t;case lp:return t=Mn(13,n,e,s),t.elementType=lp,t.lanes=i,t;case cp:return t=Mn(19,n,e,s),t.elementType=cp,t.lanes=i,t;case Ib:return oh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eb:o=10;break e;case Tb:o=9;break e;case Xm:o=11;break e;case Jm:o=14;break e;case ls:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Mn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function bi(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function oh(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=Ib,t.lanes=n,t.stateNode={isHidden:!1},t}function Af(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function Pf(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uf(0),this.expirationTimes=uf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dg(t,e,n,r,s,i,o,a,l){return t=new UP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gg(i),t}function BP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:io,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function yE(t){if(!t)return js;t=t._reactInternals;e:{if(Bi(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(cn(n))return yk(t,n,e)}return e}function vE(t,e,n,r,s,i,o,a,l){return t=Dg(n,r,!0,t,s,i,o,a,l),t.context=yE(null),n=t.current,r=Qt(),s=As(n),i=jr(r,s),i.callback=e??null,Ss(n,i,s),t.current.lanes=s,oc(t,s,r),un(t,r),t}function ah(t,e,n,r){var s=e.current,i=Qt(),o=As(s);return n=yE(n),e.context===null?e.context=n:e.pendingContext=n,e=jr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ss(s,e,o),t!==null&&(er(t,s,o,i),Cu(t,s,o)),o}function yd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function r_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mg(t,e){r_(t,e),(t=t.alternate)&&r_(t,e)}function zP(){return null}var _E=typeof reportError=="function"?reportError:function(t){console.error(t)};function Og(t){this._internalRoot=t}lh.prototype.render=Og.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));ah(t,e,null,null)};lh.prototype.unmount=Og.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pi(function(){ah(null,t,null,null)}),e[zr]=null}};function lh(t){this._internalRoot=t}lh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<us.length&&e!==0&&e<us[n].priority;n++);us.splice(n,0,t),n===0&&Jb(t)}};function Lg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ch(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function s_(){}function $P(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=yd(o);i.call(c)}}var o=vE(e,r,t,0,null,!1,!1,"",s_);return t._reactRootContainer=o,t[zr]=o.current,Rl(t.nodeType===8?t.parentNode:t),Pi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=yd(l);a.call(c)}}var l=Dg(t,0,!1,null,null,!1,!1,"",s_);return t._reactRootContainer=l,t[zr]=l.current,Rl(t.nodeType===8?t.parentNode:t),Pi(function(){ah(e,l,n,r)}),l}function uh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=yd(o);a.call(l)}}ah(e,o,t,s)}else o=$P(n,e,t,s,r);return yd(o)}Gb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ba(e.pendingLanes);n!==0&&(tg(e,n|1),un(e,it()),!(ke&6)&&(Vo=it()+500,qs()))}break;case 13:Pi(function(){var r=$r(t,1);if(r!==null){var s=Qt();er(r,t,1,s)}}),Mg(t,1)}};ng=function(t){if(t.tag===13){var e=$r(t,134217728);if(e!==null){var n=Qt();er(e,t,134217728,n)}Mg(t,134217728)}};Qb=function(t){if(t.tag===13){var e=As(t),n=$r(t,e);if(n!==null){var r=Qt();er(n,t,e,r)}Mg(t,e)}};Yb=function(){return Pe};Xb=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};_p=function(t,e,n){switch(e){case"input":if(hp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=eh(r);if(!s)throw Error(z(90));Cb(r),hp(r,s)}}}break;case"textarea":Pb(t,n);break;case"select":e=n.value,e!=null&&_o(t,!!n.multiple,e,!1)}};jb=Ag;Vb=Pi;var HP={usingClientEntryPoint:!1,Events:[lc,uo,eh,Ob,Lb,Ag]},Ra={findFiberByHostInstance:hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WP={bundleType:Ra.bundleType,version:Ra.version,rendererPackageName:Ra.rendererPackageName,rendererConfig:Ra.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bb(t),t===null?null:t.stateNode},findFiberByHostInstance:Ra.findFiberByHostInstance||zP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Yd=eu.inject(WP),yr=eu}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HP;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lg(e))throw Error(z(200));return BP(t,e,null,n)};In.createRoot=function(t,e){if(!Lg(t))throw Error(z(299));var n=!1,r="",s=_E;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Dg(t,1,!1,null,null,n,!1,r,s),t[zr]=e.current,Rl(t.nodeType===8?t.parentNode:t),new Og(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Bb(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return Pi(t)};In.hydrate=function(t,e,n){if(!ch(e))throw Error(z(200));return uh(null,t,e,!0,n)};In.hydrateRoot=function(t,e,n){if(!Lg(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=_E;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=vE(e,null,t,1,n??null,s,!1,i,o),t[zr]=e.current,Rl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new lh(e)};In.render=function(t,e,n){if(!ch(e))throw Error(z(200));return uh(null,t,e,!1,n)};In.unmountComponentAtNode=function(t){if(!ch(t))throw Error(z(40));return t._reactRootContainer?(Pi(function(){uh(null,null,t,!1,function(){t._reactRootContainer=null,t[zr]=null})}),!0):!1};In.unstable_batchedUpdates=Ag;In.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ch(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return uh(t,e,n,!1,r)};In.version="18.3.1-next-f1338f8080-20240426";function wE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wE)}catch(t){console.error(t)}}wE(),wb.exports=In;var qP=wb.exports,xE,i_=qP;xE=i_.createRoot,i_.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ul.apply(this,arguments)}var vs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vs||(vs={}));const o_="popstate";function KP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Jp("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:vd(s)}return QP(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GP(){return Math.random().toString(36).substr(2,8)}function a_(t,e){return{usr:t.state,key:t.key,idx:e}}function Jp(t,e,n,r){return n===void 0&&(n=null),Ul({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ea(e):e,{state:n,key:e&&e.key||r||GP()})}function vd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ea(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function QP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=vs.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ul({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=vs.Pop;let E=d(),v=E==null?null:E-c;c=E,l&&l({action:a,location:k.location,delta:v})}function m(E,v){a=vs.Push;let _=Jp(k.location,E,v);c=d()+1;let b=a_(_,c),P=k.createHref(_);try{o.pushState(b,"",P)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(P)}i&&l&&l({action:a,location:k.location,delta:1})}function y(E,v){a=vs.Replace;let _=Jp(k.location,E,v);c=d();let b=a_(_,c),P=k.createHref(_);o.replaceState(b,"",P),i&&l&&l({action:a,location:k.location,delta:0})}function x(E){let v=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof E=="string"?E:vd(E);return _=_.replace(/ $/,"%20"),qe(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let k={get action(){return a},get location(){return t(s,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(o_,f),l=E,()=>{s.removeEventListener(o_,f),l=null}},createHref(E){return e(s,E)},createURL:x,encodeLocation(E){let v=x(E);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:y,go(E){return o.go(E)}};return k}var l_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(l_||(l_={}));function YP(t,e,n){return n===void 0&&(n="/"),XP(t,e,n)}function XP(t,e,n,r){let s=typeof e=="string"?ea(e):e,i=Fo(s.pathname||"/",n);if(i==null)return null;let o=kE(t);JP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=cR(i);a=aR(o[l],c)}return a}function kE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(qe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Rs([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),kE(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:iR(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of EE(i.path))s(i,o,l)}),e}function EE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=EE(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function JP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZP=/^:[\w-]+$/,eR=3,tR=2,nR=1,rR=10,sR=-2,c_=t=>t==="*";function iR(t,e){let n=t.split("/"),r=n.length;return n.some(c_)&&(r+=sR),e&&(r+=tR),n.filter(s=>!c_(s)).reduce((s,i)=>s+(ZP.test(i)?eR:i===""?nR:rR),r)}function oR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function aR(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=Zp({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Rs([i,f.pathname]),pathnameBase:fR(Rs([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Rs([i,f.pathnameBase]))}return o}function Zp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lR(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let k=a[f]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const x=a[f];return y&&!x?c[m]=void 0:c[m]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function lR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function cR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Fo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function uR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ea(t):t;return{pathname:n?n.startsWith("/")?n:dR(n,e):e,search:pR(r),hash:mR(s)}}function dR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Rf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jg(t,e){let n=hR(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ea(t):(s=Ul({},t),qe(!s.pathname||!s.pathname.includes("?"),Rf("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),Rf("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),Rf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=uR(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Rs=t=>t.join("/").replace(/\/\/+/g,"/"),fR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const TE=["post","put","patch","delete"];new Set(TE);const yR=["get",...TE];new Set(yR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bl.apply(this,arguments)}const dh=D.createContext(null),IE=D.createContext(null),Yr=D.createContext(null),hh=D.createContext(null),Ks=D.createContext({outlet:null,matches:[],isDataRoute:!1}),SE=D.createContext(null);function vR(t,e){let{relative:n}=e===void 0?{}:e;ta()||qe(!1);let{basename:r,navigator:s}=D.useContext(Yr),{hash:i,pathname:o,search:a}=fh(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Rs([r,o])),s.createHref({pathname:l,search:a,hash:i})}function ta(){return D.useContext(hh)!=null}function Gs(){return ta()||qe(!1),D.useContext(hh).location}function CE(t){D.useContext(Yr).static||D.useLayoutEffect(t)}function uc(){let{isDataRoute:t}=D.useContext(Ks);return t?RR():_R()}function _R(){ta()||qe(!1);let t=D.useContext(dh),{basename:e,future:n,navigator:r}=D.useContext(Yr),{matches:s}=D.useContext(Ks),{pathname:i}=Gs(),o=JSON.stringify(jg(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return CE(()=>{a.current=!0}),D.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=Vg(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Rs([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,i,t])}function fh(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Yr),{matches:s}=D.useContext(Ks),{pathname:i}=Gs(),o=JSON.stringify(jg(s,r.v7_relativeSplatPath));return D.useMemo(()=>Vg(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function wR(t,e){return xR(t,e)}function xR(t,e,n,r){ta()||qe(!1);let{navigator:s}=D.useContext(Yr),{matches:i}=D.useContext(Ks),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Gs(),d;if(e){var f;let E=typeof e=="string"?ea(e):e;l==="/"||(f=E.pathname)!=null&&f.startsWith(l)||qe(!1),d=E}else d=c;let m=d.pathname||"/",y=m;if(l!=="/"){let E=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(E.length).join("/")}let x=YP(t,{pathname:y}),k=IR(x&&x.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Rs([l,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Rs([l,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n,r);return e&&k?D.createElement(hh.Provider,{value:{location:Bl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:vs.Pop}},k):k}function bR(){let t=PR(),e=gR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const kR=D.createElement(bR,null);class ER extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Ks.Provider,{value:this.props.routeContext},D.createElement(SE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function TR(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(dh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Ks.Provider,{value:e},r)}function IR(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||qe(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:m,errors:y}=n,x=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let y,x=!1,k=null,E=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,k=f.route.errorElement||kR,l&&(c<0&&m===0?(NR("route-fallback"),x=!0,E=null):c===m&&(x=!0,E=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),_=()=>{let b;return y?b=k:x?b=E:f.route.Component?b=D.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,D.createElement(TR,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?D.createElement(ER,{location:n.location,revalidation:n.revalidation,component:k,error:y,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var AE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(AE||{}),PE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(PE||{});function SR(t){let e=D.useContext(dh);return e||qe(!1),e}function CR(t){let e=D.useContext(IE);return e||qe(!1),e}function AR(t){let e=D.useContext(Ks);return e||qe(!1),e}function RE(t){let e=AR(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function PR(){var t;let e=D.useContext(SE),n=CR(),r=RE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function RR(){let{router:t}=SR(AE.UseNavigateStable),e=RE(PE.UseNavigateStable),n=D.useRef(!1);return CE(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Bl({fromRouteId:e},i)))},[t,e])}const u_={};function NR(t,e,n){u_[t]||(u_[t]=!0)}function DR(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function MR(t){let{to:e,replace:n,state:r,relative:s}=t;ta()||qe(!1);let{future:i,static:o}=D.useContext(Yr),{matches:a}=D.useContext(Ks),{pathname:l}=Gs(),c=uc(),d=Vg(e,jg(a,i.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return D.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function os(t){qe(!1)}function OR(t){let{basename:e="/",children:n=null,location:r,navigationType:s=vs.Pop,navigator:i,static:o=!1,future:a}=t;ta()&&qe(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:i,static:o,future:Bl({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ea(r));let{pathname:d="/",search:f="",hash:m="",state:y=null,key:x="default"}=r,k=D.useMemo(()=>{let E=Fo(d,l);return E==null?null:{location:{pathname:E,search:f,hash:m,state:y,key:x},navigationType:s}},[l,d,f,m,y,x,s]);return k==null?null:D.createElement(Yr.Provider,{value:c},D.createElement(hh.Provider,{children:n,value:k}))}function LR(t){let{children:e,location:n}=t;return wR(em(e),n)}new Promise(()=>{});function em(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,em(r.props.children,i));return}r.type!==os&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=em(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_d.apply(this,arguments)}function NE(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function jR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function VR(t,e){return t.button===0&&(!e||e==="_self")&&!jR(t)}const FR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],UR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],BR="6";try{window.__reactRouterVersion=BR}catch{}const zR=D.createContext({isTransitioning:!1}),$R="startTransition",d_=OC[$R];function HR(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=KP({window:s,v5Compat:!0}));let o=i.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=D.useCallback(f=>{c&&d_?d_(()=>l(f)):l(f)},[l,c]);return D.useLayoutEffect(()=>o.listen(d),[o,d]),D.useEffect(()=>DR(r),[r]),D.createElement(OR,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const WR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fg=D.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:f}=e,m=NE(e,FR),{basename:y}=D.useContext(Yr),x,k=!1;if(typeof c=="string"&&qR.test(c)&&(x=c,WR))try{let b=new URL(window.location.href),P=c.startsWith("//")?new URL(b.protocol+c):new URL(c),N=Fo(P.pathname,y);P.origin===b.origin&&N!=null?c=N+P.search+P.hash:k=!0}catch{}let E=vR(c,{relative:s}),v=GR(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:f});function _(b){r&&r(b),b.defaultPrevented||v(b)}return D.createElement("a",_d({},m,{href:x||E,onClick:k||i?r:_,ref:n,target:l}))}),cr=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:d}=e,f=NE(e,UR),m=fh(l,{relative:f.relative}),y=Gs(),x=D.useContext(IE),{navigator:k,basename:E}=D.useContext(Yr),v=x!=null&&QR(m)&&c===!0,_=k.encodeLocation?k.encodeLocation(m).pathname:m.pathname,b=y.pathname,P=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;s||(b=b.toLowerCase(),P=P?P.toLowerCase():null,_=_.toLowerCase()),P&&E&&(P=Fo(P,E)||P);const N=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let M=b===_||!o&&b.startsWith(_)&&b.charAt(N)==="/",T=P!=null&&(P===_||!o&&P.startsWith(_)&&P.charAt(_.length)==="/"),w={isActive:M,isPending:T,isTransitioning:v},C=M?r:void 0,A;typeof i=="function"?A=i(w):A=[i,M?"active":null,T?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(w):a;return D.createElement(Fg,_d({},f,{"aria-current":C,className:A,ref:n,style:R,to:l,viewTransition:c}),typeof d=="function"?d(w):d)});var tm;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tm||(tm={}));var h_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(h_||(h_={}));function KR(t){let e=D.useContext(dh);return e||qe(!1),e}function GR(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=uc(),c=Gs(),d=fh(t,{relative:o});return D.useCallback(f=>{if(VR(f,n)){f.preventDefault();let m=r!==void 0?r:vd(c)===vd(d);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function QR(t,e){e===void 0&&(e={});let n=D.useContext(zR);n==null&&qe(!1);let{basename:r}=KR(tm.useViewTransitionState),s=fh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Fo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Fo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Zp(s.pathname,o)!=null||Zp(s.pathname,i)!=null}const DE=D.createContext({theme:"light",toggleTheme:()=>{}});function YR({children:t}){const[e,n]=D.useState(()=>{const s=typeof window<"u"?localStorage.getItem("theme"):null;return s==="light"||s==="dark"?s:"light"});D.useEffect(()=>{const s=document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=D.useMemo(()=>({theme:e,toggleTheme:()=>n(s=>s==="dark"?"light":"dark")}),[e]);return h.jsx(DE.Provider,{value:r,children:t})}function XR(){return D.useContext(DE)}var f_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},JR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},OE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[d],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ME(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new ZR;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const x=c<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const e2=function(t){const e=ME(t);return OE.encodeByteArray(e,!0)},wd=function(t){return e2(t).replace(/\./g,"")},LE=function(t){try{return OE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=()=>t2().__FIREBASE_DEFAULTS__,r2=()=>{if(typeof process>"u"||typeof f_>"u")return;const t=f_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},s2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LE(t[1]);return e&&JSON.parse(e)},ph=()=>{try{return n2()||r2()||s2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jE=t=>{var e,n;return(n=(e=ph())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VE=t=>{const e=jE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},FE=()=>{var t;return(t=ph())===null||t===void 0?void 0:t.config},UE=t=>{var e;return(e=ph())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wd(JSON.stringify(n)),wd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function o2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function a2(){var t;const e=(t=ph())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ug(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function c2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function u2(){const t=Ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function d2(){return!a2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bg(){try{return typeof indexedDB=="object"}catch{return!1}}function zg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function zE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="FirebaseError";class Bn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=h2,Object.setPrototypeOf(this,Bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zi.prototype.create)}}class zi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?f2(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Bn(s,a,r)}}function f2(t,e){return t.replace(p2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const p2=/\{\$([^}]+)}/g;function m2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(p_(i)&&p_(o)){if(!zl(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function p_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $a(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ha(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function g2(t,e){const n=new y2(t,e);return n.subscribe.bind(n)}class y2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");v2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Nf),s.error===void 0&&(s.error=Nf),s.complete===void 0&&(s.complete=Nf);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function v2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nf(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=1e3,w2=2,x2=4*60*60*1e3,b2=.5;function m_(t,e=_2,n=w2){const r=e*Math.pow(n,t),s=Math.round(b2*r*(Math.random()-.5)*2);return Math.min(x2,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Fn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new i2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(T2(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:E2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function E2(t){return t===ci?void 0:t}function T2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new k2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const S2={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},C2=ve.INFO,A2={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},P2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=A2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mh{constructor(e){this.name=e,this._logLevel=C2,this._logHandler=P2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const R2=(t,e)=>e.some(n=>t instanceof n);let g_,y_;function N2(){return g_||(g_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function D2(){return y_||(y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $E=new WeakMap,nm=new WeakMap,HE=new WeakMap,Df=new WeakMap,$g=new WeakMap;function M2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ns(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$E.set(n,t)}).catch(()=>{}),$g.set(e,t),e}function O2(t){if(nm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});nm.set(t,e)}let rm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function L2(t){rm=t(rm)}function j2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mf(this),e,...n);return HE.set(r,e.sort?e.sort():[e]),Ns(r)}:D2().includes(t)?function(...e){return t.apply(Mf(this),e),Ns($E.get(this))}:function(...e){return Ns(t.apply(Mf(this),e))}}function V2(t){return typeof t=="function"?j2(t):(t instanceof IDBTransaction&&O2(t),R2(t,N2())?new Proxy(t,rm):t)}function Ns(t){if(t instanceof IDBRequest)return M2(t);if(Df.has(t))return Df.get(t);const e=V2(t);return e!==t&&(Df.set(t,e),$g.set(e,t)),e}const Mf=t=>$g.get(t);function WE(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ns(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ns(o.result),l.oldVersion,l.newVersion,Ns(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const F2=["get","getKey","getAll","getAllKeys","count"],U2=["put","add","delete","clear"],Of=new Map;function v_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Of.get(e))return Of.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=U2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||F2.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Of.set(e,i),i}L2(t=>({...t,get:(e,n,r)=>v_(e,n)||t.get(e,n,r),has:(e,n)=>!!v_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function z2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sm="@firebase/app",__="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=new mh("@firebase/app"),$2="@firebase/app-compat",H2="@firebase/analytics-compat",W2="@firebase/analytics",q2="@firebase/app-check-compat",K2="@firebase/app-check",G2="@firebase/auth",Q2="@firebase/auth-compat",Y2="@firebase/database",X2="@firebase/data-connect",J2="@firebase/database-compat",Z2="@firebase/functions",eN="@firebase/functions-compat",tN="@firebase/installations",nN="@firebase/installations-compat",rN="@firebase/messaging",sN="@firebase/messaging-compat",iN="@firebase/performance",oN="@firebase/performance-compat",aN="@firebase/remote-config",lN="@firebase/remote-config-compat",cN="@firebase/storage",uN="@firebase/storage-compat",dN="@firebase/firestore",hN="@firebase/vertexai-preview",fN="@firebase/firestore-compat",pN="firebase",mN="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="[DEFAULT]",gN={[sm]:"fire-core",[$2]:"fire-core-compat",[W2]:"fire-analytics",[H2]:"fire-analytics-compat",[K2]:"fire-app-check",[q2]:"fire-app-check-compat",[G2]:"fire-auth",[Q2]:"fire-auth-compat",[Y2]:"fire-rtdb",[X2]:"fire-data-connect",[J2]:"fire-rtdb-compat",[Z2]:"fire-fn",[eN]:"fire-fn-compat",[tN]:"fire-iid",[nN]:"fire-iid-compat",[rN]:"fire-fcm",[sN]:"fire-fcm-compat",[iN]:"fire-perf",[oN]:"fire-perf-compat",[aN]:"fire-rc",[lN]:"fire-rc-compat",[cN]:"fire-gcs",[uN]:"fire-gcs-compat",[dN]:"fire-fst",[fN]:"fire-fst-compat",[hN]:"fire-vertex","fire-js":"fire-js",[pN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new Map,yN=new Map,om=new Map;function w_(t,e){try{t.container.addComponent(e)}catch(n){Wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sr(t){const e=t.name;if(om.has(e))return Wr.debug(`There were multiple attempts to register component ${e}.`),!1;om.set(e,t);for(const n of xd.values())w_(n,t);for(const n of yN.values())w_(n,t);return!0}function Qs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new zi("app","Firebase",vN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=mN;function qE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:im,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ds.create("bad-app-name",{appName:String(s)});if(n||(n=FE()),!n)throw Ds.create("no-options");const i=xd.get(s);if(i){if(zl(n,i.options)&&zl(r,i.config))return i;throw Ds.create("duplicate-app",{appName:s})}const o=new I2(s);for(const l of om.values())o.addComponent(l);const a=new _N(n,r,o);return xd.set(s,a),a}function gh(t=im){const e=xd.get(t);if(!e&&t===im&&FE())return qE();if(!e)throw Ds.create("no-app",{appName:t});return e}function dn(t,e,n){var r;let s=(r=gN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wr.warn(a.join(" "));return}sr(new Fn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firebase-heartbeat-database",xN=1,$l="firebase-heartbeat-store";let Lf=null;function KE(){return Lf||(Lf=WE(wN,xN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($l)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ds.create("idb-open",{originalErrorMessage:t.message})})),Lf}async function bN(t){try{const n=(await KE()).transaction($l),r=await n.objectStore($l).get(GE(t));return await n.done,r}catch(e){if(e instanceof Bn)Wr.warn(e.message);else{const n=Ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wr.warn(n.message)}}}async function x_(t,e){try{const r=(await KE()).transaction($l,"readwrite");await r.objectStore($l).put(e,GE(t)),await r.done}catch(n){if(n instanceof Bn)Wr.warn(n.message);else{const r=Ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wr.warn(r.message)}}}function GE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=1024,EN=30*24*60*60*1e3;class TN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=b_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=EN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b_(),{heartbeatsToSend:r,unsentEntries:s}=IN(this._heartbeatsCache.heartbeats),i=wd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Wr.warn(n),""}}}function b_(){return new Date().toISOString().substring(0,10)}function IN(t,e=kN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),k_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),k_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bg()?zg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await bN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return x_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return x_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function k_(t){return wd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){sr(new Fn("platform-logger",e=>new B2(e),"PRIVATE")),sr(new Fn("heartbeat",e=>new TN(e),"PRIVATE")),dn(sm,__,t),dn(sm,__,"esm2017"),dn("fire-js","")}CN("");var AN="firebase",PN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn(AN,PN,"app");function Hg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function QE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RN=QE,YE=new zi("auth","Firebase",QE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new mh("@firebase/auth");function NN(t,...e){bd.logLevel<=ve.WARN&&bd.warn(`Auth (${$i}): ${t}`,...e)}function Ou(t,...e){bd.logLevel<=ve.ERROR&&bd.error(`Auth (${$i}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw qg(t,...e)}function hn(t,...e){return qg(t,...e)}function Wg(t,e,n){const r=Object.assign(Object.assign({},RN()),{[e]:n});return new zi("auth","Firebase",r).create(e,{appName:t.name})}function tr(t){return Wg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XE(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Un(t,"argument-error"),Wg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return YE.create(t,...e)}function J(t,e,...n){if(!t)throw qg(e,...n)}function Mr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ou(e),new Error(e)}function qr(t,e){t||Mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JE(){return E_()==="http:"||E_()==="https:"}function E_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JE()||Ug()||"connection"in navigator)?navigator.onLine:!0}function MN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.shortDelay=e,this.longDelay=n,qr(n>e,"Short delay should be less than long delay!"),this.isMobile=o2()||c2()}get(){return DN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(t,e){qr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new dc(3e4,6e4);function mn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Cn(t,e,n,r,s={}){return eT(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=na(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return l2()||(c.referrerPolicy="no-referrer"),ZE.fetch()(tT(t,t.config.apiHost,n,a),c)})}async function eT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ON),e);try{const s=new VN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Wa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wa(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wa(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wa(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Wg(t,d,c);Un(t,d)}}catch(s){if(s instanceof Bn)throw s;Un(t,"network-request-failed",{message:String(s)})}}async function Ys(t,e,n,r,s={}){const i=await Cn(t,e,n,r,s);return"mfaPendingCredential"in i&&Un(t,"multi-factor-auth-required",{_serverResponse:i}),i}function tT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Kg(t.config,s):`${t.config.apiScheme}://${s}`}function jN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hn(this.auth,"network-request-failed")),LN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){return t!==void 0&&t.getResponse!==void 0}function I_(t){return t!==void 0&&t.enterprise!==void 0}class FN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t){return(await Cn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function BN(t,e){return Cn(t,"GET","/v2/recaptchaConfig",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){return Cn(t,"POST","/v1/accounts:delete",e)}async function nT(t,e){return Cn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $N(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),s=Gg(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ll(jf(s.auth_time)),issuedAtTime:ll(jf(s.iat)),expirationTime:ll(jf(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function jf(t){return Number(t)*1e3}function Gg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ou("JWT malformed, contained fewer than 3 sections"),null;try{const s=LE(n);return s?JSON.parse(s):(Ou("Failed to decode base64 JWT payload"),null)}catch(s){return Ou("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function S_(t){const e=Gg(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bn&&HN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function HN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Uo(t,nT(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?rT(i.providerUserInfo):[],a=KN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new lm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function qN(t){const e=Ge(t);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function rT(t){return t.map(e=>{var{providerId:n}=e,r=Hg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){const n=await eT(t,{},async()=>{const r=na({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=tT(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ZE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QN(t,e){return Cn(t,"POST","/v2/accounts:revokeToken",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=S_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await GN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new To;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new To,this.toJSON())}_performRefresh(){return Mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Or{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Uo(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $N(this,e)}reload(){return qN(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Or(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(tr(this.auth));const e=await this.getIdToken();return await Uo(this,zN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:P,isAnonymous:N,providerData:M,stsTokenManager:T}=n;J(b&&T,e,"internal-error");const w=To.fromJSON(this.name,T);J(typeof b=="string",e,"internal-error"),ss(f,e.name),ss(m,e.name),J(typeof P=="boolean",e,"internal-error"),J(typeof N=="boolean",e,"internal-error"),ss(y,e.name),ss(x,e.name),ss(k,e.name),ss(E,e.name),ss(v,e.name),ss(_,e.name);const C=new Or({uid:b,auth:e,email:m,emailVerified:P,displayName:f,isAnonymous:N,photoURL:x,phoneNumber:y,tenantId:k,stsTokenManager:w,createdAt:v,lastLoginAt:_});return M&&Array.isArray(M)&&(C.providerData=M.map(A=>Object.assign({},A))),E&&(C._redirectEventId=E),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new To;s.updateFromServerResponse(n);const i=new Or({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kd(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?rT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new To;a.updateFromIdToken(r);const l=new Or({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new lm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_=new Map;function Lr(t){qr(t instanceof Function,"Expected a class definition");let e=C_.get(t);return e?(qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,C_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sT.type="NONE";const A_=sT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){return`firebase:${t}:${e}:${n}`}class Io{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Lu(this.userKey,s.apiKey,i),this.fullPersistenceKey=Lu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Or._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Io(Lr(A_),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Lr(A_);const o=Lu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=Or._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Io(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Io(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uT(e))return"Blackberry";if(dT(e))return"Webos";if(oT(e))return"Safari";if((e.includes("chrome/")||aT(e))&&!e.includes("edge/"))return"Chrome";if(cT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function iT(t=Ft()){return/firefox\//i.test(t)}function oT(t=Ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aT(t=Ft()){return/crios\//i.test(t)}function lT(t=Ft()){return/iemobile/i.test(t)}function cT(t=Ft()){return/android/i.test(t)}function uT(t=Ft()){return/blackberry/i.test(t)}function dT(t=Ft()){return/webos/i.test(t)}function Qg(t=Ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YN(t=Ft()){var e;return Qg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XN(){return u2()&&document.documentMode===10}function hT(t=Ft()){return Qg(t)||cT(t)||dT(t)||uT(t)||/windows phone/i.test(t)||lT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e=[]){let n;switch(t){case"Browser":n=P_(Ft());break;case"Worker":n=`${P_(Ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$i}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e={}){return Cn(t,"GET","/v2/passwordPolicy",mn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=6;class tD{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new JN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Lr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Io.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nT(this,{idToken:e}),r=await Or._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(tr(this));const n=e?Ge(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZN(this),n=new tD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await QN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Lr(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Io.create(this,[Lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&NN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function zn(t){return Ge(t)}class R_{constructor(e){this.auth=e,this.observer=null,this.addObserver=g2(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rD(t){hc=t}function Yg(t){return hc.loadJS(t)}function sD(){return hc.recaptchaV2Script}function iD(){return hc.recaptchaEnterpriseScript}function oD(){return hc.gapiScript}function pT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const aD="recaptcha-enterprise",lD="NO_RECAPTCHA";class cD{constructor(e){this.type=aD,this.auth=zn(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{BN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new FN(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;I_(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(lD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&I_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=iD();l.length!==0&&(l+=a),Yg(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function N_(t,e,n,r=!1){const s=new cD(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function cm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await N_(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await N_(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e){const n=Qs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(zl(i,e??{}))return s;Un(s,"already-initialized")}return n.initialize({options:e})}function dD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Lr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hD(t,e,n){const r=zn(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=mT(e),{host:o,port:a}=fD(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),pD()}function mT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fD(t){const e=mT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:D_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:D_(o)}}}function D_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,n){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function mD(t,e){return Cn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t,e){return Ys(t,"POST","/v1/accounts:signInWithPassword",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD(t,e){return Ys(t,"POST","/v1/accounts:signInWithEmailLink",mn(t,e))}async function vD(t,e){return Ys(t,"POST","/v1/accounts:signInWithEmailLink",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends yh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Hl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Hl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cm(e,n,"signInWithPassword",gD);case"emailLink":return yD(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return cm(e,r,"signUpPassword",mD);case"emailLink":return vD(e,{idToken:n,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e){return Ys(t,"POST","/v1/accounts:signInWithIdp",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="http://localhost";class Ri extends yh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ri(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Hg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ri(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return So(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,So(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,So(e,n)}buildRequest(){const e={requestUri:_D,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=na(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e){return Cn(t,"POST","/v1/accounts:sendVerificationCode",mn(t,e))}async function xD(t,e){return Ys(t,"POST","/v1/accounts:signInWithPhoneNumber",mn(t,e))}async function bD(t,e){const n=await Ys(t,"POST","/v1/accounts:signInWithPhoneNumber",mn(t,e));if(n.temporaryProof)throw Wa(t,"account-exists-with-different-credential",n);return n}const kD={USER_NOT_FOUND:"user-not-found"};async function ED(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ys(t,"POST","/v1/accounts:signInWithPhoneNumber",mn(t,n),kD)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends yh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new cl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new cl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return xD(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return bD(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return ED(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new cl({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ID(t){const e=$a(Ha(t)).link,n=e?$a(Ha(e)).deep_link_id:null,r=$a(Ha(t)).deep_link_id;return(r?$a(Ha(r)).link:null)||r||n||e||t}class Xg{constructor(e){var n,r,s,i,o,a;const l=$a(Ha(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,f=TD((s=l.mode)!==null&&s!==void 0?s:null);J(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=ID(e);try{return new Xg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(){this.providerId=ra.PROVIDER_ID}static credential(e,n){return Hl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Xg.parseLink(n);return J(r,"argument-error"),Hl._fromEmailAndCode(e,r.code,r.tenantId)}}ra.PROVIDER_ID="password";ra.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ra.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends vh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends fc{constructor(){super("facebook.com")}static credential(e){return Ri._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ri._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rr.credential(n,r)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends fc{constructor(){super("github.com")}static credential(e){return Ri._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends fc{constructor(){super("twitter.com")}static credential(e,n){return Ri._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ps.credential(n,r)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(t,e){return Ys(t,"POST","/v1/accounts:signUp",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Or._fromIdTokenResponse(e,r,s),o=M_(r);return new Ni({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=M_(r);return new Ni({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function M_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed extends Bn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ed.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ed(e,n,r,s)}}function gT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ed._fromErrorAndOperation(t,i,e,r):i})}async function CD(t,e,n=!1){const r=await Uo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ni._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e,n=!1){const{auth:r}=t;if(xn(r.app))return Promise.reject(tr(r));const s="reauthenticate";try{const i=await Uo(t,gT(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=Gg(i.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),Ni._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Un(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(t,e,n=!1){if(xn(t.app))return Promise.reject(tr(t));const r="signIn",s=await gT(t,r,e),i=await Ni._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function vT(t,e){return yT(zn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(t){const e=zn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PD(t,e,n){if(xn(t.app))return Promise.reject(tr(t));const r=zn(t),o=await cm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SD).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&_T(t),l}),a=await Ni._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function RD(t,e,n){return xn(t.app)?Promise.reject(tr(t)):vT(Ge(t),ra.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_T(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e){return Cn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ge(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Uo(r,ND(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function DD(t,e,n,r){return Ge(t).onIdTokenChanged(e,n,r)}function MD(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function OD(t,e,n,r){return Ge(t).onAuthStateChanged(e,n,r)}function LD(t){return Ge(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e){return Cn(t,"POST","/v2/accounts/mfaEnrollment:start",mn(t,e))}const Td="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Td,"1"),this.storage.removeItem(Td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=1e3,FD=10;class bT extends xT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);XN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bT.type="LOCAL";const UD=bT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends xT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kT.type="SESSION";const ET=kT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new _h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await BD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Jg("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return window}function $D(t){ut().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(){return typeof ut().WorkerGlobalScope<"u"&&typeof ut().importScripts=="function"}async function HD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function qD(){return Zg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="firebaseLocalStorageDb",KD=1,Id="firebaseLocalStorage",IT="fbase_key";class pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wh(t,e){return t.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function GD(){const t=indexedDB.deleteDatabase(TT);return new pc(t).toPromise()}function um(){const t=indexedDB.open(TT,KD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Id,{keyPath:IT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Id)?e(r):(r.close(),await GD(),e(await um()))})})}async function O_(t,e,n){const r=wh(t,!0).put({[IT]:e,value:n});return new pc(r).toPromise()}async function QD(t,e){const n=wh(t,!1).get(e),r=await new pc(n).toPromise();return r===void 0?null:r.value}function L_(t,e){const n=wh(t,!0).delete(e);return new pc(n).toPromise()}const YD=800,XD=3;class ST{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_h._getInstance(qD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await HD(),!this.activeServiceWorker)return;this.sender=new zD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await um();return await O_(e,Td,"1"),await L_(e,Td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>O_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>L_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=wh(s,!1).getAll();return new pc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ST.type="LOCAL";const JD=ST;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(t,e){return Cn(t,"POST","/v2/accounts/mfaSignIn:start",mn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=500,tM=6e4,tu=1e12;class nM{constructor(e){this.auth=e,this.counter=tu,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new rM(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||tu;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||tu;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||tu;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class rM{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;J(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=sM(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},tM)},eM))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function sM(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=pT("rcb"),iM=new dc(3e4,6e4);class oM{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ut().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return J(aM(n),e,"argument-error"),this.shouldResolveImmediately(n)&&T_(ut().grecaptcha)?Promise.resolve(ut().grecaptcha):new Promise((r,s)=>{const i=ut().setTimeout(()=>{s(hn(e,"network-request-failed"))},iM.get());ut()[Vf]=()=>{ut().clearTimeout(i),delete ut()[Vf];const a=ut().grecaptcha;if(!a||!T_(a)){s(hn(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const f=l(c,d);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${sD()}?${na({onload:Vf,render:"explicit",hl:n})}`;Yg(o).catch(()=>{clearTimeout(i),s(hn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ut().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function aM(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class lM{async load(e){return new nM(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="recaptcha",cM={theme:"light",type:"image"};class uM{constructor(e,n,r=Object.assign({},cM)){this.parameters=r,this.type=CT,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zn(e),this.isInvisible=this.parameters.size==="invisible",J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;J(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new lM:new oM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{o&&(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ut()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){J(JE()&&!Zg(),this.auth,"internal-error"),await dM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await UN(this.auth);J(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function dM(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=cl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function fM(t,e,n){if(xn(t.app))return Promise.reject(tr(t));const r=zn(t),s=await pM(r,e,Ge(n));return new hM(s,i=>vT(r,i))}async function pM(t,e,n){var r;const s=await n.verify();try{J(typeof s=="string",t,"argument-error"),J(n.type===CT,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i)return J(o.type==="enroll",t,"internal-error"),(await jD(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{J(o.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return J(a,t,"missing-multi-factor-info"),(await ZD(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await wD(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e){return e?Lr(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends yh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,n){return So(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mM(t){return yT(t.auth,new t0(t),t.bypassAuthState)}function gM(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),AD(n,new t0(t),t.bypassAuthState)}async function yM(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),CD(n,new t0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mM;case"linkViaPopup":case"linkViaRedirect":return yM;case"reauthViaPopup":case"reauthViaRedirect":return gM;default:Un(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new dc(2e3,1e4);async function _M(t,e,n){if(xn(t.app))return Promise.reject(hn(t,"operation-not-supported-in-this-environment"));const r=zn(t);XE(t,e,vh);const s=e0(r,n);return new mi(r,"signInViaPopup",e,s).executeNotNull()}class mi extends AT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,mi.currentPopupAction&&mi.currentPopupAction.cancel(),mi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){qr(this.filter.length===1,"Popup operations only handle one event");const e=Jg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vM.get())};e()}}mi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="pendingRedirect",ju=new Map;class xM extends AT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ju.get(this.auth._key());if(!e){try{const r=await bM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ju.set(this.auth._key(),e)}return this.bypassAuthState||ju.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bM(t,e){const n=RT(e),r=PT(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function kM(t,e){return PT(t)._set(RT(e),"true")}function EM(t,e){ju.set(t._key(),e)}function PT(t){return Lr(t._redirectPersistence)}function RT(t){return Lu(wM,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t,e,n){return TM(t,e,n)}async function TM(t,e,n){if(xn(t.app))return Promise.reject(tr(t));const r=zn(t);XE(t,e,vh),await r._initializationPromise;const s=e0(r,n);return await kM(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function IM(t,e){return await zn(t)._initializationPromise,NT(t,e,!1)}async function NT(t,e,n=!1){if(xn(t.app))return Promise.reject(tr(t));const r=zn(t),s=e0(r,e),o=await new xM(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=10*60*1e3;class CM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SM&&this.cachedEventUids.clear(),this.cachedEventUids.has(V_(e))}saveEventToCache(e){this.cachedEventUids.add(V_(e)),this.lastProcessedEventTime=Date.now()}}function V_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(t,e={}){return Cn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NM=/^https?/;async function DM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await PM(t);for(const n of e)try{if(MM(n))return}catch{}Un(t,"unauthorized-domain")}function MM(t){const e=am(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!NM.test(n))return!1;if(RM.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM=new dc(3e4,6e4);function F_(){const t=ut().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LM(t){return new Promise((e,n)=>{var r,s,i;function o(){F_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{F_(),n(hn(t,"network-request-failed"))},timeout:OM.get()})}if(!((s=(r=ut().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ut().gapi)===null||i===void 0)&&i.load)o();else{const a=pT("iframefcb");return ut()[a]=()=>{gapi.load?o():n(hn(t,"network-request-failed"))},Yg(`${oD()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Vu=null,e})}let Vu=null;function jM(t){return Vu=Vu||LM(t),Vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=new dc(5e3,15e3),FM="__/auth/iframe",UM="emulator/auth/iframe",BM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $M(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kg(e,UM):`https://${t.config.authDomain}/${FM}`,r={apiKey:e.apiKey,appName:t.name,v:$i},s=zM.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${na(r).slice(1)}`}async function HM(t){const e=await jM(t),n=ut().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:$M(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BM,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),a=ut().setTimeout(()=>{i(o)},VM.get());function l(){ut().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qM=500,KM=600,GM="_blank",QM="http://localhost";class U_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YM(t,e,n,r=qM,s=KM){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},WM),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Ft().toLowerCase();n&&(a=aT(c)?GM:n),iT(c)&&(e=e||QM,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(YN(c)&&a!=="_self")return XM(e||"",a),new U_(null);const f=window.open(e||"",a,d);J(f,t,"popup-blocked");try{f.focus()}catch{}return new U_(f)}function XM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="__/auth/handler",ZM="emulator/auth/handler",eO=encodeURIComponent("fac");async function B_(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$i,eventId:s};if(e instanceof vh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",m2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof fc){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${eO}=${encodeURIComponent(l)}`:"";return`${tO(t)}?${na(a).slice(1)}${c}`}function tO({config:t}){return t.emulator?Kg(t,ZM):`https://${t.authDomain}/${JM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="webStorageSupport";class nO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ET,this._completeRedirectFn=NT,this._overrideRedirectResult=EM}async _openPopup(e,n,r,s){var i;qr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await B_(e,n,r,am(),s);return YM(e,o,Jg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await B_(e,n,r,am(),s);return $D(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await HM(e),r=new CM(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ff,{type:Ff},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Ff];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hT()||oT()||Qg()}}const rO=nO;var z_="@firebase/auth",$_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oO(t){sr(new Fn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fT(t)},c=new nD(r,s,i,l);return dD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sr(new Fn("auth-internal",e=>{const n=zn(e.getProvider("auth").getImmediate());return(r=>new sO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dn(z_,$_,iO(t)),dn(z_,$_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=5*60,lO=UE("authIdTokenMaxAge")||aO;let H_=null;const cO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lO)return;const s=n==null?void 0:n.token;H_!==s&&(H_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function uO(t=gh()){const e=Qs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uD(t,{popupRedirectResolver:rO,persistence:[JD,UD,ET]}),r=UE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=cO(i.toString());MD(n,o,()=>o(n.currentUser)),DD(n,a=>o(a))}}const s=jE("auth");return s&&hD(n,`http://${s}`),n}function dO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",dO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oO("Browser");const MT="@firebase/installations",n0="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=1e4,LT=`w:${n0}`,jT="FIS_v2",hO="https://firebaseinstallations.googleapis.com/v1",fO=60*60*1e3,pO="installations",mO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Di=new zi(pO,mO,gO);function VT(t){return t instanceof Bn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT({projectId:t}){return`${hO}/projects/${t}/installations`}function UT(t){return{token:t.token,requestStatus:2,expiresIn:vO(t.expiresIn),creationTime:Date.now()}}async function BT(t,e){const r=(await e.json()).error;return Di.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function zT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yO(t,{refreshToken:e}){const n=zT(t);return n.append("Authorization",_O(e)),n}async function $T(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vO(t){return Number(t.replace("s","000"))}function _O(t){return`${jT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=FT(t),s=zT(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:jT,appId:t.appId,sdkVersion:LT},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await $T(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:UT(c.authToken)}}else throw await BT("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=/^[cdef][\w-]{21}$/,dm="";function kO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=EO(t);return bO.test(n)?n:dm}catch{return dm}}function EO(t){return xO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=new Map;function qT(t,e){const n=xh(t);KT(n,e),TO(n,e)}function KT(t,e){const n=WT.get(t);if(n)for(const r of n)r(e)}function TO(t,e){const n=IO();n&&n.postMessage({key:t,fid:e}),SO()}let gi=null;function IO(){return!gi&&"BroadcastChannel"in self&&(gi=new BroadcastChannel("[Firebase] FID Change"),gi.onmessage=t=>{KT(t.data.key,t.data.fid)}),gi}function SO(){WT.size===0&&gi&&(gi.close(),gi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="firebase-installations-database",AO=1,Mi="firebase-installations-store";let Uf=null;function r0(){return Uf||(Uf=WE(CO,AO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Mi)}}})),Uf}async function Sd(t,e){const n=xh(t),s=(await r0()).transaction(Mi,"readwrite"),i=s.objectStore(Mi),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&qT(t,e.fid),e}async function GT(t){const e=xh(t),r=(await r0()).transaction(Mi,"readwrite");await r.objectStore(Mi).delete(e),await r.done}async function bh(t,e){const n=xh(t),s=(await r0()).transaction(Mi,"readwrite"),i=s.objectStore(Mi),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&qT(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s0(t){let e;const n=await bh(t.appConfig,r=>{const s=PO(r),i=RO(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===dm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function PO(t){const e=t||{fid:kO(),registrationStatus:0};return QT(e)}function RO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Di.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=NO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:DO(t)}:{installationEntry:e}}async function NO(t,e){try{const n=await wO(t,e);return Sd(t.appConfig,n)}catch(n){throw VT(n)&&n.customData.serverCode===409?await GT(t.appConfig):await Sd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function DO(t){let e=await W_(t.appConfig);for(;e.registrationStatus===1;)await HT(100),e=await W_(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await s0(t);return r||n}return e}function W_(t){return bh(t,e=>{if(!e)throw Di.create("installation-not-found");return QT(e)})}function QT(t){return MO(t)?{fid:t.fid,registrationStatus:0}:t}function MO(t){return t.registrationStatus===1&&t.registrationTime+OT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OO({appConfig:t,heartbeatServiceProvider:e},n){const r=LO(t,n),s=yO(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:LT,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await $T(()=>fetch(r,a));if(l.ok){const c=await l.json();return UT(c)}else throw await BT("Generate Auth Token",l)}function LO(t,{fid:e}){return`${FT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i0(t,e=!1){let n;const r=await bh(t.appConfig,i=>{if(!YT(i))throw Di.create("not-registered");const o=i.authToken;if(!e&&FO(o))return i;if(o.requestStatus===1)return n=jO(t,e),i;{if(!navigator.onLine)throw Di.create("app-offline");const a=BO(i);return n=VO(t,a),a}});return n?await n:r.authToken}async function jO(t,e){let n=await q_(t.appConfig);for(;n.authToken.requestStatus===1;)await HT(100),n=await q_(t.appConfig);const r=n.authToken;return r.requestStatus===0?i0(t,e):r}function q_(t){return bh(t,e=>{if(!YT(e))throw Di.create("not-registered");const n=e.authToken;return zO(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function VO(t,e){try{const n=await OO(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Sd(t.appConfig,r),n}catch(n){if(VT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await GT(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Sd(t.appConfig,r)}throw n}}function YT(t){return t!==void 0&&t.registrationStatus===2}function FO(t){return t.requestStatus===2&&!UO(t)}function UO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fO}function BO(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function zO(t){return t.requestStatus===1&&t.requestTime+OT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(t){const e=t,{installationEntry:n,registrationPromise:r}=await s0(e);return r?r.catch(console.error):i0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(t,e=!1){const n=t;return await WO(n),(await i0(n,e)).token}async function WO(t){const{registrationPromise:e}=await s0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t){if(!t||!t.options)throw Bf("App Configuration");if(!t.name)throw Bf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Bf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Bf(t){return Di.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="installations",KO="installations-internal",GO=t=>{const e=t.getProvider("app").getImmediate(),n=qO(e),r=Qs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},QO=t=>{const e=t.getProvider("app").getImmediate(),n=Qs(e,XT).getImmediate();return{getId:()=>$O(n),getToken:s=>HO(n,s)}};function YO(){sr(new Fn(XT,GO,"PUBLIC")),sr(new Fn(KO,QO,"PRIVATE"))}YO();dn(MT,n0);dn(MT,n0,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="analytics",XO="firebase_id",JO="origin",ZO=60*1e3,eL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",o0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn=new mh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new zi("analytics","Analytics",tL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){if(!t.startsWith(o0)){const e=En.create("invalid-gtag-resource",{gtagURL:t});return fn.warn(e.message),""}return t}function JT(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function rL(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function sL(t,e){const n=rL("firebase-js-sdk-policy",{createScriptURL:nL}),r=document.createElement("script"),s=`${o0}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function iL(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function oL(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await JT(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){fn.error(a)}t("config",s,i)}async function aL(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await JT(n);for(const l of o){const c=a.find(f=>f.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){fn.error(i)}}function lL(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await aL(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await oL(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){fn.error(a)}}return s}function cL(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=lL(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function uL(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(o0)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=30,hL=1e3;class fL{constructor(e={},n=hL){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ZT=new fL;function pL(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function mL(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:pL(r)},i=eL.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function gL(t,e=ZT,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw En.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw En.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new _L;return setTimeout(async()=>{a.abort()},ZO),e1({appId:r,apiKey:s,measurementId:i},o,a,e)}async function e1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=ZT){var i;const{appId:o,measurementId:a}=t;try{await yL(r,e)}catch(l){if(a)return fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await mL(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!vL(c)){if(s.deleteThrottleMetadata(o),a)return fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?m_(n,s.intervalMillis,dL):m_(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,f),fn.debug(`Calling attemptFetch again in ${d} millis`),e1(t,f,r,s)}}function yL(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vL(t){if(!(t instanceof Bn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class _L{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function wL(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(){if(Bg())try{await zg()}catch(t){return fn.warn(En.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return fn.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function bL(t,e,n,r,s,i,o){var a;const l=gL(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&fn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>fn.error(y)),e.push(l);const c=xL().then(y=>{if(y)return r.getId()}),[d,f]=await Promise.all([l,c]);uL(i)||sL(i,d.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[JO]="firebase",m.update=!0,f!=null&&(m[XO]=f),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.app=e}_delete(){return delete ul[this.app.options.appId],Promise.resolve()}}let ul={},K_=[];const G_={};let zf="dataLayer",EL="gtag",Q_,t1,Y_=!1;function TL(){const t=[];if(Ug()&&t.push("This is a browser extension environment."),zE()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});fn.warn(n.message)}}function IL(t,e,n){TL();const r=t.options.appId;if(!r)throw En.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(ul[r]!=null)throw En.create("already-exists",{id:r});if(!Y_){iL(zf);const{wrappedGtag:i,gtagCore:o}=cL(ul,K_,G_,zf,EL);t1=i,Q_=o,Y_=!0}return ul[r]=bL(t,K_,G_,e,Q_,zf,n),new kL(t)}function SL(t=gh()){t=Ge(t);const e=Qs(t,Cd);return e.isInitialized()?e.getImmediate():CL(t)}function CL(t,e={}){const n=Qs(t,Cd);if(n.isInitialized()){const s=n.getImmediate();if(zl(e,n.getOptions()))return s;throw En.create("already-initialized")}return n.initialize({options:e})}async function AL(){if(Ug()||!zE()||!Bg())return!1;try{return await zg()}catch{return!1}}function PL(t,e,n,r){t=Ge(t),wL(t1,ul[t.app.options.appId],e,n,r).catch(s=>fn.error(s))}const X_="@firebase/analytics",J_="0.10.8";function RL(){sr(new Fn(Cd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return IL(r,s,n)},"PUBLIC")),sr(new Fn("analytics-internal",t,"PRIVATE")),dn(X_,J_),dn(X_,J_,"esm2017");function t(e){try{const n=e.getProvider(Cd).getImmediate();return{logEvent:(r,s,i)=>PL(n,r,s,i)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}}}RL();var Z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ki,n1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,w){function C(){}C.prototype=w.prototype,T.D=w.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(A,R,O){for(var I=Array(arguments.length-2),W=2;W<arguments.length;W++)I[W-2]=arguments[W];return w.prototype[R].apply(A,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,w,C){C||(C=0);var A=Array(16);if(typeof w=="string")for(var R=0;16>R;++R)A[R]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(R=0;16>R;++R)A[R]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=T.g[0],C=T.g[1],R=T.g[2];var O=T.g[3],I=w+(O^C&(R^O))+A[0]+3614090360&4294967295;w=C+(I<<7&4294967295|I>>>25),I=O+(R^w&(C^R))+A[1]+3905402710&4294967295,O=w+(I<<12&4294967295|I>>>20),I=R+(C^O&(w^C))+A[2]+606105819&4294967295,R=O+(I<<17&4294967295|I>>>15),I=C+(w^R&(O^w))+A[3]+3250441966&4294967295,C=R+(I<<22&4294967295|I>>>10),I=w+(O^C&(R^O))+A[4]+4118548399&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(R^w&(C^R))+A[5]+1200080426&4294967295,O=w+(I<<12&4294967295|I>>>20),I=R+(C^O&(w^C))+A[6]+2821735955&4294967295,R=O+(I<<17&4294967295|I>>>15),I=C+(w^R&(O^w))+A[7]+4249261313&4294967295,C=R+(I<<22&4294967295|I>>>10),I=w+(O^C&(R^O))+A[8]+1770035416&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(R^w&(C^R))+A[9]+2336552879&4294967295,O=w+(I<<12&4294967295|I>>>20),I=R+(C^O&(w^C))+A[10]+4294925233&4294967295,R=O+(I<<17&4294967295|I>>>15),I=C+(w^R&(O^w))+A[11]+2304563134&4294967295,C=R+(I<<22&4294967295|I>>>10),I=w+(O^C&(R^O))+A[12]+1804603682&4294967295,w=C+(I<<7&4294967295|I>>>25),I=O+(R^w&(C^R))+A[13]+4254626195&4294967295,O=w+(I<<12&4294967295|I>>>20),I=R+(C^O&(w^C))+A[14]+2792965006&4294967295,R=O+(I<<17&4294967295|I>>>15),I=C+(w^R&(O^w))+A[15]+1236535329&4294967295,C=R+(I<<22&4294967295|I>>>10),I=w+(R^O&(C^R))+A[1]+4129170786&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^R&(w^C))+A[6]+3225465664&4294967295,O=w+(I<<9&4294967295|I>>>23),I=R+(w^C&(O^w))+A[11]+643717713&4294967295,R=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(R^O))+A[0]+3921069994&4294967295,C=R+(I<<20&4294967295|I>>>12),I=w+(R^O&(C^R))+A[5]+3593408605&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^R&(w^C))+A[10]+38016083&4294967295,O=w+(I<<9&4294967295|I>>>23),I=R+(w^C&(O^w))+A[15]+3634488961&4294967295,R=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(R^O))+A[4]+3889429448&4294967295,C=R+(I<<20&4294967295|I>>>12),I=w+(R^O&(C^R))+A[9]+568446438&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^R&(w^C))+A[14]+3275163606&4294967295,O=w+(I<<9&4294967295|I>>>23),I=R+(w^C&(O^w))+A[3]+4107603335&4294967295,R=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(R^O))+A[8]+1163531501&4294967295,C=R+(I<<20&4294967295|I>>>12),I=w+(R^O&(C^R))+A[13]+2850285829&4294967295,w=C+(I<<5&4294967295|I>>>27),I=O+(C^R&(w^C))+A[2]+4243563512&4294967295,O=w+(I<<9&4294967295|I>>>23),I=R+(w^C&(O^w))+A[7]+1735328473&4294967295,R=O+(I<<14&4294967295|I>>>18),I=C+(O^w&(R^O))+A[12]+2368359562&4294967295,C=R+(I<<20&4294967295|I>>>12),I=w+(C^R^O)+A[5]+4294588738&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^R)+A[8]+2272392833&4294967295,O=w+(I<<11&4294967295|I>>>21),I=R+(O^w^C)+A[11]+1839030562&4294967295,R=O+(I<<16&4294967295|I>>>16),I=C+(R^O^w)+A[14]+4259657740&4294967295,C=R+(I<<23&4294967295|I>>>9),I=w+(C^R^O)+A[1]+2763975236&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^R)+A[4]+1272893353&4294967295,O=w+(I<<11&4294967295|I>>>21),I=R+(O^w^C)+A[7]+4139469664&4294967295,R=O+(I<<16&4294967295|I>>>16),I=C+(R^O^w)+A[10]+3200236656&4294967295,C=R+(I<<23&4294967295|I>>>9),I=w+(C^R^O)+A[13]+681279174&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^R)+A[0]+3936430074&4294967295,O=w+(I<<11&4294967295|I>>>21),I=R+(O^w^C)+A[3]+3572445317&4294967295,R=O+(I<<16&4294967295|I>>>16),I=C+(R^O^w)+A[6]+76029189&4294967295,C=R+(I<<23&4294967295|I>>>9),I=w+(C^R^O)+A[9]+3654602809&4294967295,w=C+(I<<4&4294967295|I>>>28),I=O+(w^C^R)+A[12]+3873151461&4294967295,O=w+(I<<11&4294967295|I>>>21),I=R+(O^w^C)+A[15]+530742520&4294967295,R=O+(I<<16&4294967295|I>>>16),I=C+(R^O^w)+A[2]+3299628645&4294967295,C=R+(I<<23&4294967295|I>>>9),I=w+(R^(C|~O))+A[0]+4096336452&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~R))+A[7]+1126891415&4294967295,O=w+(I<<10&4294967295|I>>>22),I=R+(w^(O|~C))+A[14]+2878612391&4294967295,R=O+(I<<15&4294967295|I>>>17),I=C+(O^(R|~w))+A[5]+4237533241&4294967295,C=R+(I<<21&4294967295|I>>>11),I=w+(R^(C|~O))+A[12]+1700485571&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~R))+A[3]+2399980690&4294967295,O=w+(I<<10&4294967295|I>>>22),I=R+(w^(O|~C))+A[10]+4293915773&4294967295,R=O+(I<<15&4294967295|I>>>17),I=C+(O^(R|~w))+A[1]+2240044497&4294967295,C=R+(I<<21&4294967295|I>>>11),I=w+(R^(C|~O))+A[8]+1873313359&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~R))+A[15]+4264355552&4294967295,O=w+(I<<10&4294967295|I>>>22),I=R+(w^(O|~C))+A[6]+2734768916&4294967295,R=O+(I<<15&4294967295|I>>>17),I=C+(O^(R|~w))+A[13]+1309151649&4294967295,C=R+(I<<21&4294967295|I>>>11),I=w+(R^(C|~O))+A[4]+4149444226&4294967295,w=C+(I<<6&4294967295|I>>>26),I=O+(C^(w|~R))+A[11]+3174756917&4294967295,O=w+(I<<10&4294967295|I>>>22),I=R+(w^(O|~C))+A[2]+718787259&4294967295,R=O+(I<<15&4294967295|I>>>17),I=C+(O^(R|~w))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+O&4294967295}r.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var C=w-this.blockSize,A=this.B,R=this.h,O=0;O<w;){if(R==0)for(;O<=C;)s(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<w;)if(A[R++]=T.charCodeAt(O++),R==this.blockSize){s(this,A),R=0;break}}else for(;O<w;)if(A[R++]=T[O++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=w},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var C=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=C&255,C/=256;for(this.u(T),T=Array(16),w=C=0;4>w;++w)for(var A=0;32>A;A+=8)T[C++]=this.g[w]>>>A&255;return T};function i(T,w){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=w(T)}function o(T,w){this.h=w;for(var C=[],A=!0,R=T.length-1;0<=R;R--){var O=T[R]|0;A&&O==w||(C[R]=O,A=!1)}this.g=C}var a={};function l(T){return-128<=T&&128>T?i(T,function(w){return new o([w|0],0>w?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return E(c(-T));for(var w=[],C=1,A=0;T>=C;A++)w[A]=T/C|0,C*=4294967296;return new o(w,0)}function d(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return E(d(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(w,8)),A=f,R=0;R<T.length;R+=8){var O=Math.min(8,T.length-R),I=parseInt(T.substring(R,R+O),w);8>O?(O=c(Math.pow(w,O)),A=A.j(O).add(c(I))):(A=A.j(C),A=A.add(c(I)))}return A}var f=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-E(this).m();for(var T=0,w=1,C=0;C<this.g.length;C++){var A=this.i(C);T+=(0<=A?A:4294967296+A)*w,w*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(k(this))return"-"+E(this).toString(T);for(var w=c(Math.pow(T,6)),C=this,A="";;){var R=P(C,w).g;C=v(C,R.j(w));var O=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=R,x(C))return O+A;for(;6>O.length;)O="0"+O;A=O+A}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function k(T){return T.h==-1}t.l=function(T){return T=v(this,T),k(T)?-1:x(T)?0:1};function E(T){for(var w=T.g.length,C=[],A=0;A<w;A++)C[A]=~T.g[A];return new o(C,~T.h).add(m)}t.abs=function(){return k(this)?E(this):this},t.add=function(T){for(var w=Math.max(this.g.length,T.g.length),C=[],A=0,R=0;R<=w;R++){var O=A+(this.i(R)&65535)+(T.i(R)&65535),I=(O>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);A=I>>>16,O&=65535,I&=65535,C[R]=I<<16|O}return new o(C,C[C.length-1]&-2147483648?-1:0)};function v(T,w){return T.add(E(w))}t.j=function(T){if(x(this)||x(T))return f;if(k(this))return k(T)?E(this).j(E(T)):E(E(this).j(T));if(k(T))return E(this.j(E(T)));if(0>this.l(y)&&0>T.l(y))return c(this.m()*T.m());for(var w=this.g.length+T.g.length,C=[],A=0;A<2*w;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<T.g.length;R++){var O=this.i(A)>>>16,I=this.i(A)&65535,W=T.i(R)>>>16,H=T.i(R)&65535;C[2*A+2*R]+=I*H,_(C,2*A+2*R),C[2*A+2*R+1]+=O*H,_(C,2*A+2*R+1),C[2*A+2*R+1]+=I*W,_(C,2*A+2*R+1),C[2*A+2*R+2]+=O*W,_(C,2*A+2*R+2)}for(A=0;A<w;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=w;A<2*w;A++)C[A]=0;return new o(C,0)};function _(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function b(T,w){this.g=T,this.h=w}function P(T,w){if(x(w))throw Error("division by zero");if(x(T))return new b(f,f);if(k(T))return w=P(E(T),w),new b(E(w.g),E(w.h));if(k(w))return w=P(T,E(w)),new b(E(w.g),w.h);if(30<T.g.length){if(k(T)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var C=m,A=w;0>=A.l(T);)C=N(C),A=N(A);var R=M(C,1),O=M(A,1);for(A=M(A,2),C=M(C,2);!x(A);){var I=O.add(A);0>=I.l(T)&&(R=R.add(C),O=I),A=M(A,1),C=M(C,1)}return w=v(T,R.j(w)),new b(R,w)}for(R=f;0<=T.l(w);){for(C=Math.max(1,Math.floor(T.m()/w.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),O=c(C),I=O.j(w);k(I)||0<I.l(T);)C-=A,O=c(C),I=O.j(w);x(O)&&(O=m),R=R.add(O),T=v(T,I)}return new b(R,T)}t.A=function(T){return P(this,T).h},t.and=function(T){for(var w=Math.max(this.g.length,T.g.length),C=[],A=0;A<w;A++)C[A]=this.i(A)&T.i(A);return new o(C,this.h&T.h)},t.or=function(T){for(var w=Math.max(this.g.length,T.g.length),C=[],A=0;A<w;A++)C[A]=this.i(A)|T.i(A);return new o(C,this.h|T.h)},t.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),C=[],A=0;A<w;A++)C[A]=this.i(A)^T.i(A);return new o(C,this.h^T.h)};function N(T){for(var w=T.g.length+1,C=[],A=0;A<w;A++)C[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(C,T.h)}function M(T,w){var C=w>>5;w%=32;for(var A=T.g.length-C,R=[],O=0;O<A;O++)R[O]=0<w?T.i(O+C)>>>w|T.i(O+C+1)<<32-w:T.i(O+C);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,n1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ki=o}).apply(typeof Z_<"u"?Z_:typeof self<"u"?self:typeof window<"u"?window:{});var nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var r1,qa,s1,Fu,hm,i1,o1,a1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,g){return u==Array.prototype||u==Object.prototype||(u[p]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof nu=="object"&&nu];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(u,p){if(p)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var L=u[S];if(!(L in g))break e;g=g[L]}u=u[u.length-1],S=g[u],p=p(S),p!=S&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}function i(u,p){u instanceof String&&(u+="");var g=0,S=!1,L={next:function(){if(!S&&g<u.length){var V=g++;return{value:p(V,u[V]),done:!1}}return S=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(u){return u||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function c(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function d(u,p,g){return u.call.apply(u.bind,arguments)}function f(u,p,g){if(!u)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,S),u.apply(p,L)}}return function(){return u.apply(p,arguments)}}function m(u,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function y(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function x(u,p){function g(){}g.prototype=p.prototype,u.aa=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(S,L,V){for(var K=Array(arguments.length-2),De=2;De<arguments.length;De++)K[De-2]=arguments[De];return p.prototype[L].apply(S,K)}}function k(u){const p=u.length;if(0<p){const g=Array(p);for(let S=0;S<p;S++)g[S]=u[S];return g}return[]}function E(u,p){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(l(S)){const L=u.length||0,V=S.length||0;u.length=L+V;for(let K=0;K<V;K++)u[L+K]=S[K]}else u.push(S)}}class v{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function _(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function P(u){return P[" "](u),u}P[" "]=function(){};var N=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function M(u,p,g){for(const S in u)p.call(g,u[S],S,u)}function T(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function w(u){const p={};for(const g in u)p[g]=u[g];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,p){let g,S;for(let L=1;L<arguments.length;L++){S=arguments[L];for(g in S)u[g]=S[g];for(let V=0;V<C.length;V++)g=C[V],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function R(u){var p=1;u=u.split(":");const g=[];for(;0<p&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function O(u){a.setTimeout(()=>{throw u},0)}function I(){var u=Q;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class W{constructor(){this.h=this.g=null}add(p,g){const S=H.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var H=new v(()=>new re,u=>u.reset());class re{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let de,B=!1,Q=new W,q=()=>{const u=a.Promise.resolve(void 0);de=()=>{u.then(fe)}};var fe=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(g){O(g)}var p=H;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}B=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function oe(u,p){if(j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(N){e:{try{P(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement);this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:be[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&oe.aa.h.call(this)}}x(oe,j);var be={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Bt(u,p,g,S,L){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=L,this.key=++$e,this.da=this.fa=!1}function Ye(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zt(u){this.src=u,this.g={},this.h=0}zt.prototype.add=function(u,p,g,S,L){var V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);var K=ar(u,p,S,L);return-1<K?(p=u[K],g||(p.fa=!1)):(p=new Bt(p,this.src,V,!!S,L),p.fa=g,u.push(p)),p};function Jt(u,p){var g=p.type;if(g in u.g){var S=u.g[g],L=Array.prototype.indexOf.call(S,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(S,L,1),V&&(Ye(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function ar(u,p,g,S){for(var L=0;L<u.length;++L){var V=u[L];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==S)return L}return-1}var Se="closure_lm_"+(1e6*Math.random()|0),gn={};function $n(u,p,g,S,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)$n(u,p[V],g,S,L);return null}return g=ae(g),u&&u[Me]?u.K(p,g,c(S)?!!S.capture:!1,L):Jr(u,p,g,!1,S,L)}function Jr(u,p,g,S,L,V){if(!p)throw Error("Invalid event type");var K=c(L)?!!L.capture:!!L,De=te(u);if(De||(u[Se]=De=new zt(u)),g=De.add(p,g,S,K,V),g.proxy)return g;if(S=Zr(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)ee||(L=K),L===void 0&&(L=!1),u.addEventListener(p.toString(),S,L);else if(u.attachEvent)u.attachEvent(ha(p.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Zr(){function u(g){return p.call(u.src,u.listener,g)}const p=$;return u}function da(u,p,g,S,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)da(u,p[V],g,S,L);else S=c(S)?!!S.capture:!!S,g=ae(g),u&&u[Me]?(u=u.i,p=String(p).toString(),p in u.g&&(V=u.g[p],g=ar(V,g,S,L),-1<g&&(Ye(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete u.g[p],u.h--)))):u&&(u=te(u))&&(p=u.g[p.toString()],u=-1,p&&(u=ar(p,g,S,L)),(g=-1<u?p[u]:null)&&Ki(g))}function Ki(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Me])Jt(p.i,u);else{var g=u.type,S=u.proxy;p.removeEventListener?p.removeEventListener(g,S,u.capture):p.detachEvent?p.detachEvent(ha(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=te(p))?(Jt(g,u),g.h==0&&(g.src=null,p[Se]=null)):Ye(u)}}}function ha(u){return u in gn?gn[u]:gn[u]="on"+u}function $(u,p){if(u.da)u=!0;else{p=new oe(p,this);var g=u.listener,S=u.ha||u.src;u.fa&&Ki(u),u=g.call(S,p)}return u}function te(u){return u=u[Se],u instanceof zt?u:null}var G="__closure_events_fn_"+(1e9*Math.random()>>>0);function ae(u){return typeof u=="function"?u:(u[G]||(u[G]=function(p){return u.handleEvent(p)}),u[G])}function ie(){se.call(this),this.i=new zt(this),this.M=this,this.F=null}x(ie,se),ie.prototype[Me]=!0,ie.prototype.removeEventListener=function(u,p,g,S){da(this,u,p,g,S)};function Ie(u,p){var g,S=u.F;if(S)for(g=[];S;S=S.F)g.push(S);if(u=u.M,S=p.type||p,typeof p=="string")p=new j(p,u);else if(p instanceof j)p.target=p.target||u;else{var L=p;p=new j(S,u),A(p,L)}if(L=!0,g)for(var V=g.length-1;0<=V;V--){var K=p.g=g[V];L=Ne(K,S,!0,p)&&L}if(K=p.g=u,L=Ne(K,S,!0,p)&&L,L=Ne(K,S,!1,p)&&L,g)for(V=0;V<g.length;V++)K=p.g=g[V],L=Ne(K,S,!1,p)&&L}ie.prototype.N=function(){if(ie.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var g=u.g[p],S=0;S<g.length;S++)Ye(g[S]);delete u.g[p],u.h--}}this.F=null},ie.prototype.K=function(u,p,g,S){return this.i.add(String(u),p,!1,g,S)},ie.prototype.L=function(u,p,g,S){return this.i.add(String(u),p,!0,g,S)};function Ne(u,p,g,S){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var K=p[V];if(K&&!K.da&&K.capture==g){var De=K.listener,_t=K.ha||K.src;K.fa&&Jt(u.i,K),L=De.call(_t,S)!==!1&&L}}return L&&!S.defaultPrevented}function $t(u,p,g){if(typeof u=="function")g&&(u=m(u,g));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(u,p||0)}function Ht(u){u.g=$t(()=>{u.g=null,u.i&&(u.i=!1,Ht(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Hn extends se{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ht(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(u){se.call(this),this.h=u,this.g={}}x(me,se);var at=[];function An(u){M(u.g,function(p,g){this.g.hasOwnProperty(g)&&Ki(p)},u),u.g={}}me.prototype.N=function(){me.aa.N.call(this),An(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=a.JSON.stringify,nt=a.JSON.parse,Zt=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Gi(){}Gi.prototype.h=null;function he(u){return u.h||(u.h=u.i())}function lt(){}var rt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hh(){j.call(this,"d")}x(Hh,j);function Wh(){j.call(this,"c")}x(Wh,j);var Zs={},ly=null;function kc(){return ly=ly||new ie}Zs.La="serverreachability";function cy(u){j.call(this,Zs.La,u)}x(cy,j);function fa(u){const p=kc();Ie(p,new cy(p))}Zs.STAT_EVENT="statevent";function uy(u,p){j.call(this,Zs.STAT_EVENT,u),this.stat=p}x(uy,j);function qt(u){const p=kc();Ie(p,new uy(p,u))}Zs.Ma="timingevent";function dy(u,p){j.call(this,Zs.Ma,u),this.size=p}x(dy,j);function pa(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function ma(){this.g=!0}ma.prototype.xa=function(){this.g=!1};function KS(u,p,g,S,L,V){u.info(function(){if(u.g)if(V)for(var K="",De=V.split("&"),_t=0;_t<De.length;_t++){var Ee=De[_t].split("=");if(1<Ee.length){var At=Ee[0];Ee=Ee[1];var Pt=At.split("_");K=2<=Pt.length&&Pt[1]=="type"?K+(At+"="+Ee+"&"):K+(At+"=redacted&")}}else K=null;else K=V;return"XMLHTTP REQ ("+S+") [attempt "+L+"]: "+p+`
`+g+`
`+K})}function GS(u,p,g,S,L,V,K){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+L+"]: "+p+`
`+g+`
`+V+" "+K})}function Qi(u,p,g,S){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+YS(u,g)+(S?" "+S:"")})}function QS(u,p){u.info(function(){return"TIMEOUT: "+p})}ma.prototype.info=function(){};function YS(u,p){if(!u.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var S=g[u];if(!(2>S.length)){var L=S[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return Wt(g)}catch{return p}}var Ec={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qh;function Tc(){}x(Tc,Gi),Tc.prototype.g=function(){return new XMLHttpRequest},Tc.prototype.i=function(){return{}},qh=new Tc;function es(u,p,g,S){this.j=u,this.i=p,this.l=g,this.R=S||1,this.U=new me(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fy}function fy(){this.i=null,this.g="",this.h=!1}var py={},Kh={};function Gh(u,p,g){u.L=1,u.v=Ac(kr(p)),u.m=g,u.P=!0,my(u,null)}function my(u,p){u.F=Date.now(),Ic(u),u.A=kr(u.v);var g=u.A,S=u.R;Array.isArray(S)||(S=[String(S)]),Ay(g.i,"t",S),u.C=0,g=u.j.J,u.h=new fy,u.g=Ky(u.j,g?p:null,!u.m),0<u.O&&(u.M=new Hn(m(u.Y,u,u.g),u.O)),p=u.U,g=u.g,S=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(at[0]=L.toString()),L=at);for(var V=0;V<L.length;V++){var K=$n(g,L[V],S||p.handleEvent,!1,p.h||p);if(!K)break;p.g[K.key]=K}p=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),fa(),KS(u.i,u.u,u.A,u.l,u.R,u.m)}es.prototype.ca=function(u){u=u.target;const p=this.M;p&&Er(u)==3?p.j():this.Y(u)},es.prototype.Y=function(u){try{if(u==this.g)e:{const Pt=Er(this.g);var p=this.g.Ba();const Ji=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Ly(this.g)))){this.J||Pt!=4||p==7||(p==8||0>=Ji?fa(3):fa(2)),Qh(this);var g=this.g.Z();this.X=g;t:if(gy(this)){var S=Ly(this.g);u="";var L=S.length,V=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),ga(this);var K="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,u+=this.h.i.decode(S[p],{stream:!(V&&p==L-1)});S.length=0,this.h.g+=u,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=g==200,GS(this.i,this.u,this.A,this.l,this.R,Pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var De,_t=this.g;if((De=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(De)){var Ee=De;break t}}Ee=null}if(g=Ee)Qi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yh(this,g);else{this.o=!1,this.s=3,qt(12),ei(this),ga(this);break e}}if(this.P){g=!0;let Wn;for(;!this.J&&this.C<K.length;)if(Wn=XS(this,K),Wn==Kh){Pt==4&&(this.s=4,qt(14),g=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==py){this.s=4,qt(15),Qi(this.i,this.l,K,"[Invalid Chunk]"),g=!1;break}else Qi(this.i,this.l,Wn,null),Yh(this,Wn);if(gy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||K.length!=0||this.h.h||(this.s=1,qt(16),g=!1),this.o=this.o&&g,!g)Qi(this.i,this.l,K,"[Invalid Chunked Response]"),ei(this),ga(this);else if(0<K.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),nf(At),At.M=!0,qt(11))}}else Qi(this.i,this.l,K,null),Yh(this,K);Pt==4&&ei(this),this.o&&!this.J&&(Pt==4?$y(this.j,this):(this.o=!1,Ic(this)))}else pC(this.g),g==400&&0<K.indexOf("Unknown SID")?(this.s=3,qt(12)):(this.s=0,qt(13)),ei(this),ga(this)}}}catch{}finally{}};function gy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function XS(u,p){var g=u.C,S=p.indexOf(`
`,g);return S==-1?Kh:(g=Number(p.substring(g,S)),isNaN(g)?py:(S+=1,S+g>p.length?Kh:(p=p.slice(S,S+g),u.C=S+g,p)))}es.prototype.cancel=function(){this.J=!0,ei(this)};function Ic(u){u.S=Date.now()+u.I,yy(u,u.I)}function yy(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=pa(m(u.ba,u),p)}function Qh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}es.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(QS(this.i,this.A),this.L!=2&&(fa(),qt(17)),ei(this),this.s=2,ga(this)):yy(this,this.S-u)};function ga(u){u.j.G==0||u.J||$y(u.j,u)}function ei(u){Qh(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,An(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Yh(u,p){try{var g=u.j;if(g.G!=0&&(g.g==u||Xh(g.h,u))){if(!u.K&&Xh(g.h,u)&&g.G==3){try{var S=g.Da.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var L=S;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Oc(g),Dc(g);else break e;tf(g),qt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=pa(m(g.Za,g),6e3));if(1>=wy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ni(g,11)}else if((u.K||g.g==u)&&Oc(g),!_(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let Ee=L[p];if(g.T=Ee[0],Ee=Ee[1],g.G==2)if(Ee[0]=="c"){g.K=Ee[1],g.ia=Ee[2];const At=Ee[3];At!=null&&(g.la=At,g.j.info("VER="+g.la));const Pt=Ee[4];Pt!=null&&(g.Aa=Pt,g.j.info("SVER="+g.Aa));const Ji=Ee[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(S=1.5*Ji,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Wn=u.g;if(Wn){const jc=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jc){var V=S.h;V.g||jc.indexOf("spdy")==-1&&jc.indexOf("quic")==-1&&jc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Jh(V,V.h),V.h=null))}if(S.D){const rf=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;rf&&(S.ya=rf,je(S.I,S.D,rf))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var K=u;if(S.qa=qy(S,S.J?S.ia:null,S.W),K.K){xy(S.h,K);var De=K,_t=S.L;_t&&(De.I=_t),De.B&&(Qh(De),Ic(De)),S.g=K}else By(S);0<g.i.length&&Mc(g)}else Ee[0]!="stop"&&Ee[0]!="close"||ni(g,7);else g.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?ni(g,7):ef(g):Ee[0]!="noop"&&g.l&&g.l.ta(Ee),g.v=0)}}fa(4)}catch{}}var JS=class{constructor(u,p){this.g=u,this.map=p}};function vy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _y(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function wy(u){return u.h?1:u.g?u.g.size:0}function Xh(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Jh(u,p){u.g?u.g.add(p):u.h=p}function xy(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}vy.prototype.cancel=function(){if(this.i=by(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function by(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.D);return p}return k(u.i)}function ZS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var p=[],g=u.length,S=0;S<g;S++)p.push(u[S]);return p}p=[],g=0;for(S in u)p[g++]=u[S];return p}function eC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var p=[];u=u.length;for(var g=0;g<u;g++)p.push(g);return p}p=[],g=0;for(const S in u)p[g++]=S;return p}}}function ky(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var g=eC(u),S=ZS(u),L=S.length,V=0;V<L;V++)p.call(void 0,S[V],g&&g[V],u)}var Ey=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tC(u,p){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var S=u[g].indexOf("="),L=null;if(0<=S){var V=u[g].substring(0,S);L=u[g].substring(S+1)}else V=u[g];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ti(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ti){this.h=u.h,Sc(this,u.j),this.o=u.o,this.g=u.g,Cc(this,u.s),this.l=u.l;var p=u.i,g=new _a;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),Ty(this,g),this.m=u.m}else u&&(p=String(u).match(Ey))?(this.h=!1,Sc(this,p[1]||"",!0),this.o=ya(p[2]||""),this.g=ya(p[3]||"",!0),Cc(this,p[4]),this.l=ya(p[5]||"",!0),Ty(this,p[6]||"",!0),this.m=ya(p[7]||"")):(this.h=!1,this.i=new _a(null,this.h))}ti.prototype.toString=function(){var u=[],p=this.j;p&&u.push(va(p,Iy,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(va(p,Iy,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(va(g,g.charAt(0)=="/"?sC:rC,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",va(g,oC)),u.join("")};function kr(u){return new ti(u)}function Sc(u,p,g){u.j=g?ya(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Cc(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function Ty(u,p,g){p instanceof _a?(u.i=p,aC(u.i,u.h)):(g||(p=va(p,iC)),u.i=new _a(p,u.h))}function je(u,p,g){u.i.set(p,g)}function Ac(u){return je(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ya(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function va(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,nC),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function nC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Iy=/[#\/\?@]/g,rC=/[#\?:]/g,sC=/[#\?]/g,iC=/[#\?@]/g,oC=/#/g;function _a(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function ts(u){u.g||(u.g=new Map,u.h=0,u.i&&tC(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=_a.prototype,t.add=function(u,p){ts(this),this.i=null,u=Yi(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function Sy(u,p){ts(u),p=Yi(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Cy(u,p){return ts(u),p=Yi(u,p),u.g.has(p)}t.forEach=function(u,p){ts(this),this.g.forEach(function(g,S){g.forEach(function(L){u.call(p,L,S,this)},this)},this)},t.na=function(){ts(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let S=0;S<p.length;S++){const L=u[S];for(let V=0;V<L.length;V++)g.push(p[S])}return g},t.V=function(u){ts(this);let p=[];if(typeof u=="string")Cy(this,u)&&(p=p.concat(this.g.get(Yi(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)p=p.concat(u[g])}return p},t.set=function(u,p){return ts(this),this.i=null,u=Yi(this,u),Cy(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function Ay(u,p,g){Sy(u,p),0<g.length&&(u.i=null,u.g.set(Yi(u,p),k(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var S=p[g];const V=encodeURIComponent(String(S)),K=this.V(S);for(S=0;S<K.length;S++){var L=V;K[S]!==""&&(L+="="+encodeURIComponent(String(K[S]))),u.push(L)}}return this.i=u.join("&")};function Yi(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function aC(u,p){p&&!u.j&&(ts(u),u.i=null,u.g.forEach(function(g,S){var L=S.toLowerCase();S!=L&&(Sy(this,S),Ay(this,L,g))},u)),u.j=p}function lC(u,p){const g=new ma;if(a.Image){const S=new Image;S.onload=y(ns,g,"TestLoadImage: loaded",!0,p,S),S.onerror=y(ns,g,"TestLoadImage: error",!1,p,S),S.onabort=y(ns,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=y(ns,g,"TestLoadImage: timeout",!1,p,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else p(!1)}function cC(u,p){const g=new ma,S=new AbortController,L=setTimeout(()=>{S.abort(),ns(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:S.signal}).then(V=>{clearTimeout(L),V.ok?ns(g,"TestPingServer: ok",!0,p):ns(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),ns(g,"TestPingServer: error",!1,p)})}function ns(u,p,g,S,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),S(g)}catch{}}function uC(){this.g=new Zt}function dC(u,p,g){const S=g||"";try{ky(u,function(L,V){let K=L;c(L)&&(K=Wt(L)),p.push(S+V+"="+encodeURIComponent(K))})}catch(L){throw p.push(S+"type="+encodeURIComponent("_badmap")),L}}function Pc(u){this.l=u.Ub||null,this.j=u.eb||!1}x(Pc,Gi),Pc.prototype.g=function(){return new Rc(this.l,this.j)},Pc.prototype.i=function(u){return function(){return u}}({});function Rc(u,p){ie.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Rc,ie),t=Rc.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,xa(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,xa(this)),this.g&&(this.readyState=3,xa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Py(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Py(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?wa(this):xa(this),this.readyState==3&&Py(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,wa(this))},t.Qa=function(u){this.g&&(this.response=u,wa(this))},t.ga=function(){this.g&&wa(this)};function wa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,xa(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function xa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Rc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ry(u){let p="";return M(u,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function Zh(u,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Ry(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):je(u,p,g))}function Xe(u){ie.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Xe,ie);var hC=/^https?$/i,fC=["POST","PUT"];t=Xe.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qh.g(),this.v=this.o?he(this.o):he(qh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(V){Ny(this,V);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var L in S)g.set(L,S[L]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const V of S.keys())g.set(V,S.get(V));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fC,p,void 0))||S||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,K]of g)this.g.setRequestHeader(V,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oy(this),this.u=!0,this.g.send(u),this.u=!1}catch(V){Ny(this,V)}};function Ny(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Dy(u),Nc(u)}function Dy(u){u.A||(u.A=!0,Ie(u,"complete"),Ie(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ie(this,"complete"),Ie(this,"abort"),Nc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nc(this,!0)),Xe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?My(this):this.bb())},t.bb=function(){My(this)};function My(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Er(u)!=4||u.Z()!=2)){if(u.u&&Er(u)==4)$t(u.Ea,0,u);else if(Ie(u,"readystatechange"),Er(u)==4){u.h=!1;try{const K=u.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=K===0){var L=String(u.D).match(Ey)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),S=!hC.test(L?L.toLowerCase():"")}g=S}if(g)Ie(u,"complete"),Ie(u,"success");else{u.m=6;try{var V=2<Er(u)?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.Z()+"]",Dy(u)}}finally{Nc(u)}}}}function Nc(u,p){if(u.g){Oy(u);const g=u.g,S=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||Ie(u,"ready");try{g.onreadystatechange=S}catch{}}}function Oy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Er(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),nt(p)}};function Ly(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function pC(u){const p={};u=(u.g&&2<=Er(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(_(u[S]))continue;var g=R(u[S]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[L]||[];p[L]=V,V.push(g)}T(p,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function jy(u){this.Aa=0,this.i=[],this.j=new ma,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,u),this.cb=ba("retryDelaySeedMs",1e4,u),this.Wa=ba("forwardChannelMaxRetries",2,u),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new vy(u&&u.concurrentRequestLimit),this.Da=new uC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jy.prototype,t.la=8,t.G=1,t.connect=function(u,p,g,S){qt(0),this.W=u,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=qy(this,null,this.W),Mc(this)};function ef(u){if(Vy(u),u.G==3){var p=u.U++,g=kr(u.I);if(je(g,"SID",u.K),je(g,"RID",p),je(g,"TYPE","terminate"),ka(u,g),p=new es(u,u.j,p),p.L=2,p.v=Ac(kr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Ky(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ic(p)}Wy(u)}function Dc(u){u.g&&(nf(u),u.g.cancel(),u.g=null)}function Vy(u){Dc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Oc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Mc(u){if(!_y(u.h)&&!u.s){u.s=!0;var p=u.Ga;de||q(),B||(de(),B=!0),Q.add(p,u),u.B=0}}function mC(u,p){return wy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=pa(m(u.Ga,u,p),Hy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new es(this,this.j,u);let V=this.o;if(this.S&&(V?(V=w(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=Uy(this,L,p),g=kr(this.I),je(g,"RID",u),je(g,"CVER",22),this.D&&je(g,"X-HTTP-Session-Id",this.D),ka(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(Ry(V)))+"&"+p:this.m&&Zh(g,this.m,V)),Jh(this.h,L),this.Ua&&je(g,"TYPE","init"),this.P?(je(g,"$req",p),je(g,"SID","null"),L.T=!0,Gh(L,g,null)):Gh(L,g,p),this.G=2}}else this.G==3&&(u?Fy(this,u):this.i.length==0||_y(this.h)||Fy(this))};function Fy(u,p){var g;p?g=p.l:g=u.U++;const S=kr(u.I);je(S,"SID",u.K),je(S,"RID",g),je(S,"AID",u.T),ka(u,S),u.m&&u.o&&Zh(S,u.m,u.o),g=new es(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Uy(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Jh(u.h,g),Gh(g,S,p)}function ka(u,p){u.H&&M(u.H,function(g,S){je(p,S,g)}),u.l&&ky({},function(g,S){je(p,S,g)})}function Uy(u,p,g){g=Math.min(u.i.length,g);var S=u.l?m(u.l.Na,u.l,u):null;e:{var L=u.i;let V=-1;for(;;){const K=["count="+g];V==-1?0<g?(V=L[0].g,K.push("ofs="+V)):V=0:K.push("ofs="+V);let De=!0;for(let _t=0;_t<g;_t++){let Ee=L[_t].g;const At=L[_t].map;if(Ee-=V,0>Ee)V=Math.max(0,L[_t].g-100),De=!1;else try{dC(At,K,"req"+Ee+"_")}catch{S&&S(At)}}if(De){S=K.join("&");break e}}}return u=u.i.splice(0,g),p.D=u,S}function By(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;de||q(),B||(de(),B=!0),Q.add(p,u),u.v=0}}function tf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=pa(m(u.Fa,u),Hy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,zy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=pa(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qt(10),Dc(this),zy(this))};function nf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function zy(u){u.g=new es(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=kr(u.qa);je(p,"RID","rpc"),je(p,"SID",u.K),je(p,"AID",u.T),je(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&je(p,"TO",u.ja),je(p,"TYPE","xmlhttp"),ka(u,p),u.m&&u.o&&Zh(p,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Ac(kr(p)),g.m=null,g.P=!0,my(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Dc(this),tf(this),qt(19))};function Oc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function $y(u,p){var g=null;if(u.g==p){Oc(u),nf(u),u.g=null;var S=2}else if(Xh(u.h,p))g=p.D,xy(u.h,p),S=1;else return;if(u.G!=0){if(p.o)if(S==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=u.B;S=kc(),Ie(S,new dy(S,g)),Mc(u)}else By(u);else if(L=p.s,L==3||L==0&&0<p.X||!(S==1&&mC(u,p)||S==2&&tf(u)))switch(g&&0<g.length&&(p=u.h,p.i=p.i.concat(g)),L){case 1:ni(u,5);break;case 4:ni(u,10);break;case 3:ni(u,6);break;default:ni(u,2)}}}function Hy(u,p){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*p}function ni(u,p){if(u.j.info("Error code "+p),p==2){var g=m(u.fb,u),S=u.Xa;const L=!S;S=new ti(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Sc(S,"https"),Ac(S),L?lC(S.toString(),g):cC(S.toString(),g)}else qt(2);u.G=0,u.l&&u.l.sa(p),Wy(u),Vy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function Wy(u){if(u.G=0,u.ka=[],u.l){const p=by(u.h);(p.length!=0||u.i.length!=0)&&(E(u.ka,p),E(u.ka,u.i),u.h.i.length=0,k(u.i),u.i.length=0),u.l.ra()}}function qy(u,p,g){var S=g instanceof ti?kr(g):new ti(g);if(S.g!="")p&&(S.g=p+"."+S.g),Cc(S,S.s);else{var L=a.location;S=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new ti(null);S&&Sc(V,S),p&&(V.g=p),L&&Cc(V,L),g&&(V.l=g),S=V}return g=u.D,p=u.ya,g&&p&&je(S,g,p),je(S,"VER",u.la),ka(u,S),S}function Ky(u,p,g){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new Xe(new Pc({eb:g})):new Xe(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gy(){}t=Gy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lc(){}Lc.prototype.g=function(u,p){return new yn(u,p)};function yn(u,p){ie.call(this),this.g=new jy(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!_(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!_(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Xi(this)}x(yn,ie),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){ef(this.g)},yn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Wt(u),u=g);p.i.push(new JS(p.Ya++,u)),p.G==3&&Mc(p)},yn.prototype.N=function(){this.g.l=null,delete this.j,ef(this.g),delete this.g,yn.aa.N.call(this)};function Qy(u){Hh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}x(Qy,Hh);function Yy(){Wh.call(this),this.status=1}x(Yy,Wh);function Xi(u){this.g=u}x(Xi,Gy),Xi.prototype.ua=function(){Ie(this.g,"a")},Xi.prototype.ta=function(u){Ie(this.g,new Qy(u))},Xi.prototype.sa=function(u){Ie(this.g,new Yy)},Xi.prototype.ra=function(){Ie(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,a1=function(){return new Lc},o1=function(){return kc()},i1=Zs,hm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ec.NO_ERROR=0,Ec.TIMEOUT=8,Ec.HTTP_ERROR=6,Fu=Ec,hy.COMPLETE="complete",s1=hy,lt.EventType=rt,rt.OPEN="a",rt.CLOSE="b",rt.ERROR="c",rt.MESSAGE="d",ie.prototype.listen=ie.prototype.K,qa=lt,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,r1=Xe}).apply(typeof nu<"u"?nu:typeof self<"u"?self:typeof window<"u"?window:{});const ew="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new mh("@firebase/firestore");function Na(){return Oi.logLevel}function Z(t,...e){if(Oi.logLevel<=ve.DEBUG){const n=e.map(a0);Oi.debug(`Firestore (${sa}): ${t}`,...n)}}function Kr(t,...e){if(Oi.logLevel<=ve.ERROR){const n=e.map(a0);Oi.error(`Firestore (${sa}): ${t}`,...n)}}function Bo(t,...e){if(Oi.logLevel<=ve.WARN){const n=e.map(a0);Oi.warn(`Firestore (${sa}): ${t}`,...n)}}function a0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: `+t;throw Kr(e),new Error(e)}function Re(t,e){t||le()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Bn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class DL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ML{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new l1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new Mt(e)}}class OL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class LL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Re(this.o===void 0);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new jL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=FL(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function zo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new Ze(0,0))}static max(){return new ce(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends Wl{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const UL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends Wl{construct(e,n,r){return new Et(e,n,r)}static isValidIdentifier(e){return UL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Y(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Y(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Y(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(n)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Ue.fromString(e))}static fromName(e){return new ne(Ue.fromString(e).popFirst(5))}static empty(){return new ne(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Ue(e.slice()))}}function BL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new Ze(n+1,0):new Ze(n,r));return new Vs(s,ne.empty(),e)}function zL(t){return new Vs(t.readTime,t.key,-1)}class Vs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vs(ce.min(),ne.empty(),-1)}static max(){return new Vs(ce.max(),ne.empty(),-1)}}function $L(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ne.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==HL)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function qL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function gc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}l0.oe=-1;function kh(t){return t==null}function Ad(t){return t===0&&1/t==-1/0}function KL(t){return typeof t=="number"&&Number.isInteger(t)&&!Ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function u1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ru(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ru(this.root,e,this.comparator,!1)}getReverseIterator(){return new ru(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ru(this.root,e,this.comparator,!0)}}class ru{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??bt.RED,this.left=s??bt.EMPTY,this.right=i??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new bt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return bt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,s,i){return this}insert(e,n,r){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nw(this.data.getIterator())}getIteratorFrom(e){return new nw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class nw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new It(Et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new d1("Invalid base64 string: "+i):i}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const GL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fs(t){if(Re(!!t),typeof t=="string"){let e=0;const n=GL.exec(t);if(Re(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Li(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function u0(t){const e=t.mapValue.fields.__previous_value__;return c0(e)?u0(e):e}function ql(t){const e=Fs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Kl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su={mapValue:{}};function ji(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?c0(t)?4:XL(t)?9007199254740991:YL(t)?10:11:le()}function br(t,e){if(t===e)return!0;const n=ji(t);if(n!==ji(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ql(t).isEqual(ql(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Fs(s.timestampValue),a=Fs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Li(s.bytesValue).isEqual(Li(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return st(s.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(s.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return st(s.integerValue)===st(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=st(s.doubleValue),a=st(i.doubleValue);return o===a?Ad(o)===Ad(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return zo(t.arrayValue.values||[],e.arrayValue.values||[],br);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(tw(o)!==tw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!br(o[l],a[l])))return!1;return!0}(t,e);default:return le()}}function Gl(t,e){return(t.values||[]).find(n=>br(n,e))!==void 0}function $o(t,e){if(t===e)return 0;const n=ji(t),r=ji(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=st(i.integerValue||i.doubleValue),l=st(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return rw(t.timestampValue,e.timestampValue);case 4:return rw(ql(t),ql(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Li(i),l=Li(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Te(a[c],l[c]);if(d!==0)return d}return Te(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Te(st(i.latitude),st(o.latitude));return a!==0?a:Te(st(i.longitude),st(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sw(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const f=i.fields||{},m=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,k=Te(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return k!==0?k:sw(y,x)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===su.mapValue&&o===su.mapValue)return 0;if(i===su.mapValue)return 1;if(o===su.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const m=Te(l[f],d[f]);if(m!==0)return m;const y=$o(a[l[f]],c[d[f]]);if(y!==0)return y}return Te(l.length,d.length)}(t.mapValue,e.mapValue);default:throw le()}}function rw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=Fs(t),r=Fs(e),s=Te(n.seconds,r.seconds);return s!==0?s:Te(n.nanos,r.nanos)}function sw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$o(n[s],r[s]);if(i)return i}return Te(n.length,r.length)}function Ho(t){return fm(t)}function fm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Fs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=fm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${fm(n.fields[o])}`;return s+"}"}(t.mapValue):le()}function iw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pm(t){return!!t&&"integerValue"in t}function d0(t){return!!t&&"arrayValue"in t}function ow(t){return!!t&&"nullValue"in t}function aw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uu(t){return!!t&&"mapValue"in t}function YL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function dl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function XL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(n)}setAll(e){let n=Et.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=dl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return br(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Uu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ia(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Dn(dl(this.value))}}function h1(t){const e=[];return ia(t.fields,(n,r)=>{const s=new Et([n]);if(Uu(r)){const i=h1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Lt(e,0,ce.min(),ce.min(),ce.min(),Dn.empty(),0)}static newFoundDocument(e,n,r,s){return new Lt(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Lt(e,2,n,ce.min(),ce.min(),Dn.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,ce.min(),ce.min(),Dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.position=e,this.inclusive=n}}function lw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ne.comparator(ne.fromName(o.referenceValue),n.key):r=$o(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function cw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!br(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n="asc"){this.field=e,this.dir=n}}function JL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{}class ht extends f1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ej(e,n,r):n==="array-contains"?new rj(e,r):n==="in"?new sj(e,r):n==="not-in"?new ij(e,r):n==="array-contains-any"?new oj(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new tj(e,r):new nj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($o(n,this.value)):n!==null&&ji(this.value)===ji(n)&&this.matchesComparison($o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends f1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ir(e,n)}matches(e){return p1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function p1(t){return t.op==="and"}function m1(t){return ZL(t)&&p1(t)}function ZL(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function mm(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Ho(t.value);if(m1(t))return t.filters.map(e=>mm(e)).join(",");{const e=t.filters.map(n=>mm(n)).join(",");return`${t.op}(${e})`}}function g1(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&br(r.value,s.value)}(t,e):t instanceof ir?function(r,s){return s instanceof ir&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&g1(o,s.filters[a]),!0):!1}(t,e):void le()}function y1(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Ho(n.value)}`}(t):t instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(y1).join(" ,")+"}"}(t):"Filter"}class ej extends ht{constructor(e,n,r){super(e,n,r),this.key=ne.fromName(r.referenceValue)}matches(e){const n=ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class tj extends ht{constructor(e,n){super(e,"in",n),this.keys=v1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class nj extends ht{constructor(e,n){super(e,"not-in",n),this.keys=v1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function v1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ne.fromName(r.referenceValue))}class rj extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return d0(n)&&Gl(n.arrayValue,this.value)}}class sj extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gl(this.value.arrayValue,n)}}class ij extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gl(this.value.arrayValue,n)}}class oj extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!d0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function uw(t,e=null,n=[],r=[],s=null,i=null,o=null){return new aj(t,e,n,r,s,i,o)}function h0(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),kh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ho(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ho(r)).join(",")),e.ue=n}return e.ue}function f0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!g1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cw(t.startAt,e.startAt)&&cw(t.endAt,e.endAt)}function gm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function lj(t,e,n,r,s,i,o,a){return new oa(t,e,n,r,s,i,o,a)}function p0(t){return new oa(t)}function dw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _1(t){return t.collectionGroup!==null}function hl(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new It(Et.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ql(i,r))}),n.has(Et.keyField().canonicalString())||e.ce.push(new Ql(Et.keyField(),r))}return e.ce}function _r(t){const e=ue(t);return e.le||(e.le=cj(e,hl(t))),e.le}function cj(t,e){if(t.limitType==="F")return uw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ql(s.field,i)});const n=t.endAt?new Pd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pd(t.startAt.position,t.startAt.inclusive):null;return uw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ym(t,e){const n=t.filters.concat([e]);return new oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Rd(t,e,n){return new oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eh(t,e){return f0(_r(t),_r(e))&&t.limitType===e.limitType}function w1(t){return`${h0(_r(t))}|lt:${t.limitType}`}function no(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>y1(s)).join(", ")}]`),kh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ho(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ho(s)).join(",")),`Target(${r})`}(_r(t))}; limitType=${t.limitType})`}function Th(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ne.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of hl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=lw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,hl(r),s)||r.endAt&&!function(o,a,l){const c=lw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,hl(r),s))}(t,e)}function uj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x1(t){return(e,n)=>{let r=!1;for(const s of hl(t)){const i=dj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function dj(t,e,n){const r=t.field.isKeyField()?ne.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?$o(l,c):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return u1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new Qe(ne.comparator);function Gr(){return hj}const b1=new Qe(ne.comparator);function Ka(...t){let e=b1;for(const n of t)e=e.insert(n.key,n);return e}function k1(t){let e=b1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function yi(){return fl()}function E1(){return fl()}function fl(){return new aa(t=>t.toString(),(t,e)=>t.isEqual(e))}const fj=new Qe(ne.comparator),pj=new It(ne.comparator);function ye(...t){let e=pj;for(const n of t)e=e.add(n);return e}const mj=new It(Te);function gj(){return mj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ad(e)?"-0":e}}function T1(t){return{integerValue:""+t}}function yj(t,e){return KL(e)?T1(e):m0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this._=void 0}}function vj(t,e,n){return t instanceof Yl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&c0(i)&&(i=u0(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Xl?S1(t,e):t instanceof Jl?C1(t,e):function(s,i){const o=I1(s,i),a=hw(o)+hw(s.Pe);return pm(o)&&pm(s.Pe)?T1(a):m0(s.serializer,a)}(t,e)}function _j(t,e,n){return t instanceof Xl?S1(t,e):t instanceof Jl?C1(t,e):n}function I1(t,e){return t instanceof Nd?function(r){return pm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Yl extends Ih{}class Xl extends Ih{constructor(e){super(),this.elements=e}}function S1(t,e){const n=A1(e);for(const r of t.elements)n.some(s=>br(s,r))||n.push(r);return{arrayValue:{values:n}}}class Jl extends Ih{constructor(e){super(),this.elements=e}}function C1(t,e){let n=A1(e);for(const r of t.elements)n=n.filter(s=>!br(s,r));return{arrayValue:{values:n}}}class Nd extends Ih{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hw(t){return st(t.integerValue||t.doubleValue)}function A1(t){return d0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n){this.field=e,this.transform=n}}function xj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Xl&&s instanceof Xl||r instanceof Jl&&s instanceof Jl?zo(r.elements,s.elements,br):r instanceof Nd&&s instanceof Nd?br(r.Pe,s.Pe):r instanceof Yl&&s instanceof Yl}(t.transform,e.transform)}class bj{constructor(e,n){this.version=e,this.transformResults=n}}class wr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sh{}function P1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new N1(t.key,wr.none()):new yc(t.key,t.data,wr.none());{const n=t.data,r=Dn.empty();let s=new It(Et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Hi(t.key,r,new Xn(s.toArray()),wr.none())}}function kj(t,e,n){t instanceof yc?function(s,i,o){const a=s.value.clone(),l=pw(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(s,i,o){if(!Bu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=pw(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(R1(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function pl(t,e,n,r){return t instanceof yc?function(i,o,a,l){if(!Bu(i.precondition,o))return a;const c=i.value.clone(),d=mw(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hi?function(i,o,a,l){if(!Bu(i.precondition,o))return a;const c=mw(i.fieldTransforms,l,o),d=o.data;return d.setAll(R1(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Bu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Ej(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=I1(r.transform,s||null);i!=null&&(n===null&&(n=Dn.empty()),n.set(r.field,i))}return n||null}function fw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zo(r,s,(i,o)=>xj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yc extends Sh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hi extends Sh{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function R1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function pw(t,e,n){const r=new Map;Re(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,_j(o,a,n[s]))}return r}function mw(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,vj(i,o,e))}return r}class N1 extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tj extends Sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&kj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=pl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=pl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=P1(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,(n,r)=>fw(n,r))&&zo(this.baseMutations,e.baseMutations,(n,r)=>fw(n,r))}}class g0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Re(e.mutations.length===r.length);let s=function(){return fj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new g0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,we;function Aj(t){switch(t){default:return le();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function D1(t){if(t===void 0)return Kr("GRPC error has no .code"),F.UNKNOWN;switch(t){case ct.OK:return F.OK;case ct.CANCELLED:return F.CANCELLED;case ct.UNKNOWN:return F.UNKNOWN;case ct.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ct.INTERNAL:return F.INTERNAL;case ct.UNAVAILABLE:return F.UNAVAILABLE;case ct.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ct.NOT_FOUND:return F.NOT_FOUND;case ct.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ct.ABORTED:return F.ABORTED;case ct.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ct.DATA_LOSS:return F.DATA_LOSS;default:return le()}}(we=ct||(ct={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=new ki([4294967295,4294967295],0);function gw(t){const e=Pj().encode(t),n=new n1;return n.update(e),new Uint8Array(n.digest())}function yw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ki([n,r],0),new ki([s,i],0)]}class y0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ga(`Invalid padding: ${n}`);if(r<0)throw new Ga(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ki.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ki.fromNumber(r)));return s.compare(Rj)===1&&(s=new ki([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=gw(e),[r,s]=yw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new y0(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=gw(e),[r,s]=yw(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,vc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ch(ce.min(),s,new Qe(Te),Gr(),ye())}}class vc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vc(r,n,ye(),ye(),ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class M1{constructor(e,n){this.targetId=e,this.me=n}}class O1{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class vw{constructor(){this.fe=0,this.ge=ww(),this.pe=Ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:le()}}),new vc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ww()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Nj{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gr(),this.qe=_w(),this.Qe=new Qe(Te)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(gm(i))if(r===0){const o=new ne(i.path);this.Ue(n,o,Lt.newNoDocument(o,ce.min()))}else Re(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Li(r).toUint8Array()}catch(l){if(l instanceof d1)return Bo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new y0(o,s,i)}catch(l){return Bo(l instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&gm(a.target)){const l=new ne(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Lt.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ye();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Ch(e,n,this.Qe,this.ke,r);return this.ke=Gr(),this.qe=_w(),this.Qe=new Qe(Te),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new vw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new It(Te),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _w(){return new Qe(ne.comparator)}function ww(){return new Qe(ne.comparator)}const Dj={asc:"ASCENDING",desc:"DESCENDING"},Mj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oj={and:"AND",or:"OR"};class Lj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vm(t,e){return t.useProto3Json||kh(e)?e:{value:e}}function Dd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jj(t,e){return Dd(t,e.toTimestamp())}function xr(t){return Re(!!t),ce.fromTimestamp(function(n){const r=Fs(n);return new Ze(r.seconds,r.nanos)}(t))}function v0(t,e){return _m(t,e).canonicalString()}function _m(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function j1(t){const e=Ue.fromString(t);return Re(z1(e)),e}function wm(t,e){return v0(t.databaseId,e.path)}function $f(t,e){const n=j1(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ne(F1(n))}function V1(t,e){return v0(t.databaseId,e)}function Vj(t){const e=j1(t);return e.length===4?Ue.emptyPath():F1(e)}function xm(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function F1(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function xw(t,e,n){return{name:wm(t,e),fields:n.value.mapValue.fields}}function Fj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Re(d===void 0||typeof d=="string"),Ct.fromBase64String(d||"")):(Re(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ct.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?F.UNKNOWN:D1(c.code);return new Y(d,c.message||"")}(o);n=new O1(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=$f(t,r.document.name),i=xr(r.document.updateTime),o=r.document.createTime?xr(r.document.createTime):ce.min(),a=new Dn({mapValue:{fields:r.document.fields}}),l=Lt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new zu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=$f(t,r.document),i=r.readTime?xr(r.readTime):ce.min(),o=Lt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new zu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=$f(t,r.document),i=r.removedTargetIds||[];n=new zu([],i,s,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Cj(s,i),a=r.targetId;n=new M1(a,o)}}return n}function Uj(t,e){let n;if(e instanceof yc)n={update:xw(t,e.key,e.value)};else if(e instanceof N1)n={delete:wm(t,e.key)};else if(e instanceof Hi)n={update:xw(t,e.key,e.data),updateMask:Qj(e.fieldMask)};else{if(!(e instanceof Tj))return le();n={verify:wm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Yl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Jl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Nd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le()}(t,e.precondition)),n}function Bj(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?xr(s.updateTime):xr(i);return o.isEqual(ce.min())&&(o=xr(i)),new bj(o,s.transformResults||[])}(n,e))):[]}function zj(t,e){return{documents:[V1(t,e.path)]}}function $j(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=V1(t,s);const i=function(c){if(c.length!==0)return B1(ir.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:ro(m.field),direction:qj(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=vm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function Hj(t){let e=Vj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Re(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const m=U1(f);return m instanceof ir&&m1(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(x){return new Ql(so(x.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,kh(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,y=f.values||[];return new Pd(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,y=f.values||[];return new Pd(y,m)}(n.endAt)),lj(e,s,o,i,a,"F",l,c)}function Wj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function U1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=so(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=so(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=so(n.unaryFilter.field);return ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=so(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(so(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(r=>U1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function qj(t){return Dj[t]}function Kj(t){return Mj[t]}function Gj(t){return Oj[t]}function ro(t){return{fieldPath:t.canonicalString()}}function so(t){return Et.fromServerFormat(t.fieldPath)}function B1(t){return t instanceof ht?function(n){if(n.op==="=="){if(aw(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NAN"}};if(ow(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(aw(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NAN"}};if(ow(n.value))return{unaryFilter:{field:ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(n.field),op:Kj(n.op),value:n.value}}}(t):t instanceof ir?function(n){const r=n.getFilters().map(s=>B1(s));return r.length===1?r[0]:{compositeFilter:{op:Gj(n.op),filters:r}}}(t):le()}function Qj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function z1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,r,s,i=ce.min(),o=ce.min(),a=Ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.ct=e}}function Xj(t){const e=Hj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(){this.un=new Zj}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Vs.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Zj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new It(Ue.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new It(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wo(0)}static kn(){return new Wo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.changes=new aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&pl(r.mutation,s,Xn.empty(),Ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){const s=yi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ka();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=yi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=Gr();const o=fl(),a=function(){return fl()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Hi)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),pl(d.mutation,c,d.mutation.getFieldMask(),Ze.now())):o.set(c.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new tV(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=fl();let s=new Qe((o,a)=>o-a),i=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Xn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(s.get(a.batchId)||ye()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=E1();d.forEach(m=>{if(!i.has(m)){const y=P1(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(yi());let a=-1,l=i;return o.next(c=>U.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ye())).next(d=>({batchId:a,changes:k1(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ne(n)).next(r=>{let s=Ka();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ka();return this.indexManager.getCollectionParents(e,i).next(a=>U.forEach(a,l=>{const c=function(f,m){return new oa(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Lt.newInvalidDocument(d)))});let a=Ka();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&pl(d.mutation,c,Xn.empty(),Ze.now()),Th(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xr(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:Xj(s.bundledQuery),readTime:xr(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(){this.overlays=new Qe(ne.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=yi();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=yi(),i=n.length+1,o=new ne(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Qe((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=yi(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=yi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return U.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Sj(n,r));let i=this.Ir.get(n);i===void 0&&(i=ye(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.Tr=new It(mt.Er),this.dr=new It(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ne(new Ue([])),r=new mt(n,e),s=new mt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ne(new Ue([])),r=new mt(n,e),s=new mt(n,e+1);let i=ye();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class mt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ne.comparator(e.key,n.key)||Te(e.wr,n.wr)}static Ar(e,n){return Te(e.wr,n.wr)||ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new It(mt.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ij(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new mt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new mt(n,0),s=new mt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Te);return n.forEach(s=>{const i=new mt(s,0),o=new mt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ne.isDocumentKey(i)||(i=i.child(""));const o=new mt(new ne(i),0);let a=new It(Te);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Re(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new mt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new mt(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.Mr=e,this.docs=function(){return new Qe(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=Gr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Lt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Gr();const o=n.path,a=new ne(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||$L(zL(d),r)<=0||(s.has(d.key)||Th(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){le()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new lV(this)}getSize(e){return U.resolve(this.size)}}class lV extends eV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.persistence=e,this.Nr=new aa(n=>h0(n),f0),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _0,this.targetCount=0,this.kr=Wo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Wo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new l0(0),this.Kr=!1,this.Kr=!0,this.$r=new iV,this.referenceDelegate=e(this),this.Ur=new cV(this),this.indexManager=new Jj,this.remoteDocumentCache=function(s){return new aV(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Yj(n),this.Gr=new rV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new oV(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new dV(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class dV extends WL{constructor(e){super(),this.currentSequenceNumber=e}}class w0{constructor(e){this.persistence=e,this.Jr=new _0,this.Yr=null}static Zr(e){return new w0(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=ne.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ye(),s=ye();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new x0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return d2()?8:qL(Ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new hV;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Na()<=ve.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",no(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Na()<=ve.DEBUG&&Z("QueryEngine","Query:",no(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Na()<=ve.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",no(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):U.resolve())}Yi(e,n){if(dw(n))return U.resolve(null);let r=_r(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Rd(n,null,"F"),r=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ye(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Rd(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return dw(n)||s.isEqual(ce.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Na()<=ve.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),no(n)),this.rs(e,o,n,BL(s,-1)).next(a=>a))})}ts(e,n){let r=new It(x1(e));return n.forEach((s,i)=>{Th(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Na()<=ve.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",no(n)),this.Ji.getDocumentsMatchingQuery(e,n,Vs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Qe(Te),this._s=new aa(i=>h0(i),f0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function mV(t,e,n,r){return new pV(t,e,n,r)}async function $1(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ye();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function gV(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,m=f.keys();let y=U.resolve();return m.forEach(x=>{y=y.next(()=>d.getEntry(l,x)).next(k=>{const E=c.docVersions.get(x);Re(E!==null),k.version.compareTo(E)<0&&(f.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),d.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function H1(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function yV(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Ct.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(f,y),function(k,E,v){return k.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,y,d)&&a.push(n.Ur.updateTargetData(i,y))});let l=Gr(),c=ye();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(vV(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(ce.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function vV(t,e,n){let r=ye(),s=ye();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Gr();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ce.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function _V(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wV(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new _s(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function bm(t,e,n){const r=ue(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!gc(o))throw o;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function bw(t,e,n){const r=ue(t);let s=ce.min(),i=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const f=ue(l),m=f._s.get(d);return m!==void 0?U.resolve(f.os.get(m)):f.Ur.getTargetData(c,d)}(r,o,_r(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:ye())).next(a=>(xV(r,uj(e),a),{documents:a,Ts:i})))}function xV(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class kw{constructor(){this.activeTargetIds=gj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class bV{constructor(){this.so=new kw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iu=null;function Hf(){return iu===null?iu=function(){return 268435456+Math.round(2147483648*Math.random())}():iu++,"0x"+iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class IV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=Hf(),l=this.xo(n,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(Z("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Bo("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=EV[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Hf();return new Promise((o,a)=>{const l=new r1;l.setWithCredentials(!0),l.listenOnce(s1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Fu.NO_ERROR:const d=l.getResponseJson();Z(Dt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Fu.TIMEOUT:Z(Dt,`RPC '${e}' ${i} timed out`),a(new Y(F.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const f=l.getStatus();if(Z(Dt,`RPC '${e}' ${i} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const x=function(E){const v=E.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(v)>=0?v:F.UNKNOWN}(y.status);a(new Y(x,y.message))}else a(new Y(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Y(F.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{Z(Dt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);Z(Dt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Hf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=a1(),a=o1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");Z(Dt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const f=o.createWebChannel(d,l);let m=!1,y=!1;const x=new TV({Io:E=>{y?Z(Dt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(m||(Z(Dt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),Z(Dt,`RPC '${e}' stream ${s} sending:`,E),f.send(E))},To:()=>f.close()}),k=(E,v,_)=>{E.listen(v,b=>{try{_(b)}catch(P){setTimeout(()=>{throw P},0)}})};return k(f,qa.EventType.OPEN,()=>{y||(Z(Dt,`RPC '${e}' stream ${s} transport opened.`),x.yo())}),k(f,qa.EventType.CLOSE,()=>{y||(y=!0,Z(Dt,`RPC '${e}' stream ${s} transport closed`),x.So())}),k(f,qa.EventType.ERROR,E=>{y||(y=!0,Bo(Dt,`RPC '${e}' stream ${s} transport errored:`,E),x.So(new Y(F.UNAVAILABLE,"The operation could not be completed")))}),k(f,qa.EventType.MESSAGE,E=>{var v;if(!y){const _=E.data[0];Re(!!_);const b=_,P=b.error||((v=b[0])===null||v===void 0?void 0:v.error);if(P){Z(Dt,`RPC '${e}' stream ${s} received error:`,P);const N=P.status;let M=function(C){const A=ct[C];if(A!==void 0)return D1(A)}(N),T=P.message;M===void 0&&(M=F.INTERNAL,T="Unknown error status: "+N+" with message "+P.message),y=!0,x.So(new Y(M,T)),f.close()}else Z(Dt,`RPC '${e}' stream ${s} received:`,_),x.bo(_)}}),k(a,i1.STAT_EVENT,E=>{E.stat===hm.PROXY?Z(Dt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===hm.NOPROXY&&Z(Dt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function Wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return new Lj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new W1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Kr(n.toString()),Kr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Y(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SV extends q1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Fj(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?xr(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=xm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=gm(l)?{documents:zj(i,l)}:{query:$j(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=L1(i,o.resumeToken);const c=vm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=Dd(i,o.snapshotVersion.toTimestamp());const c=vm(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Wj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=xm(this.serializer),n.removeTarget=e,this.a_(n)}}class CV extends q1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Bj(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=xm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Uj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,_m(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,_m(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class PV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kr(n),this.D_=!1):Z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Wi(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.L_.add(4),await _c(c),c.q_.set("Unknown"),c.L_.delete(4),await Ph(c)}(this))})}),this.q_=new PV(r,s)}}async function Ph(t){if(Wi(t))for(const e of t.B_)await e(!0)}async function _c(t){for(const e of t.B_)await e(!1)}function K1(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),T0(n)?E0(n):la(n).r_()&&k0(n,e))}function b0(t,e){const n=ue(t),r=la(n);n.N_.delete(e),r.r_()&&G1(n,e),n.N_.size===0&&(r.r_()?r.o_():Wi(n)&&n.q_.set("Unknown"))}function k0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}la(t).A_(e)}function G1(t,e){t.Q_.xe(e),la(t).R_(e)}function E0(t){t.Q_=new Nj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),la(t).start(),t.q_.v_()}function T0(t){return Wi(t)&&!la(t).n_()&&t.N_.size>0}function Wi(t){return ue(t).L_.size===0}function Q1(t){t.Q_=void 0}async function NV(t){t.q_.set("Online")}async function DV(t){t.N_.forEach((e,n)=>{k0(t,e)})}async function MV(t,e){Q1(t),T0(t)?(t.q_.M_(e),E0(t)):t.q_.set("Unknown")}async function OV(t,e,n){if(t.q_.set("Online"),e instanceof O1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Md(t,r)}else if(e instanceof zu?t.Q_.Ke(e):e instanceof M1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await H1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(Ct.EMPTY_BYTE_STRING,d.snapshotVersion)),G1(i,l);const f=new _s(d.target,l,c,d.sequenceNumber);k0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await Md(t,r)}}async function Md(t,e,n){if(!gc(e))throw e;t.L_.add(1),await _c(t),t.q_.set("Offline"),n||(n=()=>H1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ph(t)})}function Y1(t,e){return e().catch(n=>Md(t,n,e))}async function Rh(t){const e=ue(t),n=Us(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;LV(e);)try{const s=await _V(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,jV(e,s)}catch(s){await Md(e,s)}X1(e)&&J1(e)}function LV(t){return Wi(t)&&t.O_.length<10}function jV(t,e){t.O_.push(e);const n=Us(t);n.r_()&&n.V_&&n.m_(e.mutations)}function X1(t){return Wi(t)&&!Us(t).n_()&&t.O_.length>0}function J1(t){Us(t).start()}async function VV(t){Us(t).p_()}async function FV(t){const e=Us(t);for(const n of t.O_)e.m_(n.mutations)}async function UV(t,e,n){const r=t.O_.shift(),s=g0.from(r,e,n);await Y1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Rh(t)}async function BV(t,e){e&&Us(t).V_&&await async function(r,s){if(function(o){return Aj(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Us(r).s_(),await Y1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Rh(r)}}(t,e),X1(t)&&J1(t)}async function Tw(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=Wi(n);n.L_.add(3),await _c(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ph(n)}async function zV(t,e){const n=ue(t);e?(n.L_.delete(2),await Ph(n)):e||(n.L_.add(2),await _c(n),n.q_.set("Unknown"))}function la(t){return t.K_||(t.K_=function(n,r,s){const i=ue(n);return i.w_(),new SV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:NV.bind(null,t),Ro:DV.bind(null,t),mo:MV.bind(null,t),d_:OV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),T0(t)?E0(t):t.q_.set("Unknown")):(await t.K_.stop(),Q1(t))})),t.K_}function Us(t){return t.U_||(t.U_=function(n,r,s){const i=ue(n);return i.w_(),new CV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:VV.bind(null,t),mo:BV.bind(null,t),f_:FV.bind(null,t),g_:UV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Rh(t)):(await t.U_.stop(),t.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new I0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S0(t,e){if(Kr("AsyncQueue",`${e}: ${t}`),gc(t))return new Y(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ne.comparator(n.key,r.key):(n,r)=>ne.comparator(n.key,r.key),this.keyedMap=Ka(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new Co(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(){this.W_=new Qe(ne.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):le():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class qo{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new qo(e,n,Co.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class HV{constructor(){this.queries=Sw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ue(n),i=s.queries;s.queries=Sw(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Y(F.ABORTED,"Firestore shutting down"))}}function Sw(){return new aa(t=>w1(t),Eh)}async function Z1(t,e){const n=ue(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new $V,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=S0(o,`Initialization of query '${no(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&C0(n)}async function eI(t,e){const n=ue(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function WV(t,e){const n=ue(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&C0(n)}function qV(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function C0(t){t.Y_.forEach(e=>{e.next()})}var km,Cw;(Cw=km||(km={})).ea="default",Cw.Cache="cache";class tI{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new qo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==km.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.key=e}}class rI{constructor(e){this.key=e}}class KV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=x1(e),this.Ra=new Co(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Iw,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),y=Th(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;m&&y?m.data.isEqual(y.data)?x!==k&&(r.track({type:3,doc:y}),E=!0):this.ga(m,y)||(r.track({type:2,doc:y}),E=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),E=!0):m&&!y&&(r.track({type:1,doc:m}),E=!0,(l||c)&&(a=!0)),E&&(y?(o=o.add(y),i=k?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(y,x){const k=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return k(y)-k(x)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new qo(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Iw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new rI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new nI(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class GV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class QV{constructor(e){this.key=e,this.va=!1}}class YV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new aa(a=>w1(a),Eh),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(ne.comparator),this.Na=new Map,this.La=new _0,this.Ba={},this.ka=new Map,this.qa=Wo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function XV(t,e,n=!0){const r=cI(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await sI(r,e,n,!0),s}async function JV(t,e){const n=cI(t);await sI(n,e,!0,!1)}async function sI(t,e,n,r){const s=await wV(t.localStore,_r(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await ZV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&K1(t.remoteStore,s),a}async function ZV(t,e,n,r,s){t.Ka=(f,m,y)=>async function(k,E,v,_){let b=E.view.ma(v);b.ns&&(b=await bw(k.localStore,E.query,!1).then(({documents:T})=>E.view.ma(T,b)));const P=_&&_.targetChanges.get(E.targetId),N=_&&_.targetMismatches.get(E.targetId)!=null,M=E.view.applyChanges(b,k.isPrimaryClient,P,N);return Pw(k,E.targetId,M.wa),M.snapshot}(t,f,m,y);const i=await bw(t.localStore,e,!0),o=new KV(e,i.Ts),a=o.ma(i.documents),l=vc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Pw(t,n,c.wa);const d=new GV(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function e4(t,e,n){const r=ue(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Eh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&b0(r.remoteStore,s.targetId),Em(r,s.targetId)}).catch(mc)):(Em(r,s.targetId),await bm(r.localStore,s.targetId,!0))}async function t4(t,e){const n=ue(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),b0(n.remoteStore,r.targetId))}async function n4(t,e,n){const r=c4(t);try{const s=await function(o,a){const l=ue(o),c=Ze.now(),d=a.reduce((y,x)=>y.add(x.key),ye());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=Gr(),k=ye();return l.cs.getEntries(y,d).next(E=>{x=E,x.forEach((v,_)=>{_.isValidDocument()||(k=k.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,x)).next(E=>{f=E;const v=[];for(const _ of a){const b=Ej(_,f.get(_.key).overlayedDocument);b!=null&&v.push(new Hi(_.key,b,h1(b.value.mapValue),wr.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,v,a)}).next(E=>{m=E;const v=E.applyToLocalDocumentSet(f,k);return l.documentOverlayCache.saveOverlays(y,E.batchId,v)})}).then(()=>({batchId:m.batchId,changes:k1(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Qe(Te)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await wc(r,s.changes),await Rh(r.remoteStore)}catch(s){const i=S0(s,"Failed to persist write");n.reject(i)}}async function iI(t,e){const n=ue(t);try{const r=await yV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Re(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Re(o.va):s.removedDocuments.size>0&&(Re(o.va),o.va=!1))}),await wc(n,r,e)}catch(r){await mc(r)}}function Aw(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&C0(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function r4(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Qe(ne.comparator);o=o.insert(i,Lt.newNoDocument(i,ce.min()));const a=ye().add(i),l=new Ch(ce.min(),new Map,new Qe(Te),o,a);await iI(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),A0(r)}else await bm(r.localStore,e,!1).then(()=>Em(r,e,n)).catch(mc)}async function s4(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await gV(n.localStore,e);aI(n,r,null),oI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wc(n,s)}catch(s){await mc(s)}}async function i4(t,e,n){const r=ue(t);try{const s=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Re(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);aI(r,e,n),oI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wc(r,s)}catch(s){await mc(s)}}function oI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function aI(t,e,n){const r=ue(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Em(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||lI(t,r)})}function lI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(b0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),A0(t))}function Pw(t,e,n){for(const r of n)r instanceof nI?(t.La.addReference(r.key,e),o4(t,r)):r instanceof rI?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||lI(t,r.key)):le()}function o4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.xa.add(r),A0(t))}function A0(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ne(Ue.fromString(e)),r=t.qa.next();t.Na.set(r,new QV(n)),t.Oa=t.Oa.insert(n,r),K1(t.remoteStore,new _s(_r(p0(n.path)),r,"TargetPurposeLimboResolution",l0.oe))}}async function wc(t,e,n){const r=ue(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){s.push(c);const f=x0.Wi(l.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=ue(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(c,m=>U.forEach(m.$i,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>U.forEach(m.Ui,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!gc(f))throw f;Z("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=d.os.get(m),x=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(x);d.os=d.os.insert(m,k)}}}(r.localStore,i))}async function a4(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await $1(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new Y(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wc(n,r.hs)}}function l4(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let s=ye();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function cI(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r4.bind(null,e),e.Ca.d_=WV.bind(null,e.eventManager),e.Ca.$a=qV.bind(null,e.eventManager),e}function c4(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=i4.bind(null,e),e}class Od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ah(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return mV(this.persistence,new fV,e.initialUser,this.serializer)}Ga(e){return new uV(w0.Zr,this.serializer)}Wa(e){return new bV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Od.provider={build:()=>new Od};class Tm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Aw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=a4.bind(null,this.syncEngine),await zV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new HV}()}createDatastore(e){const n=Ah(e.databaseInfo.databaseId),r=function(i){return new IV(i)}(e.databaseInfo);return function(i,o,a,l){return new AV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new RV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Aw(this.syncEngine,n,0),function(){return Ew.D()?new Ew:new kV}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const f=new YV(s,i,o,a,l,c);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ue(s);Z("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await _c(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Tm.provider={build:()=>new Tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Mt.UNAUTHENTICATED,this.clientId=c1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=S0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function qf(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await d4(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Tw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Tw(e.remoteStore,s)),t._onlineComponents=e}async function d4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await qf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Bo("Error using user provided cache. Falling back to memory cache: "+n),await qf(t,new Od)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await qf(t,new Od);return t._offlineComponents}async function dI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Rw(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Rw(t,new Tm))),t._onlineComponents}function h4(t){return dI(t).then(e=>e.syncEngine)}async function hI(t){const e=await dI(t),n=e.eventManager;return n.onListen=XV.bind(null,e.syncEngine),n.onUnlisten=e4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=t4.bind(null,e.syncEngine),n}function f4(t,e,n={}){const r=new Vr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new uI({next:m=>{d.Za(),o.enqueueAndForget(()=>eI(i,f));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Y(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new Y(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new tI(p0(a.path),d,{includeMetadataChanges:!0,_a:!0});return Z1(i,f)}(await hI(t),t.asyncQueue,e,n,r)),r.promise}function p4(t,e,n={}){const r=new Vr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new uI({next:m=>{d.Za(),o.enqueueAndForget(()=>eI(i,f)),m.fromCache&&l.source==="server"?c.reject(new Y(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new tI(a,d,{includeMetadataChanges:!0,_a:!0});return Z1(i,f)}(await hI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t,e,n){if(!n)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m4(t,e,n,r){if(e===!0&&r===!0)throw new Y(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Dw(t){if(!ne.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Mw(t){if(ne.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Nh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function Bs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nh(t);throw new Y(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ow({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ow(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new NL;switch(r.type){case"firstParty":return new LL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Nw.get(n);r&&(Z("ComponentProvider","Removing Datastore"),Nw.delete(n),r.terminate())}(this),Promise.resolve()}}function g4(t,e,n,r={}){var s;const i=(t=Bs(t,Dh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Mt.MOCK_USER;else{a=BE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Y(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Mt(c)}t._authCredentials=new DL(new l1(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xs(this.firestore,e,this._query)}}class pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class Ms extends Xs{constructor(e,n,r){super(e,n,p0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new ne(e))}withConverter(e){return new Ms(this.firestore,e,this._path)}}function ml(t,e,...n){if(t=Ge(t),pI("collection","path",e),t instanceof Dh){const r=Ue.fromString(e,...n);return Mw(r),new Ms(t,null,r)}{if(!(t instanceof pn||t instanceof Ms))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return Mw(r),new Ms(t.firestore,null,r)}}function Ld(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=c1.newId()),pI("doc","path",e),t instanceof Dh){const r=Ue.fromString(e,...n);return Dw(r),new pn(t,null,new ne(r))}{if(!(t instanceof pn||t instanceof Ms))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return Dw(r),new pn(t.firestore,t instanceof Ms?t.converter:null,new ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new W1(this,"async_queue_retry"),this.Vu=()=>{const r=Wf();r&&Z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Wf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Vr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!gc(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Kr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=I0.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&le()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class xc extends Dh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Lw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Lw(e),this._firestoreClient=void 0,await e}}}function y4(t,e){const n=typeof t=="object"?t:gh(),r=typeof t=="string"?t:"(default)",s=Qs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=VE("firestore");i&&g4(s,...i)}return s}function P0(t){if(t._terminated)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||v4(t),t._firestoreClient}function v4(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new QL(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fI(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new u4(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ko(Ct.fromBase64String(e))}catch(n){throw new Y(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ko(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=/^__.*__$/;class w4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new yc(e,this.data,n,this.fieldTransforms)}}function mI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class O0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new O0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mI(this.Cu)&&_4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class x4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ah(e)}Qu(e,n,r,s=!1){return new O0({Cu:e,methodName:n,qu:r,path:Et.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function L0(t){const e=t._freezeSettings(),n=Ah(t._databaseId);return new x4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gI(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);_I("Data must be an object, but it was:",o,r);const a=yI(r,o);let l,c;if(i.merge)l=new Xn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=k4(e,f,n);if(!o.contains(m))throw new Y(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);T4(d,m)||d.push(m)}l=new Xn(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new w4(new Dn(a),l,c)}class j0 extends N0{_toFieldTransform(e){return new wj(e.path,new Yl)}isEqual(e){return e instanceof j0}}function b4(t,e,n,r=!1){return V0(n,t.Qu(r?4:3,e))}function V0(t,e){if(vI(t=Ge(t)))return _I("Unsupported field value:",e,t),yI(t,e);if(t instanceof N0)return function(r,s){if(!mI(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=V0(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return yj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ze.fromDate(r);return{timestampValue:Dd(s.serializer,i)}}if(r instanceof Ze){const i=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dd(s.serializer,i)}}if(r instanceof D0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ko)return{bytesValue:L1(s.serializer,r._byteString)};if(r instanceof pn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:v0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof M0)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return m0(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Nh(r)}`)}(t,e)}function yI(t,e){const n={};return u1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(r,s)=>{const i=V0(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function vI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ze||t instanceof D0||t instanceof Ko||t instanceof pn||t instanceof N0||t instanceof M0)}function _I(t,e,n){if(!vI(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Nh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function k4(t,e,n){if((e=Ge(e))instanceof R0)return e._internalPath;if(typeof e=="string")return wI(t,e);throw jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const E4=new RegExp("[~\\*/\\[\\]]");function wI(t,e,n){if(e.search(E4)>=0)throw jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new R0(...e.split("."))._internalPath}catch{throw jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Y(F.INVALID_ARGUMENT,a+t+l)}function T4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I4 extends xI{data(){return super.data()}}function Mh(t,e){return typeof e=="string"?wI(t,e):e instanceof R0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class F0{}class U0 extends F0{}function Im(t,e,...n){let r=[];e instanceof F0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof B0).length,a=i.filter(l=>l instanceof Oh).length;if(o>1||o>0&&a>0)throw new Y(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Oh extends U0{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Oh(e,n,r)}_apply(e){const n=this._parse(e);return EI(e._query,n),new Xs(e.firestore,e.converter,ym(e._query,n))}_parse(e){const n=L0(e.firestore);return function(i,o,a,l,c,d,f){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Fw(f,d);const y=[];for(const x of f)y.push(Vw(l,i,x));m={arrayValue:{values:y}}}else m=Vw(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Fw(f,d),m=b4(a,o,f,d==="in"||d==="not-in");return ht.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function jw(t,e,n){const r=e,s=Mh("where",t);return Oh._create(s,r,n)}class B0 extends F0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new B0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)EI(o,l),o=ym(o,l)}(e._query,n),new Xs(e.firestore,e.converter,ym(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class z0 extends U0{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new z0(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ql(i,o)}(e._query,this._field,this._direction);return new Xs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new oa(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function bI(t,e="asc"){const n=e,r=Mh("orderBy",t);return z0._create(r,n)}class $0 extends U0{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new $0(e,n,r)}_apply(e){return new Xs(e.firestore,e.converter,Rd(e._query,this._limit,this._limitType))}}function kI(t){return $0._create("limit",t,"F")}function Vw(t,e,n){if(typeof(n=Ge(n))=="string"){if(n==="")throw new Y(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_1(e)&&n.indexOf("/")!==-1)throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ue.fromString(n));if(!ne.isDocumentKey(r))throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return iw(t,new ne(r))}if(n instanceof pn)return iw(t,n._key);throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(n)}.`)}function Fw(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EI(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class C4{convertValue(e,n="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ia(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>st(o.doubleValue));return new M0(i)}convertGeoPoint(e){return new D0(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=u0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ql(e));default:return null}}convertTimestamp(e){const n=Fs(e);return new Ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);Re(z1(r));const s=new Kl(r.get(1),r.get(3)),i=new ne(r.popFirst(5));return s.isEqual(n)||Kr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class II extends xI{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $u extends II{data(e={}){return super.data(e)}}class A4{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Qa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $u(this._firestore,this._userDataWriter,r.key,r,new Qa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new $u(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Qa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new $u(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Qa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:P4(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function P4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(t){t=Bs(t,pn);const e=Bs(t.firestore,xc);return f4(P0(e),t._key).then(n=>R4(e,t,n))}class CI extends C4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ko(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function Sm(t){t=Bs(t,Xs);const e=Bs(t.firestore,xc),n=P0(e),r=new CI(e);return S4(t._query),p4(n,t._query).then(s=>new A4(e,r,t,s))}function Cm(t,e,n){t=Bs(t,pn);const r=Bs(t.firestore,xc),s=TI(t.converter,e,n);return PI(r,[gI(L0(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,wr.none())])}function AI(t,e){const n=Bs(t.firestore,xc),r=Ld(t),s=TI(t.converter,e);return PI(n,[gI(L0(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,wr.exists(!1))]).then(()=>r)}function PI(t,e){return function(r,s){const i=new Vr;return r.asyncQueue.enqueueAndForget(async()=>n4(await h4(r),s,i)),i.promise}(P0(t),e)}function R4(t,e,n){const r=n.docs.get(e._key),s=new CI(t);return new II(t,s,e._key,r,new Qa(n.hasPendingWrites,n.fromCache),e.converter)}function Zl(){return new j0("serverTimestamp")}(function(e,n=!0){(function(s){sa=s})($i),sr(new Fn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new xc(new ML(r.getProvider("auth-internal")),new VL(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),dn(ew,"4.7.3",e),dn(ew,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI="firebasestorage.googleapis.com",NI="storageBucket",N4=2*60*1e3,D4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt extends Bn{constructor(e,n,r=0){super(Kf(e),`Firebase Storage: ${n} (${Kf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function Kf(t){return"storage/"+t}function H0(){const t="An unknown error occurred, please check the error payload for server response.";return new tt(et.UNKNOWN,t)}function M4(t){return new tt(et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function O4(t){return new tt(et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function L4(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tt(et.UNAUTHENTICATED,t)}function j4(){return new tt(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function V4(t){return new tt(et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function F4(){return new tt(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function U4(){return new tt(et.CANCELED,"User canceled the upload/download.")}function B4(t){return new tt(et.INVALID_URL,"Invalid URL '"+t+"'.")}function z4(t){return new tt(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $4(){return new tt(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+NI+"' property when initializing the app?")}function H4(){return new tt(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function W4(){return new tt(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function q4(t){return new tt(et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Am(t){return new tt(et.INVALID_ARGUMENT,t)}function DI(){return new tt(et.APP_DELETED,"The Firebase app was deleted.")}function K4(t){return new tt(et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gl(t,e){return new tt(et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Da(t){throw new tt(et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=bn.makeFromUrl(e,n)}catch{return new bn(e,"")}if(r.path==="")return r;throw z4(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${s}/o${m}`,"i"),x={bucket:1,path:3},k=n===RI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",v=new RegExp(`^https?://${k}/${s}/${E}`,"i"),b=[{regex:a,indices:l,postModify:i},{regex:y,indices:x,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<b.length;P++){const N=b[P],M=N.regex.exec(e);if(M){const T=M[N.indices.bucket];let w=M[N.indices.path];w||(w=""),r=new bn(T,w),N.postModify(r);break}}if(r==null)throw B4(e);return r}}class G4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...E){c||(c=!0,e.apply(null,E))}function f(E){s=setTimeout(()=>{s=null,t(y,l())},E)}function m(){i&&clearTimeout(i)}function y(E,...v){if(c){m();return}if(E){m(),d.call(null,E,...v);return}if(l()||o){m(),d.call(null,E,...v);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let x=!1;function k(E){x||(x=!0,m(),!c&&(s!==null?(E||(a=2),clearTimeout(s),f(0)):E||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function Y4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){return t!==void 0}function J4(t){return typeof t=="object"&&!Array.isArray(t)}function W0(t){return typeof t=="string"||t instanceof String}function Uw(t){return q0()&&t instanceof Blob}function q0(){return typeof Blob<"u"}function Bw(t,e,n,r){if(r<e)throw Am(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Am(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function MI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ei;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ei||(Ei={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,n,r,s,i,o,a,l,c,d,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,x)=>{this.resolve_=y,this.reject_=x,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ou(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ei.NO_ERROR,l=i.getStatus();if(!a||Z4(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Ei.ABORT;r(!1,new ou(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new ou(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());X4(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=H0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?DI():U4();o(l)}else{const l=F4();o(l)}};this.canceled_?n(!1,new ou(!1,null,!0)):this.backoffId_=Q4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Y4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ou{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function iF(t,e,n,r,s,i,o=!0){const a=MI(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return rF(c,e),tF(c,n),nF(c,i),sF(c,r),new eF(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function aF(...t){const e=oF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(q0())return new Blob(t);throw new tt(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function lF(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t){if(typeof atob>"u")throw q4("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gf{constructor(e,n){this.data=e,this.contentType=n||null}}function uF(t,e){switch(t){case gr.RAW:return new Gf(OI(e));case gr.BASE64:case gr.BASE64URL:return new Gf(LI(t,e));case gr.DATA_URL:return new Gf(hF(e),fF(e))}throw H0()}function OI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function dF(t){let e;try{e=decodeURIComponent(t)}catch{throw gl(gr.DATA_URL,"Malformed data URL.")}return OI(e)}function LI(t,e){switch(t){case gr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw gl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case gr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw gl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cF(e)}catch(s){throw s.message.includes("polyfill")?s:gl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class jI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw gl(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=pF(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function hF(t){const e=new jI(t);return e.base64?LI(gr.BASE64,e.rest):dF(e.rest)}function fF(t){return new jI(t).contentType}function pF(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){let r=0,s="";Uw(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Uw(this.data_)){const r=this.data_,s=lF(r,e,n);return s===null?null:new ms(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ms(r,!0)}}static getBlob(...e){if(q0()){const n=e.map(r=>r instanceof ms?r.data_:r);return new ms(aF.apply(null,n))}else{const n=e.map(o=>W0(o)?uF(gr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ms(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){let e;try{e=JSON.parse(t)}catch{return null}return J4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mF(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function gF(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function FI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t,e){return e}class Kt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||yF}}let au=null;function vF(t){return!W0(t)||t.length<2?t:FI(t)}function UI(){if(au)return au;const t=[];t.push(new Kt("bucket")),t.push(new Kt("generation")),t.push(new Kt("metageneration")),t.push(new Kt("name","fullPath",!0));function e(i,o){return vF(o)}const n=new Kt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Kt("size");return s.xform=r,t.push(s),t.push(new Kt("timeCreated")),t.push(new Kt("updated")),t.push(new Kt("md5Hash",null,!0)),t.push(new Kt("cacheControl",null,!0)),t.push(new Kt("contentDisposition",null,!0)),t.push(new Kt("contentEncoding",null,!0)),t.push(new Kt("contentLanguage",null,!0)),t.push(new Kt("contentType",null,!0)),t.push(new Kt("metadata","customMetadata",!0)),au=t,au}function _F(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new bn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function wF(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return _F(r,t),r}function BI(t,e,n){const r=VI(e);return r===null?null:wF(t,r,n)}function xF(t,e,n,r){const s=VI(e);if(s===null||!W0(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,f=t.fullPath,m="/b/"+o(d)+"/o/"+o(f),y=K0(m,n,r),x=MI({alt:"media",token:c});return y+x})[0]}function bF(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class zI{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t){if(!t)throw H0()}function kF(t,e){function n(r,s){const i=BI(t,s,e);return $I(i!==null),i}return n}function EF(t,e){function n(r,s){const i=BI(t,s,e);return $I(i!==null),xF(i,s,t.host,t._protocol)}return n}function HI(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=j4():s=L4():n.getStatus()===402?s=O4(t.bucket):n.getStatus()===403?s=V4(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function TF(t){const e=HI(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=M4(t.path)),i.serverResponse=s.serverResponse,i}return n}function IF(t,e,n){const r=e.fullServerUrl(),s=K0(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new zI(s,i,EF(t,n),o);return a.errorHandler=TF(e),a}function SF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function CF(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=SF(null,e)),r}function AF(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let P=0;P<2;P++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=CF(e,r,s),d=bF(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=ms.getBlob(f,r,m);if(y===null)throw H4();const x={name:c.fullPath},k=K0(i,t.host,t._protocol),E="POST",v=t.maxUploadRetryTime,_=new zI(k,E,kF(t,n),v);return _.urlParams=x,_.headers=o,_.body=y.uploadData(),_.errorHandler=HI(e),_}class PF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ei.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ei.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ei.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Da("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Da("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Da("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Da("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Da("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class RF extends PF{initXhr(){this.xhr_.responseType="text"}}function WI(){return new RF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this._service=e,n instanceof bn?this._location=n:this._location=bn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Vi(e,n)}get root(){const e=new bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FI(this._location.path)}get storage(){return this._service}get parent(){const e=mF(this._location.path);if(e===null)return null;const n=new bn(this._location.bucket,e);return new Vi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw K4(e)}}function NF(t,e,n){t._throwIfRoot("uploadBytes");const r=AF(t.storage,t._location,UI(),new ms(e,!0),n);return t.storage.makeRequestWithTokens(r,WI).then(s=>({metadata:s,ref:t}))}function DF(t){t._throwIfRoot("getDownloadURL");const e=IF(t.storage,t._location,UI());return t.storage.makeRequestWithTokens(e,WI).then(n=>{if(n===null)throw W4();return n})}function MF(t,e){const n=gF(t._location.path,e),r=new bn(t._location.bucket,n);return new Vi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(t){return/^[A-Za-z]+:\/\//.test(t)}function LF(t,e){return new Vi(t,e)}function qI(t,e){if(t instanceof G0){const n=t;if(n._bucket==null)throw $4();const r=new Vi(n,n._bucket);return e!=null?qI(r,e):r}else return e!==void 0?MF(t,e):t}function jF(t,e){if(e&&OF(e)){if(t instanceof G0)return LF(t,e);throw Am("To use ref(service, url), the first argument must be a Storage instance.")}else return qI(t,e)}function zw(t,e){const n=e==null?void 0:e[NI];return n==null?null:bn.makeFromBucketSpec(n,t)}function VF(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:BE(s,t.app.options.projectId))}class G0{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=RI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=N4,this._maxUploadRetryTime=D4,this._requests=new Set,s!=null?this._bucket=bn.makeFromBucketSpec(s,this._host):this._bucket=zw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bn.makeFromBucketSpec(this._url,e):this._bucket=zw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Bw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Bw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new G4(DI());{const o=iF(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const $w="@firebase/storage",Hw="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="storage";function FF(t,e,n){return t=Ge(t),NF(t,e,n)}function UF(t){return t=Ge(t),DF(t)}function BF(t,e){return t=Ge(t),jF(t,e)}function Ww(t=gh(),e){t=Ge(t);const r=Qs(t,KI).getImmediate({identifier:e}),s=VE("storage");return s&&zF(r,...s),r}function zF(t,e,n,r={}){VF(t,e,n,r)}function $F(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new G0(n,r,s,e,$i)}function HF(){sr(new Fn(KI,$F,"PUBLIC").setMultipleInstances(!0)),dn($w,Hw,""),dn($w,Hw,"esm2017")}HF();let GI=null,QI=null;try{({initializeAppCheck:GI,ReCaptchaV3Provider:QI}=require("firebase/app-check"))}catch{}const eo={apiKey:"AIzaSyAgRnS9ugijuxF1qMCfr-USXe5AkYAnLME",authDomain:"agentic-hackthon.firebaseapp.com",projectId:"agentic-hackthon",appId:"1:1063716672043:web:681fd771d31ad548f6106e",storageBucket:"agentic-hackthon.firebasestorage.app",messagingSenderId:"1063716672043",measurementId:"G-S3ZEB9M54W"};function WF(t){try{let e=String(t).trim();if(/^https?:\/\//i.test(e))try{e=new URL(e).hostname}catch{}return/\.firebasestorage\.app$/i.test(e)&&(e=e.replace(/\.firebasestorage\.app$/i,".appspot.com")),e=e.split("/")[0],e}catch{return t}}function qF(t){return!!(t&&t.apiKey&&t.authDomain&&t.projectId&&t.appId)}let as,xt,KF,kt,Vd;try{if(!qF(eo))throw new Error("Missing Firebase env configuration");const t=WF(eo.storageBucket)||(eo.projectId?`${eo.projectId}.appspot.com`:void 0),e={...eo,storageBucket:t};as=qE(e),xt=uO(as),kt=y4(as),Vd=t?Ww(as,`gs://${t}`):Ww(as);try{}catch{}if(eo.measurementId)try{AL().then(n=>{n&&(KF=SL(as))}).catch(()=>{})}catch{}}catch(t){console.error("[Firebase] Initialization failed:",(t==null?void 0:t.message)||t),as=null,xt={currentUser:null},kt=null,Vd=null}function GF(t){return as&&xt?OD(xt,t):(t(null),()=>{})}function QF(){const[t,e]=D.useState(null),[n,r]=D.useState(!0),[s,i]=D.useState(null),o=D.useCallback(async v=>{try{if(!v||!kt)return;const _=Ld(kt,"users",v.uid),b=await SI(_),P={uid:v.uid,email:v.email||null,displayName:v.displayName||null,photoURL:v.photoURL||null,phoneNumber:v.phoneNumber||null,providerIds:(v.providerData||[]).map(N=>N.providerId),updatedAt:Zl()};b.exists()?await Cm(_,P,{merge:!0}):await Cm(_,{...P,createdAt:Zl(),role:"user"},{merge:!0})}catch{}},[]);D.useEffect(()=>{const v=GF(async _=>{e(_||null),r(!1)});return IM(xt).then(async _=>{_&&_.user&&(await o(_.user),e(_.user))}).catch(()=>{}).finally(()=>{}),()=>v&&v()},[o]);const a=D.useCallback(async({email:v,password:_})=>{const b=await RD(xt,v,_);return e(b.user),b.user},[]),l=D.useCallback(async({email:v,password:_,name:b})=>{const P=await PD(xt,v,_);if(b)try{await wT(P.user,{displayName:b})}catch{}return await o(P.user),e({...P.user}),P.user},[o]),c=D.useCallback(async()=>{await LD(xt),e(null)},[]),d=D.useCallback(async()=>xt.currentUser?xt.currentUser.getIdToken():null,[]),f=D.useCallback(async()=>{const v=new Rr;v.setCustomParameters({prompt:"select_account"});const _=typeof navigator<"u"&&navigator.userAgent||"",b=/iPad|iPhone|iPod/.test(_),P=/Android/.test(_),N=typeof window<"u"&&window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches,M=/FBAN|FBAV|Instagram|Line|MicroMessenger|Twitter|FB_IAB|VKClient|Snapchat/.test(_);try{if(b||P||N||M)return await j_(xt,v),null;const T=await _M(xt,v);return await o(T.user),e(T.user),T.user}catch(T){const w=T&&T.code?String(T.code):"";if(w==="auth/popup-closed-by-user"||w==="auth/popup-blocked"||w==="auth/cancelled-popup-request")return await j_(xt,v),null;throw console.error("[Auth] Google sign-in failed:",T),T}},[o]),m=D.useCallback(()=>{if(typeof window>"u")return null;if(!window.recaptchaVerifier){const v="recaptcha-container";let _=document.getElementById(v);_||(_=document.createElement("div"),_.id=v,_.style.display="inline-block",document.body.appendChild(_)),window.recaptchaVerifier=new uM(xt,v,{size:"invisible"})}return window.recaptchaVerifier},[]);function y(v){if(!v)return"";let b=String(v).replace(/[^0-9]/g,"");return b.startsWith("91")&&b.length>10&&(b=b.slice(b.length-10)),b.length===11&&b.startsWith("0")&&(b=b.slice(1)),b}function x(v){return/^[6-9][0-9]{9}$/.test(v)}const k=D.useCallback(async v=>{const _=m();try{_&&typeof _.render=="function"&&await _.render()}catch{}const b=y(v);if(!x(b)){const M=new Error("Please enter a valid Indian mobile number (10 digits starting with 6-9).");throw M.code="auth/invalid-india-number",M}const P=`+91${b}`,N=await fM(xt,P,_);return i(N),N},[m]),E=D.useCallback(async v=>{const _=s;if(!_)throw new Error("No phone confirmation in progress");const b=await _.confirm(v);return await o(b.user),e(b.user),i(null),b.user},[s,o]);return{user:t,loading:n,login:a,signup:l,logout:c,getIdToken:d,loginWithGoogle:f,sendPhoneCode:k,confirmPhoneCode:E,phoneConfirmation:s}}const YI=D.createContext(null);function YF({children:t}){const e=QF();return h.jsx(YI.Provider,{value:e,children:t})}function Xr(){return D.useContext(YI)}function Ae({variant:t="primary",className:e="",disabled:n=!1,children:r,...s}){const i="inline-flex items-center justify-center rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed px-3.5 py-2.5 text-sm font-medium shadow-sm focus:ring-offset-slate-50 dark:focus:ring-offset-slate-900",o={primary:"bg-gradient-to-tr from-brand-600 to-brand-700 text-white hover:from-brand-600 hover:to-brand-800 focus:ring-brand-600",secondary:"bg-blue-50 text-blue-900 hover:bg-blue-100 focus:ring-blue-300 dark:bg-slate-800 dark:text-blue-100 dark:hover:bg-slate-700",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-600",ghost:"bg-transparent text-slate-700 hover:bg-brand-50 dark:text-slate-200 dark:hover:bg-slate-800 focus:ring-brand-300"},a=`${i} ${o[t]||o.primary} ${e}`.trim();return h.jsx("button",{className:a,disabled:n,...s,children:r})}function XF(){const{theme:t,toggleTheme:e}=XR(),{user:n,logout:r,loading:s,loginWithGoogle:i}=Xr(),[o,a]=D.useState(!1),[l,c]=D.useState(!1),d=({isActive:f})=>`px-3 py-2 rounded-md transition-colors hover:text-brand-700 hover:bg-brand-50 dark:hover:bg-slate-800 ${f?"text-brand-700 bg-brand-50 dark:text-blue-300 dark:bg-slate-800":"text-slate-700 dark:text-slate-200"}`;return h.jsx("nav",{className:"sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/70 dark:supports-[backdrop-filter]:bg-slate-900/70 bg-white dark:bg-slate-900 border-b border-brand-100 dark:border-slate-800 shadow-subtle",children:h.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-3",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"mr-auto flex items-center gap-3",children:[h.jsx("div",{className:"w-7 h-7 rounded-md bg-gradient-to-tr from-brand-600 to-blue-500 shadow ring-1 ring-brand-500/30"}),h.jsx("span",{className:"font-semibold tracking-wide text-slate-900 dark:text-slate-100",children:"Health Sphere"})]}),h.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[h.jsx(cr,{className:d,to:"/",children:"Dashboard"}),h.jsx(cr,{className:d,to:"/daily-checkin",children:"Daily Check-in"}),h.jsx(cr,{className:d,to:"/upload-report",children:"Upload Report"})]}),h.jsxs("div",{className:"flex items-center gap-2 relative",children:[h.jsxs("button",{onClick:e,"aria-label":"Toggle theme","aria-pressed":t==="dark",className:`relative inline-flex w-14 h-8 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-brand-600 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900\r
                bg-blue-50 dark:bg-slate-700`,children:[h.jsx("span",{className:"absolute left-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-amber-500 ${theme === 'dark' ? 'opacity-0' : 'opacity-100'}",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M12 4a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V5a1 1 0 0 1 1-1Zm0 13a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1Zm7-6a1 1 0 0 1 1 1h1a1 1 0 1 1 0 2h-1a1 1 0 1 1-2 0 1 1 0 0 1 1-1ZM4 12a1 1 0 0 1 1-1H6a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1Zm12.95-6.364a1 1 0 0 1 1.414 0l.707.707a1 1 0 1 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414ZM4.929 17.657a1 1 0 0 1 1.414 0l.707.707a1 1 0 0 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414Zm12.021 2.121a1 1 0 0 1 0-1.414l.707-.707a1 1 0 1 1 1.414 1.414l-.707.707a1 1 0 0 1-1.414 0ZM6.05 5.636a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 3.929 6.343l.707-.707A1 1 0 0 1 6.05 5.636Z"})})}),h.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 transition-opacity duration-300 text-blue-400 ${theme === 'dark' ? 'opacity-100' : 'opacity-0'}",children:h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"})})}),h.jsx("span",{className:`absolute top-1 left-1 w-6 h-6 rounded-full bg-white shadow transition-transform duration-300 ${t==="dark"?"translate-x-6":"translate-x-0"}`})]}),!s&&(n?h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>c(f=>!f),className:"relative inline-flex items-center gap-2 px-2 py-1 rounded-md border border-brand-100 dark:border-slate-700 text-slate-700 dark:text-slate-200 hover:bg-brand-50 dark:hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-brand-600","aria-haspopup":"menu","aria-expanded":l,children:[h.jsxs("span",{className:"relative inline-block",children:[n.photoURL?h.jsx("img",{src:n.photoURL,alt:"avatar",className:"w-8 h-8 rounded-full ring-2 ring-brand-500/40"}):h.jsx("span",{className:"w-8 h-8 rounded-full grid place-items-center text-white text-sm font-medium bg-gradient-to-tr from-brand-600 to-blue-500 ring-2 ring-brand-500/40",children:(n.displayName||n.email||"?").slice(0,1).toUpperCase()}),h.jsx("span",{className:"absolute -right-0.5 -bottom-0.5 block w-3 h-3 rounded-full bg-emerald-500 ring-2 ring-white dark:ring-slate-900","aria-hidden":"true"})]}),h.jsx("span",{className:"hidden sm:inline text-sm max-w-[10rem] truncate",children:n.displayName||n.email}),h.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"opacity-70",children:h.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),l&&h.jsxs("div",{role:"menu",className:"absolute right-0 mt-2 w-60 rounded-md border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-lg z-50",children:[h.jsxs("div",{className:"px-3 py-2 text-sm text-slate-700 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700",children:[h.jsx("div",{className:"font-medium truncate",children:n.displayName||"Signed in"}),h.jsx("div",{className:"text-xs text-slate-500 truncate",children:n.email})]}),h.jsx("a",{href:"/profile",className:"block px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",onClick:()=>c(!1),children:"Profile"}),h.jsx("button",{onClick:async()=>{c(!1);try{await r()}catch{}},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200",role:"menuitem",children:"Log out"})]})]}):h.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[h.jsx(cr,{className:d,to:"/login",children:"Log in"}),h.jsx(cr,{className:d,to:"/signup",children:"Sign up"}),h.jsx(Ae,{variant:"secondary",onClick:()=>{try{i()}catch{}},children:"Continue with Google"})]})),h.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-9 h-9 rounded-md border border-slate-300 dark:border-slate-700 text-slate-700 dark:text-slate-200",onClick:()=>a(f=>!f),"aria-expanded":o,"aria-controls":"mobile-nav","aria-label":"Toggle navigation",children:h.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),h.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),h.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})})]})]}),o&&h.jsxs("div",{id:"mobile-nav",className:"md:hidden mt-3 grid gap-1",children:[h.jsx(cr,{onClick:()=>a(!1),className:d,to:"/",children:"Dashboard"}),h.jsx(cr,{onClick:()=>a(!1),className:d,to:"/daily-checkin",children:"Daily Check-in"}),h.jsx(cr,{onClick:()=>a(!1),className:d,to:"/upload-report",children:"Upload Report"}),!s&&(n?h.jsx("button",{onClick:async()=>{a(!1);try{await r()}catch{}},className:"text-left px-3 py-2 rounded-md text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Log out"}):h.jsxs(h.Fragment,{children:[h.jsx(cr,{onClick:()=>a(!1),className:d,to:"/login",children:"Log in"}),h.jsx(cr,{onClick:()=>a(!1),className:d,to:"/signup",children:"Sign up"}),h.jsx("button",{onClick:()=>{a(!1);try{i()}catch{}},className:"text-left px-3 py-2 rounded-md text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800",children:"Continue with Google"})]}))]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function bc(t){return t+.5|0}const ws=(t,e,n)=>Math.max(Math.min(t,n),e);function Ya(t){return ws(bc(t*2.55),0,255)}function Os(t){return ws(bc(t*255),0,255)}function Pr(t){return ws(bc(t/2.55)/100,0,1)}function qw(t){return ws(bc(t*100),0,100)}const Pn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Pm=[..."0123456789ABCDEF"],JF=t=>Pm[t&15],ZF=t=>Pm[(t&240)>>4]+Pm[t&15],lu=t=>(t&240)>>4===(t&15),e5=t=>lu(t.r)&&lu(t.g)&&lu(t.b)&&lu(t.a);function t5(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Pn[t[1]]*17,g:255&Pn[t[2]]*17,b:255&Pn[t[3]]*17,a:e===5?Pn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Pn[t[1]]<<4|Pn[t[2]],g:Pn[t[3]]<<4|Pn[t[4]],b:Pn[t[5]]<<4|Pn[t[6]],a:e===9?Pn[t[7]]<<4|Pn[t[8]]:255})),n}const n5=(t,e)=>t<255?e(t):"";function r5(t){var e=e5(t)?JF:ZF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+n5(t.a,e):void 0}const s5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function XI(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function i5(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function o5(t,e,n){const r=XI(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function a5(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Q0(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,d;return i!==o&&(d=i-o,c=a>.5?d/(2-i-o):d/(i+o),l=a5(n,r,s,d,i),l=l*60+.5),[l|0,c||0,a]}function Y0(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Os)}function X0(t,e,n){return Y0(XI,t,e,n)}function l5(t,e,n){return Y0(o5,t,e,n)}function c5(t,e,n){return Y0(i5,t,e,n)}function JI(t){return(t%360+360)%360}function u5(t){const e=s5.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Ya(+e[5]):Os(+e[5]));const s=JI(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=l5(s,i,o):e[1]==="hsv"?r=c5(s,i,o):r=X0(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function d5(t,e){var n=Q0(t);n[0]=JI(n[0]+e),n=X0(n),t.r=n[0],t.g=n[1],t.b=n[2]}function h5(t){if(!t)return;const e=Q0(t),n=e[0],r=qw(e[1]),s=qw(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Pr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Kw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Gw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function f5(){const t={},e=Object.keys(Gw),n=Object.keys(Kw);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,Kw[i]);i=parseInt(Gw[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let cu;function p5(t){cu||(cu=f5(),cu.transparent=[0,0,0,0]);const e=cu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const m5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function g5(t){const e=m5.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Ya(o):ws(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Ya(r):ws(r,0,255)),s=255&(e[4]?Ya(s):ws(s,0,255)),i=255&(e[6]?Ya(i):ws(i,0,255)),{r,g:s,b:i,a:n}}}function y5(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Pr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Qf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,to=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function v5(t,e,n){const r=to(Pr(t.r)),s=to(Pr(t.g)),i=to(Pr(t.b));return{r:Os(Qf(r+n*(to(Pr(e.r))-r))),g:Os(Qf(s+n*(to(Pr(e.g))-s))),b:Os(Qf(i+n*(to(Pr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function uu(t,e,n){if(t){let r=Q0(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=X0(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function ZI(t,e){return t&&Object.assign(e||{},t)}function Qw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Os(t[3]))):(e=ZI(t,{r:0,g:0,b:0,a:1}),e.a=Os(e.a)),e}function _5(t){return t.charAt(0)==="r"?g5(t):u5(t)}class ec{constructor(e){if(e instanceof ec)return e;const n=typeof e;let r;n==="object"?r=Qw(e):n==="string"&&(r=t5(e)||p5(e)||_5(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=ZI(this._rgb);return e&&(e.a=Pr(e.a)),e}set rgb(e){this._rgb=Qw(e)}rgbString(){return this._valid?y5(this._rgb):void 0}hexString(){return this._valid?r5(this._rgb):void 0}hslString(){return this._valid?h5(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=v5(this._rgb,e._rgb,n)),this}clone(){return new ec(this.rgb)}alpha(e){return this._rgb.a=Os(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=bc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return uu(this._rgb,2,e),this}darken(e){return uu(this._rgb,2,-e),this}saturate(e){return uu(this._rgb,1,e),this}desaturate(e){return uu(this._rgb,1,-e),this}rotate(e){return d5(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Tr(){}const w5=(()=>{let t=0;return()=>t++})();function Le(t){return t==null}function yt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function xe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ut(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ur(t,e){return Ut(t)?t:e}function _e(t,e){return typeof t>"u"?e:t}const x5=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Fe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ce(t,e,n,r){let s,i,o;if(yt(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(xe(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Fd(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Ud(t){if(yt(t))return t.map(Ud);if(xe(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Ud(t[n[s]]);return e}return t}function eS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function b5(t,e,n,r){if(!eS(t))return;const s=e[t],i=n[t];xe(s)&&xe(i)?tc(s,i,r):e[t]=Ud(i)}function tc(t,e,n){const r=yt(e)?e:[e],s=r.length;if(!xe(t))return t;n=n||{};const i=n.merger||b5;let o;for(let a=0;a<s;++a){if(o=r[a],!xe(o))continue;const l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)i(l[c],t,o,n)}return t}function yl(t,e){return tc(t,e,{merger:k5})}function k5(t,e,n){if(!eS(t))return;const r=e[t],s=n[t];xe(r)&&xe(s)?yl(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ud(s))}const Yw={"":t=>t,x:t=>t.x,y:t=>t.y};function E5(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function T5(t){const e=E5(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Bd(t,e){return(Yw[e]||(Yw[e]=T5(e)))(t)}function J0(t){return t.charAt(0).toUpperCase()+t.slice(1)}const zd=t=>typeof t<"u",zs=t=>typeof t=="function",Xw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function I5(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const jt=Math.PI,nr=2*jt,S5=nr+jt,$d=Number.POSITIVE_INFINITY,C5=jt/180,Jn=jt/2,ri=jt/4,Jw=jt*2/3,tS=Math.log10,Go=Math.sign;function vl(t,e,n){return Math.abs(t-e)<n}function Zw(t){const e=Math.round(t);t=vl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(tS(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function A5(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function P5(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function nc(t){return!P5(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function R5(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function N5(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function vi(t){return t*(jt/180)}function D5(t){return t*(180/jt)}function ex(t){if(!Ut(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function M5(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*jt&&(i+=nr),{angle:i,distance:s}}function Rm(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function O5(t,e){return(t-e+S5)%nr-jt}function pr(t){return(t%nr+nr)%nr}function nS(t,e,n,r){const s=pr(t),i=pr(e),o=pr(n),a=pr(i-s),l=pr(o-s),c=pr(s-i),d=pr(s-o);return s===i||s===o||r&&i===o||a>l&&c<d}function On(t,e,n){return Math.max(e,Math.min(n,t))}function L5(t){return On(t,-32768,32767)}function vo(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Z0(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const _i=(t,e,n,r)=>Z0(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),j5=(t,e,n)=>Z0(t,n,r=>t[r][e]>=n);function V5(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const rS=["push","pop","shift","splice","unshift"];function F5(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),rS.forEach(n=>{const r="_onData"+J0(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function tx(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(rS.forEach(i=>{delete t[i]}),delete t._chartjs)}function U5(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const sS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function iS(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,sS.call(window,()=>{r=!1,t.apply(e,n)}))}}function B5(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const oS=t=>t==="start"?"left":t==="end"?"right":"center",vn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,z5=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function $5(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,d=o.axis,{min:f,max:m,minDefined:y,maxDefined:x}=o.getUserBounds();if(y){if(s=Math.min(_i(l,d,f).lo,n?r:_i(e,d,o.getPixelForValue(f)).lo),c){const k=l.slice(0,s+1).reverse().findIndex(E=>!Le(E[a.axis]));s-=Math.max(0,k)}s=On(s,0,r-1)}if(x){let k=Math.max(_i(l,o.axis,m,!0).hi+1,n?0:_i(e,d,o.getPixelForValue(m),!0).hi+1);if(c){const E=l.slice(k-1).findIndex(v=>!Le(v[a.axis]));k+=Math.max(0,E)}i=On(k,s,r)-s}else i=r-s}return{start:s,count:i}}function H5(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const du=t=>t===0||t===1,nx=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*nr/n)),rx=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*nr/n)+1,_l={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Jn)+1,easeOutSine:t=>Math.sin(t*Jn),easeInOutSine:t=>-.5*(Math.cos(jt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>du(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>du(t)?t:nx(t,.075,.3),easeOutElastic:t=>du(t)?t:rx(t,.075,.3),easeInOutElastic(t){return du(t)?t:t<.5?.5*nx(t*2,.1125,.45):.5+.5*rx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-_l.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?_l.easeInBounce(t*2)*.5:_l.easeOutBounce(t*2-1)*.5+.5};function ey(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function sx(t){return ey(t)?t:new ec(t)}function Yf(t){return ey(t)?t:new ec(t).saturate(.5).darken(.1).hexString()}const W5=["x","y","borderWidth","radius","tension"],q5=["color","borderColor","backgroundColor"];function K5(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:q5},numbers:{type:"number",properties:W5}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function G5(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ix=new Map;function Q5(t,e){e=e||{};const n=t+JSON.stringify(e);let r=ix.get(n);return r||(r=new Intl.NumberFormat(t,e),ix.set(n,r)),r}function aS(t,e,n){return Q5(e,n).format(t)}const Y5={values(t){return yt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=X5(t,n)}const o=tS(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),aS(t,r,l)}};function X5(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var lS={formatters:Y5};function J5(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:lS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Fi=Object.create(null),Nm=Object.create(null);function wl(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function Xf(t,e,n){return typeof e=="string"?tc(wl(t,e),n):tc(wl(t,""),e)}class Z5{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Yf(s.backgroundColor),this.hoverBorderColor=(r,s)=>Yf(s.borderColor),this.hoverColor=(r,s)=>Yf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Xf(this,e,n)}get(e){return wl(this,e)}describe(e,n){return Xf(Nm,e,n)}override(e,n){return Xf(Fi,e,n)}route(e,n,r,s){const i=wl(this,e),o=wl(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return xe(l)?Object.assign({},c,l):_e(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var ot=new Z5({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[K5,G5,J5]);function e3(t){return!t||Le(t.size)||Le(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ox(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function si(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function ax(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Dm(t,e,n,r){cS(t,e,n,r,null)}function cS(t,e,n,r,s){let i,o,a,l,c,d,f,m;const y=e.pointStyle,x=e.rotation,k=e.radius;let E=(x||0)*C5;if(y&&typeof y=="object"&&(i=y.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(E),t.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),t.restore();return}if(!(isNaN(k)||k<=0)){switch(t.beginPath(),y){default:s?t.ellipse(n,r,s/2,k,0,0,nr):t.arc(n,r,k,0,nr),t.closePath();break;case"triangle":d=s?s/2:k,t.moveTo(n+Math.sin(E)*d,r-Math.cos(E)*k),E+=Jw,t.lineTo(n+Math.sin(E)*d,r-Math.cos(E)*k),E+=Jw,t.lineTo(n+Math.sin(E)*d,r-Math.cos(E)*k),t.closePath();break;case"rectRounded":c=k*.516,l=k-c,o=Math.cos(E+ri)*l,f=Math.cos(E+ri)*(s?s/2-c:l),a=Math.sin(E+ri)*l,m=Math.sin(E+ri)*(s?s/2-c:l),t.arc(n-f,r-a,c,E-jt,E-Jn),t.arc(n+m,r-o,c,E-Jn,E),t.arc(n+f,r+a,c,E,E+Jn),t.arc(n-m,r+o,c,E+Jn,E+jt),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*k,d=s?s/2:l,t.rect(n-d,r-l,2*d,2*l);break}E+=ri;case"rectRot":f=Math.cos(E)*(s?s/2:k),o=Math.cos(E)*k,a=Math.sin(E)*k,m=Math.sin(E)*(s?s/2:k),t.moveTo(n-f,r-a),t.lineTo(n+m,r-o),t.lineTo(n+f,r+a),t.lineTo(n-m,r+o),t.closePath();break;case"crossRot":E+=ri;case"cross":f=Math.cos(E)*(s?s/2:k),o=Math.cos(E)*k,a=Math.sin(E)*k,m=Math.sin(E)*(s?s/2:k),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"star":f=Math.cos(E)*(s?s/2:k),o=Math.cos(E)*k,a=Math.sin(E)*k,m=Math.sin(E)*(s?s/2:k),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o),E+=ri,f=Math.cos(E)*(s?s/2:k),o=Math.cos(E)*k,a=Math.sin(E)*k,m=Math.sin(E)*(s?s/2:k),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+m,r-o),t.lineTo(n-m,r+o);break;case"line":o=s?s/2:Math.cos(E)*k,a=Math.sin(E)*k,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(E)*(s?s/2:k),r+Math.sin(E)*k);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function rc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Lh(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function jh(t){t.restore()}function t3(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function n3(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function r3(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Le(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function s3(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function i3(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Hd(t,e,n,r,s,i={}){const o=yt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,r3(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&i3(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Le(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),s3(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function Mm(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*jt,jt,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,jt,Jn,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Jn,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Jn,!0),t.lineTo(n+o.topLeft,r)}const o3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,a3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function l3(t,e){const n=(""+t).match(o3);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const c3=t=>+t||0;function uS(t,e){const n={},r=xe(e),s=r?Object.keys(e):e,i=xe(t)?r?o=>_e(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=c3(i(o));return n}function u3(t){return uS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function xl(t){return uS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function or(t){const e=u3(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function sn(t,e){t=t||{},e=e||ot.font;let n=_e(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=_e(t.style,e.style);r&&!(""+r).match(a3)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:_e(t.family,e.family),lineHeight:l3(_e(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:_e(t.weight,e.weight),string:""};return s.string=e3(s),s}function hu(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function d3(t,e,n){const{min:r,max:s}=t,i=x5(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function qi(t,e){return Object.assign(Object.create(t),e)}function ty(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=pS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>ty([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return hS(a,l,()=>_3(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return cx(a).includes(l)},ownKeys(a){return cx(a)},set(a,l,c){const d=a._storage||(a._storage=s());return a[l]=d[l]=c,delete a._keys,!0}})}function Qo(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:dS(t,r),setContext:i=>Qo(t,i,n,r),override:i=>Qo(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return hS(i,o,()=>f3(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function dS(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:zs(n)?n:()=>n,isIndexable:zs(r)?r:()=>r}}const h3=(t,e)=>t?t+J0(e):e,ny=(t,e)=>xe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function hS(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function f3(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return zs(a)&&o.isScriptable(e)&&(a=p3(e,a,t,n)),yt(a)&&a.length&&(a=m3(e,a,t,o.isIndexable)),ny(e,a)&&(a=Qo(a,s,i&&i[e],o)),a}function p3(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),ny(t,l)&&(l=ry(s._scopes,s,t,l)),l}function m3(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(xe(e[0])){const l=e,c=s._scopes.filter(d=>d!==l);e=[];for(const d of l){const f=ry(c,s,t,d);e.push(Qo(f,i,o&&o[t],a))}}return e}function fS(t,e,n){return zs(t)?t(e,n):t}const g3=(t,e)=>t===!0?e:typeof t=="string"?Bd(e,t):void 0;function y3(t,e,n,r,s){for(const i of e){const o=g3(n,i);if(o){t.add(o);const a=fS(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function ry(t,e,n,r){const s=e._rootScopes,i=fS(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=lx(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=lx(a,o,i,l,r),l===null)?!1:ty(Array.from(a),[""],s,i,()=>v3(e,n,r))}function lx(t,e,n,r,s){for(;n;)n=y3(t,e,n,r,s);return n}function v3(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return yt(s)&&xe(n)?n:s||{}}function _3(t,e,n,r){let s;for(const i of e)if(s=pS(h3(i,t),n),typeof s<"u")return ny(t,s)?ry(n,r,t,s):s}function pS(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function cx(t){let e=t._keys;return e||(e=t._keys=w3(t._scopes)),e}function w3(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const x3=Number.EPSILON||1e-14,Yo=(t,e)=>e<t.length&&!t[e].skip&&t[e],mS=t=>t==="x"?"y":"x";function b3(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Rm(i,s),l=Rm(o,i);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const f=r*c,m=r*d;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+m*(o.x-s.x),y:i.y+m*(o.y-s.y)}}}function k3(t,e,n){const r=t.length;let s,i,o,a,l,c=Yo(t,0);for(let d=0;d<r-1;++d)if(l=c,c=Yo(t,d+1),!(!l||!c)){if(vl(e[d],0,x3)){n[d]=n[d+1]=0;continue}s=n[d]/e[d],i=n[d+1]/e[d],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=s*o*e[d],n[d+1]=i*o*e[d])}}function E3(t,e,n="x"){const r=mS(n),s=t.length;let i,o,a,l=Yo(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Yo(t,c+1),!a)continue;const d=a[n],f=a[r];o&&(i=(d-o[n])/3,a[`cp1${n}`]=d-i,a[`cp1${r}`]=f-i*e[c]),l&&(i=(l[n]-d)/3,a[`cp2${n}`]=d+i,a[`cp2${r}`]=f+i*e[c])}}function T3(t,e="x"){const n=mS(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Yo(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Yo(t,o+1),!!l){if(c){const d=c[e]-l[e];s[o]=d!==0?(c[n]-l[n])/d:0}i[o]=a?c?Go(s[o-1])!==Go(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}k3(t,s,i),E3(t,i,e)}function fu(t,e,n){return Math.max(Math.min(t,n),e)}function I3(t,e){let n,r,s,i,o,a=rc(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&rc(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=fu(s.cp1x,e.left,e.right),s.cp1y=fu(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=fu(s.cp2x,e.left,e.right),s.cp2y=fu(s.cp2y,e.top,e.bottom)))}function S3(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")T3(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=b3(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&I3(t,n)}function sy(){return typeof window<"u"&&typeof document<"u"}function iy(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Wd(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Vh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function C3(t,e){return Vh(t).getPropertyValue(e)}const A3=["top","right","bottom","left"];function Ti(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=A3[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const P3=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function R3(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(P3(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ui(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=Vh(n),i=s.boxSizing==="border-box",o=Ti(s,"padding"),a=Ti(s,"border","width"),{x:l,y:c,box:d}=R3(t,n),f=o.left+(d&&a.left),m=o.top+(d&&a.top);let{width:y,height:x}=e;return i&&(y-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-f)/y*n.width/r),y:Math.round((c-m)/x*n.height/r)}}function N3(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&iy(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Vh(i),l=Ti(a,"border","width"),c=Ti(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Wd(a.maxWidth,i,"clientWidth"),s=Wd(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||$d,maxHeight:s||$d}}const pu=t=>Math.round(t*10)/10;function D3(t,e,n,r){const s=Vh(t),i=Ti(s,"margin"),o=Wd(s.maxWidth,t,"clientWidth")||$d,a=Wd(s.maxHeight,t,"clientHeight")||$d,l=N3(t,e,n);let{width:c,height:d}=l;if(s.boxSizing==="content-box"){const m=Ti(s,"border","width"),y=Ti(s,"padding");c-=y.width+m.width,d-=y.height+m.height}return c=Math.max(0,c-i.width),d=Math.max(0,r?c/r:d-i.height),c=pu(Math.min(c,o,l.maxWidth)),d=pu(Math.min(d,a,l.maxHeight)),c&&!d&&(d=pu(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,c=pu(Math.floor(d*r))),{width:c,height:d}}function ux(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const M3=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};sy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function dx(t,e){const n=C3(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function di(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function O3(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function L3(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=di(t,s,n),a=di(s,i,n),l=di(i,e,n),c=di(o,a,n),d=di(a,l,n);return di(c,d,n)}const j3=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},V3=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ao(t,e,n){return t?j3(e,n):V3()}function gS(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function yS(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function vS(t){return t==="angle"?{between:nS,compare:O5,normalize:pr}:{between:vo,compare:(e,n)=>e-n,normalize:e=>e}}function hx({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function F3(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=vS(r),l=e.length;let{start:c,end:d,loop:f}=t,m,y;if(f){for(c+=l,d+=l,m=0,y=l;m<y&&o(a(e[c%l][r]),s,i);++m)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:f,style:t.style}}function _S(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=vS(r),{start:d,end:f,loop:m,style:y}=F3(t,e,n),x=[];let k=!1,E=null,v,_,b;const P=()=>l(s,b,v)&&a(s,b)!==0,N=()=>a(i,v)===0||l(i,b,v),M=()=>k||P(),T=()=>!k||N();for(let w=d,C=d;w<=f;++w)_=e[w%o],!_.skip&&(v=c(_[r]),v!==b&&(k=l(v,s,i),E===null&&M()&&(E=a(v,s)===0?w:C),E!==null&&T()&&(x.push(hx({start:E,end:w,loop:m,count:o,style:y})),E=null),C=w,b=v));return E!==null&&x.push(hx({start:E,end:f,loop:m,count:o,style:y})),x}function wS(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=_S(r[s],t.points,e);i.length&&n.push(...i)}return n}function U3(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function B3(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function z3(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=U3(n,s,i,r);if(r===!0)return fx(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return fx(t,B3(n,o,l,c),n,e)}function fx(t,e,n,r){return!r||!r.setContext||!n?e:$3(t,e,n,r)}function $3(t,e,n,r){const s=t._chart.getContext(),i=px(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let d=i,f=e[0].start,m=f;function y(x,k,E,v){const _=a?-1:1;if(x!==k){for(x+=l;n[x%l].skip;)x-=_;for(;n[k%l].skip;)k+=_;x%l!==k%l&&(c.push({start:x%l,end:k%l,loop:E,style:v}),d=v,f=k%l)}}for(const x of e){f=a?f:x.start;let k=n[f%l],E;for(m=f+1;m<=x.end;m++){const v=n[m%l];E=px(r.setContext(qi(s,{type:"segment",p0:k,p1:v,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:o}))),H3(E,d)&&y(f,m-1,x.loop,d),k=v,d=E}f<m-1&&y(f,m-1,x.loop,d)}return c}function px(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function H3(t,e){if(!e)return!1;const n=[],r=function(s,i){return ey(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function mu(t,e,n){return t.options.clip?t[n]:e[n]}function W3(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:mu(n,e,"left"),right:mu(n,e,"right"),top:mu(r,e,"top"),bottom:mu(r,e,"bottom")}:e}function xS(t,e){const n=e._clip;if(n.disabled)return!1;const r=W3(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class q3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=sS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ir=new q3;const mx="transparent",K3={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=sx(t||mx),s=r.valid&&sx(e||mx);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class G3{constructor(e,n,r,s){const i=n[r];s=hu([e.to,s,i,e.from]);const o=hu([e.from,i,s]);this._active=!0,this._fn=e.fn||K3[e.type||typeof o],this._easing=_l[e.easing]||_l.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=hu([e.to,n,s,e.from]),this._from=hu([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class bS{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!xe(e))return;const n=Object.keys(ot.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!xe(i))return;const o={};for(const a of n)o[a]=i[a];(yt(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=Y3(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&Q3(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const d=n[c];let f=i[c];const m=r.get(c);if(f)if(m&&f.active()){f.update(m,d,a);continue}else f.cancel();if(!m||!m.duration){e[c]=d;continue}i[c]=f=new G3(m,e,c,d),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Ir.add(this._chart,r),!0}}function Q3(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function Y3(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function gx(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function X3(t,e,n){if(n===!1)return!1;const r=gx(t,n),s=gx(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function J3(t){let e,n,r,s;return xe(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function kS(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function yx(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let d=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(d=!0,r.all)continue;break}c=t.values[l],Ut(c)&&(i||e===0||Go(e)===Go(c))&&(e+=c)}return!d&&!r.all?0:e}function Z3(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,d;for(l=0,c=o.length;l<c;++l)d=o[l],a[l]={[s]:d,[i]:t[d]};return a}function Jf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function eU(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function tU(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function nU(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function vx(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function _x(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,d=eU(i,o,r),f=e.length;let m;for(let y=0;y<f;++y){const x=e[y],{[l]:k,[c]:E}=x,v=x._stacks||(x._stacks={});m=v[c]=nU(s,d,k),m[a]=E,m._top=vx(m,o,!0,r.type),m._bottom=vx(m,o,!1,r.type);const _=m._visualValues||(m._visualValues={});_[a]=E}}function Zf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function rU(t,e){return qi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function sU(t,e,n){return qi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Ma(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const ep=t=>t==="reset"||t==="none",wx=(t,e)=>e?t:Object.assign({},t),iU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:kS(n,!0),values:null};class bl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Jf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ma(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,m,y,x)=>f==="x"?m:f==="r"?x:y,i=n.xAxisID=_e(r.xAxisID,Zf(e,"x")),o=n.yAxisID=_e(r.yAxisID,Zf(e,"y")),a=n.rAxisID=_e(r.rAxisID,Zf(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),d=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tx(this._data,this),e._stacked&&Ma(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(xe(n)){const s=this._cachedMeta;this._data=Z3(n,s)}else if(r!==n){if(r){tx(r,this);const s=this._cachedMeta;Ma(s),s._parsed=[]}n&&Object.isExtensible(n)&&F5(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=Jf(n.vScale,n),n.stack!==r.stack&&(s=!0,Ma(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(_x(this,n._parsed),n._stacked=Jf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],d,f,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{yt(s[e])?m=this.parseArrayData(r,s,e,n):xe(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);const y=()=>f[a]===null||c&&f[a]<c[a];for(d=0;d<n;++d)r._parsed[d+e]=f=m[d],l&&(y()&&(l=!1),c=f);r._sorted=l}o&&_x(this,m)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),d=i===o,f=new Array(s);let m,y,x;for(m=0,y=s;m<y;++m)x=m+r,f[m]={[a]:d||i.parse(c[x],x),[l]:o.parse(n[x],x)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,d,f;for(l=0,c=s;l<c;++l)d=l+r,f=n[d],a[l]={x:i.parse(f[0],d),y:o.parse(f[1],d)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let d,f,m,y;for(d=0,f=s;d<f;++d)m=d+r,y=n[m],c[d]={x:i.parse(Bd(y,a),m),y:o.parse(Bd(y,l),m)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:kS(s,!0),values:n._stacks[e.axis]._visualValues};return yx(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=yx(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=iU(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=tU(a);let m,y;function x(){y=s[m];const k=y[a.axis];return!Ut(y[e.axis])||d>k||f<k}for(m=0;m<o&&!(!x()&&(this.updateRangeFromParsed(c,e,y,l),i));++m);if(i){for(m=o-1;m>=0;--m)if(!x()){this.updateRangeFromParsed(c,e,y,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Ut(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=J3(_e(this.options.clip,X3(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,i,a,l),d=a;d<a+l;++d){const f=s[d];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(d=0;d<o.length;++d)o[d].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=sU(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=rU(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&zd(r);if(a)return wx(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],m=c.getOptionScopes(this.getDataset(),d),y=Object.keys(ot.elements[e]),x=()=>this.getContext(r,s,n),k=c.resolveNamedOptions(m,y,x,f);return k.$shared&&(k.$shared=l,i[o]=Object.freeze(wx(k,l))),k}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,n),m=d.getOptionScopes(this.getDataset(),f);l=d.createResolver(m,this.getContext(e,r,n))}const c=new bS(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ep(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){ep(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!ep(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Ma(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}pe(bl,"defaults",{}),pe(bl,"datasetElementType",null),pe(bl,"dataElementType",null);class Hu extends bl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=$5(n,s,o);this._drawStart=a,this._drawCount=l,H5(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,s),m=o.axis,y=a.axis,{spanGaps:x,segment:k}=this.options,E=nc(x)?x:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||s==="none",_=n+r,b=e.length;let P=n>0&&this.getParsed(n-1);for(let N=0;N<b;++N){const M=e[N],T=v?M:{};if(N<n||N>=_){T.skip=!0;continue}const w=this.getParsed(N),C=Le(w[y]),A=T[m]=o.getPixelForValue(w[m],N),R=T[y]=i||C?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[y],N);T.skip=isNaN(A)||isNaN(R)||C,T.stop=N>0&&Math.abs(w[m]-P[m])>E,k&&(T.parsed=w,T.raw=c.data[N]),f&&(T.options=d||this.resolveDataElementOptions(N,M.active?"active":s)),v||this.updateElement(M,N,T,s),P=w}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}pe(Hu,"id","line"),pe(Hu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),pe(Hu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function ii(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class oy{constructor(e){pe(this,"options");this.options=e||{}}static override(e){Object.assign(oy.prototype,e)}init(){}formats(){return ii()}parse(){return ii()}format(){return ii()}add(){return ii()}diff(){return ii()}startOf(){return ii()}endOf(){return ii()}}var oU={_date:oy};function aU(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?j5:_i;if(r){if(s._sharedOptions){const d=i[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const m=c(i,e,n-f),y=c(i,e,n+f);return{lo:m.lo,hi:y.hi}}}}else{const d=c(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:m}=t,y=m.slice(0,d.lo+1).reverse().findIndex(k=>!Le(k[f.axis]));d.lo-=Math.max(0,y);const x=m.slice(d.hi).findIndex(k=>!Le(k[f.axis]));d.hi+=Math.max(0,x)}return d}}return{lo:0,hi:i.length-1}}function Fh(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:d}=i[a],{lo:f,hi:m}=aU(i[a],e,o,s);for(let y=f;y<=m;++y){const x=d[y];x.skip||r(x,c,y)}}}function lU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function tp(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||Fh(t,n,e,function(a,l,c){!s&&!rc(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function cU(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:f}=M5(o,{x:e.x,y:e.y});nS(f,c,d)&&s.push({element:o,datasetIndex:a,index:l})}return Fh(t,n,e,i),s}function uU(t,e,n,r,s,i){let o=[];const a=lU(n);let l=Number.POSITIVE_INFINITY;function c(d,f,m){const y=d.inRange(e.x,e.y,s);if(r&&!y)return;const x=d.getCenterPoint(s);if(!(!!i||t.isPointInArea(x))&&!y)return;const E=a(e,x);E<l?(o=[{element:d,datasetIndex:f,index:m}],l=E):E===l&&o.push({element:d,datasetIndex:f,index:m})}return Fh(t,n,e,c),o}function np(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?cU(t,e,n,s):uU(t,e,n,r,s,i)}function xx(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Fh(t,n,e,(l,c,d)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var dU={modes:{index(t,e,n,r){const s=ui(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?tp(t,s,i,r,o):np(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,f=c.data[d];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:d})}),l):[]},dataset(t,e,n,r){const s=ui(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?tp(t,s,i,r,o):np(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(t,e,n,r){const s=ui(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return tp(t,s,i,r,o)},nearest(t,e,n,r){const s=ui(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return np(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=ui(e,t);return xx(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=ui(e,t);return xx(t,s,"y",n.intersect,r)}}};const ES=["left","top","right","bottom"];function Oa(t,e){return t.filter(n=>n.pos===e)}function bx(t,e){return t.filter(n=>ES.indexOf(n.pos)===-1&&n.box.axis===e)}function La(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function hU(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function fU(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!ES.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function pU(t,e){const n=fU(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=d?d*s:l&&e.availableHeight)}return n}function mU(t){const e=hU(t),n=La(e.filter(c=>c.box.fullSize),!0),r=La(Oa(e,"left"),!0),s=La(Oa(e,"right")),i=La(Oa(e,"top"),!0),o=La(Oa(e,"bottom")),a=bx(e,"x"),l=bx(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Oa(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function kx(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function TS(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function gU(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!xe(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&TS(o,i.getPadding());const a=Math.max(0,e.outerWidth-kx(o,t,"left","right")),l=Math.max(0,e.outerHeight-kx(o,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function yU(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function vU(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Xa(t,e,n,r){const s=[];let i,o,a,l,c,d;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,vU(a.horizontal,e));const{same:f,other:m}=gU(e,n,a,r);c|=f&&s.length,d=d||m,l.fullSize||s.push(a)}return c&&Xa(s,e,n,r)||d}function gu(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function Ex(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*d,m=c.size||l.height;zd(c.start)&&(o=c.start),l.fullSize?gu(l,s.left,o,n.outerWidth-s.right-s.left,m):gu(l,e.left+c.placed,o,f,m),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*d,m=c.size||l.width;zd(c.start)&&(i=c.start),l.fullSize?gu(l,i,s.top,m,n.outerHeight-s.bottom-s.top):gu(l,i,e.top+c.placed,m,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var xs={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=or(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=mU(t.boxes),l=a.vertical,c=a.horizontal;Ce(t.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const d=l.reduce((k,E)=>E.box.options&&E.box.options.display===!1?k:k+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),m=Object.assign({},s);TS(m,or(r));const y=Object.assign({maxPadding:m,w:i,h:o,x:s.left,y:s.top},s),x=pU(l.concat(c),f);Xa(a.fullSize,y,f,x),Xa(l,y,f,x),Xa(c,y,f,x)&&Xa(l,y,f,x),yU(y),Ex(a.leftAndTop,y,f,x),y.x+=y.w,y.y+=y.h,Ex(a.rightAndBottom,y,f,x),t.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},Ce(a.chartArea,k=>{const E=k.box;Object.assign(E,t.chartArea),E.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class IS{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class _U extends IS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Wu="$chartjs",wU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Tx=t=>t===null||t==="";function xU(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Wu]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Tx(s)){const i=dx(t,"width");i!==void 0&&(t.width=i)}if(Tx(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=dx(t,"height");i!==void 0&&(t.height=i)}return t}const SS=M3?{passive:!0}:!1;function bU(t,e,n){t&&t.addEventListener(e,n,SS)}function kU(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,SS)}function EU(t,e){const n=wU[t.type]||t.type,{x:r,y:s}=ui(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function qd(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function TU(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||qd(a.addedNodes,r),o=o&&!qd(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function IU(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||qd(a.removedNodes,r),o=o&&!qd(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const sc=new Map;let Ix=0;function CS(){const t=window.devicePixelRatio;t!==Ix&&(Ix=t,sc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function SU(t,e){sc.size||window.addEventListener("resize",CS),sc.set(t,e)}function CU(t){sc.delete(t),sc.size||window.removeEventListener("resize",CS)}function AU(t,e,n){const r=t.canvas,s=r&&iy(r);if(!s)return;const i=iS((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||i(c,d)});return o.observe(s),SU(t,i),o}function rp(t,e,n){n&&n.disconnect(),e==="resize"&&CU(t)}function PU(t,e,n){const r=t.canvas,s=iS(i=>{t.ctx!==null&&n(EU(i,t))},t);return bU(r,e,s),s}class RU extends IS{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(xU(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Wu])return!1;const r=n[Wu].initial;["height","width"].forEach(i=>{const o=r[i];Le(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Wu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:TU,detach:IU,resize:AU}[n]||PU;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:rp,detach:rp,resize:rp}[n]||kU)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return D3(e,n,r,s)}isAttached(e){const n=e&&iy(e);return!!(n&&n.isConnected)}}function NU(t){return!sy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?_U:RU}class $s{constructor(){pe(this,"x");pe(this,"y");pe(this,"active",!1);pe(this,"options");pe(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return nc(this.x)&&nc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}}pe($s,"defaults",{}),pe($s,"defaultRoutes");function DU(t,e){const n=t.options.ticks,r=MU(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?LU(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return jU(e,c,i,o/s),c;const d=OU(i,e,s);if(o>0){let f,m;const y=o>1?Math.round((l-a)/(o-1)):null;for(yu(e,c,d,Le(y)?0:a-y,a),f=0,m=o-1;f<m;f++)yu(e,c,d,i[f],i[f+1]);return yu(e,c,d,l,Le(y)?e.length:l+y),c}return yu(e,c,d),c}function MU(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function OU(t,e,n){const r=VU(t),s=e.length/n;if(!r)return Math.max(s,1);const i=A5(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function LU(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function jU(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function yu(t,e,n,r,s){const i=_e(r,0),o=Math.min(_e(s,t.length),t.length);let a=0,l,c,d;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),d=i;d<0;)a++,d=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===d&&(e.push(t[c]),a++,d=Math.round(i+a*n))}function VU(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const FU=t=>t==="left"?"right":t==="right"?"left":t,Sx=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Cx=(t,e)=>Math.min(e||t,t);function Ax(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function UU(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function BU(t,e){Ce(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function ja(t){return t.drawTicks?t.tickLength:0}function Px(t,e){if(!t.display)return 0;const n=sn(t.font,e),r=or(t.padding);return(yt(t.text)?t.text.length:1)*n.lineHeight+r.height}function zU(t,e){return qi(t,{scale:e,type:"scale"})}function $U(t,e,n){return qi(t,{tick:n,index:e,type:"tick"})}function HU(t,e,n){let r=oS(t);return(n&&e!=="right"||!n&&e==="right")&&(r=FU(r)),r}function WU(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let f=0,m,y,x;const k=o-s,E=a-i;if(t.isHorizontal()){if(y=vn(r,i,a),xe(n)){const v=Object.keys(n)[0],_=n[v];x=d[v].getPixelForValue(_)+k-e}else n==="center"?x=(c.bottom+c.top)/2+k-e:x=Sx(t,n,e);m=a-i}else{if(xe(n)){const v=Object.keys(n)[0],_=n[v];y=d[v].getPixelForValue(_)-E+e}else n==="center"?y=(c.left+c.right)/2-E+e:y=Sx(t,n,e);x=vn(r,o,s),f=n==="left"?-Jn:Jn}return{titleX:y,titleY:x,maxWidth:m,rotation:f}}class ca extends $s{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=ur(e,Number.POSITIVE_INFINITY),n=ur(n,Number.NEGATIVE_INFINITY),r=ur(r,Number.POSITIVE_INFINITY),s=ur(s,Number.NEGATIVE_INFINITY),{min:ur(e,r),max:ur(n,s),minDefined:Ut(e),maxDefined:Ut(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:ur(n,ur(r,n)),max:ur(r,ur(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Fe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=d3(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Ax(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=DU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Fe(this.options.afterUpdate,[this])}beforeSetDimensions(){Fe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Fe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Fe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Fe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=Fe(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){Fe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Fe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Cx(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const d=this._getLabelSizes(),f=d.widest.width,m=d.highest.height,y=On(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:y/(r-1),f+6>a&&(a=y/(r-(e.offset?.5:1)),l=this.maxHeight-ja(e.grid)-n.padding-Px(e.title,this.chart.options.font),c=Math.sqrt(f*f+m*m),o=D5(Math.min(Math.asin(On((d.highest.height+6)/a,-1,1)),Math.asin(On(l/c,-1,1))-Math.asin(On(m/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Fe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Fe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Px(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=ja(i)+l):(e.height=this.maxHeight,e.width=ja(i)+l),r.display&&this.ticks.length){const{first:c,last:d,widest:f,highest:m}=this._getLabelSizes(),y=r.padding*2,x=vi(this.labelRotation),k=Math.cos(x),E=Math.sin(x);if(a){const v=r.mirror?0:E*f.width+k*m.height;e.height=Math.min(this.maxHeight,e.height+v+y)}else{const v=r.mirror?0:k*f.width+E*m.height;e.width=Math.min(this.maxWidth,e.width+v+y)}this._calculatePadding(c,d,E,k)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,y=0;l?c?(m=s*e.width,y=r*n.height):(m=r*e.height,y=s*n.width):i==="start"?y=n.width:i==="end"?m=e.width:i!=="inner"&&(m=e.width/2,y=n.width/2),this.paddingLeft=Math.max((m-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((y-f+o)*this.width/(this.width-f),0)}else{let d=n.height/2,f=e.height/2;i==="start"?(d=0,f=e.height):i==="end"&&(d=n.height,f=0),this.paddingTop=d+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Fe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Le(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Ax(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Cx(n,r));let c=0,d=0,f,m,y,x,k,E,v,_,b,P,N;for(f=0;f<n;f+=l){if(x=e[f].label,k=this._resolveTickFontOptions(f),s.font=E=k.string,v=i[E]=i[E]||{data:{},gc:[]},_=k.lineHeight,b=P=0,!Le(x)&&!yt(x))b=ox(s,v.data,v.gc,b,x),P=_;else if(yt(x))for(m=0,y=x.length;m<y;++m)N=x[m],!Le(N)&&!yt(N)&&(b=ox(s,v.data,v.gc,b,N),P+=_);o.push(b),a.push(P),c=Math.max(b,c),d=Math.max(P,d)}BU(i,n);const M=o.indexOf(c),T=a.indexOf(d),w=C=>({width:o[C]||0,height:a[C]||0});return{first:w(0),last:w(n-1),widest:w(M),highest:w(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return L5(this._alignToPixels?si(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=$U(this.getContext(),e,r))}return this.$context||(this.$context=zU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=vi(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=ja(i),y=[],x=a.setContext(this.getContext()),k=x.display?x.width:0,E=k/2,v=function(re){return si(r,re,k)};let _,b,P,N,M,T,w,C,A,R,O,I;if(o==="top")_=v(this.bottom),T=this.bottom-m,C=_-E,R=v(e.top)+E,I=e.bottom;else if(o==="bottom")_=v(this.top),R=e.top,I=v(e.bottom)-E,T=_+E,C=this.top+m;else if(o==="left")_=v(this.right),M=this.right-m,w=_-E,A=v(e.left)+E,O=e.right;else if(o==="right")_=v(this.left),A=e.left,O=v(e.right)-E,M=_+E,w=this.left+m;else if(n==="x"){if(o==="center")_=v((e.top+e.bottom)/2+.5);else if(xe(o)){const re=Object.keys(o)[0],de=o[re];_=v(this.chart.scales[re].getPixelForValue(de))}R=e.top,I=e.bottom,T=_+E,C=T+m}else if(n==="y"){if(o==="center")_=v((e.left+e.right)/2);else if(xe(o)){const re=Object.keys(o)[0],de=o[re];_=v(this.chart.scales[re].getPixelForValue(de))}M=_-E,w=M-m,A=e.left,O=e.right}const W=_e(s.ticks.maxTicksLimit,f),H=Math.max(1,Math.ceil(f/W));for(b=0;b<f;b+=H){const re=this.getContext(b),de=i.setContext(re),B=a.setContext(re),Q=de.lineWidth,q=de.color,fe=B.dash||[],se=B.dashOffset,j=de.tickWidth,ee=de.tickColor,oe=de.tickBorderDash||[],be=de.tickBorderDashOffset;P=UU(this,b,l),P!==void 0&&(N=si(r,P,Q),c?M=w=A=O=N:T=C=R=I=N,y.push({tx1:M,ty1:T,tx2:w,ty2:C,x1:A,y1:R,x2:O,y2:I,width:Q,color:q,borderDash:fe,borderDashOffset:se,tickWidth:j,tickColor:ee,tickBorderDash:oe,tickBorderDashOffset:be}))}return this._ticksLength=f,this._borderValue=_,y}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:f}=i,m=ja(r.grid),y=m+d,x=f?-d:y,k=-vi(this.labelRotation),E=[];let v,_,b,P,N,M,T,w,C,A,R,O,I="middle";if(s==="top")M=this.bottom-x,T=this._getXAxisLabelAlignment();else if(s==="bottom")M=this.top+x,T=this._getXAxisLabelAlignment();else if(s==="left"){const H=this._getYAxisLabelAlignment(m);T=H.textAlign,N=H.x}else if(s==="right"){const H=this._getYAxisLabelAlignment(m);T=H.textAlign,N=H.x}else if(n==="x"){if(s==="center")M=(e.top+e.bottom)/2+y;else if(xe(s)){const H=Object.keys(s)[0],re=s[H];M=this.chart.scales[H].getPixelForValue(re)+y}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")N=(e.left+e.right)/2-y;else if(xe(s)){const H=Object.keys(s)[0],re=s[H];N=this.chart.scales[H].getPixelForValue(re)}T=this._getYAxisLabelAlignment(m).textAlign}n==="y"&&(l==="start"?I="top":l==="end"&&(I="bottom"));const W=this._getLabelSizes();for(v=0,_=a.length;v<_;++v){b=a[v],P=b.label;const H=i.setContext(this.getContext(v));w=this.getPixelForTick(v)+i.labelOffset,C=this._resolveTickFontOptions(v),A=C.lineHeight,R=yt(P)?P.length:1;const re=R/2,de=H.color,B=H.textStrokeColor,Q=H.textStrokeWidth;let q=T;o?(N=w,T==="inner"&&(v===_-1?q=this.options.reverse?"left":"right":v===0?q=this.options.reverse?"right":"left":q="center"),s==="top"?c==="near"||k!==0?O=-R*A+A/2:c==="center"?O=-W.highest.height/2-re*A+A:O=-W.highest.height+A/2:c==="near"||k!==0?O=A/2:c==="center"?O=W.highest.height/2-re*A:O=W.highest.height-R*A,f&&(O*=-1),k!==0&&!H.showLabelBackdrop&&(N+=A/2*Math.sin(k))):(M=w,O=(1-R)*A/2);let fe;if(H.showLabelBackdrop){const se=or(H.backdropPadding),j=W.heights[v],ee=W.widths[v];let oe=O-se.top,be=0-se.left;switch(I){case"middle":oe-=j/2;break;case"bottom":oe-=j;break}switch(T){case"center":be-=ee/2;break;case"right":be-=ee;break;case"inner":v===_-1?be-=ee:v>0&&(be-=ee/2);break}fe={left:be,top:oe,width:ee+se.width,height:j+se.height,color:H.backdropColor}}E.push({label:P,font:C,textOffset:O,options:{rotation:k,color:de,strokeColor:B,strokeWidth:Q,textAlign:q,textBaseline:I,translation:[N,M],backdrop:fe}})}return E}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-vi(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,d;return n==="left"?s?(d=this.right+i,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d=this.left)):n==="right"?s?(d=this.left+i,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,f,m;this.isHorizontal()?(c=si(e,this.left,o)-o/2,d=si(e,this.right,a)+a/2,f=m=l):(f=si(e,this.top,o)-o/2,m=si(e,this.bottom,a)+a/2,c=d=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(d,m),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Lh(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,d=o.textOffset;Hd(r,c,0,d,l,a)}s&&jh(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=sn(r.font),o=or(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||xe(n)?(l+=o.bottom,yt(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:f,rotation:m}=WU(this,l,n,a);Hd(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:m,textAlign:HU(a,n,s),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=_e(e.grid&&e.grid.z,-1),s=_e(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ca.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return sn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class vu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;GU(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,qU(e,o,r),this.override&&ot.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in ot[s]&&(delete ot[s][r],this.override&&delete Fi[r])}}function qU(t,e,n){const r=tc(Object.create(null),[n?ot.get(n):{},ot.get(e),t.defaults]);ot.set(e,r),t.defaultRoutes&&KU(e,t.defaultRoutes),t.descriptors&&ot.describe(e,t.descriptors)}function KU(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");ot.route(i,s,l,a)})}function GU(t){return"id"in t&&"defaults"in t}class QU{constructor(){this.controllers=new vu(bl,"datasets",!0),this.elements=new vu($s,"elements"),this.plugins=new vu(Object,"plugins"),this.scales=new vu(ca,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Ce(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=J0(e);Fe(r["before"+s],[],r),n[e](r),Fe(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var fr=new QU;class YU{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(Fe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Le(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=_e(r.options&&r.options.plugins,{}),i=XU(r);return s===!1&&!n?[]:ZU(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function XU(t){const e={},n=[],r=Object.keys(fr.plugins.items);for(let i=0;i<r.length;i++)n.push(fr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function JU(t,e){return!e&&t===!1?null:t===!0?{}:t}function ZU(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=JU(r[l],s);c!==null&&i.push({plugin:a,options:e6(t.config,{plugin:a,local:n[l]},c,o)})}return i}function e6(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Om(t,e){const n=ot.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function t6(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function n6(t,e){return t===e?"_index_":"_value_"}function Rx(t){if(t==="x"||t==="y"||t==="r")return t}function r6(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Lm(t,...e){if(Rx(t))return t;for(const n of e){const r=n.axis||r6(n.position)||t.length>1&&Rx(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Nx(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function s6(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Nx(t,"x",n[0])||Nx(t,"y",n[0])}return{}}function i6(t,e){const n=Fi[t.type]||{scales:{}},r=e.scales||{},s=Om(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!xe(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Lm(o,a,s6(o,t),ot.scales[a.type]),c=n6(l,s),d=n.scales||{};i[o]=yl(Object.create(null),[{axis:l},a,d[l],d[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Om(a,e),d=(Fi[a]||{}).scales||{};Object.keys(d).forEach(f=>{const m=t6(f,l),y=o[m+"AxisID"]||m;i[y]=i[y]||Object.create(null),yl(i[y],[{axis:m},r[y],d[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];yl(a,[ot.scales[a.type],ot.scale])}),i}function AS(t){const e=t.options||(t.options={});e.plugins=_e(e.plugins,{}),e.scales=i6(t,e)}function PS(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function o6(t){return t=t||{},t.data=PS(t.data),AS(t),t}const Dx=new Map,RS=new Set;function _u(t,e){let n=Dx.get(t);return n||(n=e(),Dx.set(t,n),RS.add(n)),n}const Va=(t,e,n)=>{const r=Bd(e,n);r!==void 0&&t.add(r)};class a6{constructor(e){this._config=o6(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=PS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),AS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return _u(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return _u(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return _u(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return _u(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(f=>Va(l,e,f))),d.forEach(f=>Va(l,s,f)),d.forEach(f=>Va(l,Fi[i]||{},f)),d.forEach(f=>Va(l,ot,f)),d.forEach(f=>Va(l,Nm,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),RS.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Fi[n]||{},ot.datasets[n]||{},{type:n},ot,Nm]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Mx(this._resolverCache,e,s);let l=o;if(c6(o,n)){i.$shared=!1,r=zs(r)?r():r;const c=this.createResolver(e,r,a);l=Qo(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Mx(this._resolverCache,e,r);return xe(n)?Qo(i,n,void 0,s):i}}function Mx(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:ty(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const l6=t=>xe(t)&&Object.getOwnPropertyNames(t).some(e=>zs(t[e]));function c6(t,e){const{isScriptable:n,isIndexable:r}=dS(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(zs(a)||l6(a))||o&&yt(a))return!0}return!1}var u6="4.5.0";const d6=["top","bottom","left","right","chartArea"];function Ox(t,e){return t==="top"||t==="bottom"||d6.indexOf(t)===-1&&e==="x"}function Lx(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function jx(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Fe(n&&n.onComplete,[t],e)}function h6(t){const e=t.chart,n=e.options.animation;Fe(n&&n.onProgress,[t],e)}function NS(t){return sy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const qu={},Vx=t=>{const e=NS(t);return Object.values(qu).filter(n=>n.canvas===e).pop()};function f6(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function p6(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var is;let Uh=(is=class{static register(...e){fr.add(...e),Fx()}static unregister(...e){fr.remove(...e),Fx()}constructor(e,n){const r=this.config=new a6(n),s=NS(e),i=Vx(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||NU(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=w5(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new YU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=B5(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],qu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ir.listen(this,"complete",jx),Ir.listen(this,"progress",h6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return Le(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return fr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ux(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ax(this.canvas,this.ctx),this}stop(){return Ir.stop(this),this}resize(e,n){Ir.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ux(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Fe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ce(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Lm(o,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),Ce(i,o=>{const a=o.options,l=a.id,c=Lm(l,a),d=_e(a.type,o.dtype);(a.position===void 0||Ox(a.position,c)!==Ox(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===d)f=r[l];else{const m=fr.getScale(d);f=new m({id:l,type:d,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),Ce(s,(o,a)=>{o||delete r[a]}),Ce(r,o=>{xs.configure(this,o,o.options),xs.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Lx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||Om(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=fr.getController(a),{datasetElementType:c,dataElementType:d}=ot.datasets[a];Object.assign(l,{dataElementType:fr.getElement(d),datasetElementType:c&&fr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ce(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:f}=this.getDatasetMeta(c),m=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(m),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Ce(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Lx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ce(this.scales,e=>{xs.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Xw(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;f6(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Xw(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xs.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ce(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,zs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ir.has(this)?this.attached&&!Ir.running(this)&&Ir.start(this):(this.draw(),jx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=xS(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Lh(n,s),e.controller.draw(),s&&jh(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return rc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=dU.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=qi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);zd(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ir.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ax(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete qu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};Ce(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ce(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ce(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Fd(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(d=>!c.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=I5(e),c=p6(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Fe(i.onHover,[e,a,this],this),l&&Fe(i.onClick,[e,a,this],this));const d=!Fd(a,s);return(d||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,d}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},pe(is,"defaults",ot),pe(is,"instances",qu),pe(is,"overrides",Fi),pe(is,"registry",fr),pe(is,"version",u6),pe(is,"getChart",Vx),is);function Fx(){return Ce(Uh.instances,t=>t._plugins.invalidate())}function DS(t,e,n=e){t.lineCap=_e(n.borderCapStyle,e.borderCapStyle),t.setLineDash(_e(n.borderDash,e.borderDash)),t.lineDashOffset=_e(n.borderDashOffset,e.borderDashOffset),t.lineJoin=_e(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=_e(n.borderWidth,e.borderWidth),t.strokeStyle=_e(n.borderColor,e.borderColor)}function m6(t,e,n){t.lineTo(n.x,n.y)}function g6(t){return t.stepped?t3:t.tension||t.cubicInterpolationMode==="monotone"?n3:m6}function MS(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),d=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!d?r+c-l:c-l}}function y6(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=MS(s,n,r),d=g6(i);let{move:f=!0,reverse:m}=r||{},y,x,k;for(y=0;y<=c;++y)x=s[(a+(m?c-y:y))%o],!x.skip&&(f?(t.moveTo(x.x,x.y),f=!1):d(t,k,x,m,i.stepped),k=x);return l&&(x=s[(a+(m?c:0))%o],d(t,k,x,m,i.stepped)),!!l}function v6(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=MS(s,n,r),{move:l=!0,reverse:c}=r||{};let d=0,f=0,m,y,x,k,E,v;const _=P=>(o+(c?a-P:P))%i,b=()=>{k!==E&&(t.lineTo(d,E),t.lineTo(d,k),t.lineTo(d,v))};for(l&&(y=s[_(0)],t.moveTo(y.x,y.y)),m=0;m<=a;++m){if(y=s[_(m)],y.skip)continue;const P=y.x,N=y.y,M=P|0;M===x?(N<k?k=N:N>E&&(E=N),d=(f*d+P)/++f):(b(),t.lineTo(P,N),x=M,f=0,k=E=N),v=N}b()}function jm(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?v6:y6}function _6(t){return t.stepped?O3:t.tension||t.cubicInterpolationMode==="monotone"?L3:di}function w6(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),DS(t,e.options),t.stroke(s)}function x6(t,e,n,r){const{segments:s,options:i}=e,o=jm(e);for(const a of s)DS(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const b6=typeof Path2D=="function";function k6(t,e,n,r){b6&&!e.options.segment?w6(t,e,n,r):x6(t,e,n,r)}class bs extends $s{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;S3(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=z3(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=wS(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=_6(r);let c,d;for(c=0,d=o.length;c<d;++c){const{start:f,end:m}=o[c],y=i[f],x=i[m];if(y===x){a.push(y);continue}const k=Math.abs((s-y[n])/(x[n]-y[n])),E=l(y,x,k,r.stepped);E[n]=e[n],a.push(E)}return a.length===1?a[0]:a}pathSegment(e,n,r){return jm(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=jm(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),k6(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}pe(bs,"id","line"),pe(bs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),pe(bs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),pe(bs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Ux(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Ku extends $s{constructor(n){super();pe(this,"parsed");pe(this,"skip");pe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return Ux(this,n,"x",r)}inYRange(n,r){return Ux(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!rc(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Dm(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}pe(Ku,"id","point"),pe(Ku,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),pe(Ku,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function E6(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Bh(l,c,s);const d=Vm(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:d,start:s[l],end:s[c]});continue}const f=wS(e,d);for(const m of f){const y=Vm(n,i[m.start],i[m.end],m.loop),x=_S(a,s,y);for(const k of x)o.push({source:k,target:m,start:{[n]:Bx(d,y,"start",Math.max)},end:{[n]:Bx(d,y,"end",Math.min)}})}}return o}function Vm(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=pr(s),i=pr(i)),{property:t,start:s,end:i}}function T6(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=Bh(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function Bh(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Bx(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function OS(t,e){let n=[],r=!1;return yt(t)?(r=!0,n=t):n=T6(t,e),n.length?new bs({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function zx(t){return t&&t.fill!==!1}function I6(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Ut(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function S6(t,e,n){const r=R6(t);if(xe(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Ut(s)&&Math.floor(s)===s?C6(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function C6(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function A6(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:xe(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function P6(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:xe(t)?r=t.value:r=e.getBaseValue(),r}function R6(t){const e=t.options,n=e.fill;let r=_e(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function N6(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=D6(e,n);a.push(OS({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let d=c.start;d<=c.end;d++)M6(s,o[d],a)}return new bs({points:s,options:{}})}function D6(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function M6(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=O6(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function O6(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const d=i[c],f=o[d.start][n],m=o[d.end][n];if(vo(s,f,m)){a=s===f,l=s===m;break}}return{first:a,last:l,point:r}}class LS{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:nr},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function L6(t){const{chart:e,fill:n,line:r}=t;if(Ut(n))return j6(e,n);if(n==="stack")return N6(t);if(n==="shape")return!0;const s=V6(t);return s instanceof LS?s:OS(s,r)}function j6(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function V6(t){return(t.scale||{}).getPointPositionForValue?U6(t):F6(t)}function F6(t){const{scale:e={},fill:n}=t,r=A6(n,e);if(Ut(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function U6(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=P6(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new LS({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function sp(t,e,n){const r=L6(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,d=c.fill,f=c.backgroundColor,{above:m=f,below:y=f}=d||{},x=s.getDatasetMeta(i),k=xS(s,x);r&&o.points.length&&(Lh(t,n),B6(t,{line:o,target:r,above:m,below:y,area:n,scale:a,axis:l,clip:k}),jh(t))}function B6(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let d=i;i!==s&&(c==="x"?($x(t,r,o.top),ip(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),$x(t,r,o.bottom)):c==="y"&&(Hx(t,r,o.left),ip(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Hx(t,r,o.right),d=s)),ip(t,{line:n,target:r,color:d,scale:a,property:c,clip:l}),t.restore()}function $x(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,d=s[l],f=s[Bh(l,c,s)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Hx(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,d=s[l],f=s[Bh(l,c,s)];i?(t.moveTo(d.x,d.y),i=!1):(t.lineTo(n,d.y),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function ip(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=E6(n,r,s);for(const{source:c,target:d,start:f,end:m}of l){const{style:{backgroundColor:y=i}={}}=c,x=r!==!0;t.save(),t.fillStyle=y,z6(t,o,a,x&&Vm(s,f,m)),t.beginPath();const k=!!n.pathSegment(t,c);let E;if(x){k?t.closePath():Wx(t,r,m,s);const v=!!r.pathSegment(t,d,{move:k,reverse:!0});E=k&&v,E||Wx(t,r,f,s)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function z6(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,d,f;i==="x"?(l=o,c=s.top,d=a,f=s.bottom):(l=s.left,c=o,d=s.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),d=Math.min(d,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,d-l,f-c),t.clip()}}function Wx(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var $6={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof bs&&(l={visible:t.isDatasetVisible(o),index:o,fill:S6(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=I6(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&sp(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;zx(i)&&sp(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!zx(r)||n.drawTime!=="beforeDatasetDraw"||sp(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const qx=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},H6=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Kx extends $s{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Fe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=sn(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=qx(r,i);let c,d;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,i,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let m=-1,y=-d;return this.legendItems.forEach((x,k)=>{const E=r+n/2+i.measureText(x.text).width;(k===0||c[c.length-1]+E+2*a>o)&&(f+=d,c[c.length-(k>0?0:1)]=0,y+=d,m++),l[k]={left:0,top:y,row:m,width:E,height:s},c[c.length-1]+=E+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let f=a,m=0,y=0,x=0,k=0;return this.legendItems.forEach((E,v)=>{const{itemWidth:_,itemHeight:b}=W6(r,n,i,E,s);v>0&&y+b+2*a>d&&(f+=m+a,c.push({width:m,height:y}),x+=m+a,k++,m=y=0),l[v]={left:x,top:y,col:k,width:_,height:b},m=Math.max(m,_),y+=b+a}),f+=m,c.push({width:m,height:y}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=Ao(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=vn(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=vn(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=vn(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=vn(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Lh(e,this),this._draw(),jh(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=ot.color,l=Ao(e.rtl,this.left,this.width),c=sn(o.font),{padding:d}=o,f=c.size,m=f/2;let y;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:x,boxHeight:k,itemHeight:E}=qx(o,f),v=function(M,T,w){if(isNaN(x)||x<=0||isNaN(k)||k<0)return;s.save();const C=_e(w.lineWidth,1);if(s.fillStyle=_e(w.fillStyle,a),s.lineCap=_e(w.lineCap,"butt"),s.lineDashOffset=_e(w.lineDashOffset,0),s.lineJoin=_e(w.lineJoin,"miter"),s.lineWidth=C,s.strokeStyle=_e(w.strokeStyle,a),s.setLineDash(_e(w.lineDash,[])),o.usePointStyle){const A={radius:k*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:C},R=l.xPlus(M,x/2),O=T+m;cS(s,A,R,O,o.pointStyleWidth&&x)}else{const A=T+Math.max((f-k)/2,0),R=l.leftForLtr(M,x),O=xl(w.borderRadius);s.beginPath(),Object.values(O).some(I=>I!==0)?Mm(s,{x:R,y:A,w:x,h:k,radius:O}):s.rect(R,A,x,k),s.fill(),C!==0&&s.stroke()}s.restore()},_=function(M,T,w){Hd(s,w.text,M,T+E/2,c,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},b=this.isHorizontal(),P=this._computeTitleHeight();b?y={x:vn(i,this.left+d,this.right-r[0]),y:this.top+d+P,line:0}:y={x:this.left+d,y:vn(i,this.top+P+d,this.bottom-n[0].height),line:0},gS(this.ctx,e.textDirection);const N=E+d;this.legendItems.forEach((M,T)=>{s.strokeStyle=M.fontColor,s.fillStyle=M.fontColor;const w=s.measureText(M.text).width,C=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),A=x+m+w;let R=y.x,O=y.y;l.setWidth(this.width),b?T>0&&R+A+d>this.right&&(O=y.y+=N,y.line++,R=y.x=vn(i,this.left+d,this.right-r[y.line])):T>0&&O+N>this.bottom&&(R=y.x=R+n[y.line].width+d,y.line++,O=y.y=vn(i,this.top+P+d,this.bottom-n[y.line].height));const I=l.x(R);if(v(I,O,M),R=z5(C,R+x+m,b?R+A:this.right,e.rtl),_(l.x(R),O,M),b)y.x+=A+d;else if(typeof M.text!="string"){const W=c.lineHeight;y.y+=jS(M,W)+d}else y.y+=N}),yS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=sn(n.font),s=or(n.padding);if(!n.display)return;const i=Ao(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let d,f=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+c,f=vn(e.align,f,this.right-m);else{const x=this.columnSizes.reduce((k,E)=>Math.max(k,E.height),0);d=c+vn(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const y=vn(a,f,f+m);o.textAlign=i.textAlign(oS(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Hd(o,n.text,y,d,r)}_computeTitleHeight(){const e=this.options.title,n=sn(e.font),r=or(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(vo(e,this.left,this.right)&&vo(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],vo(e,s.left,s.left+s.width)&&vo(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!G6(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=H6(s,r);s&&!i&&Fe(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&Fe(n.onHover,[e,r,this],this)}else r&&Fe(n.onClick,[e,r,this],this)}}function W6(t,e,n,r,s){const i=q6(r,t,e,n),o=K6(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function q6(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function K6(t,e,n){let r=t;return typeof e.text!="string"&&(r=jS(e,n)),r}function jS(t,e){const n=t.text?t.text.length:0;return e*n}function G6(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Q6={id:"legend",_element:Kx,start(t,e,n){const r=t.legend=new Kx({ctx:t.ctx,options:n,chart:t});xs.configure(t,r,n),xs.addBox(t,r)},stop(t){xs.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;xs.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),d=or(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const Ja={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Rm(e,c);d<s&&(s=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function dr(t,e){return e&&(yt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Sr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Y6(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Gx(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=sn(e.bodyFont),c=sn(e.titleFont),d=sn(e.footerFont),f=i.length,m=s.length,y=r.length,x=or(e.padding);let k=x.height,E=0,v=r.reduce((P,N)=>P+N.before.length+N.lines.length+N.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,f&&(k+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),v){const P=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;k+=y*P+(v-y)*l.lineHeight+(v-1)*e.bodySpacing}m&&(k+=e.footerMarginTop+m*d.lineHeight+(m-1)*e.footerSpacing);let _=0;const b=function(P){E=Math.max(E,n.measureText(P).width+_)};return n.save(),n.font=c.string,Ce(t.title,b),n.font=l.string,Ce(t.beforeBody.concat(t.afterBody),b),_=e.displayColors?o+2+e.boxPadding:0,Ce(r,P=>{Ce(P.before,b),Ce(P.lines,b),Ce(P.after,b)}),_=0,n.font=d.string,Ce(t.footer,b),n.restore(),E+=x.width,{width:E,height:k}}function X6(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function J6(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function Z6(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),J6(c,t,e,n)&&(c="center"),c}function Qx(t,e,n){const r=n.yAlign||e.yAlign||X6(t,n);return{xAlign:n.xAlign||e.xAlign||Z6(t,e,n,r),yAlign:r}}function e9(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function t9(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Yx(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:y}=xl(o);let x=e9(e,a);const k=t9(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(d,m)+s:a==="right"&&(x+=Math.max(f,y)+s),{x:On(x,0,r.width-e.width),y:On(k,0,r.height-e.height)}}function wu(t,e,n){const r=or(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Xx(t){return dr([],Sr(t))}function n9(t,e,n){return qi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Jx(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const VS={beforeTitle:Tr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Tr,beforeBody:Tr,beforeLabel:Tr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Le(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Tr,afterBody:Tr,beforeFooter:Tr,footer:Tr,afterFooter:Tr};function en(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?VS[e].call(n,r):s}class Fm extends $s{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new bS(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=n9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=en(r,"beforeTitle",this,e),i=en(r,"title",this,e),o=en(r,"afterTitle",this,e);let a=[];return a=dr(a,Sr(s)),a=dr(a,Sr(i)),a=dr(a,Sr(o)),a}getBeforeBody(e,n){return Xx(en(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Ce(e,i=>{const o={before:[],lines:[],after:[]},a=Jx(r,i);dr(o.before,Sr(en(a,"beforeLabel",this,i))),dr(o.lines,en(a,"label",this,i)),dr(o.after,Sr(en(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return Xx(en(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=en(r,"beforeFooter",this,e),i=en(r,"footer",this,e),o=en(r,"afterFooter",this,e);let a=[];return a=dr(a,Sr(s)),a=dr(a,Sr(i)),a=dr(a,Sr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Y6(this.chart,n[l]));return e.filter&&(a=a.filter((d,f,m)=>e.filter(d,f,m,r))),e.itemSort&&(a=a.sort((d,f)=>e.itemSort(d,f,r))),Ce(a,d=>{const f=Jx(e.callbacks,d);s.push(en(f,"labelColor",this,d)),i.push(en(f,"labelPointStyle",this,d)),o.push(en(f,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=Ja[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Gx(this,r),c=Object.assign({},a,l),d=Qx(this.chart,r,c),f=Yx(r,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:f}=xl(a),{x:m,y}=e,{width:x,height:k}=n;let E,v,_,b,P,N;return i==="center"?(P=y+k/2,s==="left"?(E=m,v=E-o,b=P+o,N=P-o):(E=m+x,v=E+o,b=P-o,N=P+o),_=E):(s==="left"?v=m+Math.max(l,d)+o:s==="right"?v=m+x-Math.max(c,f)-o:v=this.caretX,i==="top"?(b=y,P=b-o,E=v-o,_=v+o):(b=y+k,P=b+o,E=v+o,_=v-o),N=b),{x1:E,x2:v,x3:_,y1:b,y2:P,y3:N}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=Ao(r.rtl,this.x,this.width);for(e.x=wu(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=sn(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,d=sn(i.bodyFont),f=wu(this,"left",i),m=s.x(f),y=l<d.lineHeight?(d.lineHeight-l)/2:0,x=n.y+y;if(i.usePointStyle){const k={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},E=s.leftForLtr(m,c)+c/2,v=x+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Dm(e,k,E,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Dm(e,k,E,v)}else{e.lineWidth=xe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const k=s.leftForLtr(m,c),E=s.leftForLtr(s.xPlus(m,1),c-2),v=xl(o.borderRadius);Object.values(v).some(_=>_!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Mm(e,{x:k,y:x,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Mm(e,{x:E,y:x+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(k,x,c,l),e.strokeRect(k,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(E,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=r,f=sn(r.bodyFont);let m=f.lineHeight,y=0;const x=Ao(r.rtl,this.x,this.width),k=function(w){n.fillText(w,x.x(e.x+y),e.y+m/2),e.y+=m+i},E=x.textAlign(o);let v,_,b,P,N,M,T;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=wu(this,E,r),n.fillStyle=r.bodyColor,Ce(this.beforeBody,k),y=a&&E!=="right"?o==="center"?c/2+d:c+2+d:0,P=0,M=s.length;P<M;++P){for(v=s[P],_=this.labelTextColors[P],n.fillStyle=_,Ce(v.before,k),b=v.lines,a&&b.length&&(this._drawColorBox(n,e,P,x,r),m=Math.max(f.lineHeight,l)),N=0,T=b.length;N<T;++N)k(b[N]),m=f.lineHeight;Ce(v.after,k)}y=0,m=f.lineHeight,Ce(this.afterBody,k),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=Ao(r.rtl,this.x,this.width);for(e.x=wu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=sn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:d}=r,{topLeft:f,topRight:m,bottomLeft:y,bottomRight:x}=xl(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-m,l),n.quadraticCurveTo(a+c,l,a+c,l+m),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+d-x),n.quadraticCurveTo(a+c,l+d,a+c-x,l+d),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+y,l+d),n.quadraticCurveTo(a,l+d,a,l+d-y),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Ja[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Gx(this,e),l=Object.assign({},o,this._size),c=Qx(n,e,l),d=Yx(e,l,c,n);(s._to!==d.x||i._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=or(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),gS(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),yS(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Fd(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Fd(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Ja[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}pe(Fm,"positioners",Ja);var r9={id:"tooltip",_element:Fm,positioners:Ja,afterInit(t,e,n){n&&(t.tooltip=new Fm({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:VS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const s9=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function i9(t,e,n,r){const s=t.indexOf(e);if(s===-1)return s9(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const o9=(t,e)=>t===null?null:On(Math.round(t),0,e);function Zx(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Um extends ca{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Le(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:i9(r,e,_e(n,e),this._addedLabels),o9(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Zx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}pe(Um,"id","category"),pe(Um,"defaults",{ticks:{callback:Zx}});function a9(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:f,includeBounds:m}=t,y=i||1,x=d-1,{min:k,max:E}=e,v=!Le(o),_=!Le(a),b=!Le(c),P=(E-k)/(f+1);let N=Zw((E-k)/x/y)*y,M,T,w,C;if(N<1e-14&&!v&&!_)return[{value:k},{value:E}];C=Math.ceil(E/N)-Math.floor(k/N),C>x&&(N=Zw(C*N/x/y)*y),Le(l)||(M=Math.pow(10,l),N=Math.ceil(N*M)/M),s==="ticks"?(T=Math.floor(k/N)*N,w=Math.ceil(E/N)*N):(T=k,w=E),v&&_&&i&&R5((a-o)/i,N/1e3)?(C=Math.round(Math.min((a-o)/N,d)),N=(a-o)/C,T=o,w=a):b?(T=v?o:T,w=_?a:w,C=c-1,N=(w-T)/C):(C=(w-T)/N,vl(C,Math.round(C),N/1e3)?C=Math.round(C):C=Math.ceil(C));const A=Math.max(ex(N),ex(T));M=Math.pow(10,Le(l)?A:l),T=Math.round(T*M)/M,w=Math.round(w*M)/M;let R=0;for(v&&(m&&T!==o?(n.push({value:o}),T<o&&R++,vl(Math.round((T+R*N)*M)/M,o,eb(o,P,t))&&R++):T<o&&R++);R<C;++R){const O=Math.round((T+R*N)*M)/M;if(_&&O>a)break;n.push({value:O})}return _&&m&&w!==a?n.length&&vl(n[n.length-1].value,a,eb(a,P,t))?n[n.length-1].value=a:n.push({value:a}):(!_||w===a)&&n.push({value:w}),n}function eb(t,e,{horizontal:n,minRotation:r}){const s=vi(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class l9 extends ca{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Le(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Go(s),c=Go(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=a9(s,i);return e.bounds==="ticks"&&N5(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return aS(e,this.chart.options.locale,this.options.ticks.format)}}class Bm extends l9{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ut(e)?e:0,this.max=Ut(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=vi(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}pe(Bm,"id","linear"),pe(Bm,"defaults",{ticks:{callback:lS.formatters.numeric}});const zh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},nn=Object.keys(zh);function tb(t,e){return t-e}function nb(t,e){if(Le(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ut(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(nc(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function rb(t,e,n,r){const s=nn.length;for(let i=nn.indexOf(t);i<s-1;++i){const o=zh[nn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return nn[i]}return nn[s-1]}function c9(t,e,n,r,s){for(let i=nn.length-1;i>=nn.indexOf(n);i--){const o=nn[i];if(zh[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return nn[n?nn.indexOf(n):0]}function u9(t){for(let e=nn.indexOf(t)+1,n=nn.length;e<n;++e)if(zh[nn[e]].common)return nn[e]}function sb(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Z0(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function d9(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function ib(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:d9(t,r,s,n)}class Kd extends ca{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new oU._date(e.adapters.date);s.init(n),yl(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:nb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ut(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Ut(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=V5(s,i,o);return this._unit=n.unit||(r.autoSkip?rb(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):c9(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:u9(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),ib(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=On(n,0,o),r=On(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||rb(i.minUnit,n,r,this._getLabelCapacity(n)),a=_e(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=nc(l)||l===!0,d={};let f=n,m,y;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=s.ticks.source==="data"&&this.getDataTimestamps();for(m=f,y=0;m<r;m=+e.add(m,a,o),y++)sb(d,m,x);return(m===r||s.bounds==="ticks"||y===1)&&sb(d,m,x),Object.keys(d).sort(tb).map(k=>+k)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return Fe(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],f=c&&a[c],m=r[n],y=c&&f&&m&&m.major;return this._adapter.format(e,s||(y?f:d))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=vi(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,ib(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(nb(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return U5(e.sort(tb))}}pe(Kd,"id","time"),pe(Kd,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function xu(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=_i(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=_i(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class ob extends Kd{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=xu(n,this.min),this._tableRange=xu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,d;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)d=s[o+1],l=s[o-1],c=s[o],Math.round((d+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(xu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return xu(this._table,r*this._tableRange+this._minPos,!0)}}pe(ob,"id","timeseries"),pe(ob,"defaults",Kd.defaults);const FS="label";function ab(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function h9(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function US(t,e){t.labels=e}function BS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:FS;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function f9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FS;const n={labels:[],datasets:[]};return US(n,t.labels),BS(n,t.datasets,e),n}function p9(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:a,options:l,plugins:c=[],fallbackContent:d,updateMode:f,...m}=t,y=D.useRef(null),x=D.useRef(null),k=()=>{y.current&&(x.current=new Uh(y.current,{type:o,data:f9(a,i),options:l&&{...l},plugins:c}),ab(e,x.current))},E=()=>{ab(e,null),x.current&&(x.current.destroy(),x.current=null)};return D.useEffect(()=>{!s&&x.current&&l&&h9(x.current,l)},[s,l]),D.useEffect(()=>{!s&&x.current&&US(x.current.config.data,a.labels)},[s,a.labels]),D.useEffect(()=>{!s&&x.current&&a.datasets&&BS(x.current.config.data,a.datasets,i)},[s,a.datasets]),D.useEffect(()=>{x.current&&(s?(E(),setTimeout(k)):x.current.update(f))},[s,l,a.labels,a.datasets,f]),D.useEffect(()=>{x.current&&(E(),setTimeout(k))},[o]),D.useEffect(()=>(k(),()=>E()),[]),Qd.createElement("canvas",{ref:y,role:"img",height:n,width:r,...m},d)}const m9=D.forwardRef(p9);function g9(t,e){return Uh.register(e),D.forwardRef((n,r)=>Qd.createElement(m9,{...n,ref:r,type:t}))}const y9=g9("line",Hu);Uh.register(Um,Bm,Ku,bs,r9,Q6,$6);function zS({points:t=[],labels:e,yRange:n={min:0,max:1},height:r=220}){const s=D.useRef(null),i=(c,d)=>{const f=c.createLinearGradient(0,d.bottom,0,d.top);return f.addColorStop(0,"rgba(16, 185, 129, 0.15)"),f.addColorStop(.5,"rgba(245, 158, 11, 0.2)"),f.addColorStop(1,"rgba(239, 68, 68, 0.25)"),f},a={labels:Array.isArray(e)&&e.length===t.length?e:t.map((c,d)=>`Day ${d+1}`),datasets:[{label:"Risk Level",data:t,borderColor:"rgb(59, 130, 246)",backgroundColor:function(c){const d=c.chart,{ctx:f,chartArea:m}=d;return m?i(f,m):null},borderWidth:2,pointBackgroundColor:"white",pointBorderColor:"rgb(59, 130, 246)",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6,pointHoverBackgroundColor:"white",pointHoverBorderColor:"rgb(59, 130, 246)",pointHoverBorderWidth:2,tension:.3,fill:!0}]},l={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.95)",titleColor:"white",bodyColor:"white",padding:12,borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,usePointStyle:!0,callbacks:{label:function(c){return`Risk: ${c.parsed.y.toFixed(2)}`}},titleFont:{size:14,weight:"500"},bodyFont:{size:13},boxPadding:6}},scales:{y:{min:(n==null?void 0:n.min)??0,max:(n==null?void 0:n.max)??1,grid:{color:"rgba(226, 232, 240, 0.2)",borderDash:[4,4],drawTicks:!1},border:{display:!1},ticks:{color:"rgba(100, 116, 139, 0.8)",padding:8,callback:function(c){return c.toFixed(1)},font:{size:12}}},x:{grid:{display:!1},border:{display:!1},ticks:{color:"rgba(100, 116, 139, 0.8)",maxRotation:45,minRotation:45,padding:10,font:{size:12}}}},elements:{line:{borderWidth:2},point:{hoverRadius:7,hoverBorderWidth:2}},interaction:{intersect:!1,mode:"index"},animation:{duration:800,easing:"easeInOutCubic"},layout:{padding:{top:10,right:15,bottom:10,left:15}}};return h.jsx("div",{className:"relative w-full",style:{height:`${r}px`},children:h.jsx(y9,{ref:s,data:a,options:l,updateMode:"resize"})})}const Js="",$h={"x-user-id":"demo"};async function ay(){try{const t=xt.currentUser;if(t)return{Authorization:`Bearer ${await t.getIdToken()}`}}catch{}return{...$h}}async function v9(){return(await fetch(`${Js}/api/ai/health`)).json()}async function _9(t,{useOcr:e,lang:n}={}){const r=await fetch(`${Js}/api/pdf-extract`,{method:"POST",headers:{"Content-Type":"application/json",...$h},body:JSON.stringify({url:t,useOcr:e,lang:n})}),s=await r.text();let i={};try{i=s?JSON.parse(s):{}}catch{i={}}if(!r.ok){const o=(i==null?void 0:i.error)||(i==null?void 0:i.message)||`HTTP ${r.status}`,a=new Error(o);throw a.status=r.status,a.body=i,a}return i}function w9(t,{onProgress:e,signal:n}={}){return new Promise((r,s)=>{try{const i=new XMLHttpRequest,o=new FormData;if(o.append("file",t),i.open("POST",`${Js}/functions/processReport`,!0),i.setRequestHeader("x-user-id",$h["x-user-id"]),i.upload&&typeof e=="function"&&(i.upload.onprogress=a=>{if(!a.lengthComputable)return;const l=Math.min(99,Math.round(a.loaded/a.total*100));e(l)}),i.onreadystatechange=()=>{if(i.readyState===4)if(i.status>=200&&i.status<300)try{const a=JSON.parse(i.responseText||"{}");r(a)}catch{r({ok:!0})}else{let a="Upload failed";try{const c=JSON.parse(i.responseText||"{}");a=(c==null?void 0:c.error)||(c==null?void 0:c.message)||a;const d=new Error(a);return d.status=i.status,d.body=c,s(d)}catch{}const l=new Error(a);l.status=i.status,s(l)}},i.onerror=()=>s(new Error("Network error during upload")),i.onabort=()=>s(new Error("Upload canceled")),n)if(n.aborted)i.abort();else{const a=()=>i.abort();n.addEventListener("abort",a,{once:!0})}i.send(o)}catch(i){s(i)}})}async function x9(t){return(await fetch(`${Js}/functions/analyzeCheckin`,{method:"POST",headers:{"Content-Type":"application/json",...$h},body:JSON.stringify(t)})).json()}async function b9(t,e,n){const r=new URL(`${Js}/functions/findNearbyAmbulance`);return r.searchParams.set("lat",String(t)),r.searchParams.set("lng",String(e)),Number.isFinite(n)&&r.searchParams.set("radiusMeters",String(n)),(await fetch(r.toString())).json()}async function k9(t,{signal:e}={}){const n=await fetch(`${Js}/functions/chat`,{method:"POST",headers:{"Content-Type":"application/json",...await ay()},body:JSON.stringify(t),signal:e}),r=await n.text();let s=null;try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}async function $S(t){const e=new URL(`${Js}/functions/riskSeries`);t&&e.searchParams.set("userId",String(t));const n=await fetch(e.toString(),{headers:{...await ay()}}),r=await n.text();let s={};try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}async function E9(t,e){const n=await fetch(`${Js}/functions/generateReportSummary`,{method:"POST",headers:{"Content-Type":"application/json",...await ay()},body:JSON.stringify({extractedData:t,ocrText:e})}),r=await n.text();let s={};try{s=r?JSON.parse(r):{}}catch{s={}}if(!n.ok){const i=(s==null?void 0:s.error)||(s==null?void 0:s.message)||`HTTP ${n.status}`,o=new Error(i);throw o.status=n.status,o.body=s,o}return s}function on({className:t="",children:e,hoverable:n=!1}){return h.jsx("div",{className:`
        bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm 
        rounded-xl border border-slate-200 dark:border-slate-800 
        shadow-sm hover:shadow-md transition-all duration-300
        ${n?"hover:-translate-y-0.5 hover:shadow-lg":""}
        ${t}
      `.trim(),children:e})}function Fr({className:t="",children:e}){return h.jsx("div",{className:`
        px-6 py-4 border-b border-slate-200/80 dark:border-slate-800/80
        ${t}
      `.trim(),children:e})}function Ur({className:t="",children:e}){return h.jsx("h2",{className:`
        text-lg font-semibold tracking-tight 
        text-slate-900 dark:text-slate-100
        ${t}
      `.trim(),children:e})}function an({className:t="",children:e}){return h.jsx("div",{className:`
        p-6 text-slate-800 dark:text-slate-200 
        ${t}
      `.trim(),children:e})}function Po({size:t=16,className:e=""}){const n={width:t,height:t};return h.jsxs("svg",{className:`animate-spin text-blue-600 ${e}`,style:n,viewBox:"0 0 24 24",fill:"none",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})}const HS=D.createContext({notify:()=>{}});function T9({children:t}){const[e,n]=D.useState([]),r=D.useCallback((i,o="info",a=3e3)=>{const l=Math.random().toString(36).slice(2);n(c=>c.concat({id:l,message:i,type:o})),setTimeout(()=>n(c=>c.filter(d=>d.id!==l)),a)},[]),s=D.useMemo(()=>({notify:r}),[r]);return h.jsxs(HS.Provider,{value:s,children:[t,h.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:e.map(i=>h.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${i.type==="error"?"bg-red-600":i.type==="success"?"bg-emerald-600":"bg-slate-900"}`,children:i.message},i.id))})]})}function ua(){return D.useContext(HS)}function I9({title:t,subtitle:e,cta:n}){return h.jsxs("section",{className:"mb-8 rounded-xl border border-slate-200 dark:border-slate-800 bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[h.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-slate-900 dark:text-slate-100 mb-3 tracking-tight",children:t}),e&&h.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 max-w-3xl leading-relaxed",children:e}),n&&h.jsx("div",{className:"mt-6 flex flex-wrap gap-3",children:n})]})}const lb={calendar:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),shield:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),chart:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),user:h.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})};function Ro({label:t,value:e,hint:n,accent:r="blue",icon:s="chart"}){const i={blue:{bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-700 dark:text-blue-300",border:"border-blue-200 dark:border-blue-800/50",icon:"text-blue-500"},emerald:{bg:"bg-emerald-50 dark:bg-emerald-900/20",text:"text-emerald-700 dark:text-emerald-300",border:"border-emerald-200 dark:border-emerald-800/50",icon:"text-emerald-500"},amber:{bg:"bg-amber-50 dark:bg-amber-900/20",text:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800/50",icon:"text-amber-500"},red:{bg:"bg-rose-50 dark:bg-rose-900/20",text:"text-rose-700 dark:text-rose-300",border:"border-rose-200 dark:border-rose-800/50",icon:"text-rose-500"},purple:{bg:"bg-purple-50 dark:bg-purple-900/20",text:"text-purple-700 dark:text-purple-300",border:"border-purple-200 dark:border-purple-800/50",icon:"text-purple-500"},green:{bg:"bg-green-50 dark:bg-green-900/20",text:"text-green-700 dark:text-green-300",border:"border-green-200 dark:border-green-800/50",icon:"text-green-500"}},o=i[r]||i.blue;return h.jsx("div",{className:`
      rounded-xl border ${o.border} ${o.bg} 
      p-5 transition-all duration-300 transform hover:scale-[1.02] hover:shadow-sm
    `,children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("div",{className:`text-sm font-medium ${o.text} mb-1`,children:t}),h.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:e}),n&&h.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:n})]}),h.jsx("div",{className:`p-2.5 rounded-lg ${o.bg} ${o.border}`,children:h.jsx("div",{className:o.icon,children:lb[s]||lb.chart})})]})})}function S9(t){if(!t)return .5;const e=s=>({None:1,Normal:1,"Slept well  no trouble falling or staying asleep":1,"None  no unusual warmth":1,Mild:.7,"Mild  occasional discomfort":.7,"Mild  didnt interfere with work":.7,"Mild  occasional queasiness":.7,"Mild  slightly tired":.7,"Mild  slight temperature fluctuation":.7,"Mild  occasional cough or shortness of breath":.7,"Slight irregularity  mild constipation/diarrhea":.7,"Slight  minor discomfort or frequency change":.7,"Minor  small rashes, bruises, or pimples":.7,"Mild  occasional lightheadedness":.7,Moderate:.4,"Moderate  noticeable, affects tasks":.4,"Moderate  interfered with tasks":.4,"Moderate  affected meals":.4,"Moderate  noticeable fatigue":.4,"Moderate  measurable fever (100102F / 37.738.8C)":.4,"Moderate  daily cough or breathing difficulty":.4,"Moderate  frequent or loose stools":.4,"Moderate  frequent or painful urination":.4,"Noticeable  persistent rash, sores, or swelling":.4,"Moderate  dizziness affecting tasks":.4,"Moderate difficulty  frequent waking or poor sleep quality":.4,"Moderate  noticeable episodes affecting comfort":.4,Severe:.2,"Severe  persistent pain":.2,"Severe  unable to perform daily activities":.2,"Severe  persistent vomiting":.2,"Severe  could barely perform activities":.2,"Severe  high fever (>102F / 38.8C)":.2,"Severe  persistent cough or severe breathing issues":.2,"Severe  persistent diarrhea/constipation":.2,"Severe  inability to urinate normally or severe discomfort":.2,"Severe  bleeding, large lesions, or non-healing wounds":.2,"Severe  fainting or inability to stand":.2,"Severe  frequent or intense hot flashes":.2})[s]??.5,n=[e(t.ns_q1),e(t.ns_q2),e(t.ns_q3),e(t.ns_q4),e(t.ns_q5),e(t.ns_q6),e(t.ns_q7),e(t.ns_q8),e(t.ns_q9),e(t.ns_q10),e(t.ns_q11),e(t.ns_q12)],r=n.reduce((s,i)=>s+(typeof i=="number"?i:.5),0)/n.length;return Math.max(0,Math.min(1,Number(r.toFixed(3))))}function WS(t){return 1-S9(t)}function C9(){const{notify:t}=ua(),{user:e}=Xr(),n=uc(),[r,s]=D.useState(null),[i,o]=D.useState(!1),[a,l]=D.useState(null),[c,d]=D.useState([]),[f,m]=D.useState([]),[y,x]=D.useState([]),[k,E]=D.useState({level:"Low",reason:"No data yet.",score:0});function v(b){var O,I;let P=0,N=0,M=0,T=0,w=0,C=0;for(const W of b){const H=(W==null?void 0:W.answers)||{},re=H.ns_q2&&H.ns_q2.toLowerCase().startsWith("mild")||((O=H.ns_q2)==null?void 0:O.toLowerCase().startsWith("moderate"))||((I=H.ns_q2)==null?void 0:I.toLowerCase().startsWith("severe")),de=H.ns_q11&&(H.ns_q11.toLowerCase().includes("hardly")||H.ns_q11.toLowerCase().includes("moderate difficulty")),B=H.ns_q5&&(H.ns_q5.toLowerCase().includes("very low")||H.ns_q5.toLowerCase()==="low"),Q=H.ns_q5&&H.ns_q5.toLowerCase().includes("fever"),q=H.ns_q3&&!H.ns_q3.toLowerCase().startsWith("none"),fe=H.ns_q4&&!H.ns_q4.toLowerCase().startsWith("none");re&&(P+=2,N+=1),de&&(P+=3,M+=1),B?(P+=4,w+=1):w=0,w>=5&&(T=Math.max(T,w)),(Q?1:0)+(q?1:0)+(fe?1:0)>=2&&(P+=6,C+=1)}let A="Low",R="No major recurring symptoms.";return N>=3&&M>=3&&(A="Mid",R="Frequent headaches with low sleep across several days."),T>=5&&(A="Mid",R="Sustained low mood/stress for 5+ days."),C>=2&&(A="High",R="Multiple symptoms clustered (e.g., nausea + weakness) on several days."),P>=20?(A="High",(!R||R==="No major recurring symptoms.")&&(R="Multiple risk factors accumulated in recent logs.")):P>=10&&A!=="High"&&(A="Mid",(!R||R==="No major recurring symptoms.")&&(R="Some recurring issues detected (sleep/mood/symptoms).")),{level:A,reason:R,score:P}}D.useEffect(()=>{async function b(){if(!(!kt||!e))try{const P=ml(kt,"users",e.uid,"dailyCheckins"),N=Im(P,bI("date","desc"),kI(30)),T=(await Sm(N)).docs.map(W=>({id:W.id,...W.data()})),w=T.slice().reverse();let C=w.map(W=>WS(W.answers));const A=w.map(W=>{var H;return(H=W==null?void 0:W.date)!=null&&H.toDate?W.date.toDate().toLocaleDateString():""});d(T),m(C),x(A);try{const W=await $S(e.uid);W&&W.ok&&Array.isArray(W.points)&&W.points.length>0&&(m(W.points),Array.isArray(W.labels)&&W.labels.length===W.points.length&&x(W.labels.map(H=>{try{return new Date(H).toLocaleDateString()}catch{return H}})))}catch{}const R=T.slice(-7),I=v(T);E(I)}catch(P){console.error("[Dashboard] loadCheckins error:",P)}}b()},[e]);async function _(){try{if(l(null),o(!0),!navigator.geolocation)throw new Error("Geolocation is not supported by this browser.");t("Finding nearby ambulance services...","info"),await new Promise((b,P)=>{navigator.geolocation.getCurrentPosition(async N=>{try{const{latitude:M,longitude:T}=N.coords,w=await b9(M,T);if(!w||w.ok===!1){const A=w&&w.error?w.error:"Failed to fetch nearby services";throw new Error(A)}s(w);const C=Array.isArray(w.data)?w.data.length:0;t(`Found ${C} ambulance service${C===1?"":"s"}`,"success"),b()}catch(M){P(M)}},N=>{const M=N&&N.message?N.message:"Unable to retrieve location.";P(new Error(M))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})})}catch(b){const P=(b==null?void 0:b.message)||"Failed to find nearby ambulances";l(P),t(P,"error")}finally{o(!1)}}return h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsx(I9,{title:"AI Diagnostic & Triage Dashboard",subtitle:"Track your health, upload reports, and monitor trends with our AI-powered health monitoring system.",cta:h.jsxs("div",{className:"flex flex-wrap gap-3",children:[h.jsxs(Ae,{onClick:()=>n("/daily-checkin"),className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Daily Check-in"]}),h.jsxs(Ae,{variant:"secondary",onClick:()=>n("/upload-report"),className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload Report"]}),h.jsxs(Ae,{variant:"secondary",onClick:_,className:"flex items-center gap-2",children:[h.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Find Ambulance"]})]})}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[h.jsx(on,{className:`transition-all duration-300 transform hover:scale-[1.02] ${k.level==="High"?"bg-gradient-to-br from-rose-50 to-rose-100 dark:from-rose-900/30 dark:to-rose-900/10 border-rose-200 dark:border-rose-800/50":k.level==="Mid"?"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-900/10 border-amber-200 dark:border-amber-800/50":"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/30 dark:to-emerald-900/10 border-emerald-200 dark:border-emerald-800/50"}`,children:h.jsxs(an,{children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Health Risk"}),h.jsx("div",{className:`text-2xl font-bold ${k.level==="High"?"text-rose-700 dark:text-rose-300":k.level==="Mid"?"text-amber-700 dark:text-amber-300":"text-emerald-700 dark:text-emerald-300"}`,children:k.level})]}),h.jsx("div",{className:`px-3 py-1.5 rounded-full text-xs font-medium ${k.level==="High"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-300":k.level==="Mid"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300"}`,children:"Last 30 days"})]}),h.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:k.reason})]})}),h.jsxs(on,{className:"lg:col-span-2 transition-all duration-300 transform hover:scale-[1.01]",children:[h.jsx(Fr,{children:h.jsxs(Ur,{className:"flex items-center",children:[h.jsx("svg",{className:"w-5 h-5 mr-2 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Risk Trend (last ",y.length," check-ins)"]})}),h.jsx(an,{children:f.length>0?h.jsx("div",{className:"h-[220px] -mx-2 -mb-2",children:h.jsx(zS,{points:f,labels:y,yRange:{min:0,max:1},title:"Rule-based risk"})}):h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"text-slate-400 dark:text-slate-500 mb-2",children:h.jsx("svg",{className:"w-12 h-12 mx-auto opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 17v-2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No check-ins yet. Your risk trend will appear here."}),h.jsxs("button",{onClick:()=>n("/daily-checkin"),className:"mt-3 text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors inline-flex items-center",children:["Record your first check-in",h.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[h.jsx(Ro,{label:"Check-ins today",value:c.filter(b=>{var M;const P=new Date;return((M=b==null?void 0:b.date)!=null&&M.toDate?b.date.toDate():new Date(b==null?void 0:b.date)).toDateString()===P.toDateString()}).length,hint:"Daily check-ins",icon:"calendar",accent:"blue"}),h.jsx(Ro,{label:"Risk level",value:k.level,hint:"Based on recent data",icon:"shield",accent:k.level==="High"?"red":k.level==="Mid"?"amber":"green"}),h.jsx(Ro,{label:"Total check-ins",value:c.length,hint:"Last 30 days",icon:"chart",accent:"purple"})]}),h.jsx("div",{className:"grid grid-cols-1 gap-6",children:h.jsxs(on,{className:"relative overflow-hidden border-0 shadow-xl bg-white/80 dark:bg-slate-900/80 ring-1 ring-slate-900/5",children:[h.jsx(Fr,{children:h.jsxs(Ur,{className:"flex items-center text-xl md:text-2xl",children:[h.jsx("svg",{className:"w-6 h-6 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M12 2a10 10 0 100 20 10 10 0 000-20z"})}),"About Us"]})}),h.jsx(an,{children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"pointer-events-none absolute -top-24 -right-24 h-72 w-72 rounded-full bg-blue-500/10 blur-3xl"}),h.jsx("div",{className:"pointer-events-none absolute -bottom-20 -left-20 h-72 w-72 rounded-full bg-emerald-500/10 blur-3xl"}),h.jsxs("div",{className:"relative rounded-2xl p-6 md:p-8 bg-gradient-to-br from-slate-50 to-white dark:from-slate-900 dark:to-slate-950 border border-slate-200/70 dark:border-slate-800/70 shadow-xl",children:[h.jsxs("div",{className:"mb-6 inline-flex items-center gap-2 rounded-full border border-blue-200/60 dark:border-blue-900/50 bg-blue-50/60 dark:bg-blue-900/20 px-3 py-1 text-xs font-medium text-blue-700 dark:text-blue-300",children:[h.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-blue-500"}),"Health Sphere"]}),h.jsx("h2",{className:"text-2xl md:text-3xl font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"Your Partner in Proactive Health"}),h.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-300 leading-relaxed",children:"Health Sphere is an AI-powered health monitoring and triage platform that helps you track symptoms, understand risk trends, and take timely action. Were building a privacy-first, reliable, and clinician-informed experience to support everyday well-being."}),h.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 p-4 hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200 font-medium",children:[h.jsx("svg",{className:"w-5 h-5 text-emerald-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M20 6L9 17l-5-5"})}),"Daily check-ins"]}),h.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Monitor well-being and symptoms over time."})]}),h.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 p-4 hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200 font-medium",children:[h.jsx("svg",{className:"w-5 h-5 text-indigo-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M3 3v18h18"})}),"AI risk insights"]}),h.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Clear summaries and trend visualizations."})]}),h.jsxs("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 p-4 hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-center gap-2 text-slate-700 dark:text-slate-200 font-medium",children:[h.jsx("svg",{className:"w-5 h-5 text-rose-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M12 8v4l3 3"})}),"Rapid actions"]}),h.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-400",children:"Find emergency services when you need them."})]})]}),h.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-emerald-700 dark:text-emerald-300 border border-emerald-200/60 dark:border-emerald-800/50 p-4 text-center",children:[h.jsx("div",{className:"text-2xl font-bold",children:"Privacy-first"}),h.jsx("div",{className:"text-xs opacity-80 mt-1",children:"Your data, your control"})]}),h.jsxs("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border border-blue-200/60 dark:border-blue-800/50 p-4 text-center",children:[h.jsx("div",{className:"text-2xl font-bold",children:"AI + Clinicians"}),h.jsx("div",{className:"text-xs opacity-80 mt-1",children:"Human-centered insights"})]}),h.jsxs("div",{className:"rounded-lg bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300 border border-purple-200/60 dark:border-purple-800/50 p-4 text-center",children:[h.jsx("div",{className:"text-2xl font-bold",children:"Actionable"}),h.jsx("div",{className:"text-xs opacity-80 mt-1",children:"Guidance you can use"})]})]})]})]})})]})}),(i||a||r&&Array.isArray(r.data))&&h.jsx("div",{className:"mt-8",children:h.jsxs(on,{children:[h.jsx(Fr,{children:h.jsxs(Ur,{className:"flex items-center",children:[h.jsx("svg",{className:"w-5 h-5 mr-2 text-rose-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Nearby Ambulance Services"]})}),h.jsxs(an,{children:[i&&h.jsxs("div",{className:"flex items-center justify-center py-8",children:[h.jsx(Po,{className:"w-6 h-6 text-blue-500"}),h.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-300",children:"Locating nearby services..."})]}),a&&h.jsx("div",{className:"p-4 rounded-lg bg-rose-50 dark:bg-rose-900/20 text-rose-700 dark:text-rose-300",children:h.jsxs("div",{className:"flex",children:[h.jsx("svg",{className:"w-5 h-5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium",children:"Unable to locate services"}),h.jsx("p",{className:"text-sm mt-1",children:a})]})]})}),!i&&!a&&h.jsxs("div",{className:"space-y-4",children:[((r==null?void 0:r.data)||[]).slice(0,3).map((b,P)=>h.jsxs("div",{className:"p-4 rounded-lg border border-slate-200 dark:border-slate-800 hover:bg-slate-50/50 dark:hover:bg-slate-800/30 transition-colors",children:[h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-medium text-slate-900 dark:text-slate-100",children:b.name}),h.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:b.address||"Address not available"})]}),typeof b.distance_meters=="number"&&h.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:[b.distance_meters.toLocaleString()," m"]})]}),b.rating&&h.jsxs("div",{className:"mt-2 flex items-center text-sm text-amber-600 dark:text-amber-400",children:[[...Array(5)].map((N,M)=>h.jsx("svg",{className:`w-4 h-4 ${M<Math.floor(b.rating)?"fill-current":"fill-none"}`,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},M)),h.jsx("span",{className:"ml-1 text-slate-600 dark:text-slate-400",children:b.rating.toFixed(1)})]})]},P)),((r==null?void 0:r.data)||[]).length===0&&h.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[h.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsx("p",{children:"No ambulance services found nearby."})]})]})]})]})})]})}function Yn({className:t="",...e}){return h.jsx("input",{className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-blue-600 focus:ring-2 focus:ring-blue-600 focus:ring-offset-0 outline-none ${t}`.trim(),...e})}const oi={"auth/invalid-email":"Please enter a valid email address.","auth/user-disabled":"This account has been disabled. Contact support if this is a mistake.","auth/user-not-found":"No account found with that email.","auth/wrong-password":"Incorrect password. Please try again.","auth/missing-password":"Please enter your password.","auth/too-many-requests":"Too many attempts. Please wait a moment and try again.","auth/network-request-failed":"Network error. Check your connection and try again.","auth/popup-closed-by-user":"Sign-in popup was closed before completing.","auth/popup-blocked":"Sign-in popup was blocked by your browser.","auth/cancelled-popup-request":"Another sign-in is already in progress.","auth/account-exists-with-different-credential":"An account with this email exists using a different sign-in method.","auth/invalid-credential":"Invalid credentials. Please try again.","auth/operation-not-allowed":"This sign-in method is disabled. Contact support.","auth/weak-password":"Please choose a stronger password (at least 6 characters).","auth/email-already-in-use":"An account with this email already exists."};function wi(t){if(!t)return"Something went wrong. Please try again.";const e=typeof t=="string"?t:t.code||t.message||"",n=oi[e]||oi[`auth/${e}`];if(n)return n;const r=(t.message||"").toLowerCase();return r.includes("user-not-found")?oi["auth/user-not-found"]:r.includes("wrong-password")?oi["auth/wrong-password"]:r.includes("email-already-in-use")?oi["auth/email-already-in-use"]:r.includes("invalid-email")?oi["auth/invalid-email"]:r.includes("weak-password")?oi["auth/weak-password"]:"Authentication failed. Please check your details and try again."}function A9(){var R,O;const{user:t,login:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:s}=Xr(),[i,o]=D.useState(""),[a,l]=D.useState(""),[c,d]=D.useState(""),[f,m]=D.useState(""),[y,x]=D.useState("enter"),[k,E]=D.useState(!1),[v,_]=D.useState(""),{notify:b}=ua(),P=uc(),M=((O=(R=Gs().state)==null?void 0:R.from)==null?void 0:O.pathname)||"/";D.useEffect(()=>{t&&P(M,{replace:!0})},[t,M,P]);async function T(I){I.preventDefault(),_(""),E(!0);try{await e({email:i,password:a}),P(M,{replace:!0})}catch(W){const H=wi(W);_(H),b(H,"error")}finally{E(!1)}}async function w(){_(""),E(!0);try{await n()&&P(M,{replace:!0})}catch(I){const W=wi(I)||"Google sign-in failed";_(W),b(W,"error")}finally{E(!1)}}async function C(I){I.preventDefault(),_(""),E(!0);try{await r(c),x("verify")}catch(W){const H=wi(W)||"Failed to send OTP";_(H),b(H,"error")}finally{E(!1)}}async function A(I){I.preventDefault(),_(""),E(!0);try{await s(f),P(M,{replace:!0})}catch(W){const H=wi(W)||"Invalid OTP";_(H),b(H,"error")}finally{E(!1)}}return t?null:h.jsx("div",{className:"grid place-items-center",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Welcome back"}),h.jsx(on,{children:h.jsxs(an,{children:[h.jsxs("form",{className:"space-y-4",onSubmit:T,children:[h.jsx(Yn,{type:"email",placeholder:"Email",value:i,onChange:I=>o(I.target.value),disabled:k}),h.jsx(Yn,{type:"password",placeholder:"Password",value:a,onChange:I=>l(I.target.value),disabled:k}),v&&h.jsx("p",{className:"text-red-600 text-sm",children:v}),h.jsx(Ae,{type:"submit",className:"w-full",disabled:k,children:k?"Signing in":"Sign in"})]}),h.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[h.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),h.jsx("span",{children:"or"}),h.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),h.jsx(Ae,{variant:"secondary",onClick:w,disabled:k,children:"Continue with Google"}),h.jsx("div",{id:"recaptcha-container",className:"mt-3"}),y==="enter"&&h.jsxs("form",{className:"space-y-2 mt-2",onSubmit:C,children:[h.jsx(Yn,{type:"tel",placeholder:"Indian mobile (10 digits)",value:c,onChange:I=>d(I.target.value),disabled:k}),h.jsx(Ae,{type:"submit",variant:"secondary",disabled:k||!c,children:"Send OTP"})]}),y==="verify"&&h.jsxs("form",{className:"space-y-2 mt-2",onSubmit:A,children:[h.jsx(Yn,{type:"text",placeholder:"Enter OTP",value:f,onChange:I=>m(I.target.value),disabled:k}),h.jsx(Ae,{type:"submit",variant:"secondary",disabled:k||!f,children:"Verify OTP"})]}),h.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-3",children:["No account? ",h.jsx(Fg,{className:"text-blue-600",to:"/signup",children:"Sign up"})]})]})})]})})}function P9(){const{user:t,signup:e,loginWithGoogle:n,sendPhoneCode:r,confirmPhoneCode:s}=Xr(),[i,o]=D.useState(""),[a,l]=D.useState(""),[c,d]=D.useState(""),[f,m]=D.useState(""),[y,x]=D.useState(""),[k,E]=D.useState("enter"),[v,_]=D.useState(""),[b,P]=D.useState(!1),N=uc(),{notify:M}=ua();D.useEffect(()=>{t&&N("/")},[t,N]);async function T(A){A.preventDefault(),_(""),P(!0);try{const R=await e({email:i,password:a,name:c});f?(await r(f),E("verify")):N("/")}catch(R){const O=wi(R)||"Signup failed";_(O),M(O,"error")}finally{P(!1)}}async function w(A){A.preventDefault(),_(""),P(!0);try{await s(y),N("/")}catch(R){const O=wi(R)||"Invalid OTP";_(O),M(O,"error")}finally{P(!1)}}async function C(){_(""),P(!0);try{await n()&&N("/")}catch(A){const R=wi(A)||"Google sign-in failed";_(R),M(R,"error")}finally{P(!1)}}return t?null:h.jsx("div",{className:"grid place-items-center",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Create your account"}),h.jsx(on,{children:h.jsxs(an,{children:[k==="enter"?h.jsxs("form",{className:"space-y-4",onSubmit:T,children:[h.jsx(Yn,{type:"text",placeholder:"Name",value:c,onChange:A=>d(A.target.value),disabled:b}),h.jsx(Yn,{type:"email",placeholder:"Email",value:i,onChange:A=>o(A.target.value),disabled:b}),h.jsx(Yn,{type:"password",placeholder:"Password",value:a,onChange:A=>l(A.target.value),disabled:b}),h.jsx(Yn,{type:"tel",placeholder:"Indian phone (optional)",value:f,onChange:A=>m(A.target.value),disabled:b}),v&&h.jsx("p",{className:"text-red-600 text-sm",children:v}),h.jsx(Ae,{type:"submit",className:"w-full",disabled:b,children:b?"Creating":"Create Account"})]}):h.jsxs("form",{className:"space-y-2",onSubmit:w,children:[h.jsx(Yn,{type:"text",placeholder:"Enter OTP",value:y,onChange:A=>x(A.target.value),disabled:b}),v&&h.jsx("p",{className:"text-red-600 text-sm",children:v}),h.jsx(Ae,{type:"submit",className:"w-full",disabled:b||!y,children:"Verify OTP"})]}),h.jsxs("div",{className:"my-3 flex items-center gap-3 text-slate-500 text-sm",children:[h.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"}),h.jsx("span",{children:"or"}),h.jsx("div",{className:"flex-1 h-px bg-slate-200 dark:bg-slate-700"})]}),h.jsx(Ae,{variant:"secondary",onClick:C,disabled:b,children:"Continue with Google"}),h.jsx("div",{id:"recaptcha-container"})]})})]})})}const qS=Qd.forwardRef(function({className:e="",rows:n=4,...r},s){return h.jsx("textarea",{ref:s,rows:n,className:`block w-full rounded-md border border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-900 px-3 py-2.5 text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400 shadow-sm focus:border-brand-600 focus:ring-2 focus:ring-brand-600 focus:ring-offset-0 outline-none ${e}`.trim(),...r})});function R9(){var se;const{notify:t}=ua(),{user:e,loading:n}=Xr(),[r,s]=D.useState({q1:"",q2:"",q2_specify:"",q3:"",q3_severity:"",q4:"",q4_specify:"",q5:"",q6_activity:"",q6_hydration:"",q6_diet:""}),[i,o]=D.useState(!1),[a,l]=D.useState(!1),[c,d]=D.useState(null),[f,m]=D.useState([]),[y,x]=D.useState([]),[k,E]=D.useState(""),[v,_]=D.useState([]),[b,P]=D.useState(""),[N,M]=D.useState(null),[T,w]=D.useState(!1),[C,A]=D.useState(3),[R,O]=D.useState("auto"),[I,W]=D.useState(!0),[H,re]=D.useState(!1);D.useEffect(()=>{try{const j=JSON.parse(localStorage.getItem("analysisPrefs")||"{}");j&&typeof j=="object"&&(j.topK&&A(j.topK),j.explainMethod&&O(j.explainMethod),typeof j.useScipyWinsorize=="boolean"&&W(j.useScipyWinsorize),typeof j.forceLocal=="boolean"&&re(j.forceLocal))}catch{}},[]),D.useEffect(()=>{try{localStorage.setItem("analysisPrefs",JSON.stringify({topK:C,explainMethod:R,useScipyWinsorize:I,forceLocal:H}))}catch{}},[C,R,I,H]);const de=D.useMemo(()=>{const j=["ns_q1","ns_q2","ns_q3","ns_q4","ns_q5","ns_q6","ns_q7","ns_q8","ns_q9","ns_q10","ns_q11","ns_q12"];for(const ee of j)if(!r[ee])return!1;return!0},[r]);function B(){const j=new Date,ee=new Date(j.getFullYear(),j.getMonth(),j.getDate(),0,0,0,0),oe=new Date(j.getFullYear(),j.getMonth(),j.getDate()+1,0,0,0,0);return{start:Ze.fromDate(ee),end:Ze.fromDate(oe)}}D.useEffect(()=>{async function j(){if(!kt||!e)return;const{start:ee,end:oe}=B(),be=ml(kt,"users",e.uid,"dailyCheckins"),Me=Im(be,jw("date",">=",ee),jw("date","<",oe));try{const $e=await Sm(Me);$e.empty?(l(!1),d(null)):(l(!0),d($e.docs[0].data()))}catch($e){console.error("[DailyCheckin] checkToday error:",$e)}}j()},[e]);function Q(j){if(!j)return .5;const ee=Me=>({None:1,Normal:1,Mild:.7,"Slight irregularity  mild constipation/diarrhea":.7,"Slight  minor discomfort or frequency change":.7,Moderate:.4,"Moderate  noticeable, affects tasks":.4,"Moderate  interfered with tasks":.4,"Moderate  affected meals":.4,"Moderate  frequent or loose stools":.4,"Moderate  frequent or painful urination":.4,Severe:.2,"Severe  persistent pain":.2,"Severe  unable to perform daily activities":.2,"Severe  persistent vomiting":.2,"Severe  could barely perform activities":.2,"Severe  high fever (>102F / 38.8C)":.2,"Severe  persistent cough or severe breathing issues":.2,"Severe  persistent diarrhea/constipation":.2,"Severe  inability to urinate normally or severe discomfort":.2,"Severe  bleeding, large lesions, or non-healing wounds":.2,"Severe  fainting or inability to stand":.2})[Me]??.5,oe=[ee(j.ns_q1),ee(j.ns_q2),ee(j.ns_q3),ee(j.ns_q4),ee(j.ns_q5),ee(j.ns_q6),ee(j.ns_q7),ee(j.ns_q8),ee(j.ns_q9),ee(j.ns_q10),ee(j.ns_q11),ee(j.ns_q12)],be=oe.reduce((Me,$e)=>Me+$e,0)/oe.length;return Math.max(0,Math.min(1,Number(be.toFixed(3))))}D.useEffect(()=>{async function j(){var ee;if(!(!kt||!e))try{const oe=ml(kt,"users",e.uid,"dailyCheckins"),be=Im(oe,bI("date","desc"),kI(30)),$e=(await Sm(be)).docs.map(Se=>({id:Se.id,...Se.data()})),Bt=$e.slice().reverse();let Ye=Bt.map(Se=>WS(Se.answers)),zt=Bt.map(Se=>{var gn;return(gn=Se==null?void 0:Se.date)!=null&&gn.toDate?Se.date.toDate().toLocaleDateString():""});try{if((ee=N==null?void 0:N.python)!=null&&ee.available){const Se=await $S(e.uid);Se&&Se.ok&&Array.isArray(Se.points)&&Se.points.length>0&&(Ye=Se.points,Array.isArray(Se.labels)&&Se.labels.length===Se.points.length?zt=Se.labels.map(gn=>{try{return new Date(gn).toLocaleDateString()}catch{return gn}}):zt=Se.points.map((gn,$n)=>`T${$n+1}`))}}catch{}const Jt=Ye.length;let ar="";if(Jt>=6){const Se=Ye.slice(Jt-6,Jt-3).reduce((Jr,Zr)=>Jr+Zr,0)/3,$n=Ye.slice(Jt-3).reduce((Jr,Zr)=>Jr+Zr,0)/3-Se;$n>.06?ar="Worsening":$n<-.06?ar="Improving":ar="Stable"}m($e),x(Ye),_(zt),E(ar)}catch(oe){console.error("[DailyCheckin] loadHistory error:",oe)}}j()},[e,a]),D.useEffect(()=>{let j=!0;return(async()=>{try{w(!0);const ee=await v9();j&&M(ee)}catch{j&&M({ok:!0,python:{available:!1}})}finally{j&&w(!1)}})(),()=>{j=!1}},[]);function q(j,ee){s(oe=>({...oe,[j]:ee}))}async function fe(j){if(j.preventDefault(),!e){t("Please log in first!","error");return}if(!kt){t("App is not connected to Firestore. Check Firebase config.","error");return}if(a){t("You've already completed today's check-in.","info");return}if(!de){t("Please answer all required questions.","error");return}o(!0);try{const ee=ml(kt,"users",e.uid,"dailyCheckins"),oe={date:Ze.now(),dateServer:Zl(),answers:{ns_q1:r.ns_q1,ns_q2:r.ns_q2,ns_q3:r.ns_q3,ns_q4:r.ns_q4,ns_q5:r.ns_q5,ns_q6:r.ns_q6,ns_q7:r.ns_q7,ns_q8:r.ns_q8,ns_q9:r.ns_q9,ns_q10:r.ns_q10,ns_q11:r.ns_q11,ns_q12:r.ns_q12},analyzed:!1,notes:b||null,topK:Number(C),explainMethod:R,useScipyWinsorize:I,forceLocal:H};console.log("[DailyCheckin] Submitting payload:",oe),await AI(ee,oe),t("Daily check-in saved!","success"),l(!0);try{x9({userId:e.uid,payload:oe})}catch{}}catch(ee){console.error("[DailyCheckin] Firestore addDoc error:",ee);const oe=(ee==null?void 0:ee.message)||"Error saving check-in. Please try again.";t(oe,"error")}finally{o(!1)}}return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"pointer-events-none absolute -top-20 -right-10 h-56 w-56 rounded-full bg-blue-500/10 blur-3xl"}),h.jsx("div",{className:"pointer-events-none absolute -bottom-10 -left-10 h-56 w-56 rounded-full bg-emerald-500/10 blur-3xl"}),h.jsxs("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight mb-6 text-slate-900 dark:text-slate-100 flex items-center gap-2",children:[h.jsx("span",{className:"inline-flex h-7 w-7 items-center justify-center rounded-md bg-gradient-to-tr from-brand-600 to-blue-500 text-white text-sm shadow ring-1 ring-brand-500/30",children:""}),"Daily Check-in"]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h.jsxs(on,{className:"lg:col-span-2 border-0 ring-1 ring-slate-900/5 shadow-xl bg-white/80 dark:bg-slate-900/80",children:[h.jsx(Fr,{children:h.jsxs(Ur,{className:"text-lg md:text-xl flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5 text-blue-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M8 2v4M16 2v4M3 10h18M5 22h14a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z"})}),"Today's Check-in"]})}),h.jsx(an,{children:a?h.jsxs("div",{className:"space-y-3 text-sm text-slate-700 dark:text-slate-300",children:[h.jsx("p",{className:"font-medium",children:"You've already submitted today's check-in. Come back tomorrow."}),c&&c.answers&&h.jsxs("div",{className:"mt-4",children:[h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Your last responses:"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Sleep & Energy"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.q1||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Pain / Discomfort"}),h.jsxs("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:[c.answers.q2||"",c.answers.q2_specify?` (${c.answers.q2_specify})`:""]})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Heart / Respiratory"}),h.jsxs("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:[c.answers.q3||"",c.answers.q3==="Yes"&&c.answers.q3_severity?` (${c.answers.q3_severity})`:""]})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Digestive / Temperature"}),h.jsxs("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:[c.answers.q4||"",c.answers.q4_specify?` (${c.answers.q4_specify})`:""]})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Mental & Emotional"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.q5||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Activity / Hydration / Diet"}),h.jsxs("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:[c.answers.q6_activity||"",c.answers.q6_activity?", ":"",c.answers.q6_hydration||"",c.answers.q6_hydration?", ":"",c.answers.q6_diet||""]})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Bowel Changes"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q7||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Urination Changes"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q8||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Skin / Wounds"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q9||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Dizziness / Fainting"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q10||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Sleep / Insomnia"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q11||""})]}),h.jsxs("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 p-3 bg-white/70 dark:bg-slate-900/60",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Hot Flashes / Warmth"}),h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100",children:c.answers.ns_q12||""})]})]})]})]})]}):h.jsxs("form",{onSubmit:fe,className:"space-y-10",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-blue-200/60 dark:border-blue-900/50 bg-blue-50/60 dark:bg-blue-900/20 px-3 py-1 text-xs font-medium text-blue-700 dark:text-blue-300",children:[h.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-blue-500"}),"Daily Symptom Tracking MCQs"]}),[{key:"ns_q1",title:"Stomach / Abdominal Pain Today",opts:["None","Mild  occasional discomfort","Moderate  noticeable, affects tasks","Severe  persistent pain"]},{key:"ns_q2",title:"Headache or Migraine Today",opts:["None","Mild  didnt interfere with work","Moderate  interfered with tasks","Severe  unable to perform daily activities"]},{key:"ns_q3",title:"Nausea or Vomiting Today",opts:["None","Mild  occasional queasiness","Moderate  affected meals","Severe  persistent vomiting"]},{key:"ns_q4",title:"Fatigue or Weakness Today",opts:["None  felt energetic","Mild  slightly tired","Moderate  noticeable fatigue","Severe  could barely perform activities"]},{key:"ns_q5",title:"Fever or Chills Today",opts:["None","Mild  slight temperature fluctuation","Moderate  measurable fever (100102F / 37.738.8C)","Severe  high fever (>102F / 38.8C)"]},{key:"ns_q6",title:"Cough or Shortness of Breath Today",opts:["None","Mild  occasional cough or shortness of breath","Moderate  daily cough or breathing difficulty","Severe  persistent cough or severe breathing issues"]},{key:"ns_q7",title:"Changes in Bowel Movements Today",opts:["Normal","Slight irregularity  mild constipation/diarrhea","Moderate  frequent or loose stools","Severe  persistent diarrhea/constipation"]},{key:"ns_q8",title:"Changes in Urination Today",opts:["Normal","Slight  minor discomfort or frequency change","Moderate  frequent or painful urination","Severe  inability to urinate normally or severe discomfort"]},{key:"ns_q9",title:"Skin Changes / Wounds Today",opts:["None","Minor  small rashes, bruises, or pimples","Noticeable  persistent rash, sores, or swelling","Severe  bleeding, large lesions, or non-healing wounds"]},{key:"ns_q10",title:"Dizziness or Fainting Today",opts:["None","Mild  occasional lightheadedness","Moderate  dizziness affecting tasks","Severe  fainting or inability to stand"]},{key:"ns_q11",title:"Sleep / Insomnia Today",opts:["Slept well  no trouble falling or staying asleep","Mild difficulty  took longer than usual to fall asleep","Moderate difficulty  frequent waking or poor sleep quality","Severe  hardly slept or very restless night"]},{key:"ns_q12",title:"Hot Flashes / Sudden Warmth Today",opts:["None  no unusual warmth","Mild  occasional warmth or flushing","Moderate  noticeable episodes affecting comfort","Severe  frequent or intense hot flashes"]}].map((j,ee)=>h.jsxs("div",{className:"rounded-2xl border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 p-5 md:p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-md bg-gradient-to-tr from-brand-600 to-blue-500 text-white text-[11px] shadow ring-1 ring-brand-500/30",children:ee+1}),h.jsx("label",{className:"block text-sm md:text-base font-medium text-slate-800 dark:text-slate-100 leading-snug",children:j.title})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-3",children:j.opts.map(oe=>h.jsx("button",{type:"button",onClick:()=>q(j.key,oe),className:`px-3 py-2.5 rounded-lg border text-sm text-left transition focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-900 ${r[j.key]===oe?"bg-gradient-to-tr from-brand-600 to-blue-500 text-white border-transparent shadow-md ring-brand-500/40":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:oe},oe))})]},j.key)),h.jsxs("div",{className:"pt-2",children:[h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200 mb-1",children:"Add notes for today (optional)"}),h.jsx("div",{className:"rounded-xl border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 p-3",children:h.jsx(qS,{value:b,onChange:j=>P(j.target.value),placeholder:"Type anything noteworthy about your health today..."})})]}),h.jsxs("div",{className:"hidden",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"1"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Sleep & Energy"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How well did you sleep last night, and how energetic do you feel today?"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Moderate","High","Very high"].map(j=>h.jsx("button",{type:"button",onClick:()=>q("q1",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q1===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"2"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Pain or Discomfort"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you experience any unusual pain, discomfort, or bodily symptoms today?"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(j=>h.jsx("button",{type:"button",onClick:()=>q("q2",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q2===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),(r.q2==="Mild"||r.q2==="Moderate"||r.q2==="Severe")&&h.jsx("input",{type:"text",placeholder:"Specify location (optional)",value:r.q2_specify,onChange:j=>q("q2_specify",j.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"3"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Heart & Respiratory Health"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Chest pain, palpitations, shortness of breath, or rapid heartbeat today?"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["No","Yes"].map(j=>h.jsx("button",{type:"button",onClick:()=>q("q3",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),r.q3==="Yes"&&h.jsx("div",{className:"mt-2 grid grid-cols-3 md:grid-cols-6 gap-2",children:["Mild","Moderate","Severe"].map(j=>h.jsx("button",{type:"button",onClick:()=>q("q3_severity",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q3_severity===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"4"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Digestive & Temperature Symptoms"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Digestive issues (nausea, vomiting, diarrhea, constipation, heartburn) or fever/chills today?"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Mild","Moderate","Severe"].map(j=>h.jsx("button",{type:"button",onClick:()=>q("q4",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q4===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))}),(r.q4==="Mild"||r.q4==="Moderate"||r.q4==="Severe")&&h.jsx("input",{type:"text",placeholder:"Specify (optional)",value:r.q4_specify,onChange:j=>q("q4_specify",j.target.value),className:"mt-2 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm dark:bg-slate-900 dark:border-slate-700"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"5"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Mental & Emotional Well-being"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"How would you rate your mood and stress levels today?"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:["Very low","Low","Neutral","Good","Very good"].map(j=>h.jsx("button",{type:"button",onClick:()=>q("q5",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q5===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full bg-brand-600 text-white text-[10px]",children:"6"}),h.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Physical Activity & Lifestyle"})]}),h.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Did you maintain physical activity, hydration, and balanced meals today?"}),h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Activity"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["None","Light","Moderate","Intense"].map(j=>h.jsx("button",{type:"button",onClick:()=>q("q6_activity",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_activity===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Hydration"}),h.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(j=>h.jsx("button",{type:"button",onClick:()=>q("q6_hydration",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_hydration===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Diet"}),h.jsx("div",{className:"grid grid-cols-3 gap-2",children:["No","Mostly","Yes"].map(j=>h.jsx("button",{type:"button",onClick:()=>q("q6_diet",j),className:`px-3 py-2 rounded-md border text-sm transition ${r.q6_diet===j?"bg-brand-600 text-white border-brand-600 shadow-sm":"border-slate-300 hover:bg-slate-100 dark:border-slate-700 dark:hover:bg-slate-800"}`,children:j},j))})]})]})]})]}),h.jsxs("div",{className:"flex items-center justify-between gap-3 pt-2",children:[h.jsx("div",{className:"text-xs text-slate-500",children:"Complete all sections to enable saving."}),h.jsx(Ae,{type:"submit",disabled:i||!de||n,className:"shadow-md",children:i?h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx(Po,{size:16})," Saving..."]}):"Save today's check-in"})]})]})})]}),h.jsxs(on,{className:"lg:col-span-2 border-0 ring-1 ring-slate-900/5 shadow-xl bg-white/80 dark:bg-slate-900/80",children:[h.jsx(Fr,{children:h.jsxs(Ur,{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-5 h-5 text-emerald-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M3 3v18h18"})}),"Your recent check-ins"]})}),h.jsx(an,{children:y.length>0?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Overall trend: ",h.jsx("span",{className:`font-medium ${k==="Worsening"?"text-red-600":k==="Improving"?"text-emerald-600":"text-slate-700 dark:text-slate-200"}`,children:k||"Not enough data"})]}),h.jsx("div",{className:"bg-white dark:bg-slate-950 rounded-lg p-4 border border-slate-200 dark:border-slate-800 shadow-sm",children:h.jsx(zS,{points:y,labels:v,title:(se=N==null?void 0:N.python)!=null&&se.available?"AI risk":"Risk",yRange:{min:0,max:1}})}),h.jsx("ul",{className:"divide-y divide-slate-200 dark:divide-slate-800 text-sm rounded-lg overflow-hidden border border-slate-200 dark:border-slate-800",children:f.slice(0,10).map((j,ee)=>{var oe;return h.jsxs("li",{className:"py-2 px-3 flex items-center justify-between hover:bg-slate-50/70 dark:hover:bg-slate-800/40 transition-colors",children:[h.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:(oe=j==null?void 0:j.date)!=null&&oe.toDate?j.date.toDate().toLocaleDateString():""}),h.jsx("span",{className:"font-medium tabular-nums",children:Q(j.answers)})]},j.id||ee)})})]}):h.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"No history yet. Your check-ins will appear here."})})]}),h.jsxs(on,{className:"lg:col-span-2 border-0 ring-1 ring-slate-900/5 shadow-xl bg-white/80 dark:bg-slate-900/80",children:[h.jsx(Fr,{children:h.jsxs(Ur,{className:"flex items-center gap-2",children:[h.jsxs("svg",{className:"w-5 h-5 text-purple-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M12 20l9-5-9-5-9 5 9 5z"}),h.jsx("path",{d:"M12 12l9-5-9-5-9 5 9 5z"})]}),"Why this matters"]})}),h.jsx(an,{children:h.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 space-y-2 leading-relaxed",children:[h.jsx("p",{children:"Your daily responses help track trends in sleep, mood, pain, and lifestyle. If you report concerning symptoms, your clinician or AI assistant can prioritize guidance."}),h.jsx("p",{children:"We limit to one check-in per day to keep insights consistent. You can update tomorrow if anything changes."})]})})]})]})]})}function N9(){var $n,Jr,Zr,da,Ki,ha;const{notify:t}=ua(),{user:e}=Xr(),[n,r]=D.useState(null),[s,i]=D.useState(null),[o,a]=D.useState(null),[l,c]=D.useState(!1),[d,f]=D.useState(!1),[m,y]=D.useState(0),x=D.useRef(null),[k,E]=D.useState(""),[v,_]=D.useState("Idle"),b=D.useRef(null),[P,N]=D.useState(""),[M,T]=D.useState(null),[w,C]=D.useState(""),[A,R]=D.useState(!1),[O,I]=D.useState("eng"),[W,H]=D.useState(null),[re,de]=D.useState(!1),[B,Q]=D.useState(null),[q,fe]=D.useState(0),[se]=D.useState(3),j=D.useCallback($=>{if(!$)return{score:0,issues:["No data extracted"]};const te=Array.isArray($==null?void 0:$.labs)?$.labs:[],G=($==null?void 0:$.meta)||{},ae=[];let ie=1;return te.length===0?(ae.push("No lab values extracted"),ie-=.4):(te.filter(me=>me.confidence>=.7).length/te.length<.5&&(ae.push("Low confidence in extracted lab values"),ie-=.2),te.filter(me=>me.value!==null&&me.value!==void 0).length<te.length*.7&&(ae.push("Many lab values missing or invalid"),ie-=.2)),!G.patientName&&!G.patientId&&(ae.push("No patient identification found"),ie-=.1),G.date||(ae.push("No report date found"),ie-=.1),["hemoglobin","glucose","creatinine","sodium","potassium"].some($t=>te.some(Ht=>Ht.name===$t&&Ht.value!==null))||(ae.push("No critical lab values found"),ie-=.1),{score:Math.max(0,Math.min(1,ie)),issues:ae.length>0?ae:["Good extraction quality"],labCount:te.length,highConfidenceCount:te.filter($t=>$t.confidence>=.7).length}},[]),ee=D.useCallback(async()=>{if(!(!o||re)){de(!0),H(null);try{const $=(s==null?void 0:s.text)||"",te=await E9(o,$);if(te.ok&&te.summary){H(te.summary),t("AI summary generated successfully","success");try{if(kt&&e&&e.uid){const G=ml(kt,"users",e.uid,"reportSummaries"),ae=(o==null?void 0:o.meta)||{};await AI(G,{createdAt:Zl(),summary:te.summary,simpleSummary:oe(o),meta:{patientName:ae.patientName||null,patientId:ae.patientId||null,date:ae.date||null},stats:{labCount:Array.isArray(o==null?void 0:o.labs)?o.labs.length:0},ocrPreview:($||"").slice(0,2e3)||null}),t("Summary saved to your records","success")}else t("Login required to save summary","info")}catch(G){console.error("Failed to save summary:",G),t("Summary generated but saving to cloud failed.","warning")}}else throw new Error(te.error||"Failed to generate summary")}catch($){console.error("Error generating AI summary:",$),t("Failed to generate AI summary: "+($.message||"Unknown error"),"error")}finally{de(!1)}}},[o,s,re,t]);function oe($){try{const te=Array.isArray($==null?void 0:$.labs)?$.labs:[],G=($==null?void 0:$.meta)||{},ae=Array.isArray($==null?void 0:$.diagnoses)?$.diagnoses:[],ie=Array.isArray($==null?void 0:$.medications)?$.medications:[],Ie=he=>te.find(lt=>(lt.name||"").toLowerCase()===he.toLowerCase()),Ne=Ie("hemoglobin"),$t=Ie("glucose"),Ht=Ie("creatinine"),Hn=Ie("wbc"),me=Ie("platelets"),at=Ie("sodium"),An=Ie("potassium"),Wt=Ie("hbA1c"),nt=[];G!=null&&G.patientName&&nt.push(`Patient: ${G.patientName}`),G!=null&&G.patientId&&nt.push(`ID: ${G.patientId}`),G!=null&&G.date&&nt.push(`Report Date: ${G.date}`),nt.length>0&&nt.push("");const Zt=[];if(Ne&&typeof Ne.value=="number"){const he=Ne.value,lt=Ne.unit||"g/dL",rt=he<12?"LOW":he>16?"HIGH":"NORMAL";Zt.push(` Hemoglobin: ${he} ${lt} (${rt}) - Blood oxygen-carrying protein`)}if($t&&typeof $t.value=="number"){const he=$t.value,lt=$t.unit||"mg/dL",rt=he<70?"LOW":he>140?"HIGH":"NORMAL";Zt.push(` Glucose: ${he} ${lt} (${rt}) - Blood sugar level`)}if(Ht&&typeof Ht.value=="number"){const he=Ht.value,lt=Ht.unit||"mg/dL",rt=he<.6?"LOW":he>1.3?"HIGH":"NORMAL";Zt.push(` Creatinine: ${he} ${lt} (${rt}) - Kidney function indicator`)}if(Hn&&typeof Hn.value=="number"){const he=Hn.value,lt=Hn.unit||"10^3/L",rt=he<4?"LOW":he>11?"HIGH":"NORMAL";Zt.push(` White Blood Cells: ${he} ${lt} (${rt}) - Immune system cells`)}if(me&&typeof me.value=="number"){const he=me.value,lt=me.unit||"10^3/L",rt=he<150?"LOW":he>450?"HIGH":"NORMAL";Zt.push(` Platelets: ${he} ${lt} (${rt}) - Blood clotting cells`)}if(at&&typeof at.value=="number"){const he=at.value,lt=at.unit||"mmol/L",rt=he<136?"LOW":he>145?"HIGH":"NORMAL";Zt.push(` Sodium: ${he} ${lt} (${rt}) - Electrolyte balance`)}if(An&&typeof An.value=="number"){const he=An.value,lt=An.unit||"mmol/L",rt=he<3.5?"LOW":he>5?"HIGH":"NORMAL";Zt.push(` Potassium: ${he} ${lt} (${rt}) - Heart and muscle function`)}if(Wt&&typeof Wt.value=="number"){const he=Wt.value,lt=Wt.unit||"%",rt=he<5.7?"NORMAL":he<6.5?"PREDIABETES":"DIABETES";Zt.push(` HbA1c: ${he} ${lt} (${rt}) - 3-month average blood sugar`)}Zt.length>0&&(nt.push("LABORATORY RESULTS:"),nt.push(...Zt),nt.push("")),ae.length>0&&(nt.push("DIAGNOSES:"),ae.forEach(he=>nt.push(` ${he}`)),nt.push("")),ie.length>0&&(nt.push("MEDICATIONS:"),ie.forEach(he=>nt.push(` ${he}`)),nt.push(""));const Gi=Zt.filter(he=>he.includes("HIGH")||he.includes("LOW")).length;return Gi>0?nt.push(`SUMMARY: ${Gi} lab value(s) outside normal range. Please consult with your healthcare provider for interpretation and follow-up.`):Zt.length>0&&nt.push("SUMMARY: All lab values appear to be within normal ranges. Continue regular monitoring as recommended by your healthcare provider."),nt.length===0?"We parsed the report and extracted key details. Values will appear here once identified.":nt.join(`
`)}catch(te){return console.error("Error generating summary:",te),"We parsed the report and extracted key details."}}const be=D.useMemo(()=>["application/pdf","image/jpeg","image/png","image/heic","image/heif"],[]),Me=10*1024*1024,$e=D.useCallback($=>$?be.includes($.type)?$.size>Me?"File is too large. Max 10MB.":null:"Unsupported file type. Use PDF, JPG, or PNG.":"No file selected",[be]),Bt=D.useCallback($=>!$||$.length===0?null:$.length>1?Array.from($).filter(G=>G.type==="application/pdf").length>1?"Multiple PDF files detected. Please upload only one PDF at a time.":"Multiple files detected. Please upload only one file at a time.":null,[]),Ye=D.useCallback($=>{if($.preventDefault(),$.stopPropagation(),c(!1),n){t("A file is already uploaded. Please remove it first before uploading a new one.","error");return}const te=$.dataTransfer.files,G=Bt(te);if(G){t(G,"error");return}const ae=te==null?void 0:te[0],ie=$e(ae);if(ie){t(ie,"error");return}r(ae||null)},[t,$e,Bt,n]),zt=D.useCallback($=>{const te=$.target.files;if(n){t("A file is already uploaded. Please remove it first before uploading a new one.","error"),$.target.value="";return}const G=Bt(te);if(G){t(G,"error"),$.target.value="";return}const ae=te==null?void 0:te[0],ie=$e(ae);if(ie){t(ie,"error"),$.target.value="";return}r(ae||null)},[t,$e,Bt,n]);D.useEffect(()=>{if(n&&n.type.startsWith("image/")){const $=URL.createObjectURL(n);return E($),()=>URL.revokeObjectURL($)}E("")},[n]),D.useEffect(()=>{x.current&&(x.current.multiple=!1)},[]),D.useEffect(()=>{const $=async te=>{var G;try{if(n){t("A file is already uploaded. Please remove it first before uploading a new one.","error");return}const ae=Array.from(((G=te.clipboardData)==null?void 0:G.items)||[]).find(Ne=>Ne.type.startsWith("image/"));if(!ae)return;const ie=ae.getAsFile();if(!ie)return;const Ie=$e(ie);if(Ie){t(Ie,"error");return}r(new File([ie],ie.name||"pasted-image.png",{type:ie.type})),t("Image pasted from clipboard","success")}catch{}};return window.addEventListener("paste",$),()=>window.removeEventListener("paste",$)},[t,$e,n]);async function Jt($){if($.preventDefault(),!n){t("Please select a file to process.","error");return}f(!0),y(0),N(""),_("Uploading"),fe(0),Q(null);try{const te=new AbortController;b.current=te;const G=await w9(n,{onProgress:ie=>y(ie),signal:te.signal});y(100),i((G==null?void 0:G.ocr)||G),a((G==null?void 0:G.extracted)||null),H(null);const ae=j(G==null?void 0:G.extracted);Q(ae),_("Completed"),ae.score>=.8?t("Report processed successfully with high quality extraction.","success"):ae.score>=.6?t("Report processed with moderate quality extraction. Please review results.","warning"):t("Report processed with low quality extraction. Consider retrying with a clearer image.","warning")}catch(te){const G=(te==null?void 0:te.message)||"Failed to process the report.";N(G),T(te&&te.body?te.body:null),_(G.toLowerCase().includes("canceled")?"Canceled":"Failed"),q<se&&!G.toLowerCase().includes("canceled")?(t(`${G} Retrying... (${q+1}/${se})`,"warning"),setTimeout(()=>{fe(ae=>ae+1),Jt($)},2e3)):t(G,"error")}finally{b.current=null,setTimeout(()=>f(!1),200)}}async function ar($){$.preventDefault();const te=(w||"").trim();if(!te){t("Enter a PDF URL to process.","error");return}f(!0),y(0),N(""),T(null),_("Processing URL");try{const G=await _9(te,{useOcr:A?!0:null,lang:O});i((G==null?void 0:G.ocr)||G),a((G==null?void 0:G.extracted)||null),H(null),_("Completed"),t("PDF URL processed successfully.","success")}catch(G){const ae=(G==null?void 0:G.message)||"Failed to process the PDF URL.";N(ae),T(G&&G.body?G.body:null),_("Failed"),t(ae,"error")}finally{setTimeout(()=>f(!1),200)}}const Se=D.useCallback(()=>{b.current&&b.current.abort()},[]),gn=D.useCallback(()=>{if(!n)return;i(null),y(0),_("Retrying"),Jt({preventDefault:()=>{}})},[n]);return h.jsxs("div",{children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h1",{className:"text-2xl font-semibold mb-1 text-transparent bg-clip-text bg-gradient-to-r from-brand-600 via-blue-600 to-blue-500",children:"Upload Report"}),h.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Upload a single medical report to extract key details with OCR. We support PDF and image formats (one file at a time - remove current file to upload a new one)."})]}),h.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[h.jsxs(on,{children:[h.jsx(Fr,{className:"bg-blue-50 dark:bg-slate-800/50 border-b border-blue-100 dark:border-slate-700",children:h.jsx(Ur,{className:"text-blue-900 dark:text-slate-100",children:"Select file"})}),h.jsxs(an,{children:[h.jsxs("form",{onSubmit:Jt,className:"space-y-4",children:[h.jsxs("div",{className:`relative flex flex-col items-center justify-center gap-2 rounded border-2 border-dashed px-6 py-10 text-center transition-colors bg-gradient-to-r ${n?"from-slate-50 via-slate-50 to-slate-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-800 border-slate-200 dark:border-slate-600 cursor-not-allowed opacity-60":l?"from-blue-50 via-sky-50 to-indigo-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-800 border-blue-600 dark:border-blue-500":"from-brand-50 via-blue-50 to-blue-50 dark:from-slate-900 dark:via-slate-900 dark:to-slate-900 border-slate-300 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-400"}`,onDragOver:$=>{n||($.preventDefault(),c(!0))},onDragLeave:()=>c(!1),onDrop:Ye,role:"button",tabIndex:n?-1:0,"aria-label":n?"File already uploaded. Remove current file to upload a new one.":"Drag and drop a report file here or choose a file",onKeyDown:$=>{n||($.key==="Enter"||$.key===" ")&&($.preventDefault(),x.current&&(x.current.multiple=!1,x.current.click()))},children:[l&&h.jsx("div",{className:"absolute inset-0 bg-blue-600/10 dark:bg-blue-500/10 border-2 border-blue-600 dark:border-blue-500 rounded pointer-events-none"}),h.jsxs("div",{className:"flex items-center gap-3",children:[d?h.jsx(Po,{size:20}):h.jsxs("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-300",viewBox:"0 0 24 24",fill:"none",children:[h.jsx("path",{d:"M12 16V4m0 12l-4-4m4 4l4-4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),h.jsx("rect",{x:"3",y:"16",width:"18",height:"4",rx:"1",stroke:"currentColor",strokeWidth:"1.5"})]}),h.jsxs("div",{className:"text-slate-800 dark:text-slate-100",children:[h.jsx("div",{className:"font-medium",children:n?"File already uploaded":"Drag and drop your report"}),h.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:n?"Remove current file to upload a new one":"PDF, JPG, or PNG up to 10MB (one file at a time). Paste an image with Ctrl/Cmd+V."})]})]}),h.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"or"}),h.jsx("input",{ref:x,type:"file",accept:be.join(","),onChange:zt,multiple:!1,className:"hidden","data-testid":"file-input"}),h.jsx(Ae,{type:"button",variant:"secondary",onClick:()=>{x.current&&(x.current.multiple=!1,x.current.click())},disabled:d||!!n,className:"hover:bg-indigo-100",children:n?"File uploaded":"Choose file"}),n&&h.jsx("div",{className:"mt-3 w-full max-w-md",children:k?h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:k,alt:"preview",className:"h-20 w-20 object-cover rounded border border-emerald-200 dark:border-emerald-700"}),h.jsxs("div",{className:"text-left",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100 truncate",children:n.name}),h.jsx("span",{className:"rounded-full bg-emerald-100 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-300 text-[10px] px-2 py-0.5 border border-emerald-200 dark:border-emerald-800",children:"IMAGE"})]}),h.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Math.ceil(n.size/1024)," KB"]})]})]}):h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"h-10 w-10 rounded bg-rose-100 text-rose-700 dark:bg-rose-900/20 dark:text-rose-300 flex items-center justify-center font-semibold border border-rose-200 dark:border-rose-800",children:"PDF"}),h.jsxs("div",{className:"text-left",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"text-sm font-medium text-slate-800 dark:text-slate-100 truncate",children:n.name}),h.jsx("span",{className:"rounded-full bg-rose-100 text-rose-700 dark:bg-rose-900/20 dark:text-rose-300 text-[10px] px-2 py-0.5 border border-rose-200 dark:border-rose-800",children:"PDF"})]}),h.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Math.ceil(n.size/1024)," KB"]})]})]})}),d&&h.jsx("div",{className:"absolute inset-x-0 bottom-0",children:h.jsx("div",{className:"h-1 w-full bg-blue-100 dark:bg-slate-800",children:h.jsx("div",{className:"h-1 bg-brand-600 dark:bg-blue-500 transition-all",style:{width:`${m}%`}})})})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[h.jsx(Ae,{type:"button",variant:"secondary",onClick:()=>{r(null),i(null),a(null),H(null),_("Idle"),x.current&&(x.current.value="")},disabled:d,children:"Remove"}),h.jsx(Ae,{type:"button",variant:"ghost",onClick:()=>x.current&&x.current.click(),disabled:d||!n,children:"Replace"}),h.jsx("div",{className:"ml-auto"}),d?h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Ae,{type:"button",variant:"danger",onClick:Se,children:"Cancel"}),h.jsx(Ae,{type:"button",variant:"primary",disabled:!0,className:"bg-brand-600 dark:bg-brand-600",children:h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx(Po,{size:16})," Uploading"]})})]}):h.jsx(Ae,{type:"submit",disabled:!n,className:"bg-brand-600 hover:bg-brand-700 focus:ring-brand-600",children:"Process report"})]})]}),h.jsxs("div",{className:"mt-4 space-y-2",children:[h.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Or process a PDF by URL"}),h.jsxs("form",{onSubmit:ar,className:"flex items-stretch gap-2",children:[h.jsx("input",{type:"url",placeholder:"https://example.com/report.pdf",className:"flex-1 rounded border px-3 py-2 text-sm border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-brand-200 dark:focus:ring-blue-300",value:w,onChange:$=>C($.target.value),disabled:d}),h.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-700 dark:text-slate-300",children:[h.jsx("input",{type:"checkbox",checked:A,onChange:$=>R($.target.checked),disabled:d}),"Force OCR"]}),h.jsxs("select",{className:"rounded border px-2 py-2 text-xs border-slate-300 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",value:O,onChange:$=>I($.target.value),disabled:d,title:"OCR language",children:[h.jsx("option",{value:"eng",children:"English (eng)"}),h.jsx("option",{value:"hin",children:"Hindi (hin)"}),h.jsx("option",{value:"eng+hin",children:"English+Hindi (eng+hin)"})]}),h.jsx(Ae,{type:"submit",variant:"secondary",disabled:d||!w.trim(),className:"hover:bg-indigo-100",children:"Process URL"})]})]}),h.jsxs("div",{className:"mt-6",children:[h.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[h.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 border ${v==="Completed"?"bg-emerald-50 text-emerald-700 border-emerald-200":v==="Failed"||v==="Canceled"?"bg-rose-50 text-rose-700 border-rose-200":"bg-sky-50 text-sky-700 border-sky-200"}`,children:[h.jsx("span",{className:`h-2 w-2 rounded-full ${v==="Completed"?"bg-emerald-600":v==="Failed"||v==="Canceled"?"bg-rose-600":"bg-sky-600"}`}),v]}),!!P&&!d&&h.jsx("button",{className:"text-rose-700 underline",onClick:gn,children:"Retry"})]}),!!P&&M&&h.jsxs("div",{className:"mt-2 text-xs text-rose-700",children:[(M==null?void 0:M.acceptedTypes)&&h.jsxs("div",{children:["Supported types: ",(M.acceptedTypes||[]).join(", ")]}),(M==null?void 0:M.maxSizeMb)&&h.jsxs("div",{children:["Max file size: ",M.maxSizeMb," MB"]})]})]})]})]}),h.jsxs(on,{className:"md:col-span-2",children:[h.jsx(Fr,{className:"bg-white dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(Ur,{className:"text-slate-900 dark:text-slate-100",children:"Summary"}),o&&h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Ae,{type:"button",variant:"secondary",onClick:ee,disabled:re,className:"text-sm px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:re?h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(Po,{size:14}),h.jsx("span",{children:"Generating AI Analysis..."})]}):h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:h.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),h.jsx("span",{children:" Generate AI Health Analysis"})]})}),h.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded-full",children:"Powered by Gemini AI"})]})]})}),h.jsx(an,{className:"bg-white dark:bg-slate-900/40",children:o?h.jsxs("div",{className:"space-y-4",children:[(()=>{const $=Array.isArray(o==null?void 0:o.labs)?o.labs:[],te=me=>$.find(at=>(at.name||"").toLowerCase()===me.toLowerCase()),G=te("hemoglobin"),ae=te("glucose"),ie=te("creatinine"),Ie=$.length,Ne={hemoglobin:{min:12,max:16,unit:"g/dL"},glucose:{min:70,max:140,unit:"mg/dL"},creatinine:{min:.6,max:1.3,unit:"mg/dL"}};function $t(me){if(typeof me=="number"&&Number.isFinite(me))return me;if(typeof me=="string"){const at=me.match(/-?\d+(?:[\.,]\d+)?/);if(at)return Number(at[0].replace(",","."))}return null}function Ht(me,{min:at,max:An}){const Wt=$t(me);return Number.isFinite(Wt)?Wt<at?{text:"Low",cls:"bg-amber-100 text-amber-800"}:Wt>An?{text:"High",cls:"bg-rose-100 text-rose-800"}:{text:"Normal",cls:"bg-emerald-100 text-emerald-800"}:{text:"",cls:"bg-slate-100 text-slate-700"}}function Hn(me,{min:at,max:An}){const Wt=$t(me);return Number.isFinite(Wt)?(Math.max(at,Math.min(An,Wt))-at)/(An-at):.5}return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[h.jsx(Ro,{label:"Labs detected",value:String(Ie),hint:"Parsed from OCR",accent:"blue"}),h.jsx(Ro,{label:"Hemoglobin",value:G?`${G.value??""} ${G.unit||""}`:"",hint:"g/dL",accent:"emerald"}),h.jsx(Ro,{label:"Glucose",value:ae?`${ae.value??""} ${ae.unit||""}`:"",hint:"mg/dL",accent:"amber"})]}),B&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Extraction Quality"}),h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600 dark:text-slate-400 mb-1",children:[h.jsx("span",{children:"Quality Score"}),h.jsxs("span",{children:[Math.round(B.score*100),"%"]})]}),h.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:h.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${B.score>=.8?"bg-green-500":B.score>=.6?"bg-yellow-500":"bg-red-500"}`,style:{width:`${B.score*100}%`}})})]}),h.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[B.labCount," labs, ",B.highConfidenceCount," high confidence"]})]}),h.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:B.issues.map((me,at)=>h.jsxs("div",{className:"flex items-center space-x-1",children:[h.jsx("span",{className:`w-1 h-1 rounded-full ${me.includes("Good")?"bg-green-500":"bg-amber-500"}`}),h.jsx("span",{children:me})]},at))})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Report Summary"}),h.jsx("div",{className:"text-[13px] leading-6 text-slate-800 dark:text-slate-200 bg-slate-50 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700 rounded p-3 whitespace-pre-line",children:oe(o)})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[h.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Hemoglobin"}),(()=>{const me=Ht(G==null?void 0:G.value,Ne.hemoglobin);return h.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${me.cls}`,children:me.text})})()]}),h.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:h.jsx("div",{className:"h-2 bg-emerald-500 dark:bg-emerald-400 rounded",style:{width:`${Math.round(Hn(G==null?void 0:G.value,Ne.hemoglobin)*100)}%`}})}),h.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",Ne.hemoglobin.min,"-",Ne.hemoglobin.max," ",Ne.hemoglobin.unit]})]}),h.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Glucose"}),(()=>{const me=Ht(ae==null?void 0:ae.value,Ne.glucose);return h.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${me.cls}`,children:me.text})})()]}),h.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:h.jsx("div",{className:"h-2 bg-blue-500 dark:bg-blue-400 rounded",style:{width:`${Math.round(Hn(ae==null?void 0:ae.value,Ne.glucose)*100)}%`}})}),h.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",Ne.glucose.min,"-",Ne.glucose.max," ",Ne.glucose.unit]})]}),h.jsxs("div",{className:"rounded border border-slate-200 dark:border-slate-700 p-3",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Creatinine"}),(()=>{const me=Ht(ie==null?void 0:ie.value,Ne.creatinine);return h.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${me.cls}`,children:me.text})})()]}),h.jsx("div",{className:"mt-2 h-2 bg-slate-100 dark:bg-slate-800 rounded",children:h.jsx("div",{className:"h-2 bg-indigo-500 dark:bg-indigo-400 rounded",style:{width:`${Math.round(Hn(ie==null?void 0:ie.value,Ne.creatinine)*100)}%`}})}),h.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Range ",Ne.creatinine.min,"-",Ne.creatinine.max," ",Ne.creatinine.unit]})]})]})]})})(),W&&h.jsxs("div",{className:"mt-6 p-4 bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"h-3 w-3 bg-blue-500 rounded-full animate-pulse"}),h.jsx("h3",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:"AI Health Analysis"}),h.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[h.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded-full",children:"Powered by Gemini AI"}),h.jsx(Ae,{type:"button",variant:"ghost",onClick:()=>H(null),className:"text-xs text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200 p-1",children:""})]})]}),h.jsx("div",{className:"whitespace-pre-wrap w-full font-sans antialiased text-slate-900 dark:text-slate-100 text-[17px] md:text-[18px] leading-8 tracking-[0.008em] selection:bg-blue-100 selection:text-blue-900",children:W}),h.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("div",{className:"text-yellow-600 dark:text-yellow-400 mt-0.5",children:""}),h.jsxs("div",{className:"text-xs text-yellow-800 dark:text-yellow-200",children:[h.jsx("strong",{children:"Medical Disclaimer:"})," This AI analysis is for informational purposes only and should not replace professional medical advice. Please consult with your healthcare provider for proper diagnosis and treatment."]})]})})]})]}):h.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Upload or process a report to see a quick summary."})})]}),h.jsxs(on,{children:[h.jsx(Fr,{className:"bg-white dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700",children:h.jsx(Ur,{className:"text-slate-900 dark:text-slate-100",children:"Extracted Fields"})}),h.jsx(an,{className:"bg-white dark:bg-slate-900/40",children:o?h.jsxs("div",{className:"space-y-4 text-base text-slate-900 dark:text-slate-100",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Meta"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Patient:"})," ",h.jsx("span",{className:"font-medium",children:(($n=o==null?void 0:o.meta)==null?void 0:$n.patientName)||""})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Patient ID:"})," ",h.jsx("span",{className:"font-medium",children:((Jr=o==null?void 0:o.meta)==null?void 0:Jr.patientId)||""})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Date:"})," ",h.jsx("span",{className:"font-medium",children:((Zr=o==null?void 0:o.meta)==null?void 0:Zr.date)||""})]})]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Labs"}),(da=o==null?void 0:o.labs)!=null&&da.length?h.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded",children:h.jsxs("table",{className:"min-w-full text-left",children:[h.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-700 dark:text-slate-300",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Name"}),h.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Value"}),h.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Unit"}),h.jsx("th",{className:"px-3 py-2 border-b border-slate-200 dark:border-slate-700",children:"Confidence"})]})}),h.jsx("tbody",{children:o.labs.map(($,te)=>h.jsxs("tr",{className:te%2===0?"bg-white dark:bg-slate-900":"bg-slate-50 dark:bg-slate-800/60",children:[h.jsx("td",{className:"px-3 py-2 capitalize text-slate-900 dark:text-slate-100",children:$.name}),h.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:$.value??""}),h.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:$.unit||""}),h.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:typeof $.confidence=="number"?`${Math.round($.confidence*100)}%`:""})]},te))})]})}):h.jsx("div",{className:"text-slate-700 dark:text-slate-300",children:"No labs found"})]}),(Ki=o==null?void 0:o.diagnoses)!=null&&Ki.length||(ha=o==null?void 0:o.medications)!=null&&ha.length?h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Diagnoses"}),h.jsx("ul",{className:"list-disc pl-5",children:(o.diagnoses||[]).map(($,te)=>h.jsx("li",{children:$},te))})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",children:"Medications"}),h.jsx("ul",{className:"list-disc pl-5",children:(o.medications||[]).map(($,te)=>h.jsx("li",{children:$},te))})]})]}):null,h.jsx("div",{className:"flex items-center gap-3",children:h.jsx(Ae,{type:"button",variant:"primary",className:"bg-emerald-600 hover:bg-emerald-700",disabled:!o,onClick:()=>{try{const $=JSON.stringify(o,null,2);navigator.clipboard.writeText($),t("Extracted fields copied","success")}catch{t("Copy failed","error")}},children:"Copy extracted JSON"})})]}):h.jsx("div",{className:"text-base text-slate-700 dark:text-slate-300",children:"No structured fields extracted yet."})})]})]})]})}function D9(){return h.jsxs("footer",{className:"mt-10 relative overflow-hidden border-t border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-900/70 backdrop-blur",children:[h.jsx("div",{className:"pointer-events-none absolute -top-16 right-0 h-40 w-40 rounded-full bg-blue-500/10 blur-2xl"}),h.jsx("div",{className:"pointer-events-none absolute -bottom-16 left-0 h-40 w-40 rounded-full bg-emerald-500/10 blur-2xl"}),h.jsx("div",{className:"mx-auto max-w-7xl px-4 py-8",children:h.jsxs("div",{className:"flex flex-col items-center gap-3",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-200/70 dark:border-slate-700/60 bg-white/80 dark:bg-slate-900/80 px-3 py-1 text-xs font-medium text-slate-700 dark:text-slate-200 shadow-sm",children:[h.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-gradient-to-tr from-brand-600 to-blue-500"}),"Health Sphere"]}),h.jsxs("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:[" ",new Date().getFullYear()," Health Sphere  All rights reserved"]})]})})]})}function M9(){return h.jsxs("div",{className:"text-center py-16",children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Page not found"}),h.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"The page you are looking for doesnt exist."}),h.jsx(Fg,{className:"text-blue-600 hover:underline",to:"/",children:"Go back home"})]})}function bu({children:t}){const{user:e,loading:n}=Xr(),r=Gs();return n?h.jsx("div",{className:"flex items-center justify-center py-16",children:h.jsx(Po,{size:24})}):e?t:h.jsx(MR,{to:"/login",replace:!0,state:{from:r}})}function zm(t){return new Date(t).toLocaleString()}function O9({compact:t=!1}){const{user:e}=Xr(),{notify:n}=ua(),r=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:messages`,[e==null?void 0:e.uid]),s=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:useCheckins`,[e==null?void 0:e.uid]),i=D.useMemo(()=>`chat:${(e==null?void 0:e.uid)||"anon"}:useAllCheckins`,[e==null?void 0:e.uid]),[o,a]=D.useState([]),[l,c]=D.useState(""),[d,f]=D.useState(!1),[m,y]=D.useState(null),[x,k]=D.useState({}),E=D.useRef(null),v=D.useRef(null),_=D.useMemo(()=>["Summarize my last diagnosis","What red flags should I watch?","Explain this lab result in simple terms","What are next steps for follow-up?"],[]),[b,P]=D.useState(!0),[N,M]=D.useState(!1);D.useEffect(()=>{try{const I=localStorage.getItem(r);if(I){const re=JSON.parse(I);Array.isArray(re)?a(re):a([])}else a([]);const W=localStorage.getItem(s);P(W==="true"||W==="false"?W==="true":!0);const H=localStorage.getItem(i);M(H==="true"||H==="false"?H==="true":!1)}catch{a([])}k({})},[r,s,i]),D.useEffect(()=>{var I;(I=E.current)==null||I.scrollTo({top:E.current.scrollHeight});try{localStorage.setItem(r,JSON.stringify(o))}catch{}},[o,r]),D.useEffect(()=>{try{localStorage.setItem(s,String(b))}catch{}},[b,s]),D.useEffect(()=>{try{localStorage.setItem(i,String(N))}catch{}},[N,i]);const T=D.useMemo(()=>l.trim().length>0&&!d,[l,d]),w=D.useMemo(()=>{const I=[...o].reverse().find(W=>W.role==="assistant");return!!(I&&typeof I.content=="string"&&I.content.toLowerCase().includes("gemini api key missing"))},[o]);async function C(){var W,H;if(!T)return;const I=[...o,{role:"user",content:l,createdAt:Date.now()}];a(I),c(""),f(!0);try{const re={messages:I,options:{maxOutputTokens:512,useCheckins:b,checkinLimit:7,useAllCheckins:N,checkinMax:365,userId:(e==null?void 0:e.uid)||void 0}},de=new AbortController;y(de);const B=await k9(re,{signal:de.signal}),Q=((W=B==null?void 0:B.data)==null?void 0:W.error)||((H=B==null?void 0:B.data)==null?void 0:H.reply)||"...";a(q=>q.concat({role:"assistant",content:Q,createdAt:Date.now()}))}catch(re){const de=(re==null?void 0:re.message)||"Network error";n(de,"error")}finally{f(!1),y(null)}}function A(){a([])}function R(I){var W;try{(W=navigator.clipboard)==null||W.writeText(I)}catch{}}D.useEffect(()=>{const I=v.current;I&&(I.style.height="auto",I.style.height=Math.min(I.scrollHeight,120)+"px")},[l]);function O(I){if(typeof I!="string"||I.length===0)return null;const W=I.split(/\r?\n/);function H(Q,q){const fe=[];let se=Q,j=0;const ee=/\*\*([^*]+)\*\*/,oe=/(^|[^*])\*([^*]+)\*(?!\*)/;for(;se.length>0;){const be=ee.exec(se),Me=oe.exec(se);let $e=se.length,Bt=null,Ye=null;if(be&&(!Me||be.index<=Me.index)?($e=be.index,Bt="bold",Ye=be):Me&&($e=Me.index+(Me[1]?Me[1].length:0),Bt="italic",Ye=Me),!Bt){fe.push(h.jsx("span",{children:se},`${q}-t-${j++}`));break}if($e>0&&fe.push(h.jsx("span",{children:se.slice(0,$e)},`${q}-t-${j++}`)),Bt==="bold")fe.push(h.jsx("strong",{children:Ye[1]},`${q}-b-${j++}`)),se=se.slice(Ye.index+Ye[0].length);else if(Bt==="italic"){const zt=Ye[1]||"";zt&&fe.push(h.jsx("span",{children:zt},`${q}-l-${j++}`)),fe.push(h.jsx("em",{children:Ye[2]},`${q}-i-${j++}`));const Jt=Ye.index+zt.length+Ye[0].length-(zt?0:1);se=se.slice(Jt)}}return fe}const re=[];let de=[];const B=()=>{de.length>0&&(re.push(h.jsx("ul",{className:"list-disc pl-5 my-2 space-y-1",children:de.map((Q,q)=>h.jsx("li",{children:H(Q.replace(/^\s*[*-]\s+/,""),`li-${q}`)},`li-${q}`))},`ul-${re.length}`)),de=[])};for(let Q=0;Q<W.length;Q++){const q=W[Q];if(/^\s*[*-]\s+/.test(q)){de.push(q);continue}B(),q.trim()===""?re.push(h.jsx("div",{className:"h-2"},`br-${Q}`)):re.push(h.jsx("p",{children:H(q,`p-${Q}`)},`p-${Q}`))}return B(),h.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:re})}return h.jsxs("div",{className:`${t?"flex h-full flex-col gap-0":"flex flex-col gap-3"}`,children:[w&&h.jsxs("div",{className:"rounded-md border border-amber-300 bg-amber-50 text-amber-900 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200 px-3 py-2 text-xs",children:["Gemini API key is not configured on the backend. Set ",h.jsx("code",{children:"GEMINI_API_KEY"})," and restart the server."]}),!t&&h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),"Gemini  Online"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[d?h.jsx(Ae,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>m==null?void 0:m.abort(),children:"Stop"}):null,h.jsx(Ae,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:A,disabled:o.length===0&&!d,children:"Clear"})]})]}),h.jsxs("div",{ref:E,className:`${t?"flex-1 min-h-0 overflow-auto p-3":"max-h-[70vh] min-h-[55vh] overflow-auto p-4"} rounded-lg border border-slate-200 dark:border-slate-800 bg-white/70 dark:bg-slate-950/70 backdrop-blur`,children:[o.length===0&&h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-slate-500 mb-3",children:"Start the conversation by asking a question, or try one of these:"}),h.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:_.map((I,W)=>h.jsx("button",{onClick:()=>c(I),className:"px-3 py-1.5 rounded-full text-xs bg-slate-100 hover:bg-slate-200 text-slate-700 dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-slate-100 border border-slate-200 dark:border-slate-700",children:I},W))})]}),o.map((I,W)=>h.jsx("div",{className:`mb-3 flex ${I.role==="user"?"justify-end":"justify-start"}`,children:h.jsxs("div",{className:`flex items-end gap-2 ${I.role==="user"?"flex-row-reverse":"flex-row"}`,children:[h.jsx("div",{className:`hidden lg:flex h-8 w-8 shrink-0 rounded-full items-center justify-center text-xs font-semibold ${I.role==="user"?"bg-brand-600 text-white":"bg-slate-200 text-slate-700 dark:bg-slate-800 dark:text-slate-100"}`,children:I.role==="user"?"You":"AI"}),h.jsxs("div",{children:[(()=>{const H=`${I.createdAt||W}-${W}`;I.role==="assistant"&&typeof I.content=="string"&&I.content.length>500;const re=!!x[H];return h.jsxs("div",{className:`group relative max-w-[95%] sm:max-w-[92%] md:max-w-[90%] lg:max-w-[85%] rounded-2xl px-3 py-2 text-sm shadow-subtle break-words whitespace-pre-wrap leading-normal ${I.role==="user"?"bg-brand-600 text-white rounded-br-md":"bg-slate-100/90 dark:bg-slate-900/80 text-slate-900 dark:text-slate-100 rounded-bl-md"}`,children:[h.jsx("div",{className:"max-h-60 overflow-y-auto pr-1",children:I.role==="assistant"?h.jsx("div",{className:`chat-content select-text ${re?"":"line-clamp-10"}`,children:O(I.content)}):h.jsx("div",{className:"break-words whitespace-pre-wrap",children:I.content})}),h.jsx("button",{onClick:()=>R(I.content),title:"Copy",className:`absolute -top-2 ${I.role==="user"?"-left-2":"-right-2"} hidden group-hover:inline-flex items-center justify-center h-6 w-6 rounded-full bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-700 dark:text-slate-100 dark:hover:bg-slate-600`,children:""})]})})(),h.jsxs("div",{className:`mt-1 flex items-center gap-2 ${I.role==="user"?"justify-end":"justify-start"}`,children:[h.jsx("div",{className:`text-[10px] ${I.role==="user"?"text-slate-300":"text-slate-500 dark:text-slate-400"}`,children:I.createdAt?zm(I.createdAt):""}),I.role==="assistant"&&typeof I.content=="string"&&I.content.length>500&&(()=>{const H=`${I.createdAt||W}-${W}`,re=!!x[H];return h.jsx("button",{className:"text-[10px] px-1.5 py-0.5 rounded border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>k(de=>({...de,[H]:!de[H]})),children:re?"Collapse":"Expand"})})()]})]})]})},W)),d&&h.jsxs("div",{className:"inline-flex items-center gap-2 text-slate-500 text-sm",children:[h.jsxs("span",{className:"relative flex h-2 w-2",children:[h.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-400 opacity-75"}),h.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-brand-600"})]}),"Thinking"]})]}),h.jsxs("div",{className:`${t?"sticky bottom-0 z-10 border-t border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur pt-3":""}`,children:[h.jsxs("div",{className:"flex gap-2 items-end",children:[h.jsx(qS,{ref:v,value:l,onChange:I=>c(I.target.value.slice(0,1e3)),onKeyDown:I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),C())},placeholder:"Type your message",rows:t?2:3}),h.jsxs("div",{className:"flex flex-col items-end gap-1",children:[h.jsx(Ae,{onClick:C,disabled:!T,children:"Send"}),h.jsxs("div",{className:"text-[10px] text-slate-500",children:[l.length,"/1000"]})]})]}),h.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-600 dark:text-slate-300",children:[h.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 dark:border-slate-700",checked:b,onChange:I=>P(I.target.checked)}),"Use my daily check-ins for answers"]}),h.jsxs("label",{className:"inline-flex items-center gap-2 text-[12px] text-slate-600 dark:text-slate-300",children:[h.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-slate-300 dark:border-slate-700",checked:N,onChange:I=>M(I.target.checked),disabled:!b}),"Include all check-ins (compact)"]})]}),t?h.jsxs("div",{className:"flex items-center gap-2",children:[d?h.jsx(Ae,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:()=>m==null?void 0:m.abort(),children:"Stop"}):null,h.jsx(Ae,{variant:"secondary",className:"px-2 py-1 text-xs",onClick:A,disabled:o.length===0&&!d,children:"Clear"})]}):null]})]})]})}function L9(){const[t,e]=D.useState(!1),[n,r]=D.useState(!1);D.useEffect(()=>{try{const o=localStorage.getItem("chat:widgetOpen");o!=null&&e(o==="true");const a=localStorage.getItem("chat:messages");if(a){const l=JSON.parse(a);r(Array.isArray(l)&&l.length>0)}}catch{}},[]),D.useEffect(()=>{try{localStorage.setItem("chat:widgetOpen",String(t))}catch{}},[t]);const s=D.useCallback(()=>e(o=>!o),[]),i=D.useCallback(()=>e(!1),[]);return D.useEffect(()=>{const o=a=>{a.key==="Escape"&&i(),(a.altKey||a.metaKey)&&a.key==="/"&&s()};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[s,i]),h.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[!t&&h.jsx(Ae,{onClick:s,className:`h-14 w-14 rounded-full shadow-lg p-0 ring-2 ring-brand-600 bg-brand-600 text-white hover:bg-brand-700 focus:outline-none focus:ring-4 focus:ring-brand-300 transition ${n?"":"animate-pulse"}`,"aria-label":"Open chat",title:"Open chat (Alt+/)",children:h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"h-7 w-7 m-auto",children:[h.jsx("path",{d:"M7.5 8.25h9a.75.75 0 0 1 0 1.5h-9a.75.75 0 0 1 0-1.5Zm0 4.5h5.25a.75.75 0 0 1 0 1.5H7.5a.75.75 0 0 1 0-1.5Z"}),h.jsx("path",{fillRule:"evenodd",d:"M4.5 3.75A2.25 2.25 0 0 0 2.25 6v8.25A2.25 2.25 0 0 0 4.5 16.5H6v3.19a.75.75 0 0 0 1.28.53l3.72-3.72h6.5A2.25 2.25 0 0 0 20.25 14.25V6A2.25 2.25 0 0 0 18 3.75h-13.5Z",clipRule:"evenodd"})]})}),t&&h.jsxs("div",{className:"relative w-[500px] max-w-[96vw] h-[60vh] sm:h-[65vh] md:h-[72vh] lg:h-[75vh] rounded-xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-200 dark:border-slate-800 bg-white/95 dark:bg-slate-900/95 backdrop-blur",children:[h.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-200",children:[h.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500 animate-pulse"}),h.jsx("span",{className:"font-medium",children:"Assistive Chat"})]}),h.jsx("button",{onClick:i,"aria-label":"Close chat",className:"h-7 w-7 rounded-full bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-100 flex items-center justify-center text-xs",title:"Close",children:""})]}),h.jsx("div",{className:"h-full flex flex-col",children:h.jsx("div",{className:"flex-1 p-4 overflow-auto",children:h.jsx(O9,{compact:!0})})})]})]})}function j9(){const{user:t}=Xr(),[e,n]=D.useState(""),[r,s]=D.useState(""),[i,o]=D.useState(!1),[a,l]=D.useState(""),[c,d]=D.useState(null),[f,m]=D.useState(!1),[y,x]=D.useState(""),[k,E]=D.useState(""),[v,_]=D.useState(null);function b(N){try{if(!N)return null;if(typeof N.toDate=="function")return N.toDate();if(typeof N.seconds=="number")return new Date(N.seconds*1e3);const M=new Date(N);return Number.isNaN(M.getTime())?null:M}catch{return null}}D.useEffect(()=>{let N=!0;async function M(){if(!(!t||!kt))try{const T=Ld(kt,"users",t.uid),w=await SI(T),C=w.exists()?w.data():{};if(!N)return;n(t.displayName||C.displayName||""),s(t.photoURL||C.photoURL||""),_({uid:t.uid,email:t.email||C.email||null,phoneNumber:t.phoneNumber||C.phoneNumber||null,providerIds:(t.providerData||[]).map(A=>A.providerId),role:C.role||"user",createdAt:b(C.createdAt)||null,updatedAt:b(C.updatedAt)||null})}catch{}}return M(),()=>{N=!1}},[t]);async function P(N){if(N.preventDefault(),!!t){o(!0),l("");try{let M=r||null;if(c&&Vd){m(!0);try{const w=c.name&&c.name.includes(".")?c.name.split(".").pop():"jpg",C=`avatars/${t.uid}/${Date.now()}.${w}`,A=BF(Vd,C);await FF(A,c,{contentType:c.type||"image/jpeg"}),M=await UF(A)}catch(w){throw console.error("[Profile] Upload failed:",w),w}finally{m(!1)}}await wT(xt.currentUser,{displayName:e||null,photoURL:M});const T=Ld(kt,"users",t.uid);await Cm(T,{displayName:e||null,photoURL:M,updatedAt:Zl()},{merge:!0}),l("Profile updated")}catch(M){l((M==null?void 0:M.message)||"Failed to update"),console.error("[Profile] Save failed:",M)}finally{o(!1)}}}return h.jsx("div",{className:"grid place-items-center",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsx("h1",{className:"text-2xl font-semibold mb-4 text-slate-900 dark:text-slate-100",children:"Your profile"}),h.jsx(on,{children:h.jsx(an,{children:h.jsxs("form",{className:"space-y-4",onSubmit:P,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[r?h.jsx("img",{src:r,alt:"avatar",className:"w-12 h-12 rounded-full border border-slate-200 dark:border-slate-700"}):h.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-600 text-white grid place-items-center text-lg",children:(e||(t==null?void 0:t.email)||"?").slice(0,1).toUpperCase()}),h.jsx("div",{className:"text-sm text-slate-500",children:"Update your display info"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Display name"}),h.jsx(Yn,{type:"text",value:e,onChange:N=>n(N.target.value),disabled:i})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Upload photo"}),h.jsx("input",{type:"file",accept:"image/*",onChange:N=>{x("");const M=N.target.files&&N.target.files[0]?N.target.files[0]:null;if(!M){d(null),E("");return}const T=["image/jpeg","image/png","image/webp"],w=5*1024*1024;if(!T.includes(M.type)){x("Only JPG, PNG or WebP images are allowed."),d(null),E("");return}if(M.size>w){x("File too large. Max size is 5MB."),d(null),E("");return}d(M);const C=new FileReader;C.onload=()=>E(String(C.result||"")),C.readAsDataURL(M)},disabled:i,className:"block w-full text-sm text-slate-700 dark:text-slate-200"}),h.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"JPEG/PNG up to ~5MB."}),k?h.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[h.jsx("img",{src:k,alt:"preview",className:"w-16 h-16 rounded-full border border-slate-200 dark:border-slate-700 object-cover"}),h.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded border border-slate-300 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>{d(null),E(""),x("")},children:"Remove"})]}):null,y?h.jsx("p",{className:"text-sm text-red-600 mt-1",children:y}):null]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm mb-1 text-slate-700 dark:text-slate-300",children:"Or photo URL"}),h.jsx(Yn,{type:"url",value:r,onChange:N=>s(N.target.value),disabled:i})]}),f?h.jsx("p",{className:"text-sm text-slate-500",children:"Uploading photo"}):null,a?h.jsx("p",{className:`text-sm ${a==="Profile updated"?"text-green-600":"text-red-600"}`,children:a}):null,h.jsx(Ae,{type:"submit",className:"w-full",disabled:i||f,children:i?"Saving":"Save changes"})]})})}),v?h.jsx(on,{className:"mt-4",children:h.jsx(an,{children:h.jsxs("div",{className:"space-y-2 text-sm text-slate-700 dark:text-slate-300",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Email"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.email||""})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"User ID"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.uid})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Phone"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.phoneNumber||""})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Providers"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:(v.providerIds||[]).length?v.providerIds.join(", "):""})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Role"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.role})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Created"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.createdAt?zm(v.createdAt):""})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"font-medium",children:"Updated"}),h.jsx("span",{className:"truncate max-w-[60%] text-right",children:v.updatedAt?zm(v.updatedAt):""})]})]})})}):null]})})}function V9(){return h.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white dark:from-slate-950 dark:to-slate-900",children:[h.jsx(XF,{}),h.jsx("main",{className:"mx-auto max-w-7xl px-4 py-6",children:h.jsxs(LR,{children:[h.jsx(os,{path:"/",element:h.jsx(bu,{children:h.jsx(C9,{})})}),h.jsx(os,{path:"/daily-checkin",element:h.jsx(bu,{children:h.jsx(R9,{})})}),h.jsx(os,{path:"/upload-report",element:h.jsx(bu,{children:h.jsx(N9,{})})}),h.jsx(os,{path:"/profile",element:h.jsx(bu,{children:h.jsx(j9,{})})}),h.jsx(os,{path:"/login",element:h.jsx(A9,{})}),h.jsx(os,{path:"/signup",element:h.jsx(P9,{})}),h.jsx(os,{path:"*",element:h.jsx(M9,{})})]})}),h.jsx(D9,{}),h.jsx(L9,{})]})}xE(document.getElementById("root")).render(h.jsx(YR,{children:h.jsx(T9,{children:h.jsx(YF,{children:h.jsx(HR,{children:h.jsx(V9,{})})})})}));
